{
  "version": 3,
  "sources": ["../../../assets/vendor/topbar.js", "../../../assets/node_modules/fast-diff/diff.js", "../../../assets/node_modules/lodash.clonedeep/index.js", "../../../assets/node_modules/lodash.isequal/index.js", "../../../assets/node_modules/quill-delta/src/AttributeMap.ts", "../../../assets/node_modules/quill-delta/src/Op.ts", "../../../assets/node_modules/quill-delta/src/OpIterator.ts", "../../../assets/node_modules/quill-delta/src/Delta.ts", "../../../assets/node_modules/eventemitter3/index.js", "../../../assets/node_modules/showdown/src/options.js", "../../../assets/node_modules/showdown/src/showdown.js", "../../../assets/node_modules/showdown/src/helpers.js", "../../../assets/node_modules/showdown/src/converter.js", "../../../assets/node_modules/showdown/src/subParsers/anchors.js", "../../../assets/node_modules/showdown/src/subParsers/autoLinks.js", "../../../assets/node_modules/showdown/src/subParsers/blockGamut.js", "../../../assets/node_modules/showdown/src/subParsers/blockQuotes.js", "../../../assets/node_modules/showdown/src/subParsers/codeBlocks.js", "../../../assets/node_modules/showdown/src/subParsers/codeSpans.js", "../../../assets/node_modules/showdown/src/subParsers/completeHTMLDocument.js", "../../../assets/node_modules/showdown/src/subParsers/detab.js", "../../../assets/node_modules/showdown/src/subParsers/ellipsis.js", "../../../assets/node_modules/showdown/src/subParsers/emoji.js", "../../../assets/node_modules/showdown/src/subParsers/encodeAmpsAndAngles.js", "../../../assets/node_modules/showdown/src/subParsers/encodeBackslashEscapes.js", "../../../assets/node_modules/showdown/src/subParsers/encodeCode.js", "../../../assets/node_modules/showdown/src/subParsers/escapeSpecialCharsWithinTagAttributes.js", "../../../assets/node_modules/showdown/src/subParsers/githubCodeBlocks.js", "../../../assets/node_modules/showdown/src/subParsers/hashBlock.js", "../../../assets/node_modules/showdown/src/subParsers/hashCodeTags.js", "../../../assets/node_modules/showdown/src/subParsers/hashElement.js", "../../../assets/node_modules/showdown/src/subParsers/hashHTMLBlocks.js", "../../../assets/node_modules/showdown/src/subParsers/hashHTMLSpans.js", "../../../assets/node_modules/showdown/src/subParsers/hashPreCodeTags.js", "../../../assets/node_modules/showdown/src/subParsers/headers.js", "../../../assets/node_modules/showdown/src/subParsers/horizontalRule.js", "../../../assets/node_modules/showdown/src/subParsers/images.js", "../../../assets/node_modules/showdown/src/subParsers/italicsAndBold.js", "../../../assets/node_modules/showdown/src/subParsers/lists.js", "../../../assets/node_modules/showdown/src/subParsers/metadata.js", "../../../assets/node_modules/showdown/src/subParsers/outdent.js", "../../../assets/node_modules/showdown/src/subParsers/paragraphs.js", "../../../assets/node_modules/showdown/src/subParsers/runExtension.js", "../../../assets/node_modules/showdown/src/subParsers/spanGamut.js", "../../../assets/node_modules/showdown/src/subParsers/strikethrough.js", "../../../assets/node_modules/showdown/src/subParsers/stripLinkDefinitions.js", "../../../assets/node_modules/showdown/src/subParsers/tables.js", "../../../assets/node_modules/showdown/src/subParsers/underline.js", "../../../assets/node_modules/showdown/src/subParsers/unescapeSpecialChars.js", "../../../assets/node_modules/showdown/src/subParsers/makeMarkdown/blockquote.js", "../../../assets/node_modules/showdown/src/subParsers/makeMarkdown/codeBlock.js", "../../../assets/node_modules/showdown/src/subParsers/makeMarkdown/codeSpan.js", "../../../assets/node_modules/showdown/src/subParsers/makeMarkdown/emphasis.js", "../../../assets/node_modules/showdown/src/subParsers/makeMarkdown/header.js", "../../../assets/node_modules/showdown/src/subParsers/makeMarkdown/hr.js", "../../../assets/node_modules/showdown/src/subParsers/makeMarkdown/image.js", "../../../assets/node_modules/showdown/src/subParsers/makeMarkdown/links.js", "../../../assets/node_modules/showdown/src/subParsers/makeMarkdown/list.js", "../../../assets/node_modules/showdown/src/subParsers/makeMarkdown/listItem.js", "../../../assets/node_modules/showdown/src/subParsers/makeMarkdown/node.js", "../../../assets/node_modules/showdown/src/subParsers/makeMarkdown/paragraph.js", "../../../assets/node_modules/showdown/src/subParsers/makeMarkdown/pre.js", "../../../assets/node_modules/showdown/src/subParsers/makeMarkdown/strikethrough.js", "../../../assets/node_modules/showdown/src/subParsers/makeMarkdown/strong.js", "../../../assets/node_modules/showdown/src/subParsers/makeMarkdown/table.js", "../../../assets/node_modules/showdown/src/subParsers/makeMarkdown/tableCell.js", "../../../assets/node_modules/showdown/src/subParsers/makeMarkdown/txt.js", "../../../assets/node_modules/showdown/src/loader.js", "../../../deps/phoenix_html/priv/static/phoenix_html.js", "../../../deps/phoenix/assets/js/phoenix/utils.js", "../../../deps/phoenix/assets/js/phoenix/constants.js", "../../../deps/phoenix/assets/js/phoenix/push.js", "../../../deps/phoenix/assets/js/phoenix/timer.js", "../../../deps/phoenix/assets/js/phoenix/channel.js", "../../../deps/phoenix/assets/js/phoenix/ajax.js", "../../../deps/phoenix/assets/js/phoenix/longpoll.js", "../../../deps/phoenix/assets/js/phoenix/presence.js", "../../../deps/phoenix/assets/js/phoenix/serializer.js", "../../../deps/phoenix/assets/js/phoenix/socket.js", "../../../deps/phoenix_live_view/assets/js/phoenix_live_view/constants.js", "../../../deps/phoenix_live_view/assets/js/phoenix_live_view/entry_uploader.js", "../../../deps/phoenix_live_view/assets/js/phoenix_live_view/utils.js", "../../../deps/phoenix_live_view/assets/js/phoenix_live_view/browser.js", "../../../deps/phoenix_live_view/assets/js/phoenix_live_view/dom.js", "../../../deps/phoenix_live_view/assets/js/phoenix_live_view/upload_entry.js", "../../../deps/phoenix_live_view/assets/js/phoenix_live_view/live_uploader.js", "../../../deps/phoenix_live_view/assets/js/phoenix_live_view/aria.js", "../../../deps/phoenix_live_view/assets/js/phoenix_live_view/hooks.js", "../../../deps/phoenix_live_view/assets/js/phoenix_live_view/element_ref.js", "../../../deps/phoenix_live_view/assets/js/phoenix_live_view/dom_post_morph_restorer.js", "../../../deps/phoenix_live_view/assets/node_modules/morphdom/dist/morphdom-esm.js", "../../../deps/phoenix_live_view/assets/js/phoenix_live_view/dom_patch.js", "../../../deps/phoenix_live_view/assets/js/phoenix_live_view/rendered.js", "../../../deps/phoenix_live_view/assets/js/phoenix_live_view/js.js", "../../../deps/phoenix_live_view/assets/js/phoenix_live_view/view_hook.js", "../../../deps/phoenix_live_view/assets/js/phoenix_live_view/view.js", "../../../deps/phoenix_live_view/assets/js/phoenix_live_view/live_socket.js", "../../../deps/phoenix_live_view/assets/js/phoenix_live_view/index.js", "../../../assets/js/app.js", "../../../assets/node_modules/sortablejs/modular/sortable.esm.js", "../../../assets/js/hooks/sortable.js", "../../../assets/node_modules/lodash-es/_freeGlobal.js", "../../../assets/node_modules/lodash-es/_root.js", "../../../assets/node_modules/lodash-es/_Symbol.js", "../../../assets/node_modules/lodash-es/_getRawTag.js", "../../../assets/node_modules/lodash-es/_objectToString.js", "../../../assets/node_modules/lodash-es/_baseGetTag.js", "../../../assets/node_modules/lodash-es/isObjectLike.js", "../../../assets/node_modules/lodash-es/isArray.js", "../../../assets/node_modules/lodash-es/isObject.js", "../../../assets/node_modules/lodash-es/identity.js", "../../../assets/node_modules/lodash-es/isFunction.js", "../../../assets/node_modules/lodash-es/_coreJsData.js", "../../../assets/node_modules/lodash-es/_isMasked.js", "../../../assets/node_modules/lodash-es/_toSource.js", "../../../assets/node_modules/lodash-es/_baseIsNative.js", "../../../assets/node_modules/lodash-es/_getValue.js", "../../../assets/node_modules/lodash-es/_getNative.js", "../../../assets/node_modules/lodash-es/_WeakMap.js", "../../../assets/node_modules/lodash-es/_baseCreate.js", "../../../assets/node_modules/lodash-es/_apply.js", "../../../assets/node_modules/lodash-es/_copyArray.js", "../../../assets/node_modules/lodash-es/_shortOut.js", "../../../assets/node_modules/lodash-es/constant.js", "../../../assets/node_modules/lodash-es/_defineProperty.js", "../../../assets/node_modules/lodash-es/_baseSetToString.js", "../../../assets/node_modules/lodash-es/_setToString.js", "../../../assets/node_modules/lodash-es/_arrayEach.js", "../../../assets/node_modules/lodash-es/_isIndex.js", "../../../assets/node_modules/lodash-es/_baseAssignValue.js", "../../../assets/node_modules/lodash-es/eq.js", "../../../assets/node_modules/lodash-es/_assignValue.js", "../../../assets/node_modules/lodash-es/_copyObject.js", "../../../assets/node_modules/lodash-es/_overRest.js", "../../../assets/node_modules/lodash-es/_baseRest.js", "../../../assets/node_modules/lodash-es/isLength.js", "../../../assets/node_modules/lodash-es/isArrayLike.js", "../../../assets/node_modules/lodash-es/_isIterateeCall.js", "../../../assets/node_modules/lodash-es/_createAssigner.js", "../../../assets/node_modules/lodash-es/_isPrototype.js", "../../../assets/node_modules/lodash-es/_baseTimes.js", "../../../assets/node_modules/lodash-es/_baseIsArguments.js", "../../../assets/node_modules/lodash-es/isArguments.js", "../../../assets/node_modules/lodash-es/stubFalse.js", "../../../assets/node_modules/lodash-es/isBuffer.js", "../../../assets/node_modules/lodash-es/_baseIsTypedArray.js", "../../../assets/node_modules/lodash-es/_baseUnary.js", "../../../assets/node_modules/lodash-es/_nodeUtil.js", "../../../assets/node_modules/lodash-es/isTypedArray.js", "../../../assets/node_modules/lodash-es/_arrayLikeKeys.js", "../../../assets/node_modules/lodash-es/_overArg.js", "../../../assets/node_modules/lodash-es/_nativeKeys.js", "../../../assets/node_modules/lodash-es/_baseKeys.js", "../../../assets/node_modules/lodash-es/keys.js", "../../../assets/node_modules/lodash-es/_nativeKeysIn.js", "../../../assets/node_modules/lodash-es/_baseKeysIn.js", "../../../assets/node_modules/lodash-es/keysIn.js", "../../../assets/node_modules/lodash-es/_nativeCreate.js", "../../../assets/node_modules/lodash-es/_hashClear.js", "../../../assets/node_modules/lodash-es/_hashDelete.js", "../../../assets/node_modules/lodash-es/_hashGet.js", "../../../assets/node_modules/lodash-es/_hashHas.js", "../../../assets/node_modules/lodash-es/_hashSet.js", "../../../assets/node_modules/lodash-es/_Hash.js", "../../../assets/node_modules/lodash-es/_listCacheClear.js", "../../../assets/node_modules/lodash-es/_assocIndexOf.js", "../../../assets/node_modules/lodash-es/_listCacheDelete.js", "../../../assets/node_modules/lodash-es/_listCacheGet.js", "../../../assets/node_modules/lodash-es/_listCacheHas.js", "../../../assets/node_modules/lodash-es/_listCacheSet.js", "../../../assets/node_modules/lodash-es/_ListCache.js", "../../../assets/node_modules/lodash-es/_Map.js", "../../../assets/node_modules/lodash-es/_mapCacheClear.js", "../../../assets/node_modules/lodash-es/_isKeyable.js", "../../../assets/node_modules/lodash-es/_getMapData.js", "../../../assets/node_modules/lodash-es/_mapCacheDelete.js", "../../../assets/node_modules/lodash-es/_mapCacheGet.js", "../../../assets/node_modules/lodash-es/_mapCacheHas.js", "../../../assets/node_modules/lodash-es/_mapCacheSet.js", "../../../assets/node_modules/lodash-es/_MapCache.js", "../../../assets/node_modules/lodash-es/_arrayPush.js", "../../../assets/node_modules/lodash-es/_getPrototype.js", "../../../assets/node_modules/lodash-es/isPlainObject.js", "../../../assets/node_modules/lodash-es/_stackClear.js", "../../../assets/node_modules/lodash-es/_stackDelete.js", "../../../assets/node_modules/lodash-es/_stackGet.js", "../../../assets/node_modules/lodash-es/_stackHas.js", "../../../assets/node_modules/lodash-es/_stackSet.js", "../../../assets/node_modules/lodash-es/_Stack.js", "../../../assets/node_modules/lodash-es/_baseAssign.js", "../../../assets/node_modules/lodash-es/_baseAssignIn.js", "../../../assets/node_modules/lodash-es/_cloneBuffer.js", "../../../assets/node_modules/lodash-es/_arrayFilter.js", "../../../assets/node_modules/lodash-es/stubArray.js", "../../../assets/node_modules/lodash-es/_getSymbols.js", "../../../assets/node_modules/lodash-es/_copySymbols.js", "../../../assets/node_modules/lodash-es/_getSymbolsIn.js", "../../../assets/node_modules/lodash-es/_copySymbolsIn.js", "../../../assets/node_modules/lodash-es/_baseGetAllKeys.js", "../../../assets/node_modules/lodash-es/_getAllKeys.js", "../../../assets/node_modules/lodash-es/_getAllKeysIn.js", "../../../assets/node_modules/lodash-es/_DataView.js", "../../../assets/node_modules/lodash-es/_Promise.js", "../../../assets/node_modules/lodash-es/_Set.js", "../../../assets/node_modules/lodash-es/_getTag.js", "../../../assets/node_modules/lodash-es/_initCloneArray.js", "../../../assets/node_modules/lodash-es/_Uint8Array.js", "../../../assets/node_modules/lodash-es/_cloneArrayBuffer.js", "../../../assets/node_modules/lodash-es/_cloneDataView.js", "../../../assets/node_modules/lodash-es/_cloneRegExp.js", "../../../assets/node_modules/lodash-es/_cloneSymbol.js", "../../../assets/node_modules/lodash-es/_cloneTypedArray.js", "../../../assets/node_modules/lodash-es/_initCloneByTag.js", "../../../assets/node_modules/lodash-es/_initCloneObject.js", "../../../assets/node_modules/lodash-es/_baseIsMap.js", "../../../assets/node_modules/lodash-es/isMap.js", "../../../assets/node_modules/lodash-es/_baseIsSet.js", "../../../assets/node_modules/lodash-es/isSet.js", "../../../assets/node_modules/lodash-es/_baseClone.js", "../../../assets/node_modules/lodash-es/cloneDeep.js", "../../../assets/node_modules/lodash-es/_setCacheAdd.js", "../../../assets/node_modules/lodash-es/_setCacheHas.js", "../../../assets/node_modules/lodash-es/_SetCache.js", "../../../assets/node_modules/lodash-es/_arraySome.js", "../../../assets/node_modules/lodash-es/_cacheHas.js", "../../../assets/node_modules/lodash-es/_equalArrays.js", "../../../assets/node_modules/lodash-es/_mapToArray.js", "../../../assets/node_modules/lodash-es/_setToArray.js", "../../../assets/node_modules/lodash-es/_equalByTag.js", "../../../assets/node_modules/lodash-es/_equalObjects.js", "../../../assets/node_modules/lodash-es/_baseIsEqualDeep.js", "../../../assets/node_modules/lodash-es/_baseIsEqual.js", "../../../assets/node_modules/lodash-es/_createBaseFor.js", "../../../assets/node_modules/lodash-es/_baseFor.js", "../../../assets/node_modules/lodash-es/_assignMergeValue.js", "../../../assets/node_modules/lodash-es/isArrayLikeObject.js", "../../../assets/node_modules/lodash-es/_safeGet.js", "../../../assets/node_modules/lodash-es/toPlainObject.js", "../../../assets/node_modules/lodash-es/_baseMergeDeep.js", "../../../assets/node_modules/lodash-es/_baseMerge.js", "../../../assets/node_modules/lodash-es/isEqual.js", "../../../assets/node_modules/lodash-es/merge.js", "../../../assets/node_modules/parchment/src/scope.ts", "../../../assets/node_modules/parchment/src/attributor/attributor.ts", "../../../assets/node_modules/parchment/src/error.ts", "../../../assets/node_modules/parchment/src/registry.ts", "../../../assets/node_modules/parchment/src/attributor/class.ts", "../../../assets/node_modules/parchment/src/attributor/style.ts", "../../../assets/node_modules/parchment/src/attributor/store.ts", "../../../assets/node_modules/parchment/src/blot/abstract/shadow.ts", "../../../assets/node_modules/parchment/src/blot/abstract/leaf.ts", "../../../assets/node_modules/parchment/src/collection/linked-list.ts", "../../../assets/node_modules/parchment/src/blot/abstract/parent.ts", "../../../assets/node_modules/parchment/src/blot/inline.ts", "../../../assets/node_modules/parchment/src/blot/block.ts", "../../../assets/node_modules/parchment/src/blot/abstract/container.ts", "../../../assets/node_modules/parchment/src/blot/embed.ts", "../../../assets/node_modules/parchment/src/blot/scroll.ts", "../../../assets/node_modules/parchment/src/blot/text.ts", "../../../assets/node_modules/src/core/quill.ts", "../../../assets/node_modules/src/core/editor.ts", "../../../assets/node_modules/src/blots/block.ts", "../../../assets/node_modules/src/blots/break.ts", "../../../assets/node_modules/src/blots/text.ts", "../../../assets/node_modules/src/blots/inline.ts", "../../../assets/node_modules/src/blots/cursor.ts", "../../../assets/node_modules/eventemitter3/index.mjs", "../../../assets/node_modules/src/core/instances.ts", "../../../assets/node_modules/src/core/logger.ts", "../../../assets/node_modules/src/core/emitter.ts", "../../../assets/node_modules/src/core/selection.ts", "../../../assets/node_modules/src/core/module.ts", "../../../assets/node_modules/src/blots/embed.ts", "../../../assets/node_modules/src/core/composition.ts", "../../../assets/node_modules/src/core/theme.ts", "../../../assets/node_modules/src/core/utils/scrollRectIntoView.ts", "../../../assets/node_modules/src/core/utils/createRegistryWithFormats.ts", "../../../assets/node_modules/src/blots/container.ts", "../../../assets/node_modules/src/blots/scroll.ts", "../../../assets/node_modules/src/modules/clipboard.ts", "../../../assets/node_modules/src/formats/align.ts", "../../../assets/node_modules/src/formats/color.ts", "../../../assets/node_modules/src/formats/background.ts", "../../../assets/node_modules/src/formats/code.ts", "../../../assets/node_modules/src/formats/direction.ts", "../../../assets/node_modules/src/formats/font.ts", "../../../assets/node_modules/src/formats/size.ts", "../../../assets/node_modules/src/modules/keyboard.ts", "../../../assets/node_modules/src/modules/normalizeExternalHTML/normalizers/googleDocs.ts", "../../../assets/node_modules/src/modules/normalizeExternalHTML/normalizers/msWord.ts", "../../../assets/node_modules/src/modules/normalizeExternalHTML/index.ts", "../../../assets/node_modules/src/modules/history.ts", "../../../assets/node_modules/src/modules/uploader.ts", "../../../assets/node_modules/src/core.ts", "../../../assets/node_modules/src/modules/input.ts", "../../../assets/node_modules/src/modules/uiNode.ts", "../../../assets/node_modules/src/formats/indent.ts", "../../../assets/node_modules/src/formats/blockquote.ts", "../../../assets/node_modules/src/formats/header.ts", "../../../assets/node_modules/src/formats/list.ts", "../../../assets/node_modules/src/formats/bold.ts", "../../../assets/node_modules/src/formats/italic.ts", "../../../assets/node_modules/src/formats/link.ts", "../../../assets/node_modules/src/formats/script.ts", "../../../assets/node_modules/src/formats/strike.ts", "../../../assets/node_modules/src/formats/underline.ts", "../../../assets/node_modules/src/formats/formula.ts", "../../../assets/node_modules/src/formats/image.ts", "../../../assets/node_modules/src/formats/video.ts", "../../../assets/node_modules/src/modules/syntax.ts", "../../../assets/node_modules/src/modules/table.ts", "../../../assets/node_modules/src/formats/table.ts", "../../../assets/node_modules/src/modules/toolbar.ts", "../../../assets/node_modules/src/ui/icons.ts", "../../../assets/node_modules/src/ui/picker.ts", "../../../assets/node_modules/src/ui/color-picker.ts", "../../../assets/node_modules/src/ui/icon-picker.ts", "../../../assets/node_modules/src/ui/tooltip.ts", "../../../assets/node_modules/src/themes/base.ts", "../../../assets/node_modules/src/themes/bubble.ts", "../../../assets/node_modules/src/themes/snow.ts", "../../../assets/node_modules/src/quill.ts", "../../../assets/js/hooks/markdown.js", "../../../assets/node_modules/turndown/lib/turndown.browser.es.js", "../../../assets/node_modules/trix/src/trix/config/attachments.js", "../../../assets/node_modules/trix/src/trix/config/block_attributes.js", "../../../assets/node_modules/trix/src/trix/config/browser.js", "../../../assets/node_modules/trix/src/trix/config/lang.js", "../../../assets/node_modules/trix/src/trix/config/file_size_formatting.js", "../../../assets/node_modules/trix/src/trix/constants.js", "../../../assets/node_modules/trix/src/trix/core/helpers/extend.js", "../../../assets/node_modules/trix/src/trix/core/helpers/dom.js", "../../../assets/node_modules/trix/src/trix/config/input.js", "../../../assets/node_modules/trix/src/trix/config/key_names.js", "../../../assets/node_modules/trix/src/trix/config/parser.js", "../../../assets/node_modules/trix/src/trix/config/text_attributes.js", "../../../assets/node_modules/trix/src/trix/config/toolbar.js", "../../../assets/node_modules/trix/src/trix/config/undo.js", "../../../assets/node_modules/trix/src/trix/config/css.js", "../../../assets/node_modules/trix/src/trix/core/basic_object.js", "../../../assets/node_modules/trix/src/trix/core/utilities/utf16_string.js", "../../../assets/node_modules/trix/src/trix/core/object.js", "../../../assets/node_modules/trix/src/trix/core/helpers/arrays.js", "../../../assets/node_modules/trix/src/trix/core/helpers/bidi.js", "../../../assets/node_modules/trix/src/trix/core/helpers/config.js", "../../../assets/node_modules/trix/src/trix/core/helpers/custom_elements.js", "../../../assets/node_modules/trix/src/trix/core/helpers/events.js", "../../../assets/node_modules/trix/src/trix/core/helpers/functions.js", "../../../assets/node_modules/trix/src/trix/core/helpers/objects.js", "../../../assets/node_modules/trix/src/trix/core/helpers/ranges.js", "../../../assets/node_modules/trix/src/trix/observers/selection_change_observer.js", "../../../assets/node_modules/trix/src/trix/core/helpers/strings.js", "../../../assets/node_modules/trix/src/trix/core/collections/hash.js", "../../../assets/node_modules/trix/src/trix/core/collections/object_group.js", "../../../assets/node_modules/trix/src/trix/core/collections/object_map.js", "../../../assets/node_modules/trix/src/trix/core/collections/element_store.js", "../../../assets/node_modules/trix/src/trix/core/utilities/operation.js", "../../../assets/node_modules/trix/src/trix/views/object_view.js", "../../../assets/node_modules/trix/src/trix/models/html_sanitizer.js", "../../../assets/node_modules/trix/src/trix/views/attachment_view.js", "../../../assets/node_modules/trix/src/trix/views/previewable_attachment_view.js", "../../../assets/node_modules/trix/src/trix/views/piece_view.js", "../../../assets/node_modules/trix/src/trix/views/text_view.js", "../../../assets/node_modules/trix/src/trix/views/block_view.js", "../../../assets/node_modules/trix/src/trix/views/document_view.js", "../../../assets/node_modules/trix/src/trix/models/piece.js", "../../../assets/node_modules/trix/src/trix/operations/image_preload_operation.js", "../../../assets/node_modules/trix/src/trix/models/attachment.js", "../../../assets/node_modules/trix/src/trix/models/attachment_piece.js", "../../../assets/node_modules/trix/src/trix/models/string_piece.js", "../../../assets/node_modules/trix/src/trix/models/splittable_list.js", "../../../assets/node_modules/trix/src/trix/models/text.js", "../../../assets/node_modules/trix/src/trix/models/block.js", "../../../assets/node_modules/trix/src/trix/models/document.js", "../../../assets/node_modules/trix/src/trix/models/html_parser.js", "../../../assets/node_modules/trix/src/trix/core/serialization.js", "../../../assets/node_modules/trix/src/trix/models/managed_attachment.js", "../../../assets/node_modules/trix/src/trix/models/attachment_manager.js", "../../../assets/node_modules/trix/src/trix/models/line_break_insertion.js", "../../../assets/node_modules/trix/src/trix/models/composition.js", "../../../assets/node_modules/trix/src/trix/models/undo_manager.js", "../../../assets/node_modules/trix/src/trix/filters/filter.js", "../../../assets/node_modules/trix/src/trix/filters/attachment_gallery_filter.js", "../../../assets/node_modules/trix/src/trix/models/editor.js", "../../../assets/node_modules/trix/src/trix/models/location_mapper.js", "../../../assets/node_modules/trix/src/trix/models/point_mapper.js", "../../../assets/node_modules/trix/src/trix/models/selection_manager.js", "../../../assets/node_modules/trix/src/trix/controllers/attachment_editor_controller.js", "../../../assets/node_modules/trix/src/trix/controllers/composition_controller.js", "../../../assets/node_modules/trix/src/trix/controllers/controller.js", "../../../assets/node_modules/trix/src/trix/observers/mutation_observer.js", "../../../assets/node_modules/trix/src/trix/operations/file_verification_operation.js", "../../../assets/node_modules/trix/src/trix/models/flaky_android_keyboard_detector.js", "../../../assets/node_modules/trix/src/trix/controllers/input_controller.js", "../../../assets/node_modules/trix/src/trix/controllers/level_0_input_controller.js", "../../../assets/node_modules/trix/src/trix/controllers/level_2_input_controller.js", "../../../assets/node_modules/trix/src/trix/controllers/toolbar_controller.js", "../../../assets/node_modules/trix/src/trix/controllers/editor_controller.js", "../../../assets/node_modules/trix/src/trix/elements/trix_toolbar_element.js", "../../../assets/node_modules/trix/src/trix/elements/trix_editor_element.js", "../../../assets/node_modules/trix/src/trix/trix.js", "../../../assets/js/uploaders/s3.js", "../../../assets/js/hooks/local_locale_storage.js"],
  "sourcesContent": ["/**\n * @license MIT\n * topbar 2.0.0, 2023-02-04\n * https://buunguyen.github.io/topbar\n * Copyright (c) 2021 Buu Nguyen\n */\n(function (window, document) {\n  \"use strict\";\n\n  // https://gist.github.com/paulirish/1579671\n  (function () {\n    var lastTime = 0;\n    var vendors = [\"ms\", \"moz\", \"webkit\", \"o\"];\n    for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n      window.requestAnimationFrame =\n        window[vendors[x] + \"RequestAnimationFrame\"];\n      window.cancelAnimationFrame =\n        window[vendors[x] + \"CancelAnimationFrame\"] ||\n        window[vendors[x] + \"CancelRequestAnimationFrame\"];\n    }\n    if (!window.requestAnimationFrame)\n      window.requestAnimationFrame = function (callback, element) {\n        var currTime = new Date().getTime();\n        var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n        var id = window.setTimeout(function () {\n          callback(currTime + timeToCall);\n        }, timeToCall);\n        lastTime = currTime + timeToCall;\n        return id;\n      };\n    if (!window.cancelAnimationFrame)\n      window.cancelAnimationFrame = function (id) {\n        clearTimeout(id);\n      };\n  })();\n\n  var canvas,\n    currentProgress,\n    showing,\n    progressTimerId = null,\n    fadeTimerId = null,\n    delayTimerId = null,\n    addEvent = function (elem, type, handler) {\n      if (elem.addEventListener) elem.addEventListener(type, handler, false);\n      else if (elem.attachEvent) elem.attachEvent(\"on\" + type, handler);\n      else elem[\"on\" + type] = handler;\n    },\n    options = {\n      autoRun: true,\n      barThickness: 3,\n      barColors: {\n        0: \"rgba(26,  188, 156, .9)\",\n        \".25\": \"rgba(52,  152, 219, .9)\",\n        \".50\": \"rgba(241, 196, 15,  .9)\",\n        \".75\": \"rgba(230, 126, 34,  .9)\",\n        \"1.0\": \"rgba(211, 84,  0,   .9)\",\n      },\n      shadowBlur: 10,\n      shadowColor: \"rgba(0,   0,   0,   .6)\",\n      className: null,\n    },\n    repaint = function () {\n      canvas.width = window.innerWidth;\n      canvas.height = options.barThickness * 5; // need space for shadow\n\n      var ctx = canvas.getContext(\"2d\");\n      ctx.shadowBlur = options.shadowBlur;\n      ctx.shadowColor = options.shadowColor;\n\n      var lineGradient = ctx.createLinearGradient(0, 0, canvas.width, 0);\n      for (var stop in options.barColors)\n        lineGradient.addColorStop(stop, options.barColors[stop]);\n      ctx.lineWidth = options.barThickness;\n      ctx.beginPath();\n      ctx.moveTo(0, options.barThickness / 2);\n      ctx.lineTo(\n        Math.ceil(currentProgress * canvas.width),\n        options.barThickness / 2\n      );\n      ctx.strokeStyle = lineGradient;\n      ctx.stroke();\n    },\n    createCanvas = function () {\n      canvas = document.createElement(\"canvas\");\n      var style = canvas.style;\n      style.position = \"fixed\";\n      style.top = style.left = style.right = style.margin = style.padding = 0;\n      style.zIndex = 100001;\n      style.display = \"none\";\n      if (options.className) canvas.classList.add(options.className);\n      document.body.appendChild(canvas);\n      addEvent(window, \"resize\", repaint);\n    },\n    topbar = {\n      config: function (opts) {\n        for (var key in opts)\n          if (options.hasOwnProperty(key)) options[key] = opts[key];\n      },\n      show: function (delay) {\n        if (showing) return;\n        if (delay) {\n          if (delayTimerId) return;\n          delayTimerId = setTimeout(() => topbar.show(), delay);\n        } else  {\n          showing = true;\n          if (fadeTimerId !== null) window.cancelAnimationFrame(fadeTimerId);\n          if (!canvas) createCanvas();\n          canvas.style.opacity = 1;\n          canvas.style.display = \"block\";\n          topbar.progress(0);\n          if (options.autoRun) {\n            (function loop() {\n              progressTimerId = window.requestAnimationFrame(loop);\n              topbar.progress(\n                \"+\" + 0.05 * Math.pow(1 - Math.sqrt(currentProgress), 2)\n              );\n            })();\n          }\n        }\n      },\n      progress: function (to) {\n        if (typeof to === \"undefined\") return currentProgress;\n        if (typeof to === \"string\") {\n          to =\n            (to.indexOf(\"+\") >= 0 || to.indexOf(\"-\") >= 0\n              ? currentProgress\n              : 0) + parseFloat(to);\n        }\n        currentProgress = to > 1 ? 1 : to;\n        repaint();\n        return currentProgress;\n      },\n      hide: function () {\n        clearTimeout(delayTimerId);\n        delayTimerId = null;\n        if (!showing) return;\n        showing = false;\n        if (progressTimerId != null) {\n          window.cancelAnimationFrame(progressTimerId);\n          progressTimerId = null;\n        }\n        (function loop() {\n          if (topbar.progress(\"+.1\") >= 1) {\n            canvas.style.opacity -= 0.05;\n            if (canvas.style.opacity <= 0.05) {\n              canvas.style.display = \"none\";\n              fadeTimerId = null;\n              return;\n            }\n          }\n          fadeTimerId = window.requestAnimationFrame(loop);\n        })();\n      },\n    };\n\n  if (typeof module === \"object\" && typeof module.exports === \"object\") {\n    module.exports = topbar;\n  } else if (typeof define === \"function\" && define.amd) {\n    define(function () {\n      return topbar;\n    });\n  } else {\n    this.topbar = topbar;\n  }\n}.call(this, window, document));\n", "/**\n * This library modifies the diff-patch-match library by Neil Fraser\n * by removing the patch and match functionality and certain advanced\n * options in the diff function. The original license is as follows:\n *\n * ===\n *\n * Diff Match and Patch\n *\n * Copyright 2006 Google Inc.\n * http://code.google.com/p/google-diff-match-patch/\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {Int|Object} [cursor_pos] Edit position in text1 or object with more info\n * @param {boolean} [cleanup] Apply semantic cleanup before returning.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_main(text1, text2, cursor_pos, cleanup, _fix_unicode) {\n  // Check for equality\n  if (text1 === text2) {\n    if (text1) {\n      return [[DIFF_EQUAL, text1]];\n    }\n    return [];\n  }\n\n  if (cursor_pos != null) {\n    var editdiff = find_cursor_edit_diff(text1, text2, cursor_pos);\n    if (editdiff) {\n      return editdiff;\n    }\n  }\n\n  // Trim off common prefix (speedup).\n  var commonlength = diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = diff_compute_(text1, text2);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\n  }\n  if (commonsuffix) {\n    diffs.push([DIFF_EQUAL, commonsuffix]);\n  }\n  diff_cleanupMerge(diffs, _fix_unicode);\n  if (cleanup) {\n    diff_cleanupSemantic(diffs);\n  }\n  return diffs;\n}\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_compute_(text1, text2) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [[DIFF_INSERT, text2]];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [[DIFF_DELETE, text1]];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i !== -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [\n      [DIFF_INSERT, longtext.substring(0, i)],\n      [DIFF_EQUAL, shorttext],\n      [DIFF_INSERT, longtext.substring(i + shorttext.length)],\n    ];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length === 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [\n      [DIFF_DELETE, text1],\n      [DIFF_INSERT, text2],\n    ];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = diff_main(text1_a, text2_a);\n    var diffs_b = diff_main(text1_b, text2_b);\n    // Merge the results.\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\n  }\n\n  return diff_bisect_(text1, text2);\n}\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n * @private\n */\nfunction diff_bisect_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = delta % 2 !== 0;\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 === -d || (k1 !== d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (\n        x1 < text1_length &&\n        y1 < text2_length &&\n        text1.charAt(x1) === text2.charAt(y1)\n      ) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] !== -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 === -d || (k2 !== d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (\n        x2 < text1_length &&\n        y2 < text2_length &&\n        text1.charAt(text1_length - x2 - 1) ===\n          text2.charAt(text2_length - y2 - 1)\n      ) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] !== -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [\n    [DIFF_DELETE, text1],\n    [DIFF_INSERT, text2],\n  ];\n}\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_bisectSplit_(text1, text2, x, y) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = diff_main(text1a, text2a);\n  var diffsb = diff_main(text1b, text2b);\n\n  return diffs.concat(diffsb);\n}\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\nfunction diff_commonPrefix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) !== text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(pointerstart, pointermid) ==\n      text2.substring(pointerstart, pointermid)\n    ) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_start(text1.charCodeAt(pointermid - 1))) {\n    pointermid--;\n  }\n\n  return pointermid;\n}\n\n/**\n * Determine if the suffix of one string is the prefix of another.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of the first\n *     string and the start of the second string.\n * @private\n */\nfunction diff_commonOverlap_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  // Eliminate the null case.\n  if (text1_length == 0 || text2_length == 0) {\n    return 0;\n  }\n  // Truncate the longer string.\n  if (text1_length > text2_length) {\n    text1 = text1.substring(text1_length - text2_length);\n  } else if (text1_length < text2_length) {\n    text2 = text2.substring(0, text1_length);\n  }\n  var text_length = Math.min(text1_length, text2_length);\n  // Quick check for the worst case.\n  if (text1 == text2) {\n    return text_length;\n  }\n\n  // Start by looking for a single character match\n  // and increase length until no match is found.\n  // Performance analysis: http://neil.fraser.name/news/2010/11/04/\n  var best = 0;\n  var length = 1;\n  while (true) {\n    var pattern = text1.substring(text_length - length);\n    var found = text2.indexOf(pattern);\n    if (found == -1) {\n      return best;\n    }\n    length += found;\n    if (\n      found == 0 ||\n      text1.substring(text_length - length) == text2.substring(0, length)\n    ) {\n      best = length;\n      length++;\n    }\n  }\n}\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\nfunction diff_commonSuffix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.slice(-1) !== text2.slice(-1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n      text2.substring(text2.length - pointermid, text2.length - pointerend)\n    ) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_end(text1.charCodeAt(text1.length - pointermid))) {\n    pointermid--;\n  }\n\n  return pointermid;\n}\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n */\nfunction diff_halfMatch_(text1, text2) {\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null; // Pointless.\n  }\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = \"\";\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) !== -1) {\n      var prefixLength = diff_commonPrefix(\n        longtext.substring(i),\n        shorttext.substring(j)\n      );\n      var suffixLength = diff_commonSuffix(\n        longtext.substring(0, i),\n        shorttext.substring(0, j)\n      );\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common =\n          shorttext.substring(j - suffixLength, j) +\n          shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [\n        best_longtext_a,\n        best_longtext_b,\n        best_shorttext_a,\n        best_shorttext_b,\n        best_common,\n      ];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(\n    longtext,\n    shorttext,\n    Math.ceil(longtext.length / 4)\n  );\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(\n    longtext,\n    shorttext,\n    Math.ceil(longtext.length / 2)\n  );\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n}\n\n/**\n * Reduce the number of edits by eliminating semantically trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\nfunction diff_cleanupSemantic(diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n  /** @type {?string} */\n  var lastequality = null;\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  var pointer = 0; // Index of current position.\n  // Number of characters that changed prior to the equality.\n  var length_insertions1 = 0;\n  var length_deletions1 = 0;\n  // Number of characters that changed after the equality.\n  var length_insertions2 = 0;\n  var length_deletions2 = 0;\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      equalities[equalitiesLength++] = pointer;\n      length_insertions1 = length_insertions2;\n      length_deletions1 = length_deletions2;\n      length_insertions2 = 0;\n      length_deletions2 = 0;\n      lastequality = diffs[pointer][1];\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_INSERT) {\n        length_insertions2 += diffs[pointer][1].length;\n      } else {\n        length_deletions2 += diffs[pointer][1].length;\n      }\n      // Eliminate an equality that is smaller or equal to the edits on both\n      // sides of it.\n      if (\n        lastequality &&\n        lastequality.length <=\n          Math.max(length_insertions1, length_deletions1) &&\n        lastequality.length <= Math.max(length_insertions2, length_deletions2)\n      ) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, [\n          DIFF_DELETE,\n          lastequality,\n        ]);\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        // Throw away the equality we just deleted.\n        equalitiesLength--;\n        // Throw away the previous equality (it needs to be reevaluated).\n        equalitiesLength--;\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n        length_insertions1 = 0; // Reset the counters.\n        length_deletions1 = 0;\n        length_insertions2 = 0;\n        length_deletions2 = 0;\n        lastequality = null;\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n\n  // Normalize the diff.\n  if (changes) {\n    diff_cleanupMerge(diffs);\n  }\n  diff_cleanupSemanticLossless(diffs);\n\n  // Find any overlaps between deletions and insertions.\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\n  //   -> <del>abc</del>xxx<ins>def</ins>\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\n  //   -> <ins>def</ins>xxx<del>abc</del>\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\n  pointer = 1;\n  while (pointer < diffs.length) {\n    if (\n      diffs[pointer - 1][0] == DIFF_DELETE &&\n      diffs[pointer][0] == DIFF_INSERT\n    ) {\n      var deletion = diffs[pointer - 1][1];\n      var insertion = diffs[pointer][1];\n      var overlap_length1 = diff_commonOverlap_(deletion, insertion);\n      var overlap_length2 = diff_commonOverlap_(insertion, deletion);\n      if (overlap_length1 >= overlap_length2) {\n        if (\n          overlap_length1 >= deletion.length / 2 ||\n          overlap_length1 >= insertion.length / 2\n        ) {\n          // Overlap found.  Insert an equality and trim the surrounding edits.\n          diffs.splice(pointer, 0, [\n            DIFF_EQUAL,\n            insertion.substring(0, overlap_length1),\n          ]);\n          diffs[pointer - 1][1] = deletion.substring(\n            0,\n            deletion.length - overlap_length1\n          );\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\n          pointer++;\n        }\n      } else {\n        if (\n          overlap_length2 >= deletion.length / 2 ||\n          overlap_length2 >= insertion.length / 2\n        ) {\n          // Reverse overlap found.\n          // Insert an equality and swap and trim the surrounding edits.\n          diffs.splice(pointer, 0, [\n            DIFF_EQUAL,\n            deletion.substring(0, overlap_length2),\n          ]);\n          diffs[pointer - 1][0] = DIFF_INSERT;\n          diffs[pointer - 1][1] = insertion.substring(\n            0,\n            insertion.length - overlap_length2\n          );\n          diffs[pointer + 1][0] = DIFF_DELETE;\n          diffs[pointer + 1][1] = deletion.substring(overlap_length2);\n          pointer++;\n        }\n      }\n      pointer++;\n    }\n    pointer++;\n  }\n}\n\nvar nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\nvar whitespaceRegex_ = /\\s/;\nvar linebreakRegex_ = /[\\r\\n]/;\nvar blanklineEndRegex_ = /\\n\\r?\\n$/;\nvar blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\n\n/**\n * Look for single edits surrounded on both sides by equalities\n * which can be shifted sideways to align the edit to a word boundary.\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\nfunction diff_cleanupSemanticLossless(diffs) {\n  /**\n   * Given two strings, compute a score representing whether the internal\n   * boundary falls on logical boundaries.\n   * Scores range from 6 (best) to 0 (worst).\n   * Closure, but does not reference any external variables.\n   * @param {string} one First string.\n   * @param {string} two Second string.\n   * @return {number} The score.\n   * @private\n   */\n  function diff_cleanupSemanticScore_(one, two) {\n    if (!one || !two) {\n      // Edges are the best.\n      return 6;\n    }\n\n    // Each port of this function behaves slightly differently due to\n    // subtle differences in each language's definition of things like\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\n    // the choice has been made to use each language's native features\n    // rather than force total conformity.\n    var char1 = one.charAt(one.length - 1);\n    var char2 = two.charAt(0);\n    var nonAlphaNumeric1 = char1.match(nonAlphaNumericRegex_);\n    var nonAlphaNumeric2 = char2.match(nonAlphaNumericRegex_);\n    var whitespace1 = nonAlphaNumeric1 && char1.match(whitespaceRegex_);\n    var whitespace2 = nonAlphaNumeric2 && char2.match(whitespaceRegex_);\n    var lineBreak1 = whitespace1 && char1.match(linebreakRegex_);\n    var lineBreak2 = whitespace2 && char2.match(linebreakRegex_);\n    var blankLine1 = lineBreak1 && one.match(blanklineEndRegex_);\n    var blankLine2 = lineBreak2 && two.match(blanklineStartRegex_);\n\n    if (blankLine1 || blankLine2) {\n      // Five points for blank lines.\n      return 5;\n    } else if (lineBreak1 || lineBreak2) {\n      // Four points for line breaks.\n      return 4;\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\n      // Three points for end of sentences.\n      return 3;\n    } else if (whitespace1 || whitespace2) {\n      // Two points for whitespace.\n      return 2;\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\n      // One point for non-alphanumeric.\n      return 1;\n    }\n    return 0;\n  }\n\n  var pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (\n      diffs[pointer - 1][0] == DIFF_EQUAL &&\n      diffs[pointer + 1][0] == DIFF_EQUAL\n    ) {\n      // This is a single edit surrounded by equalities.\n      var equality1 = diffs[pointer - 1][1];\n      var edit = diffs[pointer][1];\n      var equality2 = diffs[pointer + 1][1];\n\n      // First, shift the edit as far left as possible.\n      var commonOffset = diff_commonSuffix(equality1, edit);\n      if (commonOffset) {\n        var commonString = edit.substring(edit.length - commonOffset);\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\n        equality2 = commonString + equality2;\n      }\n\n      // Second, step character by character right, looking for the best fit.\n      var bestEquality1 = equality1;\n      var bestEdit = edit;\n      var bestEquality2 = equality2;\n      var bestScore =\n        diff_cleanupSemanticScore_(equality1, edit) +\n        diff_cleanupSemanticScore_(edit, equality2);\n      while (edit.charAt(0) === equality2.charAt(0)) {\n        equality1 += edit.charAt(0);\n        edit = edit.substring(1) + equality2.charAt(0);\n        equality2 = equality2.substring(1);\n        var score =\n          diff_cleanupSemanticScore_(equality1, edit) +\n          diff_cleanupSemanticScore_(edit, equality2);\n        // The >= encourages trailing rather than leading whitespace on edits.\n        if (score >= bestScore) {\n          bestScore = score;\n          bestEquality1 = equality1;\n          bestEdit = edit;\n          bestEquality2 = equality2;\n        }\n      }\n\n      if (diffs[pointer - 1][1] != bestEquality1) {\n        // We have an improvement, save it back to the diff.\n        if (bestEquality1) {\n          diffs[pointer - 1][1] = bestEquality1;\n        } else {\n          diffs.splice(pointer - 1, 1);\n          pointer--;\n        }\n        diffs[pointer][1] = bestEdit;\n        if (bestEquality2) {\n          diffs[pointer + 1][1] = bestEquality2;\n        } else {\n          diffs.splice(pointer + 1, 1);\n          pointer--;\n        }\n      }\n    }\n    pointer++;\n  }\n}\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {Array} diffs Array of diff tuples.\n * @param {boolean} fix_unicode Whether to normalize to a unicode-correct diff\n */\nfunction diff_cleanupMerge(diffs, fix_unicode) {\n  diffs.push([DIFF_EQUAL, \"\"]); // Add a dummy entry at the end.\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = \"\";\n  var text_insert = \"\";\n  var commonlength;\n  while (pointer < diffs.length) {\n    if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n      diffs.splice(pointer, 1);\n      continue;\n    }\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        var previous_equality = pointer - count_insert - count_delete - 1;\n        if (fix_unicode) {\n          // prevent splitting of unicode surrogate pairs.  when fix_unicode is true,\n          // we assume that the old and new text in the diff are complete and correct\n          // unicode-encoded JS strings, but the tuple boundaries may fall between\n          // surrogate pairs.  we fix this by shaving off stray surrogates from the end\n          // of the previous equality and the beginning of this equality.  this may create\n          // empty equalities or a common prefix or suffix.  for example, if AB and AC are\n          // emojis, `[[0, 'A'], [-1, 'BA'], [0, 'C']]` would turn into deleting 'ABAC' and\n          // inserting 'AC', and then the common suffix 'AC' will be eliminated.  in this\n          // particular case, both equalities go away, we absorb any previous inequalities,\n          // and we keep scanning for the next equality before rewriting the tuples.\n          if (\n            previous_equality >= 0 &&\n            ends_with_pair_start(diffs[previous_equality][1])\n          ) {\n            var stray = diffs[previous_equality][1].slice(-1);\n            diffs[previous_equality][1] = diffs[previous_equality][1].slice(\n              0,\n              -1\n            );\n            text_delete = stray + text_delete;\n            text_insert = stray + text_insert;\n            if (!diffs[previous_equality][1]) {\n              // emptied out previous equality, so delete it and include previous delete/insert\n              diffs.splice(previous_equality, 1);\n              pointer--;\n              var k = previous_equality - 1;\n              if (diffs[k] && diffs[k][0] === DIFF_INSERT) {\n                count_insert++;\n                text_insert = diffs[k][1] + text_insert;\n                k--;\n              }\n              if (diffs[k] && diffs[k][0] === DIFF_DELETE) {\n                count_delete++;\n                text_delete = diffs[k][1] + text_delete;\n                k--;\n              }\n              previous_equality = k;\n            }\n          }\n          if (starts_with_pair_end(diffs[pointer][1])) {\n            var stray = diffs[pointer][1].charAt(0);\n            diffs[pointer][1] = diffs[pointer][1].slice(1);\n            text_delete += stray;\n            text_insert += stray;\n          }\n        }\n        if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n          // for empty equality not at end, wait for next equality\n          diffs.splice(pointer, 1);\n          break;\n        }\n        if (text_delete.length > 0 || text_insert.length > 0) {\n          // note that diff_commonPrefix and diff_commonSuffix are unicode-aware\n          if (text_delete.length > 0 && text_insert.length > 0) {\n            // Factor out any common prefixes.\n            commonlength = diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if (previous_equality >= 0) {\n                diffs[previous_equality][1] += text_insert.substring(\n                  0,\n                  commonlength\n                );\n              } else {\n                diffs.splice(0, 0, [\n                  DIFF_EQUAL,\n                  text_insert.substring(0, commonlength),\n                ]);\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixes.\n            commonlength = diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] =\n                text_insert.substring(text_insert.length - commonlength) +\n                diffs[pointer][1];\n              text_insert = text_insert.substring(\n                0,\n                text_insert.length - commonlength\n              );\n              text_delete = text_delete.substring(\n                0,\n                text_delete.length - commonlength\n              );\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          var n = count_insert + count_delete;\n          if (text_delete.length === 0 && text_insert.length === 0) {\n            diffs.splice(pointer - n, n);\n            pointer = pointer - n;\n          } else if (text_delete.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_INSERT, text_insert]);\n            pointer = pointer - n + 1;\n          } else if (text_insert.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_DELETE, text_delete]);\n            pointer = pointer - n + 1;\n          } else {\n            diffs.splice(\n              pointer - n,\n              n,\n              [DIFF_DELETE, text_delete],\n              [DIFF_INSERT, text_insert]\n            );\n            pointer = pointer - n + 2;\n          }\n        }\n        if (pointer !== 0 && diffs[pointer - 1][0] === DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = \"\";\n        text_insert = \"\";\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === \"\") {\n    diffs.pop(); // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (\n      diffs[pointer - 1][0] === DIFF_EQUAL &&\n      diffs[pointer + 1][0] === DIFF_EQUAL\n    ) {\n      // This is a single edit surrounded by equalities.\n      if (\n        diffs[pointer][1].substring(\n          diffs[pointer][1].length - diffs[pointer - 1][1].length\n        ) === diffs[pointer - 1][1]\n      ) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] =\n          diffs[pointer - 1][1] +\n          diffs[pointer][1].substring(\n            0,\n            diffs[pointer][1].length - diffs[pointer - 1][1].length\n          );\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (\n        diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n        diffs[pointer + 1][1]\n      ) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n          diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n          diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    diff_cleanupMerge(diffs, fix_unicode);\n  }\n}\n\nfunction is_surrogate_pair_start(charCode) {\n  return charCode >= 0xd800 && charCode <= 0xdbff;\n}\n\nfunction is_surrogate_pair_end(charCode) {\n  return charCode >= 0xdc00 && charCode <= 0xdfff;\n}\n\nfunction starts_with_pair_end(str) {\n  return is_surrogate_pair_end(str.charCodeAt(0));\n}\n\nfunction ends_with_pair_start(str) {\n  return is_surrogate_pair_start(str.charCodeAt(str.length - 1));\n}\n\nfunction remove_empty_tuples(tuples) {\n  var ret = [];\n  for (var i = 0; i < tuples.length; i++) {\n    if (tuples[i][1].length > 0) {\n      ret.push(tuples[i]);\n    }\n  }\n  return ret;\n}\n\nfunction make_edit_splice(before, oldMiddle, newMiddle, after) {\n  if (ends_with_pair_start(before) || starts_with_pair_end(after)) {\n    return null;\n  }\n  return remove_empty_tuples([\n    [DIFF_EQUAL, before],\n    [DIFF_DELETE, oldMiddle],\n    [DIFF_INSERT, newMiddle],\n    [DIFF_EQUAL, after],\n  ]);\n}\n\nfunction find_cursor_edit_diff(oldText, newText, cursor_pos) {\n  // note: this runs after equality check has ruled out exact equality\n  var oldRange =\n    typeof cursor_pos === \"number\"\n      ? { index: cursor_pos, length: 0 }\n      : cursor_pos.oldRange;\n  var newRange = typeof cursor_pos === \"number\" ? null : cursor_pos.newRange;\n  // take into account the old and new selection to generate the best diff\n  // possible for a text edit.  for example, a text change from \"xxx\" to \"xx\"\n  // could be a delete or forwards-delete of any one of the x's, or the\n  // result of selecting two of the x's and typing \"x\".\n  var oldLength = oldText.length;\n  var newLength = newText.length;\n  if (oldRange.length === 0 && (newRange === null || newRange.length === 0)) {\n    // see if we have an insert or delete before or after cursor\n    var oldCursor = oldRange.index;\n    var oldBefore = oldText.slice(0, oldCursor);\n    var oldAfter = oldText.slice(oldCursor);\n    var maybeNewCursor = newRange ? newRange.index : null;\n    editBefore: {\n      // is this an insert or delete right before oldCursor?\n      var newCursor = oldCursor + newLength - oldLength;\n      if (maybeNewCursor !== null && maybeNewCursor !== newCursor) {\n        break editBefore;\n      }\n      if (newCursor < 0 || newCursor > newLength) {\n        break editBefore;\n      }\n      var newBefore = newText.slice(0, newCursor);\n      var newAfter = newText.slice(newCursor);\n      if (newAfter !== oldAfter) {\n        break editBefore;\n      }\n      var prefixLength = Math.min(oldCursor, newCursor);\n      var oldPrefix = oldBefore.slice(0, prefixLength);\n      var newPrefix = newBefore.slice(0, prefixLength);\n      if (oldPrefix !== newPrefix) {\n        break editBefore;\n      }\n      var oldMiddle = oldBefore.slice(prefixLength);\n      var newMiddle = newBefore.slice(prefixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldAfter);\n    }\n    editAfter: {\n      // is this an insert or delete right after oldCursor?\n      if (maybeNewCursor !== null && maybeNewCursor !== oldCursor) {\n        break editAfter;\n      }\n      var cursor = oldCursor;\n      var newBefore = newText.slice(0, cursor);\n      var newAfter = newText.slice(cursor);\n      if (newBefore !== oldBefore) {\n        break editAfter;\n      }\n      var suffixLength = Math.min(oldLength - cursor, newLength - cursor);\n      var oldSuffix = oldAfter.slice(oldAfter.length - suffixLength);\n      var newSuffix = newAfter.slice(newAfter.length - suffixLength);\n      if (oldSuffix !== newSuffix) {\n        break editAfter;\n      }\n      var oldMiddle = oldAfter.slice(0, oldAfter.length - suffixLength);\n      var newMiddle = newAfter.slice(0, newAfter.length - suffixLength);\n      return make_edit_splice(oldBefore, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n  if (oldRange.length > 0 && newRange && newRange.length === 0) {\n    replaceRange: {\n      // see if diff could be a splice of the old selection range\n      var oldPrefix = oldText.slice(0, oldRange.index);\n      var oldSuffix = oldText.slice(oldRange.index + oldRange.length);\n      var prefixLength = oldPrefix.length;\n      var suffixLength = oldSuffix.length;\n      if (newLength < prefixLength + suffixLength) {\n        break replaceRange;\n      }\n      var newPrefix = newText.slice(0, prefixLength);\n      var newSuffix = newText.slice(newLength - suffixLength);\n      if (oldPrefix !== newPrefix || oldSuffix !== newSuffix) {\n        break replaceRange;\n      }\n      var oldMiddle = oldText.slice(prefixLength, oldLength - suffixLength);\n      var newMiddle = newText.slice(prefixLength, newLength - suffixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n\n  return null;\n}\n\nfunction diff(text1, text2, cursor_pos, cleanup) {\n  // only pass fix_unicode=true at the top level, not when diff_main is\n  // recursively invoked\n  return diff_main(text1, text2, cursor_pos, cleanup, true);\n}\n\ndiff.INSERT = DIFF_INSERT;\ndiff.DELETE = DIFF_DELETE;\ndiff.EQUAL = DIFF_EQUAL;\n\nmodule.exports = diff;\n", "/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n", "/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n", "import cloneDeep = require('lodash.clonedeep');\nimport isEqual = require('lodash.isequal');\n\ninterface AttributeMap {\n  [key: string]: unknown;\n}\n\nnamespace AttributeMap {\n  export function compose(\n    a: AttributeMap = {},\n    b: AttributeMap = {},\n    keepNull = false,\n  ): AttributeMap | undefined {\n    if (typeof a !== 'object') {\n      a = {};\n    }\n    if (typeof b !== 'object') {\n      b = {};\n    }\n    let attributes = cloneDeep(b);\n    if (!keepNull) {\n      attributes = Object.keys(attributes).reduce<AttributeMap>((copy, key) => {\n        if (attributes[key] != null) {\n          copy[key] = attributes[key];\n        }\n        return copy;\n      }, {});\n    }\n    for (const key in a) {\n      if (a[key] !== undefined && b[key] === undefined) {\n        attributes[key] = a[key];\n      }\n    }\n    return Object.keys(attributes).length > 0 ? attributes : undefined;\n  }\n\n  export function diff(\n    a: AttributeMap = {},\n    b: AttributeMap = {},\n  ): AttributeMap | undefined {\n    if (typeof a !== 'object') {\n      a = {};\n    }\n    if (typeof b !== 'object') {\n      b = {};\n    }\n    const attributes = Object.keys(a)\n      .concat(Object.keys(b))\n      .reduce<AttributeMap>((attrs, key) => {\n        if (!isEqual(a[key], b[key])) {\n          attrs[key] = b[key] === undefined ? null : b[key];\n        }\n        return attrs;\n      }, {});\n    return Object.keys(attributes).length > 0 ? attributes : undefined;\n  }\n\n  export function invert(\n    attr: AttributeMap = {},\n    base: AttributeMap = {},\n  ): AttributeMap {\n    attr = attr || {};\n    const baseInverted = Object.keys(base).reduce<AttributeMap>((memo, key) => {\n      if (base[key] !== attr[key] && attr[key] !== undefined) {\n        memo[key] = base[key];\n      }\n      return memo;\n    }, {});\n    return Object.keys(attr).reduce<AttributeMap>((memo, key) => {\n      if (attr[key] !== base[key] && base[key] === undefined) {\n        memo[key] = null;\n      }\n      return memo;\n    }, baseInverted);\n  }\n\n  export function transform(\n    a: AttributeMap | undefined,\n    b: AttributeMap | undefined,\n    priority = false,\n  ): AttributeMap | undefined {\n    if (typeof a !== 'object') {\n      return b;\n    }\n    if (typeof b !== 'object') {\n      return undefined;\n    }\n    if (!priority) {\n      return b; // b simply overwrites us without priority\n    }\n    const attributes = Object.keys(b).reduce<AttributeMap>((attrs, key) => {\n      if (a[key] === undefined) {\n        attrs[key] = b[key]; // null is a valid value\n      }\n      return attrs;\n    }, {});\n    return Object.keys(attributes).length > 0 ? attributes : undefined;\n  }\n}\n\nexport default AttributeMap;\n", "import AttributeMap from './AttributeMap';\n\ninterface Op {\n  // only one property out of {insert, delete, retain} will be present\n  insert?: string | Record<string, unknown>;\n  delete?: number;\n  retain?: number | Record<string, unknown>;\n\n  attributes?: AttributeMap;\n}\n\nnamespace Op {\n  export function length(op: Op): number {\n    if (typeof op.delete === 'number') {\n      return op.delete;\n    } else if (typeof op.retain === 'number') {\n      return op.retain;\n    } else if (typeof op.retain === 'object' && op.retain !== null) {\n      return 1;\n    } else {\n      return typeof op.insert === 'string' ? op.insert.length : 1;\n    }\n  }\n}\n\nexport default Op;\n", "import Op from './Op';\n\nexport default class Iterator {\n  ops: Op[];\n  index: number;\n  offset: number;\n\n  constructor(ops: Op[]) {\n    this.ops = ops;\n    this.index = 0;\n    this.offset = 0;\n  }\n\n  hasNext(): boolean {\n    return this.peekLength() < Infinity;\n  }\n\n  next(length?: number): Op {\n    if (!length) {\n      length = Infinity;\n    }\n    const nextOp = this.ops[this.index];\n    if (nextOp) {\n      const offset = this.offset;\n      const opLength = Op.length(nextOp);\n      if (length >= opLength - offset) {\n        length = opLength - offset;\n        this.index += 1;\n        this.offset = 0;\n      } else {\n        this.offset += length;\n      }\n      if (typeof nextOp.delete === 'number') {\n        return { delete: length };\n      } else {\n        const retOp: Op = {};\n        if (nextOp.attributes) {\n          retOp.attributes = nextOp.attributes;\n        }\n        if (typeof nextOp.retain === 'number') {\n          retOp.retain = length;\n        } else if (\n          typeof nextOp.retain === 'object' &&\n          nextOp.retain !== null\n        ) {\n          // offset should === 0, length should === 1\n          retOp.retain = nextOp.retain;\n        } else if (typeof nextOp.insert === 'string') {\n          retOp.insert = nextOp.insert.substr(offset, length);\n        } else {\n          // offset should === 0, length should === 1\n          retOp.insert = nextOp.insert;\n        }\n        return retOp;\n      }\n    } else {\n      return { retain: Infinity };\n    }\n  }\n\n  peek(): Op {\n    return this.ops[this.index];\n  }\n\n  peekLength(): number {\n    if (this.ops[this.index]) {\n      // Should never return 0 if our index is being managed correctly\n      return Op.length(this.ops[this.index]) - this.offset;\n    } else {\n      return Infinity;\n    }\n  }\n\n  peekType(): string {\n    const op = this.ops[this.index];\n    if (op) {\n      if (typeof op.delete === 'number') {\n        return 'delete';\n      } else if (\n        typeof op.retain === 'number' ||\n        (typeof op.retain === 'object' && op.retain !== null)\n      ) {\n        return 'retain';\n      } else {\n        return 'insert';\n      }\n    }\n    return 'retain';\n  }\n\n  rest(): Op[] {\n    if (!this.hasNext()) {\n      return [];\n    } else if (this.offset === 0) {\n      return this.ops.slice(this.index);\n    } else {\n      const offset = this.offset;\n      const index = this.index;\n      const next = this.next();\n      const rest = this.ops.slice(this.index);\n      this.offset = offset;\n      this.index = index;\n      return [next].concat(rest);\n    }\n  }\n}\n", "import * as diff from 'fast-diff';\nimport cloneDeep = require('lodash.clonedeep');\nimport isEqual = require('lodash.isequal');\nimport AttributeMap from './AttributeMap';\nimport Op from './Op';\nimport OpIterator from './OpIterator';\n\nconst NULL_CHARACTER = String.fromCharCode(0); // Placeholder char for embed in diff()\n\ninterface EmbedHandler<T> {\n  compose(a: T, b: T, keepNull: boolean): T;\n  invert(a: T, b: T): T;\n  transform(a: T, b: T, priority: boolean): T;\n}\n\nconst getEmbedTypeAndData = (\n  a: Op['insert'] | Op['retain'],\n  b: Op['insert'],\n): [string, unknown, unknown] => {\n  if (typeof a !== 'object' || a === null) {\n    throw new Error(`cannot retain a ${typeof a}`);\n  }\n  if (typeof b !== 'object' || b === null) {\n    throw new Error(`cannot retain a ${typeof b}`);\n  }\n  const embedType = Object.keys(a)[0];\n  if (!embedType || embedType !== Object.keys(b)[0]) {\n    throw new Error(\n      `embed types not matched: ${embedType} != ${Object.keys(b)[0]}`,\n    );\n  }\n  return [embedType, a[embedType], b[embedType]];\n};\n\nclass Delta {\n  static Op = Op;\n  static OpIterator = OpIterator;\n  static AttributeMap = AttributeMap;\n  private static handlers: { [embedType: string]: EmbedHandler<unknown> } = {};\n\n  static registerEmbed<T>(embedType: string, handler: EmbedHandler<T>): void {\n    this.handlers[embedType] = handler;\n  }\n\n  static unregisterEmbed(embedType: string): void {\n    delete this.handlers[embedType];\n  }\n\n  private static getHandler(embedType: string): EmbedHandler<unknown> {\n    const handler = this.handlers[embedType];\n    if (!handler) {\n      throw new Error(`no handlers for embed type \"${embedType}\"`);\n    }\n    return handler;\n  }\n\n  ops: Op[];\n  constructor(ops?: Op[] | { ops: Op[] }) {\n    // Assume we are given a well formed ops\n    if (Array.isArray(ops)) {\n      this.ops = ops;\n    } else if (ops != null && Array.isArray(ops.ops)) {\n      this.ops = ops.ops;\n    } else {\n      this.ops = [];\n    }\n  }\n\n  insert(\n    arg: string | Record<string, unknown>,\n    attributes?: AttributeMap | null,\n  ): this {\n    const newOp: Op = {};\n    if (typeof arg === 'string' && arg.length === 0) {\n      return this;\n    }\n    newOp.insert = arg;\n    if (\n      attributes != null &&\n      typeof attributes === 'object' &&\n      Object.keys(attributes).length > 0\n    ) {\n      newOp.attributes = attributes;\n    }\n    return this.push(newOp);\n  }\n\n  delete(length: number): this {\n    if (length <= 0) {\n      return this;\n    }\n    return this.push({ delete: length });\n  }\n\n  retain(\n    length: number | Record<string, unknown>,\n    attributes?: AttributeMap | null,\n  ): this {\n    if (typeof length === 'number' && length <= 0) {\n      return this;\n    }\n    const newOp: Op = { retain: length };\n    if (\n      attributes != null &&\n      typeof attributes === 'object' &&\n      Object.keys(attributes).length > 0\n    ) {\n      newOp.attributes = attributes;\n    }\n    return this.push(newOp);\n  }\n\n  push(newOp: Op): this {\n    let index = this.ops.length;\n    let lastOp = this.ops[index - 1];\n    newOp = cloneDeep(newOp);\n    if (typeof lastOp === 'object') {\n      if (\n        typeof newOp.delete === 'number' &&\n        typeof lastOp.delete === 'number'\n      ) {\n        this.ops[index - 1] = { delete: lastOp.delete + newOp.delete };\n        return this;\n      }\n      // Since it does not matter if we insert before or after deleting at the same index,\n      // always prefer to insert first\n      if (typeof lastOp.delete === 'number' && newOp.insert != null) {\n        index -= 1;\n        lastOp = this.ops[index - 1];\n        if (typeof lastOp !== 'object') {\n          this.ops.unshift(newOp);\n          return this;\n        }\n      }\n      if (isEqual(newOp.attributes, lastOp.attributes)) {\n        if (\n          typeof newOp.insert === 'string' &&\n          typeof lastOp.insert === 'string'\n        ) {\n          this.ops[index - 1] = { insert: lastOp.insert + newOp.insert };\n          if (typeof newOp.attributes === 'object') {\n            this.ops[index - 1].attributes = newOp.attributes;\n          }\n          return this;\n        } else if (\n          typeof newOp.retain === 'number' &&\n          typeof lastOp.retain === 'number'\n        ) {\n          this.ops[index - 1] = { retain: lastOp.retain + newOp.retain };\n          if (typeof newOp.attributes === 'object') {\n            this.ops[index - 1].attributes = newOp.attributes;\n          }\n          return this;\n        }\n      }\n    }\n    if (index === this.ops.length) {\n      this.ops.push(newOp);\n    } else {\n      this.ops.splice(index, 0, newOp);\n    }\n    return this;\n  }\n\n  chop(): this {\n    const lastOp = this.ops[this.ops.length - 1];\n    if (lastOp && typeof lastOp.retain === 'number' && !lastOp.attributes) {\n      this.ops.pop();\n    }\n    return this;\n  }\n\n  filter(predicate: (op: Op, index: number) => boolean): Op[] {\n    return this.ops.filter(predicate);\n  }\n\n  forEach(predicate: (op: Op, index: number) => void): void {\n    this.ops.forEach(predicate);\n  }\n\n  map<T>(predicate: (op: Op, index: number) => T): T[] {\n    return this.ops.map(predicate);\n  }\n\n  partition(predicate: (op: Op) => boolean): [Op[], Op[]] {\n    const passed: Op[] = [];\n    const failed: Op[] = [];\n    this.forEach((op) => {\n      const target = predicate(op) ? passed : failed;\n      target.push(op);\n    });\n    return [passed, failed];\n  }\n\n  reduce<T>(\n    predicate: (accum: T, curr: Op, index: number) => T,\n    initialValue: T,\n  ): T {\n    return this.ops.reduce(predicate, initialValue);\n  }\n\n  changeLength(): number {\n    return this.reduce((length, elem) => {\n      if (elem.insert) {\n        return length + Op.length(elem);\n      } else if (elem.delete) {\n        return length - elem.delete;\n      }\n      return length;\n    }, 0);\n  }\n\n  length(): number {\n    return this.reduce((length, elem) => {\n      return length + Op.length(elem);\n    }, 0);\n  }\n\n  slice(start = 0, end = Infinity): Delta {\n    const ops = [];\n    const iter = new OpIterator(this.ops);\n    let index = 0;\n    while (index < end && iter.hasNext()) {\n      let nextOp;\n      if (index < start) {\n        nextOp = iter.next(start - index);\n      } else {\n        nextOp = iter.next(end - index);\n        ops.push(nextOp);\n      }\n      index += Op.length(nextOp);\n    }\n    return new Delta(ops);\n  }\n\n  compose(other: Delta): Delta {\n    const thisIter = new OpIterator(this.ops);\n    const otherIter = new OpIterator(other.ops);\n    const ops = [];\n    const firstOther = otherIter.peek();\n    if (\n      firstOther != null &&\n      typeof firstOther.retain === 'number' &&\n      firstOther.attributes == null\n    ) {\n      let firstLeft = firstOther.retain;\n      while (\n        thisIter.peekType() === 'insert' &&\n        thisIter.peekLength() <= firstLeft\n      ) {\n        firstLeft -= thisIter.peekLength();\n        ops.push(thisIter.next());\n      }\n      if (firstOther.retain - firstLeft > 0) {\n        otherIter.next(firstOther.retain - firstLeft);\n      }\n    }\n    const delta = new Delta(ops);\n    while (thisIter.hasNext() || otherIter.hasNext()) {\n      if (otherIter.peekType() === 'insert') {\n        delta.push(otherIter.next());\n      } else if (thisIter.peekType() === 'delete') {\n        delta.push(thisIter.next());\n      } else {\n        const length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n        const thisOp = thisIter.next(length);\n        const otherOp = otherIter.next(length);\n        if (otherOp.retain) {\n          const newOp: Op = {};\n          if (typeof thisOp.retain === 'number') {\n            newOp.retain =\n              typeof otherOp.retain === 'number' ? length : otherOp.retain;\n          } else {\n            if (typeof otherOp.retain === 'number') {\n              if (thisOp.retain == null) {\n                newOp.insert = thisOp.insert;\n              } else {\n                newOp.retain = thisOp.retain;\n              }\n            } else {\n              const action = thisOp.retain == null ? 'insert' : 'retain';\n              const [embedType, thisData, otherData] = getEmbedTypeAndData(\n                thisOp[action],\n                otherOp.retain,\n              );\n              const handler = Delta.getHandler(embedType);\n              newOp[action] = {\n                [embedType]: handler.compose(\n                  thisData,\n                  otherData,\n                  action === 'retain',\n                ),\n              };\n            }\n          }\n          // Preserve null when composing with a retain, otherwise remove it for inserts\n          const attributes = AttributeMap.compose(\n            thisOp.attributes,\n            otherOp.attributes,\n            typeof thisOp.retain === 'number',\n          );\n          if (attributes) {\n            newOp.attributes = attributes;\n          }\n          delta.push(newOp);\n\n          // Optimization if rest of other is just retain\n          if (\n            !otherIter.hasNext() &&\n            isEqual(delta.ops[delta.ops.length - 1], newOp)\n          ) {\n            const rest = new Delta(thisIter.rest());\n            return delta.concat(rest).chop();\n          }\n\n          // Other op should be delete, we could be an insert or retain\n          // Insert + delete cancels out\n        } else if (\n          typeof otherOp.delete === 'number' &&\n          (typeof thisOp.retain === 'number' ||\n            (typeof thisOp.retain === 'object' && thisOp.retain !== null))\n        ) {\n          delta.push(otherOp);\n        }\n      }\n    }\n    return delta.chop();\n  }\n\n  concat(other: Delta): Delta {\n    const delta = new Delta(this.ops.slice());\n    if (other.ops.length > 0) {\n      delta.push(other.ops[0]);\n      delta.ops = delta.ops.concat(other.ops.slice(1));\n    }\n    return delta;\n  }\n\n  diff(other: Delta, cursor?: number | diff.CursorInfo): Delta {\n    if (this.ops === other.ops) {\n      return new Delta();\n    }\n    const strings = [this, other].map((delta) => {\n      return delta\n        .map((op) => {\n          if (op.insert != null) {\n            return typeof op.insert === 'string' ? op.insert : NULL_CHARACTER;\n          }\n          const prep = delta === other ? 'on' : 'with';\n          throw new Error('diff() called ' + prep + ' non-document');\n        })\n        .join('');\n    });\n    const retDelta = new Delta();\n    const diffResult = diff(strings[0], strings[1], cursor, true);\n    const thisIter = new OpIterator(this.ops);\n    const otherIter = new OpIterator(other.ops);\n    diffResult.forEach((component: diff.Diff) => {\n      let length = component[1].length;\n      while (length > 0) {\n        let opLength = 0;\n        switch (component[0]) {\n          case diff.INSERT:\n            opLength = Math.min(otherIter.peekLength(), length);\n            retDelta.push(otherIter.next(opLength));\n            break;\n          case diff.DELETE:\n            opLength = Math.min(length, thisIter.peekLength());\n            thisIter.next(opLength);\n            retDelta.delete(opLength);\n            break;\n          case diff.EQUAL:\n            opLength = Math.min(\n              thisIter.peekLength(),\n              otherIter.peekLength(),\n              length,\n            );\n            const thisOp = thisIter.next(opLength);\n            const otherOp = otherIter.next(opLength);\n            if (isEqual(thisOp.insert, otherOp.insert)) {\n              retDelta.retain(\n                opLength,\n                AttributeMap.diff(thisOp.attributes, otherOp.attributes),\n              );\n            } else {\n              retDelta.push(otherOp).delete(opLength);\n            }\n            break;\n        }\n        length -= opLength;\n      }\n    });\n    return retDelta.chop();\n  }\n\n  eachLine(\n    predicate: (\n      line: Delta,\n      attributes: AttributeMap,\n      index: number,\n    ) => boolean | void,\n    newline = '\\n',\n  ): void {\n    const iter = new OpIterator(this.ops);\n    let line = new Delta();\n    let i = 0;\n    while (iter.hasNext()) {\n      if (iter.peekType() !== 'insert') {\n        return;\n      }\n      const thisOp = iter.peek();\n      const start = Op.length(thisOp) - iter.peekLength();\n      const index =\n        typeof thisOp.insert === 'string'\n          ? thisOp.insert.indexOf(newline, start) - start\n          : -1;\n      if (index < 0) {\n        line.push(iter.next());\n      } else if (index > 0) {\n        line.push(iter.next(index));\n      } else {\n        if (predicate(line, iter.next(1).attributes || {}, i) === false) {\n          return;\n        }\n        i += 1;\n        line = new Delta();\n      }\n    }\n    if (line.length() > 0) {\n      predicate(line, {}, i);\n    }\n  }\n\n  invert(base: Delta): Delta {\n    const inverted = new Delta();\n    this.reduce((baseIndex, op) => {\n      if (op.insert) {\n        inverted.delete(Op.length(op));\n      } else if (typeof op.retain === 'number' && op.attributes == null) {\n        inverted.retain(op.retain);\n        return baseIndex + op.retain;\n      } else if (op.delete || typeof op.retain === 'number') {\n        const length = (op.delete || op.retain) as number;\n        const slice = base.slice(baseIndex, baseIndex + length);\n        slice.forEach((baseOp) => {\n          if (op.delete) {\n            inverted.push(baseOp);\n          } else if (op.retain && op.attributes) {\n            inverted.retain(\n              Op.length(baseOp),\n              AttributeMap.invert(op.attributes, baseOp.attributes),\n            );\n          }\n        });\n        return baseIndex + length;\n      } else if (typeof op.retain === 'object' && op.retain !== null) {\n        const slice = base.slice(baseIndex, baseIndex + 1);\n        const baseOp = new OpIterator(slice.ops).next();\n        const [embedType, opData, baseOpData] = getEmbedTypeAndData(\n          op.retain,\n          baseOp.insert,\n        );\n        const handler = Delta.getHandler(embedType);\n        inverted.retain(\n          { [embedType]: handler.invert(opData, baseOpData) },\n          AttributeMap.invert(op.attributes, baseOp.attributes),\n        );\n        return baseIndex + 1;\n      }\n      return baseIndex;\n    }, 0);\n    return inverted.chop();\n  }\n\n  transform(index: number, priority?: boolean): number;\n  transform(other: Delta, priority?: boolean): Delta;\n  transform(arg: number | Delta, priority = false): typeof arg {\n    priority = !!priority;\n    if (typeof arg === 'number') {\n      return this.transformPosition(arg, priority);\n    }\n    const other: Delta = arg;\n    const thisIter = new OpIterator(this.ops);\n    const otherIter = new OpIterator(other.ops);\n    const delta = new Delta();\n    while (thisIter.hasNext() || otherIter.hasNext()) {\n      if (\n        thisIter.peekType() === 'insert' &&\n        (priority || otherIter.peekType() !== 'insert')\n      ) {\n        delta.retain(Op.length(thisIter.next()));\n      } else if (otherIter.peekType() === 'insert') {\n        delta.push(otherIter.next());\n      } else {\n        const length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n        const thisOp = thisIter.next(length);\n        const otherOp = otherIter.next(length);\n        if (thisOp.delete) {\n          // Our delete either makes their delete redundant or removes their retain\n          continue;\n        } else if (otherOp.delete) {\n          delta.push(otherOp);\n        } else {\n          const thisData = thisOp.retain;\n          const otherData = otherOp.retain;\n          let transformedData: Op['retain'] =\n            typeof otherData === 'object' && otherData !== null\n              ? otherData\n              : length;\n          if (\n            typeof thisData === 'object' &&\n            thisData !== null &&\n            typeof otherData === 'object' &&\n            otherData !== null\n          ) {\n            const embedType = Object.keys(thisData)[0];\n            if (embedType === Object.keys(otherData)[0]) {\n              const handler = Delta.getHandler(embedType);\n              if (handler) {\n                transformedData = {\n                  [embedType]: handler.transform(\n                    thisData[embedType],\n                    otherData[embedType],\n                    priority,\n                  ),\n                };\n              }\n            }\n          }\n\n          // We retain either their retain or insert\n          delta.retain(\n            transformedData,\n            AttributeMap.transform(\n              thisOp.attributes,\n              otherOp.attributes,\n              priority,\n            ),\n          );\n        }\n      }\n    }\n    return delta.chop();\n  }\n\n  transformPosition(index: number, priority = false): number {\n    priority = !!priority;\n    const thisIter = new OpIterator(this.ops);\n    let offset = 0;\n    while (thisIter.hasNext() && offset <= index) {\n      const length = thisIter.peekLength();\n      const nextType = thisIter.peekType();\n      thisIter.next();\n      if (nextType === 'delete') {\n        index -= Math.min(length, index - offset);\n        continue;\n      } else if (nextType === 'insert' && (offset < index || !priority)) {\n        index += length;\n      }\n      offset += length;\n    }\n    return index;\n  }\n}\n\nexport default Delta;\n\nexport { Op, OpIterator, AttributeMap };\n\nif (typeof module === 'object') {\n  module.exports = Delta;\n  module.exports.default = Delta;\n}\n", "'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n", "/**\n * Created by Tivie on 13-07-2015.\n */\n\nfunction getDefaultOpts (simple) {\n  'use strict';\n\n  var defaultOptions = {\n    omitExtraWLInCodeBlocks: {\n      defaultValue: false,\n      describe: 'Omit the default extra whiteline added to code blocks',\n      type: 'boolean'\n    },\n    noHeaderId: {\n      defaultValue: false,\n      describe: 'Turn on/off generated header id',\n      type: 'boolean'\n    },\n    prefixHeaderId: {\n      defaultValue: false,\n      describe: 'Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic \\'section-\\' prefix',\n      type: 'string'\n    },\n    rawPrefixHeaderId: {\n      defaultValue: false,\n      describe: 'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the \" char is used in the prefix)',\n      type: 'boolean'\n    },\n    ghCompatibleHeaderId: {\n      defaultValue: false,\n      describe: 'Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)',\n      type: 'boolean'\n    },\n    rawHeaderId: {\n      defaultValue: false,\n      describe: 'Remove only spaces, \\' and \" from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids',\n      type: 'boolean'\n    },\n    headerLevelStart: {\n      defaultValue: false,\n      describe: 'The header blocks level start',\n      type: 'integer'\n    },\n    parseImgDimensions: {\n      defaultValue: false,\n      describe: 'Turn on/off image dimension parsing',\n      type: 'boolean'\n    },\n    simplifiedAutoLink: {\n      defaultValue: false,\n      describe: 'Turn on/off GFM autolink style',\n      type: 'boolean'\n    },\n    excludeTrailingPunctuationFromURLs: {\n      defaultValue: false,\n      describe: 'Excludes trailing punctuation from links generated with autoLinking',\n      type: 'boolean'\n    },\n    literalMidWordUnderscores: {\n      defaultValue: false,\n      describe: 'Parse midword underscores as literal underscores',\n      type: 'boolean'\n    },\n    literalMidWordAsterisks: {\n      defaultValue: false,\n      describe: 'Parse midword asterisks as literal asterisks',\n      type: 'boolean'\n    },\n    strikethrough: {\n      defaultValue: false,\n      describe: 'Turn on/off strikethrough support',\n      type: 'boolean'\n    },\n    tables: {\n      defaultValue: false,\n      describe: 'Turn on/off tables support',\n      type: 'boolean'\n    },\n    tablesHeaderId: {\n      defaultValue: false,\n      describe: 'Add an id to table headers',\n      type: 'boolean'\n    },\n    ghCodeBlocks: {\n      defaultValue: true,\n      describe: 'Turn on/off GFM fenced code blocks support',\n      type: 'boolean'\n    },\n    tasklists: {\n      defaultValue: false,\n      describe: 'Turn on/off GFM tasklist support',\n      type: 'boolean'\n    },\n    smoothLivePreview: {\n      defaultValue: false,\n      describe: 'Prevents weird effects in live previews due to incomplete input',\n      type: 'boolean'\n    },\n    smartIndentationFix: {\n      defaultValue: false,\n      describe: 'Tries to smartly fix indentation in es6 strings',\n      type: 'boolean'\n    },\n    disableForced4SpacesIndentedSublists: {\n      defaultValue: false,\n      describe: 'Disables the requirement of indenting nested sublists by 4 spaces',\n      type: 'boolean'\n    },\n    simpleLineBreaks: {\n      defaultValue: false,\n      describe: 'Parses simple line breaks as <br> (GFM Style)',\n      type: 'boolean'\n    },\n    requireSpaceBeforeHeadingText: {\n      defaultValue: false,\n      describe: 'Makes adding a space between `#` and the header text mandatory (GFM Style)',\n      type: 'boolean'\n    },\n    ghMentions: {\n      defaultValue: false,\n      describe: 'Enables github @mentions',\n      type: 'boolean'\n    },\n    ghMentionsLink: {\n      defaultValue: 'https://github.com/{u}',\n      describe: 'Changes the link generated by @mentions. Only applies if ghMentions option is enabled.',\n      type: 'string'\n    },\n    encodeEmails: {\n      defaultValue: true,\n      describe: 'Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities',\n      type: 'boolean'\n    },\n    openLinksInNewWindow: {\n      defaultValue: false,\n      describe: 'Open all links in new windows',\n      type: 'boolean'\n    },\n    backslashEscapesHTMLTags: {\n      defaultValue: false,\n      describe: 'Support for HTML Tag escaping. ex: \\<div>foo\\</div>',\n      type: 'boolean'\n    },\n    emoji: {\n      defaultValue: false,\n      describe: 'Enable emoji support. Ex: `this is a :smile: emoji`',\n      type: 'boolean'\n    },\n    underline: {\n      defaultValue: false,\n      describe: 'Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`',\n      type: 'boolean'\n    },\n    ellipsis: {\n      defaultValue: true,\n      describe: 'Replaces three dots with the ellipsis unicode character',\n      type: 'boolean'\n    },\n    completeHTMLDocument: {\n      defaultValue: false,\n      describe: 'Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags',\n      type: 'boolean'\n    },\n    metadata: {\n      defaultValue: false,\n      describe: 'Enable support for document metadata (defined at the top of the document between `«««` and `»»»` or between `---` and `---`).',\n      type: 'boolean'\n    },\n    splitAdjacentBlockquotes: {\n      defaultValue: false,\n      describe: 'Split adjacent blockquote blocks',\n      type: 'boolean'\n    }\n  };\n  if (simple === false) {\n    return JSON.parse(JSON.stringify(defaultOptions));\n  }\n  var ret = {};\n  for (var opt in defaultOptions) {\n    if (defaultOptions.hasOwnProperty(opt)) {\n      ret[opt] = defaultOptions[opt].defaultValue;\n    }\n  }\n  return ret;\n}\n\nfunction allOptionsOn () {\n  'use strict';\n  var options = getDefaultOpts(true),\n      ret = {};\n  for (var opt in options) {\n    if (options.hasOwnProperty(opt)) {\n      ret[opt] = true;\n    }\n  }\n  return ret;\n}\n", "/**\n * Created by Tivie on 06-01-2015.\n */\n\n// Private properties\nvar showdown = {},\n    parsers = {},\n    extensions = {},\n    globalOptions = getDefaultOpts(true),\n    setFlavor = 'vanilla',\n    flavor = {\n      github: {\n        omitExtraWLInCodeBlocks:              true,\n        simplifiedAutoLink:                   true,\n        excludeTrailingPunctuationFromURLs:   true,\n        literalMidWordUnderscores:            true,\n        strikethrough:                        true,\n        tables:                               true,\n        tablesHeaderId:                       true,\n        ghCodeBlocks:                         true,\n        tasklists:                            true,\n        disableForced4SpacesIndentedSublists: true,\n        simpleLineBreaks:                     true,\n        requireSpaceBeforeHeadingText:        true,\n        ghCompatibleHeaderId:                 true,\n        ghMentions:                           true,\n        backslashEscapesHTMLTags:             true,\n        emoji:                                true,\n        splitAdjacentBlockquotes:             true\n      },\n      original: {\n        noHeaderId:                           true,\n        ghCodeBlocks:                         false\n      },\n      ghost: {\n        omitExtraWLInCodeBlocks:              true,\n        parseImgDimensions:                   true,\n        simplifiedAutoLink:                   true,\n        excludeTrailingPunctuationFromURLs:   true,\n        literalMidWordUnderscores:            true,\n        strikethrough:                        true,\n        tables:                               true,\n        tablesHeaderId:                       true,\n        ghCodeBlocks:                         true,\n        tasklists:                            true,\n        smoothLivePreview:                    true,\n        simpleLineBreaks:                     true,\n        requireSpaceBeforeHeadingText:        true,\n        ghMentions:                           false,\n        encodeEmails:                         true\n      },\n      vanilla: getDefaultOpts(true),\n      allOn: allOptionsOn()\n    };\n\n/**\n * helper namespace\n * @type {{}}\n */\nshowdown.helper = {};\n\n/**\n * TODO LEGACY SUPPORT CODE\n * @type {{}}\n */\nshowdown.extensions = {};\n\n/**\n * Set a global option\n * @static\n * @param {string} key\n * @param {*} value\n * @returns {showdown}\n */\nshowdown.setOption = function (key, value) {\n  'use strict';\n  globalOptions[key] = value;\n  return this;\n};\n\n/**\n * Get a global option\n * @static\n * @param {string} key\n * @returns {*}\n */\nshowdown.getOption = function (key) {\n  'use strict';\n  return globalOptions[key];\n};\n\n/**\n * Get the global options\n * @static\n * @returns {{}}\n */\nshowdown.getOptions = function () {\n  'use strict';\n  return globalOptions;\n};\n\n/**\n * Reset global options to the default values\n * @static\n */\nshowdown.resetOptions = function () {\n  'use strict';\n  globalOptions = getDefaultOpts(true);\n};\n\n/**\n * Set the flavor showdown should use as default\n * @param {string} name\n */\nshowdown.setFlavor = function (name) {\n  'use strict';\n  if (!flavor.hasOwnProperty(name)) {\n    throw Error(name + ' flavor was not found');\n  }\n  showdown.resetOptions();\n  var preset = flavor[name];\n  setFlavor = name;\n  for (var option in preset) {\n    if (preset.hasOwnProperty(option)) {\n      globalOptions[option] = preset[option];\n    }\n  }\n};\n\n/**\n * Get the currently set flavor\n * @returns {string}\n */\nshowdown.getFlavor = function () {\n  'use strict';\n  return setFlavor;\n};\n\n/**\n * Get the options of a specified flavor. Returns undefined if the flavor was not found\n * @param {string} name Name of the flavor\n * @returns {{}|undefined}\n */\nshowdown.getFlavorOptions = function (name) {\n  'use strict';\n  if (flavor.hasOwnProperty(name)) {\n    return flavor[name];\n  }\n};\n\n/**\n * Get the default options\n * @static\n * @param {boolean} [simple=true]\n * @returns {{}}\n */\nshowdown.getDefaultOptions = function (simple) {\n  'use strict';\n  return getDefaultOpts(simple);\n};\n\n/**\n * Get or set a subParser\n *\n * subParser(name)       - Get a registered subParser\n * subParser(name, func) - Register a subParser\n * @static\n * @param {string} name\n * @param {function} [func]\n * @returns {*}\n */\nshowdown.subParser = function (name, func) {\n  'use strict';\n  if (showdown.helper.isString(name)) {\n    if (typeof func !== 'undefined') {\n      parsers[name] = func;\n    } else {\n      if (parsers.hasOwnProperty(name)) {\n        return parsers[name];\n      } else {\n        throw Error('SubParser named ' + name + ' not registered!');\n      }\n    }\n  }\n};\n\n/**\n * Gets or registers an extension\n * @static\n * @param {string} name\n * @param {object|object[]|function=} ext\n * @returns {*}\n */\nshowdown.extension = function (name, ext) {\n  'use strict';\n\n  if (!showdown.helper.isString(name)) {\n    throw Error('Extension \\'name\\' must be a string');\n  }\n\n  name = showdown.helper.stdExtName(name);\n\n  // Getter\n  if (showdown.helper.isUndefined(ext)) {\n    if (!extensions.hasOwnProperty(name)) {\n      throw Error('Extension named ' + name + ' is not registered!');\n    }\n    return extensions[name];\n\n    // Setter\n  } else {\n    // Expand extension if it's wrapped in a function\n    if (typeof ext === 'function') {\n      ext = ext();\n    }\n\n    // Ensure extension is an array\n    if (!showdown.helper.isArray(ext)) {\n      ext = [ext];\n    }\n\n    var validExtension = validate(ext, name);\n\n    if (validExtension.valid) {\n      extensions[name] = ext;\n    } else {\n      throw Error(validExtension.error);\n    }\n  }\n};\n\n/**\n * Gets all extensions registered\n * @returns {{}}\n */\nshowdown.getAllExtensions = function () {\n  'use strict';\n  return extensions;\n};\n\n/**\n * Remove an extension\n * @param {string} name\n */\nshowdown.removeExtension = function (name) {\n  'use strict';\n  delete extensions[name];\n};\n\n/**\n * Removes all extensions\n */\nshowdown.resetExtensions = function () {\n  'use strict';\n  extensions = {};\n};\n\n/**\n * Validate extension\n * @param {array} extension\n * @param {string} name\n * @returns {{valid: boolean, error: string}}\n */\nfunction validate (extension, name) {\n  'use strict';\n\n  var errMsg = (name) ? 'Error in ' + name + ' extension->' : 'Error in unnamed extension',\n      ret = {\n        valid: true,\n        error: ''\n      };\n\n  if (!showdown.helper.isArray(extension)) {\n    extension = [extension];\n  }\n\n  for (var i = 0; i < extension.length; ++i) {\n    var baseMsg = errMsg + ' sub-extension ' + i + ': ',\n        ext = extension[i];\n    if (typeof ext !== 'object') {\n      ret.valid = false;\n      ret.error = baseMsg + 'must be an object, but ' + typeof ext + ' given';\n      return ret;\n    }\n\n    if (!showdown.helper.isString(ext.type)) {\n      ret.valid = false;\n      ret.error = baseMsg + 'property \"type\" must be a string, but ' + typeof ext.type + ' given';\n      return ret;\n    }\n\n    var type = ext.type = ext.type.toLowerCase();\n\n    // normalize extension type\n    if (type === 'language') {\n      type = ext.type = 'lang';\n    }\n\n    if (type === 'html') {\n      type = ext.type = 'output';\n    }\n\n    if (type !== 'lang' && type !== 'output' && type !== 'listener') {\n      ret.valid = false;\n      ret.error = baseMsg + 'type ' + type + ' is not recognized. Valid values: \"lang/language\", \"output/html\" or \"listener\"';\n      return ret;\n    }\n\n    if (type === 'listener') {\n      if (showdown.helper.isUndefined(ext.listeners)) {\n        ret.valid = false;\n        ret.error = baseMsg + '. Extensions of type \"listener\" must have a property called \"listeners\"';\n        return ret;\n      }\n    } else {\n      if (showdown.helper.isUndefined(ext.filter) && showdown.helper.isUndefined(ext.regex)) {\n        ret.valid = false;\n        ret.error = baseMsg + type + ' extensions must define either a \"regex\" property or a \"filter\" method';\n        return ret;\n      }\n    }\n\n    if (ext.listeners) {\n      if (typeof ext.listeners !== 'object') {\n        ret.valid = false;\n        ret.error = baseMsg + '\"listeners\" property must be an object but ' + typeof ext.listeners + ' given';\n        return ret;\n      }\n      for (var ln in ext.listeners) {\n        if (ext.listeners.hasOwnProperty(ln)) {\n          if (typeof ext.listeners[ln] !== 'function') {\n            ret.valid = false;\n            ret.error = baseMsg + '\"listeners\" property must be an hash of [event name]: [callback]. listeners.' + ln +\n              ' must be a function but ' + typeof ext.listeners[ln] + ' given';\n            return ret;\n          }\n        }\n      }\n    }\n\n    if (ext.filter) {\n      if (typeof ext.filter !== 'function') {\n        ret.valid = false;\n        ret.error = baseMsg + '\"filter\" must be a function, but ' + typeof ext.filter + ' given';\n        return ret;\n      }\n    } else if (ext.regex) {\n      if (showdown.helper.isString(ext.regex)) {\n        ext.regex = new RegExp(ext.regex, 'g');\n      }\n      if (!(ext.regex instanceof RegExp)) {\n        ret.valid = false;\n        ret.error = baseMsg + '\"regex\" property must either be a string or a RegExp object, but ' + typeof ext.regex + ' given';\n        return ret;\n      }\n      if (showdown.helper.isUndefined(ext.replace)) {\n        ret.valid = false;\n        ret.error = baseMsg + '\"regex\" extensions must implement a replace string or function';\n        return ret;\n      }\n    }\n  }\n  return ret;\n}\n\n/**\n * Validate extension\n * @param {object} ext\n * @returns {boolean}\n */\nshowdown.validateExtension = function (ext) {\n  'use strict';\n\n  var validateExtension = validate(ext, null);\n  if (!validateExtension.valid) {\n    console.warn(validateExtension.error);\n    return false;\n  }\n  return true;\n};\n", "/**\n * showdownjs helper functions\n */\n\nif (!showdown.hasOwnProperty('helper')) {\n  showdown.helper = {};\n}\n\n/**\n * Check if var is string\n * @static\n * @param {string} a\n * @returns {boolean}\n */\nshowdown.helper.isString = function (a) {\n  'use strict';\n  return (typeof a === 'string' || a instanceof String);\n};\n\n/**\n * Check if var is a function\n * @static\n * @param {*} a\n * @returns {boolean}\n */\nshowdown.helper.isFunction = function (a) {\n  'use strict';\n  var getType = {};\n  return a && getType.toString.call(a) === '[object Function]';\n};\n\n/**\n * isArray helper function\n * @static\n * @param {*} a\n * @returns {boolean}\n */\nshowdown.helper.isArray = function (a) {\n  'use strict';\n  return Array.isArray(a);\n};\n\n/**\n * Check if value is undefined\n * @static\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n */\nshowdown.helper.isUndefined = function (value) {\n  'use strict';\n  return typeof value === 'undefined';\n};\n\n/**\n * ForEach helper function\n * Iterates over Arrays and Objects (own properties only)\n * @static\n * @param {*} obj\n * @param {function} callback Accepts 3 params: 1. value, 2. key, 3. the original array/object\n */\nshowdown.helper.forEach = function (obj, callback) {\n  'use strict';\n  // check if obj is defined\n  if (showdown.helper.isUndefined(obj)) {\n    throw new Error('obj param is required');\n  }\n\n  if (showdown.helper.isUndefined(callback)) {\n    throw new Error('callback param is required');\n  }\n\n  if (!showdown.helper.isFunction(callback)) {\n    throw new Error('callback param must be a function/closure');\n  }\n\n  if (typeof obj.forEach === 'function') {\n    obj.forEach(callback);\n  } else if (showdown.helper.isArray(obj)) {\n    for (var i = 0; i < obj.length; i++) {\n      callback(obj[i], i, obj);\n    }\n  } else if (typeof (obj) === 'object') {\n    for (var prop in obj) {\n      if (obj.hasOwnProperty(prop)) {\n        callback(obj[prop], prop, obj);\n      }\n    }\n  } else {\n    throw new Error('obj does not seem to be an array or an iterable object');\n  }\n};\n\n/**\n * Standardidize extension name\n * @static\n * @param {string} s extension name\n * @returns {string}\n */\nshowdown.helper.stdExtName = function (s) {\n  'use strict';\n  return s.replace(/[_?*+\\/\\\\.^-]/g, '').replace(/\\s/g, '').toLowerCase();\n};\n\nfunction escapeCharactersCallback (wholeMatch, m1) {\n  'use strict';\n  var charCodeToEscape = m1.charCodeAt(0);\n  return '¨E' + charCodeToEscape + 'E';\n}\n\n/**\n * Callback used to escape characters when passing through String.replace\n * @static\n * @param {string} wholeMatch\n * @param {string} m1\n * @returns {string}\n */\nshowdown.helper.escapeCharactersCallback = escapeCharactersCallback;\n\n/**\n * Escape characters in a string\n * @static\n * @param {string} text\n * @param {string} charsToEscape\n * @param {boolean} afterBackslash\n * @returns {XML|string|void|*}\n */\nshowdown.helper.escapeCharacters = function (text, charsToEscape, afterBackslash) {\n  'use strict';\n  // First we have to escape the escape characters so that\n  // we can build a character class out of them\n  var regexString = '([' + charsToEscape.replace(/([\\[\\]\\\\])/g, '\\\\$1') + '])';\n\n  if (afterBackslash) {\n    regexString = '\\\\\\\\' + regexString;\n  }\n\n  var regex = new RegExp(regexString, 'g');\n  text = text.replace(regex, escapeCharactersCallback);\n\n  return text;\n};\n\n/**\n * Unescape HTML entities\n * @param txt\n * @returns {string}\n */\nshowdown.helper.unescapeHTMLEntities = function (txt) {\n  'use strict';\n\n  return txt\n    .replace(/&quot;/g, '\"')\n    .replace(/&lt;/g, '<')\n    .replace(/&gt;/g, '>')\n    .replace(/&amp;/g, '&');\n};\n\nvar rgxFindMatchPos = function (str, left, right, flags) {\n  'use strict';\n  var f = flags || '',\n      g = f.indexOf('g') > -1,\n      x = new RegExp(left + '|' + right, 'g' + f.replace(/g/g, '')),\n      l = new RegExp(left, f.replace(/g/g, '')),\n      pos = [],\n      t, s, m, start, end;\n\n  do {\n    t = 0;\n    while ((m = x.exec(str))) {\n      if (l.test(m[0])) {\n        if (!(t++)) {\n          s = x.lastIndex;\n          start = s - m[0].length;\n        }\n      } else if (t) {\n        if (!--t) {\n          end = m.index + m[0].length;\n          var obj = {\n            left: {start: start, end: s},\n            match: {start: s, end: m.index},\n            right: {start: m.index, end: end},\n            wholeMatch: {start: start, end: end}\n          };\n          pos.push(obj);\n          if (!g) {\n            return pos;\n          }\n        }\n      }\n    }\n  } while (t && (x.lastIndex = s));\n\n  return pos;\n};\n\n/**\n * matchRecursiveRegExp\n *\n * (c) 2007 Steven Levithan <stevenlevithan.com>\n * MIT License\n *\n * Accepts a string to search, a left and right format delimiter\n * as regex patterns, and optional regex flags. Returns an array\n * of matches, allowing nested instances of left/right delimiters.\n * Use the \"g\" flag to return all matches, otherwise only the\n * first is returned. Be careful to ensure that the left and\n * right format delimiters produce mutually exclusive matches.\n * Backreferences are not supported within the right delimiter\n * due to how it is internally combined with the left delimiter.\n * When matching strings whose format delimiters are unbalanced\n * to the left or right, the output is intentionally as a\n * conventional regex library with recursion support would\n * produce, e.g. \"<<x>\" and \"<x>>\" both produce [\"x\"] when using\n * \"<\" and \">\" as the delimiters (both strings contain a single,\n * balanced instance of \"<x>\").\n *\n * examples:\n * matchRecursiveRegExp(\"test\", \"\\\\(\", \"\\\\)\")\n * returns: []\n * matchRecursiveRegExp(\"<t<<e>><s>>t<>\", \"<\", \">\", \"g\")\n * returns: [\"t<<e>><s>\", \"\"]\n * matchRecursiveRegExp(\"<div id=\\\"x\\\">test</div>\", \"<div\\\\b[^>]*>\", \"</div>\", \"gi\")\n * returns: [\"test\"]\n */\nshowdown.helper.matchRecursiveRegExp = function (str, left, right, flags) {\n  'use strict';\n\n  var matchPos = rgxFindMatchPos (str, left, right, flags),\n      results = [];\n\n  for (var i = 0; i < matchPos.length; ++i) {\n    results.push([\n      str.slice(matchPos[i].wholeMatch.start, matchPos[i].wholeMatch.end),\n      str.slice(matchPos[i].match.start, matchPos[i].match.end),\n      str.slice(matchPos[i].left.start, matchPos[i].left.end),\n      str.slice(matchPos[i].right.start, matchPos[i].right.end)\n    ]);\n  }\n  return results;\n};\n\n/**\n *\n * @param {string} str\n * @param {string|function} replacement\n * @param {string} left\n * @param {string} right\n * @param {string} flags\n * @returns {string}\n */\nshowdown.helper.replaceRecursiveRegExp = function (str, replacement, left, right, flags) {\n  'use strict';\n\n  if (!showdown.helper.isFunction(replacement)) {\n    var repStr = replacement;\n    replacement = function () {\n      return repStr;\n    };\n  }\n\n  var matchPos = rgxFindMatchPos(str, left, right, flags),\n      finalStr = str,\n      lng = matchPos.length;\n\n  if (lng > 0) {\n    var bits = [];\n    if (matchPos[0].wholeMatch.start !== 0) {\n      bits.push(str.slice(0, matchPos[0].wholeMatch.start));\n    }\n    for (var i = 0; i < lng; ++i) {\n      bits.push(\n        replacement(\n          str.slice(matchPos[i].wholeMatch.start, matchPos[i].wholeMatch.end),\n          str.slice(matchPos[i].match.start, matchPos[i].match.end),\n          str.slice(matchPos[i].left.start, matchPos[i].left.end),\n          str.slice(matchPos[i].right.start, matchPos[i].right.end)\n        )\n      );\n      if (i < lng - 1) {\n        bits.push(str.slice(matchPos[i].wholeMatch.end, matchPos[i + 1].wholeMatch.start));\n      }\n    }\n    if (matchPos[lng - 1].wholeMatch.end < str.length) {\n      bits.push(str.slice(matchPos[lng - 1].wholeMatch.end));\n    }\n    finalStr = bits.join('');\n  }\n  return finalStr;\n};\n\n/**\n * Returns the index within the passed String object of the first occurrence of the specified regex,\n * starting the search at fromIndex. Returns -1 if the value is not found.\n *\n * @param {string} str string to search\n * @param {RegExp} regex Regular expression to search\n * @param {int} [fromIndex = 0] Index to start the search\n * @returns {Number}\n * @throws InvalidArgumentError\n */\nshowdown.helper.regexIndexOf = function (str, regex, fromIndex) {\n  'use strict';\n  if (!showdown.helper.isString(str)) {\n    throw 'InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string';\n  }\n  if (regex instanceof RegExp === false) {\n    throw 'InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp';\n  }\n  var indexOf = str.substring(fromIndex || 0).search(regex);\n  return (indexOf >= 0) ? (indexOf + (fromIndex || 0)) : indexOf;\n};\n\n/**\n * Splits the passed string object at the defined index, and returns an array composed of the two substrings\n * @param {string} str string to split\n * @param {int} index index to split string at\n * @returns {[string,string]}\n * @throws InvalidArgumentError\n */\nshowdown.helper.splitAtIndex = function (str, index) {\n  'use strict';\n  if (!showdown.helper.isString(str)) {\n    throw 'InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string';\n  }\n  return [str.substring(0, index), str.substring(index)];\n};\n\n/**\n * Obfuscate an e-mail address through the use of Character Entities,\n * transforming ASCII characters into their equivalent decimal or hex entities.\n *\n * Since it has a random component, subsequent calls to this function produce different results\n *\n * @param {string} mail\n * @returns {string}\n */\nshowdown.helper.encodeEmailAddress = function (mail) {\n  'use strict';\n  var encode = [\n    function (ch) {\n      return '&#' + ch.charCodeAt(0) + ';';\n    },\n    function (ch) {\n      return '&#x' + ch.charCodeAt(0).toString(16) + ';';\n    },\n    function (ch) {\n      return ch;\n    }\n  ];\n\n  mail = mail.replace(/./g, function (ch) {\n    if (ch === '@') {\n      // this *must* be encoded. I insist.\n      ch = encode[Math.floor(Math.random() * 2)](ch);\n    } else {\n      var r = Math.random();\n      // roughly 10% raw, 45% hex, 45% dec\n      ch = (\n        r > 0.9 ? encode[2](ch) : r > 0.45 ? encode[1](ch) : encode[0](ch)\n      );\n    }\n    return ch;\n  });\n\n  return mail;\n};\n\n/**\n *\n * @param str\n * @param targetLength\n * @param padString\n * @returns {string}\n */\nshowdown.helper.padEnd = function padEnd (str, targetLength, padString) {\n  'use strict';\n  /*jshint bitwise: false*/\n  // eslint-disable-next-line space-infix-ops\n  targetLength = targetLength>>0; //floor if number or convert non-number to 0;\n  /*jshint bitwise: true*/\n  padString = String(padString || ' ');\n  if (str.length > targetLength) {\n    return String(str);\n  } else {\n    targetLength = targetLength - str.length;\n    if (targetLength > padString.length) {\n      padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed\n    }\n    return String(str) + padString.slice(0,targetLength);\n  }\n};\n\n/**\n * POLYFILLS\n */\n// use this instead of builtin is undefined for IE8 compatibility\nif (typeof (console) === 'undefined') {\n  console = {\n    warn: function (msg) {\n      'use strict';\n      alert(msg);\n    },\n    log: function (msg) {\n      'use strict';\n      alert(msg);\n    },\n    error: function (msg) {\n      'use strict';\n      throw msg;\n    }\n  };\n}\n\n/**\n * Common regexes.\n * We declare some common regexes to improve performance\n */\nshowdown.helper.regexes = {\n  asteriskDashAndColon: /([*_:~])/g\n};\n\n/**\n * EMOJIS LIST\n */\nshowdown.helper.emojis = {\n  '+1':'\\ud83d\\udc4d',\n  '-1':'\\ud83d\\udc4e',\n  '100':'\\ud83d\\udcaf',\n  '1234':'\\ud83d\\udd22',\n  '1st_place_medal':'\\ud83e\\udd47',\n  '2nd_place_medal':'\\ud83e\\udd48',\n  '3rd_place_medal':'\\ud83e\\udd49',\n  '8ball':'\\ud83c\\udfb1',\n  'a':'\\ud83c\\udd70\\ufe0f',\n  'ab':'\\ud83c\\udd8e',\n  'abc':'\\ud83d\\udd24',\n  'abcd':'\\ud83d\\udd21',\n  'accept':'\\ud83c\\ude51',\n  'aerial_tramway':'\\ud83d\\udea1',\n  'airplane':'\\u2708\\ufe0f',\n  'alarm_clock':'\\u23f0',\n  'alembic':'\\u2697\\ufe0f',\n  'alien':'\\ud83d\\udc7d',\n  'ambulance':'\\ud83d\\ude91',\n  'amphora':'\\ud83c\\udffa',\n  'anchor':'\\u2693\\ufe0f',\n  'angel':'\\ud83d\\udc7c',\n  'anger':'\\ud83d\\udca2',\n  'angry':'\\ud83d\\ude20',\n  'anguished':'\\ud83d\\ude27',\n  'ant':'\\ud83d\\udc1c',\n  'apple':'\\ud83c\\udf4e',\n  'aquarius':'\\u2652\\ufe0f',\n  'aries':'\\u2648\\ufe0f',\n  'arrow_backward':'\\u25c0\\ufe0f',\n  'arrow_double_down':'\\u23ec',\n  'arrow_double_up':'\\u23eb',\n  'arrow_down':'\\u2b07\\ufe0f',\n  'arrow_down_small':'\\ud83d\\udd3d',\n  'arrow_forward':'\\u25b6\\ufe0f',\n  'arrow_heading_down':'\\u2935\\ufe0f',\n  'arrow_heading_up':'\\u2934\\ufe0f',\n  'arrow_left':'\\u2b05\\ufe0f',\n  'arrow_lower_left':'\\u2199\\ufe0f',\n  'arrow_lower_right':'\\u2198\\ufe0f',\n  'arrow_right':'\\u27a1\\ufe0f',\n  'arrow_right_hook':'\\u21aa\\ufe0f',\n  'arrow_up':'\\u2b06\\ufe0f',\n  'arrow_up_down':'\\u2195\\ufe0f',\n  'arrow_up_small':'\\ud83d\\udd3c',\n  'arrow_upper_left':'\\u2196\\ufe0f',\n  'arrow_upper_right':'\\u2197\\ufe0f',\n  'arrows_clockwise':'\\ud83d\\udd03',\n  'arrows_counterclockwise':'\\ud83d\\udd04',\n  'art':'\\ud83c\\udfa8',\n  'articulated_lorry':'\\ud83d\\ude9b',\n  'artificial_satellite':'\\ud83d\\udef0',\n  'astonished':'\\ud83d\\ude32',\n  'athletic_shoe':'\\ud83d\\udc5f',\n  'atm':'\\ud83c\\udfe7',\n  'atom_symbol':'\\u269b\\ufe0f',\n  'avocado':'\\ud83e\\udd51',\n  'b':'\\ud83c\\udd71\\ufe0f',\n  'baby':'\\ud83d\\udc76',\n  'baby_bottle':'\\ud83c\\udf7c',\n  'baby_chick':'\\ud83d\\udc24',\n  'baby_symbol':'\\ud83d\\udebc',\n  'back':'\\ud83d\\udd19',\n  'bacon':'\\ud83e\\udd53',\n  'badminton':'\\ud83c\\udff8',\n  'baggage_claim':'\\ud83d\\udec4',\n  'baguette_bread':'\\ud83e\\udd56',\n  'balance_scale':'\\u2696\\ufe0f',\n  'balloon':'\\ud83c\\udf88',\n  'ballot_box':'\\ud83d\\uddf3',\n  'ballot_box_with_check':'\\u2611\\ufe0f',\n  'bamboo':'\\ud83c\\udf8d',\n  'banana':'\\ud83c\\udf4c',\n  'bangbang':'\\u203c\\ufe0f',\n  'bank':'\\ud83c\\udfe6',\n  'bar_chart':'\\ud83d\\udcca',\n  'barber':'\\ud83d\\udc88',\n  'baseball':'\\u26be\\ufe0f',\n  'basketball':'\\ud83c\\udfc0',\n  'basketball_man':'\\u26f9\\ufe0f',\n  'basketball_woman':'\\u26f9\\ufe0f&zwj;\\u2640\\ufe0f',\n  'bat':'\\ud83e\\udd87',\n  'bath':'\\ud83d\\udec0',\n  'bathtub':'\\ud83d\\udec1',\n  'battery':'\\ud83d\\udd0b',\n  'beach_umbrella':'\\ud83c\\udfd6',\n  'bear':'\\ud83d\\udc3b',\n  'bed':'\\ud83d\\udecf',\n  'bee':'\\ud83d\\udc1d',\n  'beer':'\\ud83c\\udf7a',\n  'beers':'\\ud83c\\udf7b',\n  'beetle':'\\ud83d\\udc1e',\n  'beginner':'\\ud83d\\udd30',\n  'bell':'\\ud83d\\udd14',\n  'bellhop_bell':'\\ud83d\\udece',\n  'bento':'\\ud83c\\udf71',\n  'biking_man':'\\ud83d\\udeb4',\n  'bike':'\\ud83d\\udeb2',\n  'biking_woman':'\\ud83d\\udeb4&zwj;\\u2640\\ufe0f',\n  'bikini':'\\ud83d\\udc59',\n  'biohazard':'\\u2623\\ufe0f',\n  'bird':'\\ud83d\\udc26',\n  'birthday':'\\ud83c\\udf82',\n  'black_circle':'\\u26ab\\ufe0f',\n  'black_flag':'\\ud83c\\udff4',\n  'black_heart':'\\ud83d\\udda4',\n  'black_joker':'\\ud83c\\udccf',\n  'black_large_square':'\\u2b1b\\ufe0f',\n  'black_medium_small_square':'\\u25fe\\ufe0f',\n  'black_medium_square':'\\u25fc\\ufe0f',\n  'black_nib':'\\u2712\\ufe0f',\n  'black_small_square':'\\u25aa\\ufe0f',\n  'black_square_button':'\\ud83d\\udd32',\n  'blonde_man':'\\ud83d\\udc71',\n  'blonde_woman':'\\ud83d\\udc71&zwj;\\u2640\\ufe0f',\n  'blossom':'\\ud83c\\udf3c',\n  'blowfish':'\\ud83d\\udc21',\n  'blue_book':'\\ud83d\\udcd8',\n  'blue_car':'\\ud83d\\ude99',\n  'blue_heart':'\\ud83d\\udc99',\n  'blush':'\\ud83d\\ude0a',\n  'boar':'\\ud83d\\udc17',\n  'boat':'\\u26f5\\ufe0f',\n  'bomb':'\\ud83d\\udca3',\n  'book':'\\ud83d\\udcd6',\n  'bookmark':'\\ud83d\\udd16',\n  'bookmark_tabs':'\\ud83d\\udcd1',\n  'books':'\\ud83d\\udcda',\n  'boom':'\\ud83d\\udca5',\n  'boot':'\\ud83d\\udc62',\n  'bouquet':'\\ud83d\\udc90',\n  'bowing_man':'\\ud83d\\ude47',\n  'bow_and_arrow':'\\ud83c\\udff9',\n  'bowing_woman':'\\ud83d\\ude47&zwj;\\u2640\\ufe0f',\n  'bowling':'\\ud83c\\udfb3',\n  'boxing_glove':'\\ud83e\\udd4a',\n  'boy':'\\ud83d\\udc66',\n  'bread':'\\ud83c\\udf5e',\n  'bride_with_veil':'\\ud83d\\udc70',\n  'bridge_at_night':'\\ud83c\\udf09',\n  'briefcase':'\\ud83d\\udcbc',\n  'broken_heart':'\\ud83d\\udc94',\n  'bug':'\\ud83d\\udc1b',\n  'building_construction':'\\ud83c\\udfd7',\n  'bulb':'\\ud83d\\udca1',\n  'bullettrain_front':'\\ud83d\\ude85',\n  'bullettrain_side':'\\ud83d\\ude84',\n  'burrito':'\\ud83c\\udf2f',\n  'bus':'\\ud83d\\ude8c',\n  'business_suit_levitating':'\\ud83d\\udd74',\n  'busstop':'\\ud83d\\ude8f',\n  'bust_in_silhouette':'\\ud83d\\udc64',\n  'busts_in_silhouette':'\\ud83d\\udc65',\n  'butterfly':'\\ud83e\\udd8b',\n  'cactus':'\\ud83c\\udf35',\n  'cake':'\\ud83c\\udf70',\n  'calendar':'\\ud83d\\udcc6',\n  'call_me_hand':'\\ud83e\\udd19',\n  'calling':'\\ud83d\\udcf2',\n  'camel':'\\ud83d\\udc2b',\n  'camera':'\\ud83d\\udcf7',\n  'camera_flash':'\\ud83d\\udcf8',\n  'camping':'\\ud83c\\udfd5',\n  'cancer':'\\u264b\\ufe0f',\n  'candle':'\\ud83d\\udd6f',\n  'candy':'\\ud83c\\udf6c',\n  'canoe':'\\ud83d\\udef6',\n  'capital_abcd':'\\ud83d\\udd20',\n  'capricorn':'\\u2651\\ufe0f',\n  'car':'\\ud83d\\ude97',\n  'card_file_box':'\\ud83d\\uddc3',\n  'card_index':'\\ud83d\\udcc7',\n  'card_index_dividers':'\\ud83d\\uddc2',\n  'carousel_horse':'\\ud83c\\udfa0',\n  'carrot':'\\ud83e\\udd55',\n  'cat':'\\ud83d\\udc31',\n  'cat2':'\\ud83d\\udc08',\n  'cd':'\\ud83d\\udcbf',\n  'chains':'\\u26d3',\n  'champagne':'\\ud83c\\udf7e',\n  'chart':'\\ud83d\\udcb9',\n  'chart_with_downwards_trend':'\\ud83d\\udcc9',\n  'chart_with_upwards_trend':'\\ud83d\\udcc8',\n  'checkered_flag':'\\ud83c\\udfc1',\n  'cheese':'\\ud83e\\uddc0',\n  'cherries':'\\ud83c\\udf52',\n  'cherry_blossom':'\\ud83c\\udf38',\n  'chestnut':'\\ud83c\\udf30',\n  'chicken':'\\ud83d\\udc14',\n  'children_crossing':'\\ud83d\\udeb8',\n  'chipmunk':'\\ud83d\\udc3f',\n  'chocolate_bar':'\\ud83c\\udf6b',\n  'christmas_tree':'\\ud83c\\udf84',\n  'church':'\\u26ea\\ufe0f',\n  'cinema':'\\ud83c\\udfa6',\n  'circus_tent':'\\ud83c\\udfaa',\n  'city_sunrise':'\\ud83c\\udf07',\n  'city_sunset':'\\ud83c\\udf06',\n  'cityscape':'\\ud83c\\udfd9',\n  'cl':'\\ud83c\\udd91',\n  'clamp':'\\ud83d\\udddc',\n  'clap':'\\ud83d\\udc4f',\n  'clapper':'\\ud83c\\udfac',\n  'classical_building':'\\ud83c\\udfdb',\n  'clinking_glasses':'\\ud83e\\udd42',\n  'clipboard':'\\ud83d\\udccb',\n  'clock1':'\\ud83d\\udd50',\n  'clock10':'\\ud83d\\udd59',\n  'clock1030':'\\ud83d\\udd65',\n  'clock11':'\\ud83d\\udd5a',\n  'clock1130':'\\ud83d\\udd66',\n  'clock12':'\\ud83d\\udd5b',\n  'clock1230':'\\ud83d\\udd67',\n  'clock130':'\\ud83d\\udd5c',\n  'clock2':'\\ud83d\\udd51',\n  'clock230':'\\ud83d\\udd5d',\n  'clock3':'\\ud83d\\udd52',\n  'clock330':'\\ud83d\\udd5e',\n  'clock4':'\\ud83d\\udd53',\n  'clock430':'\\ud83d\\udd5f',\n  'clock5':'\\ud83d\\udd54',\n  'clock530':'\\ud83d\\udd60',\n  'clock6':'\\ud83d\\udd55',\n  'clock630':'\\ud83d\\udd61',\n  'clock7':'\\ud83d\\udd56',\n  'clock730':'\\ud83d\\udd62',\n  'clock8':'\\ud83d\\udd57',\n  'clock830':'\\ud83d\\udd63',\n  'clock9':'\\ud83d\\udd58',\n  'clock930':'\\ud83d\\udd64',\n  'closed_book':'\\ud83d\\udcd5',\n  'closed_lock_with_key':'\\ud83d\\udd10',\n  'closed_umbrella':'\\ud83c\\udf02',\n  'cloud':'\\u2601\\ufe0f',\n  'cloud_with_lightning':'\\ud83c\\udf29',\n  'cloud_with_lightning_and_rain':'\\u26c8',\n  'cloud_with_rain':'\\ud83c\\udf27',\n  'cloud_with_snow':'\\ud83c\\udf28',\n  'clown_face':'\\ud83e\\udd21',\n  'clubs':'\\u2663\\ufe0f',\n  'cocktail':'\\ud83c\\udf78',\n  'coffee':'\\u2615\\ufe0f',\n  'coffin':'\\u26b0\\ufe0f',\n  'cold_sweat':'\\ud83d\\ude30',\n  'comet':'\\u2604\\ufe0f',\n  'computer':'\\ud83d\\udcbb',\n  'computer_mouse':'\\ud83d\\uddb1',\n  'confetti_ball':'\\ud83c\\udf8a',\n  'confounded':'\\ud83d\\ude16',\n  'confused':'\\ud83d\\ude15',\n  'congratulations':'\\u3297\\ufe0f',\n  'construction':'\\ud83d\\udea7',\n  'construction_worker_man':'\\ud83d\\udc77',\n  'construction_worker_woman':'\\ud83d\\udc77&zwj;\\u2640\\ufe0f',\n  'control_knobs':'\\ud83c\\udf9b',\n  'convenience_store':'\\ud83c\\udfea',\n  'cookie':'\\ud83c\\udf6a',\n  'cool':'\\ud83c\\udd92',\n  'policeman':'\\ud83d\\udc6e',\n  'copyright':'\\u00a9\\ufe0f',\n  'corn':'\\ud83c\\udf3d',\n  'couch_and_lamp':'\\ud83d\\udecb',\n  'couple':'\\ud83d\\udc6b',\n  'couple_with_heart_woman_man':'\\ud83d\\udc91',\n  'couple_with_heart_man_man':'\\ud83d\\udc68&zwj;\\u2764\\ufe0f&zwj;\\ud83d\\udc68',\n  'couple_with_heart_woman_woman':'\\ud83d\\udc69&zwj;\\u2764\\ufe0f&zwj;\\ud83d\\udc69',\n  'couplekiss_man_man':'\\ud83d\\udc68&zwj;\\u2764\\ufe0f&zwj;\\ud83d\\udc8b&zwj;\\ud83d\\udc68',\n  'couplekiss_man_woman':'\\ud83d\\udc8f',\n  'couplekiss_woman_woman':'\\ud83d\\udc69&zwj;\\u2764\\ufe0f&zwj;\\ud83d\\udc8b&zwj;\\ud83d\\udc69',\n  'cow':'\\ud83d\\udc2e',\n  'cow2':'\\ud83d\\udc04',\n  'cowboy_hat_face':'\\ud83e\\udd20',\n  'crab':'\\ud83e\\udd80',\n  'crayon':'\\ud83d\\udd8d',\n  'credit_card':'\\ud83d\\udcb3',\n  'crescent_moon':'\\ud83c\\udf19',\n  'cricket':'\\ud83c\\udfcf',\n  'crocodile':'\\ud83d\\udc0a',\n  'croissant':'\\ud83e\\udd50',\n  'crossed_fingers':'\\ud83e\\udd1e',\n  'crossed_flags':'\\ud83c\\udf8c',\n  'crossed_swords':'\\u2694\\ufe0f',\n  'crown':'\\ud83d\\udc51',\n  'cry':'\\ud83d\\ude22',\n  'crying_cat_face':'\\ud83d\\ude3f',\n  'crystal_ball':'\\ud83d\\udd2e',\n  'cucumber':'\\ud83e\\udd52',\n  'cupid':'\\ud83d\\udc98',\n  'curly_loop':'\\u27b0',\n  'currency_exchange':'\\ud83d\\udcb1',\n  'curry':'\\ud83c\\udf5b',\n  'custard':'\\ud83c\\udf6e',\n  'customs':'\\ud83d\\udec3',\n  'cyclone':'\\ud83c\\udf00',\n  'dagger':'\\ud83d\\udde1',\n  'dancer':'\\ud83d\\udc83',\n  'dancing_women':'\\ud83d\\udc6f',\n  'dancing_men':'\\ud83d\\udc6f&zwj;\\u2642\\ufe0f',\n  'dango':'\\ud83c\\udf61',\n  'dark_sunglasses':'\\ud83d\\udd76',\n  'dart':'\\ud83c\\udfaf',\n  'dash':'\\ud83d\\udca8',\n  'date':'\\ud83d\\udcc5',\n  'deciduous_tree':'\\ud83c\\udf33',\n  'deer':'\\ud83e\\udd8c',\n  'department_store':'\\ud83c\\udfec',\n  'derelict_house':'\\ud83c\\udfda',\n  'desert':'\\ud83c\\udfdc',\n  'desert_island':'\\ud83c\\udfdd',\n  'desktop_computer':'\\ud83d\\udda5',\n  'male_detective':'\\ud83d\\udd75\\ufe0f',\n  'diamond_shape_with_a_dot_inside':'\\ud83d\\udca0',\n  'diamonds':'\\u2666\\ufe0f',\n  'disappointed':'\\ud83d\\ude1e',\n  'disappointed_relieved':'\\ud83d\\ude25',\n  'dizzy':'\\ud83d\\udcab',\n  'dizzy_face':'\\ud83d\\ude35',\n  'do_not_litter':'\\ud83d\\udeaf',\n  'dog':'\\ud83d\\udc36',\n  'dog2':'\\ud83d\\udc15',\n  'dollar':'\\ud83d\\udcb5',\n  'dolls':'\\ud83c\\udf8e',\n  'dolphin':'\\ud83d\\udc2c',\n  'door':'\\ud83d\\udeaa',\n  'doughnut':'\\ud83c\\udf69',\n  'dove':'\\ud83d\\udd4a',\n  'dragon':'\\ud83d\\udc09',\n  'dragon_face':'\\ud83d\\udc32',\n  'dress':'\\ud83d\\udc57',\n  'dromedary_camel':'\\ud83d\\udc2a',\n  'drooling_face':'\\ud83e\\udd24',\n  'droplet':'\\ud83d\\udca7',\n  'drum':'\\ud83e\\udd41',\n  'duck':'\\ud83e\\udd86',\n  'dvd':'\\ud83d\\udcc0',\n  'e-mail':'\\ud83d\\udce7',\n  'eagle':'\\ud83e\\udd85',\n  'ear':'\\ud83d\\udc42',\n  'ear_of_rice':'\\ud83c\\udf3e',\n  'earth_africa':'\\ud83c\\udf0d',\n  'earth_americas':'\\ud83c\\udf0e',\n  'earth_asia':'\\ud83c\\udf0f',\n  'egg':'\\ud83e\\udd5a',\n  'eggplant':'\\ud83c\\udf46',\n  'eight_pointed_black_star':'\\u2734\\ufe0f',\n  'eight_spoked_asterisk':'\\u2733\\ufe0f',\n  'electric_plug':'\\ud83d\\udd0c',\n  'elephant':'\\ud83d\\udc18',\n  'email':'\\u2709\\ufe0f',\n  'end':'\\ud83d\\udd1a',\n  'envelope_with_arrow':'\\ud83d\\udce9',\n  'euro':'\\ud83d\\udcb6',\n  'european_castle':'\\ud83c\\udff0',\n  'european_post_office':'\\ud83c\\udfe4',\n  'evergreen_tree':'\\ud83c\\udf32',\n  'exclamation':'\\u2757\\ufe0f',\n  'expressionless':'\\ud83d\\ude11',\n  'eye':'\\ud83d\\udc41',\n  'eye_speech_bubble':'\\ud83d\\udc41&zwj;\\ud83d\\udde8',\n  'eyeglasses':'\\ud83d\\udc53',\n  'eyes':'\\ud83d\\udc40',\n  'face_with_head_bandage':'\\ud83e\\udd15',\n  'face_with_thermometer':'\\ud83e\\udd12',\n  'fist_oncoming':'\\ud83d\\udc4a',\n  'factory':'\\ud83c\\udfed',\n  'fallen_leaf':'\\ud83c\\udf42',\n  'family_man_woman_boy':'\\ud83d\\udc6a',\n  'family_man_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc66',\n  'family_man_boy_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc66&zwj;\\ud83d\\udc66',\n  'family_man_girl':'\\ud83d\\udc68&zwj;\\ud83d\\udc67',\n  'family_man_girl_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc66',\n  'family_man_girl_girl':'\\ud83d\\udc68&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc67',\n  'family_man_man_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc68&zwj;\\ud83d\\udc66',\n  'family_man_man_boy_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc68&zwj;\\ud83d\\udc66&zwj;\\ud83d\\udc66',\n  'family_man_man_girl':'\\ud83d\\udc68&zwj;\\ud83d\\udc68&zwj;\\ud83d\\udc67',\n  'family_man_man_girl_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc68&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc66',\n  'family_man_man_girl_girl':'\\ud83d\\udc68&zwj;\\ud83d\\udc68&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc67',\n  'family_man_woman_boy_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc66&zwj;\\ud83d\\udc66',\n  'family_man_woman_girl':'\\ud83d\\udc68&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc67',\n  'family_man_woman_girl_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc66',\n  'family_man_woman_girl_girl':'\\ud83d\\udc68&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc67',\n  'family_woman_boy':'\\ud83d\\udc69&zwj;\\ud83d\\udc66',\n  'family_woman_boy_boy':'\\ud83d\\udc69&zwj;\\ud83d\\udc66&zwj;\\ud83d\\udc66',\n  'family_woman_girl':'\\ud83d\\udc69&zwj;\\ud83d\\udc67',\n  'family_woman_girl_boy':'\\ud83d\\udc69&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc66',\n  'family_woman_girl_girl':'\\ud83d\\udc69&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc67',\n  'family_woman_woman_boy':'\\ud83d\\udc69&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc66',\n  'family_woman_woman_boy_boy':'\\ud83d\\udc69&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc66&zwj;\\ud83d\\udc66',\n  'family_woman_woman_girl':'\\ud83d\\udc69&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc67',\n  'family_woman_woman_girl_boy':'\\ud83d\\udc69&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc66',\n  'family_woman_woman_girl_girl':'\\ud83d\\udc69&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc67',\n  'fast_forward':'\\u23e9',\n  'fax':'\\ud83d\\udce0',\n  'fearful':'\\ud83d\\ude28',\n  'feet':'\\ud83d\\udc3e',\n  'female_detective':'\\ud83d\\udd75\\ufe0f&zwj;\\u2640\\ufe0f',\n  'ferris_wheel':'\\ud83c\\udfa1',\n  'ferry':'\\u26f4',\n  'field_hockey':'\\ud83c\\udfd1',\n  'file_cabinet':'\\ud83d\\uddc4',\n  'file_folder':'\\ud83d\\udcc1',\n  'film_projector':'\\ud83d\\udcfd',\n  'film_strip':'\\ud83c\\udf9e',\n  'fire':'\\ud83d\\udd25',\n  'fire_engine':'\\ud83d\\ude92',\n  'fireworks':'\\ud83c\\udf86',\n  'first_quarter_moon':'\\ud83c\\udf13',\n  'first_quarter_moon_with_face':'\\ud83c\\udf1b',\n  'fish':'\\ud83d\\udc1f',\n  'fish_cake':'\\ud83c\\udf65',\n  'fishing_pole_and_fish':'\\ud83c\\udfa3',\n  'fist_raised':'\\u270a',\n  'fist_left':'\\ud83e\\udd1b',\n  'fist_right':'\\ud83e\\udd1c',\n  'flags':'\\ud83c\\udf8f',\n  'flashlight':'\\ud83d\\udd26',\n  'fleur_de_lis':'\\u269c\\ufe0f',\n  'flight_arrival':'\\ud83d\\udeec',\n  'flight_departure':'\\ud83d\\udeeb',\n  'floppy_disk':'\\ud83d\\udcbe',\n  'flower_playing_cards':'\\ud83c\\udfb4',\n  'flushed':'\\ud83d\\ude33',\n  'fog':'\\ud83c\\udf2b',\n  'foggy':'\\ud83c\\udf01',\n  'football':'\\ud83c\\udfc8',\n  'footprints':'\\ud83d\\udc63',\n  'fork_and_knife':'\\ud83c\\udf74',\n  'fountain':'\\u26f2\\ufe0f',\n  'fountain_pen':'\\ud83d\\udd8b',\n  'four_leaf_clover':'\\ud83c\\udf40',\n  'fox_face':'\\ud83e\\udd8a',\n  'framed_picture':'\\ud83d\\uddbc',\n  'free':'\\ud83c\\udd93',\n  'fried_egg':'\\ud83c\\udf73',\n  'fried_shrimp':'\\ud83c\\udf64',\n  'fries':'\\ud83c\\udf5f',\n  'frog':'\\ud83d\\udc38',\n  'frowning':'\\ud83d\\ude26',\n  'frowning_face':'\\u2639\\ufe0f',\n  'frowning_man':'\\ud83d\\ude4d&zwj;\\u2642\\ufe0f',\n  'frowning_woman':'\\ud83d\\ude4d',\n  'middle_finger':'\\ud83d\\udd95',\n  'fuelpump':'\\u26fd\\ufe0f',\n  'full_moon':'\\ud83c\\udf15',\n  'full_moon_with_face':'\\ud83c\\udf1d',\n  'funeral_urn':'\\u26b1\\ufe0f',\n  'game_die':'\\ud83c\\udfb2',\n  'gear':'\\u2699\\ufe0f',\n  'gem':'\\ud83d\\udc8e',\n  'gemini':'\\u264a\\ufe0f',\n  'ghost':'\\ud83d\\udc7b',\n  'gift':'\\ud83c\\udf81',\n  'gift_heart':'\\ud83d\\udc9d',\n  'girl':'\\ud83d\\udc67',\n  'globe_with_meridians':'\\ud83c\\udf10',\n  'goal_net':'\\ud83e\\udd45',\n  'goat':'\\ud83d\\udc10',\n  'golf':'\\u26f3\\ufe0f',\n  'golfing_man':'\\ud83c\\udfcc\\ufe0f',\n  'golfing_woman':'\\ud83c\\udfcc\\ufe0f&zwj;\\u2640\\ufe0f',\n  'gorilla':'\\ud83e\\udd8d',\n  'grapes':'\\ud83c\\udf47',\n  'green_apple':'\\ud83c\\udf4f',\n  'green_book':'\\ud83d\\udcd7',\n  'green_heart':'\\ud83d\\udc9a',\n  'green_salad':'\\ud83e\\udd57',\n  'grey_exclamation':'\\u2755',\n  'grey_question':'\\u2754',\n  'grimacing':'\\ud83d\\ude2c',\n  'grin':'\\ud83d\\ude01',\n  'grinning':'\\ud83d\\ude00',\n  'guardsman':'\\ud83d\\udc82',\n  'guardswoman':'\\ud83d\\udc82&zwj;\\u2640\\ufe0f',\n  'guitar':'\\ud83c\\udfb8',\n  'gun':'\\ud83d\\udd2b',\n  'haircut_woman':'\\ud83d\\udc87',\n  'haircut_man':'\\ud83d\\udc87&zwj;\\u2642\\ufe0f',\n  'hamburger':'\\ud83c\\udf54',\n  'hammer':'\\ud83d\\udd28',\n  'hammer_and_pick':'\\u2692',\n  'hammer_and_wrench':'\\ud83d\\udee0',\n  'hamster':'\\ud83d\\udc39',\n  'hand':'\\u270b',\n  'handbag':'\\ud83d\\udc5c',\n  'handshake':'\\ud83e\\udd1d',\n  'hankey':'\\ud83d\\udca9',\n  'hatched_chick':'\\ud83d\\udc25',\n  'hatching_chick':'\\ud83d\\udc23',\n  'headphones':'\\ud83c\\udfa7',\n  'hear_no_evil':'\\ud83d\\ude49',\n  'heart':'\\u2764\\ufe0f',\n  'heart_decoration':'\\ud83d\\udc9f',\n  'heart_eyes':'\\ud83d\\ude0d',\n  'heart_eyes_cat':'\\ud83d\\ude3b',\n  'heartbeat':'\\ud83d\\udc93',\n  'heartpulse':'\\ud83d\\udc97',\n  'hearts':'\\u2665\\ufe0f',\n  'heavy_check_mark':'\\u2714\\ufe0f',\n  'heavy_division_sign':'\\u2797',\n  'heavy_dollar_sign':'\\ud83d\\udcb2',\n  'heavy_heart_exclamation':'\\u2763\\ufe0f',\n  'heavy_minus_sign':'\\u2796',\n  'heavy_multiplication_x':'\\u2716\\ufe0f',\n  'heavy_plus_sign':'\\u2795',\n  'helicopter':'\\ud83d\\ude81',\n  'herb':'\\ud83c\\udf3f',\n  'hibiscus':'\\ud83c\\udf3a',\n  'high_brightness':'\\ud83d\\udd06',\n  'high_heel':'\\ud83d\\udc60',\n  'hocho':'\\ud83d\\udd2a',\n  'hole':'\\ud83d\\udd73',\n  'honey_pot':'\\ud83c\\udf6f',\n  'horse':'\\ud83d\\udc34',\n  'horse_racing':'\\ud83c\\udfc7',\n  'hospital':'\\ud83c\\udfe5',\n  'hot_pepper':'\\ud83c\\udf36',\n  'hotdog':'\\ud83c\\udf2d',\n  'hotel':'\\ud83c\\udfe8',\n  'hotsprings':'\\u2668\\ufe0f',\n  'hourglass':'\\u231b\\ufe0f',\n  'hourglass_flowing_sand':'\\u23f3',\n  'house':'\\ud83c\\udfe0',\n  'house_with_garden':'\\ud83c\\udfe1',\n  'houses':'\\ud83c\\udfd8',\n  'hugs':'\\ud83e\\udd17',\n  'hushed':'\\ud83d\\ude2f',\n  'ice_cream':'\\ud83c\\udf68',\n  'ice_hockey':'\\ud83c\\udfd2',\n  'ice_skate':'\\u26f8',\n  'icecream':'\\ud83c\\udf66',\n  'id':'\\ud83c\\udd94',\n  'ideograph_advantage':'\\ud83c\\ude50',\n  'imp':'\\ud83d\\udc7f',\n  'inbox_tray':'\\ud83d\\udce5',\n  'incoming_envelope':'\\ud83d\\udce8',\n  'tipping_hand_woman':'\\ud83d\\udc81',\n  'information_source':'\\u2139\\ufe0f',\n  'innocent':'\\ud83d\\ude07',\n  'interrobang':'\\u2049\\ufe0f',\n  'iphone':'\\ud83d\\udcf1',\n  'izakaya_lantern':'\\ud83c\\udfee',\n  'jack_o_lantern':'\\ud83c\\udf83',\n  'japan':'\\ud83d\\uddfe',\n  'japanese_castle':'\\ud83c\\udfef',\n  'japanese_goblin':'\\ud83d\\udc7a',\n  'japanese_ogre':'\\ud83d\\udc79',\n  'jeans':'\\ud83d\\udc56',\n  'joy':'\\ud83d\\ude02',\n  'joy_cat':'\\ud83d\\ude39',\n  'joystick':'\\ud83d\\udd79',\n  'kaaba':'\\ud83d\\udd4b',\n  'key':'\\ud83d\\udd11',\n  'keyboard':'\\u2328\\ufe0f',\n  'keycap_ten':'\\ud83d\\udd1f',\n  'kick_scooter':'\\ud83d\\udef4',\n  'kimono':'\\ud83d\\udc58',\n  'kiss':'\\ud83d\\udc8b',\n  'kissing':'\\ud83d\\ude17',\n  'kissing_cat':'\\ud83d\\ude3d',\n  'kissing_closed_eyes':'\\ud83d\\ude1a',\n  'kissing_heart':'\\ud83d\\ude18',\n  'kissing_smiling_eyes':'\\ud83d\\ude19',\n  'kiwi_fruit':'\\ud83e\\udd5d',\n  'koala':'\\ud83d\\udc28',\n  'koko':'\\ud83c\\ude01',\n  'label':'\\ud83c\\udff7',\n  'large_blue_circle':'\\ud83d\\udd35',\n  'large_blue_diamond':'\\ud83d\\udd37',\n  'large_orange_diamond':'\\ud83d\\udd36',\n  'last_quarter_moon':'\\ud83c\\udf17',\n  'last_quarter_moon_with_face':'\\ud83c\\udf1c',\n  'latin_cross':'\\u271d\\ufe0f',\n  'laughing':'\\ud83d\\ude06',\n  'leaves':'\\ud83c\\udf43',\n  'ledger':'\\ud83d\\udcd2',\n  'left_luggage':'\\ud83d\\udec5',\n  'left_right_arrow':'\\u2194\\ufe0f',\n  'leftwards_arrow_with_hook':'\\u21a9\\ufe0f',\n  'lemon':'\\ud83c\\udf4b',\n  'leo':'\\u264c\\ufe0f',\n  'leopard':'\\ud83d\\udc06',\n  'level_slider':'\\ud83c\\udf9a',\n  'libra':'\\u264e\\ufe0f',\n  'light_rail':'\\ud83d\\ude88',\n  'link':'\\ud83d\\udd17',\n  'lion':'\\ud83e\\udd81',\n  'lips':'\\ud83d\\udc44',\n  'lipstick':'\\ud83d\\udc84',\n  'lizard':'\\ud83e\\udd8e',\n  'lock':'\\ud83d\\udd12',\n  'lock_with_ink_pen':'\\ud83d\\udd0f',\n  'lollipop':'\\ud83c\\udf6d',\n  'loop':'\\u27bf',\n  'loud_sound':'\\ud83d\\udd0a',\n  'loudspeaker':'\\ud83d\\udce2',\n  'love_hotel':'\\ud83c\\udfe9',\n  'love_letter':'\\ud83d\\udc8c',\n  'low_brightness':'\\ud83d\\udd05',\n  'lying_face':'\\ud83e\\udd25',\n  'm':'\\u24c2\\ufe0f',\n  'mag':'\\ud83d\\udd0d',\n  'mag_right':'\\ud83d\\udd0e',\n  'mahjong':'\\ud83c\\udc04\\ufe0f',\n  'mailbox':'\\ud83d\\udceb',\n  'mailbox_closed':'\\ud83d\\udcea',\n  'mailbox_with_mail':'\\ud83d\\udcec',\n  'mailbox_with_no_mail':'\\ud83d\\udced',\n  'man':'\\ud83d\\udc68',\n  'man_artist':'\\ud83d\\udc68&zwj;\\ud83c\\udfa8',\n  'man_astronaut':'\\ud83d\\udc68&zwj;\\ud83d\\ude80',\n  'man_cartwheeling':'\\ud83e\\udd38&zwj;\\u2642\\ufe0f',\n  'man_cook':'\\ud83d\\udc68&zwj;\\ud83c\\udf73',\n  'man_dancing':'\\ud83d\\udd7a',\n  'man_facepalming':'\\ud83e\\udd26&zwj;\\u2642\\ufe0f',\n  'man_factory_worker':'\\ud83d\\udc68&zwj;\\ud83c\\udfed',\n  'man_farmer':'\\ud83d\\udc68&zwj;\\ud83c\\udf3e',\n  'man_firefighter':'\\ud83d\\udc68&zwj;\\ud83d\\ude92',\n  'man_health_worker':'\\ud83d\\udc68&zwj;\\u2695\\ufe0f',\n  'man_in_tuxedo':'\\ud83e\\udd35',\n  'man_judge':'\\ud83d\\udc68&zwj;\\u2696\\ufe0f',\n  'man_juggling':'\\ud83e\\udd39&zwj;\\u2642\\ufe0f',\n  'man_mechanic':'\\ud83d\\udc68&zwj;\\ud83d\\udd27',\n  'man_office_worker':'\\ud83d\\udc68&zwj;\\ud83d\\udcbc',\n  'man_pilot':'\\ud83d\\udc68&zwj;\\u2708\\ufe0f',\n  'man_playing_handball':'\\ud83e\\udd3e&zwj;\\u2642\\ufe0f',\n  'man_playing_water_polo':'\\ud83e\\udd3d&zwj;\\u2642\\ufe0f',\n  'man_scientist':'\\ud83d\\udc68&zwj;\\ud83d\\udd2c',\n  'man_shrugging':'\\ud83e\\udd37&zwj;\\u2642\\ufe0f',\n  'man_singer':'\\ud83d\\udc68&zwj;\\ud83c\\udfa4',\n  'man_student':'\\ud83d\\udc68&zwj;\\ud83c\\udf93',\n  'man_teacher':'\\ud83d\\udc68&zwj;\\ud83c\\udfeb',\n  'man_technologist':'\\ud83d\\udc68&zwj;\\ud83d\\udcbb',\n  'man_with_gua_pi_mao':'\\ud83d\\udc72',\n  'man_with_turban':'\\ud83d\\udc73',\n  'tangerine':'\\ud83c\\udf4a',\n  'mans_shoe':'\\ud83d\\udc5e',\n  'mantelpiece_clock':'\\ud83d\\udd70',\n  'maple_leaf':'\\ud83c\\udf41',\n  'martial_arts_uniform':'\\ud83e\\udd4b',\n  'mask':'\\ud83d\\ude37',\n  'massage_woman':'\\ud83d\\udc86',\n  'massage_man':'\\ud83d\\udc86&zwj;\\u2642\\ufe0f',\n  'meat_on_bone':'\\ud83c\\udf56',\n  'medal_military':'\\ud83c\\udf96',\n  'medal_sports':'\\ud83c\\udfc5',\n  'mega':'\\ud83d\\udce3',\n  'melon':'\\ud83c\\udf48',\n  'memo':'\\ud83d\\udcdd',\n  'men_wrestling':'\\ud83e\\udd3c&zwj;\\u2642\\ufe0f',\n  'menorah':'\\ud83d\\udd4e',\n  'mens':'\\ud83d\\udeb9',\n  'metal':'\\ud83e\\udd18',\n  'metro':'\\ud83d\\ude87',\n  'microphone':'\\ud83c\\udfa4',\n  'microscope':'\\ud83d\\udd2c',\n  'milk_glass':'\\ud83e\\udd5b',\n  'milky_way':'\\ud83c\\udf0c',\n  'minibus':'\\ud83d\\ude90',\n  'minidisc':'\\ud83d\\udcbd',\n  'mobile_phone_off':'\\ud83d\\udcf4',\n  'money_mouth_face':'\\ud83e\\udd11',\n  'money_with_wings':'\\ud83d\\udcb8',\n  'moneybag':'\\ud83d\\udcb0',\n  'monkey':'\\ud83d\\udc12',\n  'monkey_face':'\\ud83d\\udc35',\n  'monorail':'\\ud83d\\ude9d',\n  'moon':'\\ud83c\\udf14',\n  'mortar_board':'\\ud83c\\udf93',\n  'mosque':'\\ud83d\\udd4c',\n  'motor_boat':'\\ud83d\\udee5',\n  'motor_scooter':'\\ud83d\\udef5',\n  'motorcycle':'\\ud83c\\udfcd',\n  'motorway':'\\ud83d\\udee3',\n  'mount_fuji':'\\ud83d\\uddfb',\n  'mountain':'\\u26f0',\n  'mountain_biking_man':'\\ud83d\\udeb5',\n  'mountain_biking_woman':'\\ud83d\\udeb5&zwj;\\u2640\\ufe0f',\n  'mountain_cableway':'\\ud83d\\udea0',\n  'mountain_railway':'\\ud83d\\ude9e',\n  'mountain_snow':'\\ud83c\\udfd4',\n  'mouse':'\\ud83d\\udc2d',\n  'mouse2':'\\ud83d\\udc01',\n  'movie_camera':'\\ud83c\\udfa5',\n  'moyai':'\\ud83d\\uddff',\n  'mrs_claus':'\\ud83e\\udd36',\n  'muscle':'\\ud83d\\udcaa',\n  'mushroom':'\\ud83c\\udf44',\n  'musical_keyboard':'\\ud83c\\udfb9',\n  'musical_note':'\\ud83c\\udfb5',\n  'musical_score':'\\ud83c\\udfbc',\n  'mute':'\\ud83d\\udd07',\n  'nail_care':'\\ud83d\\udc85',\n  'name_badge':'\\ud83d\\udcdb',\n  'national_park':'\\ud83c\\udfde',\n  'nauseated_face':'\\ud83e\\udd22',\n  'necktie':'\\ud83d\\udc54',\n  'negative_squared_cross_mark':'\\u274e',\n  'nerd_face':'\\ud83e\\udd13',\n  'neutral_face':'\\ud83d\\ude10',\n  'new':'\\ud83c\\udd95',\n  'new_moon':'\\ud83c\\udf11',\n  'new_moon_with_face':'\\ud83c\\udf1a',\n  'newspaper':'\\ud83d\\udcf0',\n  'newspaper_roll':'\\ud83d\\uddde',\n  'next_track_button':'\\u23ed',\n  'ng':'\\ud83c\\udd96',\n  'no_good_man':'\\ud83d\\ude45&zwj;\\u2642\\ufe0f',\n  'no_good_woman':'\\ud83d\\ude45',\n  'night_with_stars':'\\ud83c\\udf03',\n  'no_bell':'\\ud83d\\udd15',\n  'no_bicycles':'\\ud83d\\udeb3',\n  'no_entry':'\\u26d4\\ufe0f',\n  'no_entry_sign':'\\ud83d\\udeab',\n  'no_mobile_phones':'\\ud83d\\udcf5',\n  'no_mouth':'\\ud83d\\ude36',\n  'no_pedestrians':'\\ud83d\\udeb7',\n  'no_smoking':'\\ud83d\\udead',\n  'non-potable_water':'\\ud83d\\udeb1',\n  'nose':'\\ud83d\\udc43',\n  'notebook':'\\ud83d\\udcd3',\n  'notebook_with_decorative_cover':'\\ud83d\\udcd4',\n  'notes':'\\ud83c\\udfb6',\n  'nut_and_bolt':'\\ud83d\\udd29',\n  'o':'\\u2b55\\ufe0f',\n  'o2':'\\ud83c\\udd7e\\ufe0f',\n  'ocean':'\\ud83c\\udf0a',\n  'octopus':'\\ud83d\\udc19',\n  'oden':'\\ud83c\\udf62',\n  'office':'\\ud83c\\udfe2',\n  'oil_drum':'\\ud83d\\udee2',\n  'ok':'\\ud83c\\udd97',\n  'ok_hand':'\\ud83d\\udc4c',\n  'ok_man':'\\ud83d\\ude46&zwj;\\u2642\\ufe0f',\n  'ok_woman':'\\ud83d\\ude46',\n  'old_key':'\\ud83d\\udddd',\n  'older_man':'\\ud83d\\udc74',\n  'older_woman':'\\ud83d\\udc75',\n  'om':'\\ud83d\\udd49',\n  'on':'\\ud83d\\udd1b',\n  'oncoming_automobile':'\\ud83d\\ude98',\n  'oncoming_bus':'\\ud83d\\ude8d',\n  'oncoming_police_car':'\\ud83d\\ude94',\n  'oncoming_taxi':'\\ud83d\\ude96',\n  'open_file_folder':'\\ud83d\\udcc2',\n  'open_hands':'\\ud83d\\udc50',\n  'open_mouth':'\\ud83d\\ude2e',\n  'open_umbrella':'\\u2602\\ufe0f',\n  'ophiuchus':'\\u26ce',\n  'orange_book':'\\ud83d\\udcd9',\n  'orthodox_cross':'\\u2626\\ufe0f',\n  'outbox_tray':'\\ud83d\\udce4',\n  'owl':'\\ud83e\\udd89',\n  'ox':'\\ud83d\\udc02',\n  'package':'\\ud83d\\udce6',\n  'page_facing_up':'\\ud83d\\udcc4',\n  'page_with_curl':'\\ud83d\\udcc3',\n  'pager':'\\ud83d\\udcdf',\n  'paintbrush':'\\ud83d\\udd8c',\n  'palm_tree':'\\ud83c\\udf34',\n  'pancakes':'\\ud83e\\udd5e',\n  'panda_face':'\\ud83d\\udc3c',\n  'paperclip':'\\ud83d\\udcce',\n  'paperclips':'\\ud83d\\udd87',\n  'parasol_on_ground':'\\u26f1',\n  'parking':'\\ud83c\\udd7f\\ufe0f',\n  'part_alternation_mark':'\\u303d\\ufe0f',\n  'partly_sunny':'\\u26c5\\ufe0f',\n  'passenger_ship':'\\ud83d\\udef3',\n  'passport_control':'\\ud83d\\udec2',\n  'pause_button':'\\u23f8',\n  'peace_symbol':'\\u262e\\ufe0f',\n  'peach':'\\ud83c\\udf51',\n  'peanuts':'\\ud83e\\udd5c',\n  'pear':'\\ud83c\\udf50',\n  'pen':'\\ud83d\\udd8a',\n  'pencil2':'\\u270f\\ufe0f',\n  'penguin':'\\ud83d\\udc27',\n  'pensive':'\\ud83d\\ude14',\n  'performing_arts':'\\ud83c\\udfad',\n  'persevere':'\\ud83d\\ude23',\n  'person_fencing':'\\ud83e\\udd3a',\n  'pouting_woman':'\\ud83d\\ude4e',\n  'phone':'\\u260e\\ufe0f',\n  'pick':'\\u26cf',\n  'pig':'\\ud83d\\udc37',\n  'pig2':'\\ud83d\\udc16',\n  'pig_nose':'\\ud83d\\udc3d',\n  'pill':'\\ud83d\\udc8a',\n  'pineapple':'\\ud83c\\udf4d',\n  'ping_pong':'\\ud83c\\udfd3',\n  'pisces':'\\u2653\\ufe0f',\n  'pizza':'\\ud83c\\udf55',\n  'place_of_worship':'\\ud83d\\uded0',\n  'plate_with_cutlery':'\\ud83c\\udf7d',\n  'play_or_pause_button':'\\u23ef',\n  'point_down':'\\ud83d\\udc47',\n  'point_left':'\\ud83d\\udc48',\n  'point_right':'\\ud83d\\udc49',\n  'point_up':'\\u261d\\ufe0f',\n  'point_up_2':'\\ud83d\\udc46',\n  'police_car':'\\ud83d\\ude93',\n  'policewoman':'\\ud83d\\udc6e&zwj;\\u2640\\ufe0f',\n  'poodle':'\\ud83d\\udc29',\n  'popcorn':'\\ud83c\\udf7f',\n  'post_office':'\\ud83c\\udfe3',\n  'postal_horn':'\\ud83d\\udcef',\n  'postbox':'\\ud83d\\udcee',\n  'potable_water':'\\ud83d\\udeb0',\n  'potato':'\\ud83e\\udd54',\n  'pouch':'\\ud83d\\udc5d',\n  'poultry_leg':'\\ud83c\\udf57',\n  'pound':'\\ud83d\\udcb7',\n  'rage':'\\ud83d\\ude21',\n  'pouting_cat':'\\ud83d\\ude3e',\n  'pouting_man':'\\ud83d\\ude4e&zwj;\\u2642\\ufe0f',\n  'pray':'\\ud83d\\ude4f',\n  'prayer_beads':'\\ud83d\\udcff',\n  'pregnant_woman':'\\ud83e\\udd30',\n  'previous_track_button':'\\u23ee',\n  'prince':'\\ud83e\\udd34',\n  'princess':'\\ud83d\\udc78',\n  'printer':'\\ud83d\\udda8',\n  'purple_heart':'\\ud83d\\udc9c',\n  'purse':'\\ud83d\\udc5b',\n  'pushpin':'\\ud83d\\udccc',\n  'put_litter_in_its_place':'\\ud83d\\udeae',\n  'question':'\\u2753',\n  'rabbit':'\\ud83d\\udc30',\n  'rabbit2':'\\ud83d\\udc07',\n  'racehorse':'\\ud83d\\udc0e',\n  'racing_car':'\\ud83c\\udfce',\n  'radio':'\\ud83d\\udcfb',\n  'radio_button':'\\ud83d\\udd18',\n  'radioactive':'\\u2622\\ufe0f',\n  'railway_car':'\\ud83d\\ude83',\n  'railway_track':'\\ud83d\\udee4',\n  'rainbow':'\\ud83c\\udf08',\n  'rainbow_flag':'\\ud83c\\udff3\\ufe0f&zwj;\\ud83c\\udf08',\n  'raised_back_of_hand':'\\ud83e\\udd1a',\n  'raised_hand_with_fingers_splayed':'\\ud83d\\udd90',\n  'raised_hands':'\\ud83d\\ude4c',\n  'raising_hand_woman':'\\ud83d\\ude4b',\n  'raising_hand_man':'\\ud83d\\ude4b&zwj;\\u2642\\ufe0f',\n  'ram':'\\ud83d\\udc0f',\n  'ramen':'\\ud83c\\udf5c',\n  'rat':'\\ud83d\\udc00',\n  'record_button':'\\u23fa',\n  'recycle':'\\u267b\\ufe0f',\n  'red_circle':'\\ud83d\\udd34',\n  'registered':'\\u00ae\\ufe0f',\n  'relaxed':'\\u263a\\ufe0f',\n  'relieved':'\\ud83d\\ude0c',\n  'reminder_ribbon':'\\ud83c\\udf97',\n  'repeat':'\\ud83d\\udd01',\n  'repeat_one':'\\ud83d\\udd02',\n  'rescue_worker_helmet':'\\u26d1',\n  'restroom':'\\ud83d\\udebb',\n  'revolving_hearts':'\\ud83d\\udc9e',\n  'rewind':'\\u23ea',\n  'rhinoceros':'\\ud83e\\udd8f',\n  'ribbon':'\\ud83c\\udf80',\n  'rice':'\\ud83c\\udf5a',\n  'rice_ball':'\\ud83c\\udf59',\n  'rice_cracker':'\\ud83c\\udf58',\n  'rice_scene':'\\ud83c\\udf91',\n  'right_anger_bubble':'\\ud83d\\uddef',\n  'ring':'\\ud83d\\udc8d',\n  'robot':'\\ud83e\\udd16',\n  'rocket':'\\ud83d\\ude80',\n  'rofl':'\\ud83e\\udd23',\n  'roll_eyes':'\\ud83d\\ude44',\n  'roller_coaster':'\\ud83c\\udfa2',\n  'rooster':'\\ud83d\\udc13',\n  'rose':'\\ud83c\\udf39',\n  'rosette':'\\ud83c\\udff5',\n  'rotating_light':'\\ud83d\\udea8',\n  'round_pushpin':'\\ud83d\\udccd',\n  'rowing_man':'\\ud83d\\udea3',\n  'rowing_woman':'\\ud83d\\udea3&zwj;\\u2640\\ufe0f',\n  'rugby_football':'\\ud83c\\udfc9',\n  'running_man':'\\ud83c\\udfc3',\n  'running_shirt_with_sash':'\\ud83c\\udfbd',\n  'running_woman':'\\ud83c\\udfc3&zwj;\\u2640\\ufe0f',\n  'sa':'\\ud83c\\ude02\\ufe0f',\n  'sagittarius':'\\u2650\\ufe0f',\n  'sake':'\\ud83c\\udf76',\n  'sandal':'\\ud83d\\udc61',\n  'santa':'\\ud83c\\udf85',\n  'satellite':'\\ud83d\\udce1',\n  'saxophone':'\\ud83c\\udfb7',\n  'school':'\\ud83c\\udfeb',\n  'school_satchel':'\\ud83c\\udf92',\n  'scissors':'\\u2702\\ufe0f',\n  'scorpion':'\\ud83e\\udd82',\n  'scorpius':'\\u264f\\ufe0f',\n  'scream':'\\ud83d\\ude31',\n  'scream_cat':'\\ud83d\\ude40',\n  'scroll':'\\ud83d\\udcdc',\n  'seat':'\\ud83d\\udcba',\n  'secret':'\\u3299\\ufe0f',\n  'see_no_evil':'\\ud83d\\ude48',\n  'seedling':'\\ud83c\\udf31',\n  'selfie':'\\ud83e\\udd33',\n  'shallow_pan_of_food':'\\ud83e\\udd58',\n  'shamrock':'\\u2618\\ufe0f',\n  'shark':'\\ud83e\\udd88',\n  'shaved_ice':'\\ud83c\\udf67',\n  'sheep':'\\ud83d\\udc11',\n  'shell':'\\ud83d\\udc1a',\n  'shield':'\\ud83d\\udee1',\n  'shinto_shrine':'\\u26e9',\n  'ship':'\\ud83d\\udea2',\n  'shirt':'\\ud83d\\udc55',\n  'shopping':'\\ud83d\\udecd',\n  'shopping_cart':'\\ud83d\\uded2',\n  'shower':'\\ud83d\\udebf',\n  'shrimp':'\\ud83e\\udd90',\n  'signal_strength':'\\ud83d\\udcf6',\n  'six_pointed_star':'\\ud83d\\udd2f',\n  'ski':'\\ud83c\\udfbf',\n  'skier':'\\u26f7',\n  'skull':'\\ud83d\\udc80',\n  'skull_and_crossbones':'\\u2620\\ufe0f',\n  'sleeping':'\\ud83d\\ude34',\n  'sleeping_bed':'\\ud83d\\udecc',\n  'sleepy':'\\ud83d\\ude2a',\n  'slightly_frowning_face':'\\ud83d\\ude41',\n  'slightly_smiling_face':'\\ud83d\\ude42',\n  'slot_machine':'\\ud83c\\udfb0',\n  'small_airplane':'\\ud83d\\udee9',\n  'small_blue_diamond':'\\ud83d\\udd39',\n  'small_orange_diamond':'\\ud83d\\udd38',\n  'small_red_triangle':'\\ud83d\\udd3a',\n  'small_red_triangle_down':'\\ud83d\\udd3b',\n  'smile':'\\ud83d\\ude04',\n  'smile_cat':'\\ud83d\\ude38',\n  'smiley':'\\ud83d\\ude03',\n  'smiley_cat':'\\ud83d\\ude3a',\n  'smiling_imp':'\\ud83d\\ude08',\n  'smirk':'\\ud83d\\ude0f',\n  'smirk_cat':'\\ud83d\\ude3c',\n  'smoking':'\\ud83d\\udeac',\n  'snail':'\\ud83d\\udc0c',\n  'snake':'\\ud83d\\udc0d',\n  'sneezing_face':'\\ud83e\\udd27',\n  'snowboarder':'\\ud83c\\udfc2',\n  'snowflake':'\\u2744\\ufe0f',\n  'snowman':'\\u26c4\\ufe0f',\n  'snowman_with_snow':'\\u2603\\ufe0f',\n  'sob':'\\ud83d\\ude2d',\n  'soccer':'\\u26bd\\ufe0f',\n  'soon':'\\ud83d\\udd1c',\n  'sos':'\\ud83c\\udd98',\n  'sound':'\\ud83d\\udd09',\n  'space_invader':'\\ud83d\\udc7e',\n  'spades':'\\u2660\\ufe0f',\n  'spaghetti':'\\ud83c\\udf5d',\n  'sparkle':'\\u2747\\ufe0f',\n  'sparkler':'\\ud83c\\udf87',\n  'sparkles':'\\u2728',\n  'sparkling_heart':'\\ud83d\\udc96',\n  'speak_no_evil':'\\ud83d\\ude4a',\n  'speaker':'\\ud83d\\udd08',\n  'speaking_head':'\\ud83d\\udde3',\n  'speech_balloon':'\\ud83d\\udcac',\n  'speedboat':'\\ud83d\\udea4',\n  'spider':'\\ud83d\\udd77',\n  'spider_web':'\\ud83d\\udd78',\n  'spiral_calendar':'\\ud83d\\uddd3',\n  'spiral_notepad':'\\ud83d\\uddd2',\n  'spoon':'\\ud83e\\udd44',\n  'squid':'\\ud83e\\udd91',\n  'stadium':'\\ud83c\\udfdf',\n  'star':'\\u2b50\\ufe0f',\n  'star2':'\\ud83c\\udf1f',\n  'star_and_crescent':'\\u262a\\ufe0f',\n  'star_of_david':'\\u2721\\ufe0f',\n  'stars':'\\ud83c\\udf20',\n  'station':'\\ud83d\\ude89',\n  'statue_of_liberty':'\\ud83d\\uddfd',\n  'steam_locomotive':'\\ud83d\\ude82',\n  'stew':'\\ud83c\\udf72',\n  'stop_button':'\\u23f9',\n  'stop_sign':'\\ud83d\\uded1',\n  'stopwatch':'\\u23f1',\n  'straight_ruler':'\\ud83d\\udccf',\n  'strawberry':'\\ud83c\\udf53',\n  'stuck_out_tongue':'\\ud83d\\ude1b',\n  'stuck_out_tongue_closed_eyes':'\\ud83d\\ude1d',\n  'stuck_out_tongue_winking_eye':'\\ud83d\\ude1c',\n  'studio_microphone':'\\ud83c\\udf99',\n  'stuffed_flatbread':'\\ud83e\\udd59',\n  'sun_behind_large_cloud':'\\ud83c\\udf25',\n  'sun_behind_rain_cloud':'\\ud83c\\udf26',\n  'sun_behind_small_cloud':'\\ud83c\\udf24',\n  'sun_with_face':'\\ud83c\\udf1e',\n  'sunflower':'\\ud83c\\udf3b',\n  'sunglasses':'\\ud83d\\ude0e',\n  'sunny':'\\u2600\\ufe0f',\n  'sunrise':'\\ud83c\\udf05',\n  'sunrise_over_mountains':'\\ud83c\\udf04',\n  'surfing_man':'\\ud83c\\udfc4',\n  'surfing_woman':'\\ud83c\\udfc4&zwj;\\u2640\\ufe0f',\n  'sushi':'\\ud83c\\udf63',\n  'suspension_railway':'\\ud83d\\ude9f',\n  'sweat':'\\ud83d\\ude13',\n  'sweat_drops':'\\ud83d\\udca6',\n  'sweat_smile':'\\ud83d\\ude05',\n  'sweet_potato':'\\ud83c\\udf60',\n  'swimming_man':'\\ud83c\\udfca',\n  'swimming_woman':'\\ud83c\\udfca&zwj;\\u2640\\ufe0f',\n  'symbols':'\\ud83d\\udd23',\n  'synagogue':'\\ud83d\\udd4d',\n  'syringe':'\\ud83d\\udc89',\n  'taco':'\\ud83c\\udf2e',\n  'tada':'\\ud83c\\udf89',\n  'tanabata_tree':'\\ud83c\\udf8b',\n  'taurus':'\\u2649\\ufe0f',\n  'taxi':'\\ud83d\\ude95',\n  'tea':'\\ud83c\\udf75',\n  'telephone_receiver':'\\ud83d\\udcde',\n  'telescope':'\\ud83d\\udd2d',\n  'tennis':'\\ud83c\\udfbe',\n  'tent':'\\u26fa\\ufe0f',\n  'thermometer':'\\ud83c\\udf21',\n  'thinking':'\\ud83e\\udd14',\n  'thought_balloon':'\\ud83d\\udcad',\n  'ticket':'\\ud83c\\udfab',\n  'tickets':'\\ud83c\\udf9f',\n  'tiger':'\\ud83d\\udc2f',\n  'tiger2':'\\ud83d\\udc05',\n  'timer_clock':'\\u23f2',\n  'tipping_hand_man':'\\ud83d\\udc81&zwj;\\u2642\\ufe0f',\n  'tired_face':'\\ud83d\\ude2b',\n  'tm':'\\u2122\\ufe0f',\n  'toilet':'\\ud83d\\udebd',\n  'tokyo_tower':'\\ud83d\\uddfc',\n  'tomato':'\\ud83c\\udf45',\n  'tongue':'\\ud83d\\udc45',\n  'top':'\\ud83d\\udd1d',\n  'tophat':'\\ud83c\\udfa9',\n  'tornado':'\\ud83c\\udf2a',\n  'trackball':'\\ud83d\\uddb2',\n  'tractor':'\\ud83d\\ude9c',\n  'traffic_light':'\\ud83d\\udea5',\n  'train':'\\ud83d\\ude8b',\n  'train2':'\\ud83d\\ude86',\n  'tram':'\\ud83d\\ude8a',\n  'triangular_flag_on_post':'\\ud83d\\udea9',\n  'triangular_ruler':'\\ud83d\\udcd0',\n  'trident':'\\ud83d\\udd31',\n  'triumph':'\\ud83d\\ude24',\n  'trolleybus':'\\ud83d\\ude8e',\n  'trophy':'\\ud83c\\udfc6',\n  'tropical_drink':'\\ud83c\\udf79',\n  'tropical_fish':'\\ud83d\\udc20',\n  'truck':'\\ud83d\\ude9a',\n  'trumpet':'\\ud83c\\udfba',\n  'tulip':'\\ud83c\\udf37',\n  'tumbler_glass':'\\ud83e\\udd43',\n  'turkey':'\\ud83e\\udd83',\n  'turtle':'\\ud83d\\udc22',\n  'tv':'\\ud83d\\udcfa',\n  'twisted_rightwards_arrows':'\\ud83d\\udd00',\n  'two_hearts':'\\ud83d\\udc95',\n  'two_men_holding_hands':'\\ud83d\\udc6c',\n  'two_women_holding_hands':'\\ud83d\\udc6d',\n  'u5272':'\\ud83c\\ude39',\n  'u5408':'\\ud83c\\ude34',\n  'u55b6':'\\ud83c\\ude3a',\n  'u6307':'\\ud83c\\ude2f\\ufe0f',\n  'u6708':'\\ud83c\\ude37\\ufe0f',\n  'u6709':'\\ud83c\\ude36',\n  'u6e80':'\\ud83c\\ude35',\n  'u7121':'\\ud83c\\ude1a\\ufe0f',\n  'u7533':'\\ud83c\\ude38',\n  'u7981':'\\ud83c\\ude32',\n  'u7a7a':'\\ud83c\\ude33',\n  'umbrella':'\\u2614\\ufe0f',\n  'unamused':'\\ud83d\\ude12',\n  'underage':'\\ud83d\\udd1e',\n  'unicorn':'\\ud83e\\udd84',\n  'unlock':'\\ud83d\\udd13',\n  'up':'\\ud83c\\udd99',\n  'upside_down_face':'\\ud83d\\ude43',\n  'v':'\\u270c\\ufe0f',\n  'vertical_traffic_light':'\\ud83d\\udea6',\n  'vhs':'\\ud83d\\udcfc',\n  'vibration_mode':'\\ud83d\\udcf3',\n  'video_camera':'\\ud83d\\udcf9',\n  'video_game':'\\ud83c\\udfae',\n  'violin':'\\ud83c\\udfbb',\n  'virgo':'\\u264d\\ufe0f',\n  'volcano':'\\ud83c\\udf0b',\n  'volleyball':'\\ud83c\\udfd0',\n  'vs':'\\ud83c\\udd9a',\n  'vulcan_salute':'\\ud83d\\udd96',\n  'walking_man':'\\ud83d\\udeb6',\n  'walking_woman':'\\ud83d\\udeb6&zwj;\\u2640\\ufe0f',\n  'waning_crescent_moon':'\\ud83c\\udf18',\n  'waning_gibbous_moon':'\\ud83c\\udf16',\n  'warning':'\\u26a0\\ufe0f',\n  'wastebasket':'\\ud83d\\uddd1',\n  'watch':'\\u231a\\ufe0f',\n  'water_buffalo':'\\ud83d\\udc03',\n  'watermelon':'\\ud83c\\udf49',\n  'wave':'\\ud83d\\udc4b',\n  'wavy_dash':'\\u3030\\ufe0f',\n  'waxing_crescent_moon':'\\ud83c\\udf12',\n  'wc':'\\ud83d\\udebe',\n  'weary':'\\ud83d\\ude29',\n  'wedding':'\\ud83d\\udc92',\n  'weight_lifting_man':'\\ud83c\\udfcb\\ufe0f',\n  'weight_lifting_woman':'\\ud83c\\udfcb\\ufe0f&zwj;\\u2640\\ufe0f',\n  'whale':'\\ud83d\\udc33',\n  'whale2':'\\ud83d\\udc0b',\n  'wheel_of_dharma':'\\u2638\\ufe0f',\n  'wheelchair':'\\u267f\\ufe0f',\n  'white_check_mark':'\\u2705',\n  'white_circle':'\\u26aa\\ufe0f',\n  'white_flag':'\\ud83c\\udff3\\ufe0f',\n  'white_flower':'\\ud83d\\udcae',\n  'white_large_square':'\\u2b1c\\ufe0f',\n  'white_medium_small_square':'\\u25fd\\ufe0f',\n  'white_medium_square':'\\u25fb\\ufe0f',\n  'white_small_square':'\\u25ab\\ufe0f',\n  'white_square_button':'\\ud83d\\udd33',\n  'wilted_flower':'\\ud83e\\udd40',\n  'wind_chime':'\\ud83c\\udf90',\n  'wind_face':'\\ud83c\\udf2c',\n  'wine_glass':'\\ud83c\\udf77',\n  'wink':'\\ud83d\\ude09',\n  'wolf':'\\ud83d\\udc3a',\n  'woman':'\\ud83d\\udc69',\n  'woman_artist':'\\ud83d\\udc69&zwj;\\ud83c\\udfa8',\n  'woman_astronaut':'\\ud83d\\udc69&zwj;\\ud83d\\ude80',\n  'woman_cartwheeling':'\\ud83e\\udd38&zwj;\\u2640\\ufe0f',\n  'woman_cook':'\\ud83d\\udc69&zwj;\\ud83c\\udf73',\n  'woman_facepalming':'\\ud83e\\udd26&zwj;\\u2640\\ufe0f',\n  'woman_factory_worker':'\\ud83d\\udc69&zwj;\\ud83c\\udfed',\n  'woman_farmer':'\\ud83d\\udc69&zwj;\\ud83c\\udf3e',\n  'woman_firefighter':'\\ud83d\\udc69&zwj;\\ud83d\\ude92',\n  'woman_health_worker':'\\ud83d\\udc69&zwj;\\u2695\\ufe0f',\n  'woman_judge':'\\ud83d\\udc69&zwj;\\u2696\\ufe0f',\n  'woman_juggling':'\\ud83e\\udd39&zwj;\\u2640\\ufe0f',\n  'woman_mechanic':'\\ud83d\\udc69&zwj;\\ud83d\\udd27',\n  'woman_office_worker':'\\ud83d\\udc69&zwj;\\ud83d\\udcbc',\n  'woman_pilot':'\\ud83d\\udc69&zwj;\\u2708\\ufe0f',\n  'woman_playing_handball':'\\ud83e\\udd3e&zwj;\\u2640\\ufe0f',\n  'woman_playing_water_polo':'\\ud83e\\udd3d&zwj;\\u2640\\ufe0f',\n  'woman_scientist':'\\ud83d\\udc69&zwj;\\ud83d\\udd2c',\n  'woman_shrugging':'\\ud83e\\udd37&zwj;\\u2640\\ufe0f',\n  'woman_singer':'\\ud83d\\udc69&zwj;\\ud83c\\udfa4',\n  'woman_student':'\\ud83d\\udc69&zwj;\\ud83c\\udf93',\n  'woman_teacher':'\\ud83d\\udc69&zwj;\\ud83c\\udfeb',\n  'woman_technologist':'\\ud83d\\udc69&zwj;\\ud83d\\udcbb',\n  'woman_with_turban':'\\ud83d\\udc73&zwj;\\u2640\\ufe0f',\n  'womans_clothes':'\\ud83d\\udc5a',\n  'womans_hat':'\\ud83d\\udc52',\n  'women_wrestling':'\\ud83e\\udd3c&zwj;\\u2640\\ufe0f',\n  'womens':'\\ud83d\\udeba',\n  'world_map':'\\ud83d\\uddfa',\n  'worried':'\\ud83d\\ude1f',\n  'wrench':'\\ud83d\\udd27',\n  'writing_hand':'\\u270d\\ufe0f',\n  'x':'\\u274c',\n  'yellow_heart':'\\ud83d\\udc9b',\n  'yen':'\\ud83d\\udcb4',\n  'yin_yang':'\\u262f\\ufe0f',\n  'yum':'\\ud83d\\ude0b',\n  'zap':'\\u26a1\\ufe0f',\n  'zipper_mouth_face':'\\ud83e\\udd10',\n  'zzz':'\\ud83d\\udca4',\n\n  /* special emojis :P */\n  'octocat':  '<img alt=\":octocat:\" height=\"20\" width=\"20\" align=\"absmiddle\" src=\"https://assets-cdn.github.com/images/icons/emoji/octocat.png\">',\n  'showdown': '<span style=\"font-family: \\'Anonymous Pro\\', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;\">S</span>'\n};\n", "/**\n * Created by Estevao on 31-05-2015.\n */\n\n/**\n * Showdown Converter class\n * @class\n * @param {object} [converterOptions]\n * @returns {Converter}\n */\nshowdown.Converter = function (converterOptions) {\n  'use strict';\n\n  var\n      /**\n       * Options used by this converter\n       * @private\n       * @type {{}}\n       */\n      options = {},\n\n      /**\n       * Language extensions used by this converter\n       * @private\n       * @type {Array}\n       */\n      langExtensions = [],\n\n      /**\n       * Output modifiers extensions used by this converter\n       * @private\n       * @type {Array}\n       */\n      outputModifiers = [],\n\n      /**\n       * Event listeners\n       * @private\n       * @type {{}}\n       */\n      listeners = {},\n\n      /**\n       * The flavor set in this converter\n       */\n      setConvFlavor = setFlavor,\n\n      /**\n       * Metadata of the document\n       * @type {{parsed: {}, raw: string, format: string}}\n       */\n      metadata = {\n        parsed: {},\n        raw: '',\n        format: ''\n      };\n\n  _constructor();\n\n  /**\n   * Converter constructor\n   * @private\n   */\n  function _constructor () {\n    converterOptions = converterOptions || {};\n\n    for (var gOpt in globalOptions) {\n      if (globalOptions.hasOwnProperty(gOpt)) {\n        options[gOpt] = globalOptions[gOpt];\n      }\n    }\n\n    // Merge options\n    if (typeof converterOptions === 'object') {\n      for (var opt in converterOptions) {\n        if (converterOptions.hasOwnProperty(opt)) {\n          options[opt] = converterOptions[opt];\n        }\n      }\n    } else {\n      throw Error('Converter expects the passed parameter to be an object, but ' + typeof converterOptions +\n      ' was passed instead.');\n    }\n\n    if (options.extensions) {\n      showdown.helper.forEach(options.extensions, _parseExtension);\n    }\n  }\n\n  /**\n   * Parse extension\n   * @param {*} ext\n   * @param {string} [name='']\n   * @private\n   */\n  function _parseExtension (ext, name) {\n\n    name = name || null;\n    // If it's a string, the extension was previously loaded\n    if (showdown.helper.isString(ext)) {\n      ext = showdown.helper.stdExtName(ext);\n      name = ext;\n\n      // LEGACY_SUPPORT CODE\n      if (showdown.extensions[ext]) {\n        console.warn('DEPRECATION WARNING: ' + ext + ' is an old extension that uses a deprecated loading method.' +\n          'Please inform the developer that the extension should be updated!');\n        legacyExtensionLoading(showdown.extensions[ext], ext);\n        return;\n        // END LEGACY SUPPORT CODE\n\n      } else if (!showdown.helper.isUndefined(extensions[ext])) {\n        ext = extensions[ext];\n\n      } else {\n        throw Error('Extension \"' + ext + '\" could not be loaded. It was either not found or is not a valid extension.');\n      }\n    }\n\n    if (typeof ext === 'function') {\n      ext = ext();\n    }\n\n    if (!showdown.helper.isArray(ext)) {\n      ext = [ext];\n    }\n\n    var validExt = validate(ext, name);\n    if (!validExt.valid) {\n      throw Error(validExt.error);\n    }\n\n    for (var i = 0; i < ext.length; ++i) {\n      switch (ext[i].type) {\n\n        case 'lang':\n          langExtensions.push(ext[i]);\n          break;\n\n        case 'output':\n          outputModifiers.push(ext[i]);\n          break;\n      }\n      if (ext[i].hasOwnProperty('listeners')) {\n        for (var ln in ext[i].listeners) {\n          if (ext[i].listeners.hasOwnProperty(ln)) {\n            listen(ln, ext[i].listeners[ln]);\n          }\n        }\n      }\n    }\n\n  }\n\n  /**\n   * LEGACY_SUPPORT\n   * @param {*} ext\n   * @param {string} name\n   */\n  function legacyExtensionLoading (ext, name) {\n    if (typeof ext === 'function') {\n      ext = ext(new showdown.Converter());\n    }\n    if (!showdown.helper.isArray(ext)) {\n      ext = [ext];\n    }\n    var valid = validate(ext, name);\n\n    if (!valid.valid) {\n      throw Error(valid.error);\n    }\n\n    for (var i = 0; i < ext.length; ++i) {\n      switch (ext[i].type) {\n        case 'lang':\n          langExtensions.push(ext[i]);\n          break;\n        case 'output':\n          outputModifiers.push(ext[i]);\n          break;\n        default:// should never reach here\n          throw Error('Extension loader error: Type unrecognized!!!');\n      }\n    }\n  }\n\n  /**\n   * Listen to an event\n   * @param {string} name\n   * @param {function} callback\n   */\n  function listen (name, callback) {\n    if (!showdown.helper.isString(name)) {\n      throw Error('Invalid argument in converter.listen() method: name must be a string, but ' + typeof name + ' given');\n    }\n\n    if (typeof callback !== 'function') {\n      throw Error('Invalid argument in converter.listen() method: callback must be a function, but ' + typeof callback + ' given');\n    }\n\n    if (!listeners.hasOwnProperty(name)) {\n      listeners[name] = [];\n    }\n    listeners[name].push(callback);\n  }\n\n  function rTrimInputText (text) {\n    var rsp = text.match(/^\\s*/)[0].length,\n        rgx = new RegExp('^\\\\s{0,' + rsp + '}', 'gm');\n    return text.replace(rgx, '');\n  }\n\n  /**\n   * Dispatch an event\n   * @private\n   * @param {string} evtName Event name\n   * @param {string} text Text\n   * @param {{}} options Converter Options\n   * @param {{}} globals\n   * @returns {string}\n   */\n  this._dispatch = function dispatch (evtName, text, options, globals) {\n    if (listeners.hasOwnProperty(evtName)) {\n      for (var ei = 0; ei < listeners[evtName].length; ++ei) {\n        var nText = listeners[evtName][ei](evtName, text, this, options, globals);\n        if (nText && typeof nText !== 'undefined') {\n          text = nText;\n        }\n      }\n    }\n    return text;\n  };\n\n  /**\n   * Listen to an event\n   * @param {string} name\n   * @param {function} callback\n   * @returns {showdown.Converter}\n   */\n  this.listen = function (name, callback) {\n    listen(name, callback);\n    return this;\n  };\n\n  /**\n   * Converts a markdown string into HTML\n   * @param {string} text\n   * @returns {*}\n   */\n  this.makeHtml = function (text) {\n    //check if text is not falsy\n    if (!text) {\n      return text;\n    }\n\n    var globals = {\n      gHtmlBlocks:     [],\n      gHtmlMdBlocks:   [],\n      gHtmlSpans:      [],\n      gUrls:           {},\n      gTitles:         {},\n      gDimensions:     {},\n      gListLevel:      0,\n      hashLinkCounts:  {},\n      langExtensions:  langExtensions,\n      outputModifiers: outputModifiers,\n      converter:       this,\n      ghCodeBlocks:    [],\n      metadata: {\n        parsed: {},\n        raw: '',\n        format: ''\n      }\n    };\n\n    // This lets us use ¨ trema as an escape char to avoid md5 hashes\n    // The choice of character is arbitrary; anything that isn't\n    // magic in Markdown will work.\n    text = text.replace(/¨/g, '¨T');\n\n    // Replace $ with ¨D\n    // RegExp interprets $ as a special character\n    // when it's in a replacement string\n    text = text.replace(/\\$/g, '¨D');\n\n    // Standardize line endings\n    text = text.replace(/\\r\\n/g, '\\n'); // DOS to Unix\n    text = text.replace(/\\r/g, '\\n'); // Mac to Unix\n\n    // Stardardize line spaces\n    text = text.replace(/\\u00A0/g, '&nbsp;');\n\n    if (options.smartIndentationFix) {\n      text = rTrimInputText(text);\n    }\n\n    // Make sure text begins and ends with a couple of newlines:\n    text = '\\n\\n' + text + '\\n\\n';\n\n    // detab\n    text = showdown.subParser('detab')(text, options, globals);\n\n    /**\n     * Strip any lines consisting only of spaces and tabs.\n     * This makes subsequent regexs easier to write, because we can\n     * match consecutive blank lines with /\\n+/ instead of something\n     * contorted like /[ \\t]*\\n+/\n     */\n    text = text.replace(/^[ \\t]+$/mg, '');\n\n    //run languageExtensions\n    showdown.helper.forEach(langExtensions, function (ext) {\n      text = showdown.subParser('runExtension')(ext, text, options, globals);\n    });\n\n    // run the sub parsers\n    text = showdown.subParser('metadata')(text, options, globals);\n    text = showdown.subParser('hashPreCodeTags')(text, options, globals);\n    text = showdown.subParser('githubCodeBlocks')(text, options, globals);\n    text = showdown.subParser('hashHTMLBlocks')(text, options, globals);\n    text = showdown.subParser('hashCodeTags')(text, options, globals);\n    text = showdown.subParser('stripLinkDefinitions')(text, options, globals);\n    text = showdown.subParser('blockGamut')(text, options, globals);\n    text = showdown.subParser('unhashHTMLSpans')(text, options, globals);\n    text = showdown.subParser('unescapeSpecialChars')(text, options, globals);\n\n    // attacklab: Restore dollar signs\n    text = text.replace(/¨D/g, '$$');\n\n    // attacklab: Restore tremas\n    text = text.replace(/¨T/g, '¨');\n\n    // render a complete html document instead of a partial if the option is enabled\n    text = showdown.subParser('completeHTMLDocument')(text, options, globals);\n\n    // Run output modifiers\n    showdown.helper.forEach(outputModifiers, function (ext) {\n      text = showdown.subParser('runExtension')(ext, text, options, globals);\n    });\n\n    // update metadata\n    metadata = globals.metadata;\n    return text;\n  };\n\n  /**\n   * Converts an HTML string into a markdown string\n   * @param src\n   * @param [HTMLParser] A WHATWG DOM and HTML parser, such as JSDOM. If none is supplied, window.document will be used.\n   * @returns {string}\n   */\n  this.makeMarkdown = this.makeMd = function (src, HTMLParser) {\n\n    // replace \\r\\n with \\n\n    src = src.replace(/\\r\\n/g, '\\n');\n    src = src.replace(/\\r/g, '\\n'); // old macs\n\n    // due to an edge case, we need to find this: > <\n    // to prevent removing of non silent white spaces\n    // ex: <em>this is</em> <strong>sparta</strong>\n    src = src.replace(/>[ \\t]+</, '>¨NBSP;<');\n\n    if (!HTMLParser) {\n      if (window && window.document) {\n        HTMLParser = window.document;\n      } else {\n        throw new Error('HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM');\n      }\n    }\n\n    var doc = HTMLParser.createElement('div');\n    doc.innerHTML = src;\n\n    var globals = {\n      preList: substitutePreCodeTags(doc)\n    };\n\n    // remove all newlines and collapse spaces\n    clean(doc);\n\n    // some stuff, like accidental reference links must now be escaped\n    // TODO\n    // doc.innerHTML = doc.innerHTML.replace(/\\[[\\S\\t ]]/);\n\n    var nodes = doc.childNodes,\n        mdDoc = '';\n\n    for (var i = 0; i < nodes.length; i++) {\n      mdDoc += showdown.subParser('makeMarkdown.node')(nodes[i], globals);\n    }\n\n    function clean (node) {\n      for (var n = 0; n < node.childNodes.length; ++n) {\n        var child = node.childNodes[n];\n        if (child.nodeType === 3) {\n          if (!/\\S/.test(child.nodeValue) && !/^[ ]+$/.test(child.nodeValue)) {\n            node.removeChild(child);\n            --n;\n          } else {\n            child.nodeValue = child.nodeValue.split('\\n').join(' ');\n            child.nodeValue = child.nodeValue.replace(/(\\s)+/g, '$1');\n          }\n        } else if (child.nodeType === 1) {\n          clean(child);\n        }\n      }\n    }\n\n    // find all pre tags and replace contents with placeholder\n    // we need this so that we can remove all indentation from html\n    // to ease up parsing\n    function substitutePreCodeTags (doc) {\n\n      var pres = doc.querySelectorAll('pre'),\n          presPH = [];\n\n      for (var i = 0; i < pres.length; ++i) {\n\n        if (pres[i].childElementCount === 1 && pres[i].firstChild.tagName.toLowerCase() === 'code') {\n          var content = pres[i].firstChild.innerHTML.trim(),\n              language = pres[i].firstChild.getAttribute('data-language') || '';\n\n          // if data-language attribute is not defined, then we look for class language-*\n          if (language === '') {\n            var classes = pres[i].firstChild.className.split(' ');\n            for (var c = 0; c < classes.length; ++c) {\n              var matches = classes[c].match(/^language-(.+)$/);\n              if (matches !== null) {\n                language = matches[1];\n                break;\n              }\n            }\n          }\n\n          // unescape html entities in content\n          content = showdown.helper.unescapeHTMLEntities(content);\n\n          presPH.push(content);\n          pres[i].outerHTML = '<precode language=\"' + language + '\" precodenum=\"' + i.toString() + '\"></precode>';\n        } else {\n          presPH.push(pres[i].innerHTML);\n          pres[i].innerHTML = '';\n          pres[i].setAttribute('prenum', i.toString());\n        }\n      }\n      return presPH;\n    }\n\n    return mdDoc;\n  };\n\n  /**\n   * Set an option of this Converter instance\n   * @param {string} key\n   * @param {*} value\n   */\n  this.setOption = function (key, value) {\n    options[key] = value;\n  };\n\n  /**\n   * Get the option of this Converter instance\n   * @param {string} key\n   * @returns {*}\n   */\n  this.getOption = function (key) {\n    return options[key];\n  };\n\n  /**\n   * Get the options of this Converter instance\n   * @returns {{}}\n   */\n  this.getOptions = function () {\n    return options;\n  };\n\n  /**\n   * Add extension to THIS converter\n   * @param {{}} extension\n   * @param {string} [name=null]\n   */\n  this.addExtension = function (extension, name) {\n    name = name || null;\n    _parseExtension(extension, name);\n  };\n\n  /**\n   * Use a global registered extension with THIS converter\n   * @param {string} extensionName Name of the previously registered extension\n   */\n  this.useExtension = function (extensionName) {\n    _parseExtension(extensionName);\n  };\n\n  /**\n   * Set the flavor THIS converter should use\n   * @param {string} name\n   */\n  this.setFlavor = function (name) {\n    if (!flavor.hasOwnProperty(name)) {\n      throw Error(name + ' flavor was not found');\n    }\n    var preset = flavor[name];\n    setConvFlavor = name;\n    for (var option in preset) {\n      if (preset.hasOwnProperty(option)) {\n        options[option] = preset[option];\n      }\n    }\n  };\n\n  /**\n   * Get the currently set flavor of this converter\n   * @returns {string}\n   */\n  this.getFlavor = function () {\n    return setConvFlavor;\n  };\n\n  /**\n   * Remove an extension from THIS converter.\n   * Note: This is a costly operation. It's better to initialize a new converter\n   * and specify the extensions you wish to use\n   * @param {Array} extension\n   */\n  this.removeExtension = function (extension) {\n    if (!showdown.helper.isArray(extension)) {\n      extension = [extension];\n    }\n    for (var a = 0; a < extension.length; ++a) {\n      var ext = extension[a];\n      for (var i = 0; i < langExtensions.length; ++i) {\n        if (langExtensions[i] === ext) {\n          langExtensions.splice(i, 1);\n        }\n      }\n      for (var ii = 0; ii < outputModifiers.length; ++ii) {\n        if (outputModifiers[ii] === ext) {\n          outputModifiers.splice(ii, 1);\n        }\n      }\n    }\n  };\n\n  /**\n   * Get all extension of THIS converter\n   * @returns {{language: Array, output: Array}}\n   */\n  this.getAllExtensions = function () {\n    return {\n      language: langExtensions,\n      output: outputModifiers\n    };\n  };\n\n  /**\n   * Get the metadata of the previously parsed document\n   * @param raw\n   * @returns {string|{}}\n   */\n  this.getMetadata = function (raw) {\n    if (raw) {\n      return metadata.raw;\n    } else {\n      return metadata.parsed;\n    }\n  };\n\n  /**\n   * Get the metadata format of the previously parsed document\n   * @returns {string}\n   */\n  this.getMetadataFormat = function () {\n    return metadata.format;\n  };\n\n  /**\n   * Private: set a single key, value metadata pair\n   * @param {string} key\n   * @param {string} value\n   */\n  this._setMetadataPair = function (key, value) {\n    metadata.parsed[key] = value;\n  };\n\n  /**\n   * Private: set metadata format\n   * @param {string} format\n   */\n  this._setMetadataFormat = function (format) {\n    metadata.format = format;\n  };\n\n  /**\n   * Private: set metadata raw text\n   * @param {string} raw\n   */\n  this._setMetadataRaw = function (raw) {\n    metadata.raw = raw;\n  };\n};\n", "/**\n * Turn Markdown link shortcuts into XHTML <a> tags.\n */\nshowdown.subParser('anchors', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('anchors.before', text, options, globals);\n\n  var writeAnchorTag = function (wholeMatch, linkText, linkId, url, m5, m6, title) {\n    if (showdown.helper.isUndefined(title)) {\n      title = '';\n    }\n    linkId = linkId.toLowerCase();\n\n    // Special case for explicit empty url\n    if (wholeMatch.search(/\\(<?\\s*>? ?(['\"].*['\"])?\\)$/m) > -1) {\n      url = '';\n    } else if (!url) {\n      if (!linkId) {\n        // lower-case and turn embedded newlines into spaces\n        linkId = linkText.toLowerCase().replace(/ ?\\n/g, ' ');\n      }\n      url = '#' + linkId;\n\n      if (!showdown.helper.isUndefined(globals.gUrls[linkId])) {\n        url = globals.gUrls[linkId];\n        if (!showdown.helper.isUndefined(globals.gTitles[linkId])) {\n          title = globals.gTitles[linkId];\n        }\n      } else {\n        return wholeMatch;\n      }\n    }\n\n    //url = showdown.helper.escapeCharacters(url, '*_', false); // replaced line to improve performance\n    url = url.replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);\n\n    var result = '<a href=\"' + url + '\"';\n\n    if (title !== '' && title !== null) {\n      title = title.replace(/\"/g, '&quot;');\n      //title = showdown.helper.escapeCharacters(title, '*_', false); // replaced line to improve performance\n      title = title.replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);\n      result += ' title=\"' + title + '\"';\n    }\n\n    // optionLinksInNewWindow only applies\n    // to external links. Hash links (#) open in same page\n    if (options.openLinksInNewWindow && !/^#/.test(url)) {\n      // escaped _\n      result += ' rel=\"noopener noreferrer\" target=\"¨E95Eblank\"';\n    }\n\n    result += '>' + linkText + '</a>';\n\n    return result;\n  };\n\n  // First, handle reference-style links: [link text] [id]\n  text = text.replace(/\\[((?:\\[[^\\]]*]|[^\\[\\]])*)] ?(?:\\n *)?\\[(.*?)]()()()()/g, writeAnchorTag);\n\n  // Next, inline-style links: [link text](url \"optional title\")\n  // cases with crazy urls like ./image/cat1).png\n  text = text.replace(/\\[((?:\\[[^\\]]*]|[^\\[\\]])*)]()[ \\t]*\\([ \\t]?<([^>]*)>(?:[ \\t]*(([\"'])([^\"]*?)\\5))?[ \\t]?\\)/g,\n    writeAnchorTag);\n\n  // normal cases\n  text = text.replace(/\\[((?:\\[[^\\]]*]|[^\\[\\]])*)]()[ \\t]*\\([ \\t]?<?([\\S]+?(?:\\([\\S]*?\\)[\\S]*?)?)>?(?:[ \\t]*(([\"'])([^\"]*?)\\5))?[ \\t]?\\)/g,\n    writeAnchorTag);\n\n  // handle reference-style shortcuts: [link text]\n  // These must come last in case you've also got [link test][1]\n  // or [link test](/foo)\n  text = text.replace(/\\[([^\\[\\]]+)]()()()()()/g, writeAnchorTag);\n\n  // Lastly handle GithubMentions if option is enabled\n  if (options.ghMentions) {\n    text = text.replace(/(^|\\s)(\\\\)?(@([a-z\\d]+(?:[a-z\\d.-]+?[a-z\\d]+)*))/gmi, function (wm, st, escape, mentions, username) {\n      if (escape === '\\\\') {\n        return st + mentions;\n      }\n\n      //check if options.ghMentionsLink is a string\n      if (!showdown.helper.isString(options.ghMentionsLink)) {\n        throw new Error('ghMentionsLink option must be a string');\n      }\n      var lnk = options.ghMentionsLink.replace(/\\{u}/g, username),\n          target = '';\n      if (options.openLinksInNewWindow) {\n        target = ' rel=\"noopener noreferrer\" target=\"¨E95Eblank\"';\n      }\n      return st + '<a href=\"' + lnk + '\"' + target + '>' + mentions + '</a>';\n    });\n  }\n\n  text = globals.converter._dispatch('anchors.after', text, options, globals);\n  return text;\n});\n", "// url allowed chars [a-z\\d_.~:/?#[]@!$&'()*+,;=-]\n\nvar simpleURLRegex  = /([*~_]+|\\b)(((https?|ftp|dict):\\/\\/|www\\.)[^'\">\\s]+?\\.[^'\">\\s]+?)()(\\1)?(?=\\s|$)(?![\"<>])/gi,\n    simpleURLRegex2 = /([*~_]+|\\b)(((https?|ftp|dict):\\/\\/|www\\.)[^'\">\\s]+\\.[^'\">\\s]+?)([.!?,()\\[\\]])?(\\1)?(?=\\s|$)(?![\"<>])/gi,\n    delimUrlRegex   = /()<(((https?|ftp|dict):\\/\\/|www\\.)[^'\">\\s]+)()>()/gi,\n    simpleMailRegex = /(^|\\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\\.[-a-z0-9]+)*\\.[a-z]+)(?=$|\\s)/gmi,\n    delimMailRegex  = /<()(?:mailto:)?([-.\\w]+@[-a-z0-9]+(\\.[-a-z0-9]+)*\\.[a-z]+)>/gi,\n\n    replaceLink = function (options) {\n      'use strict';\n      return function (wm, leadingMagicChars, link, m2, m3, trailingPunctuation, trailingMagicChars) {\n        link = link.replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);\n        var lnkTxt = link,\n            append = '',\n            target = '',\n            lmc    = leadingMagicChars || '',\n            tmc    = trailingMagicChars || '';\n        if (/^www\\./i.test(link)) {\n          link = link.replace(/^www\\./i, 'http://www.');\n        }\n        if (options.excludeTrailingPunctuationFromURLs && trailingPunctuation) {\n          append = trailingPunctuation;\n        }\n        if (options.openLinksInNewWindow) {\n          target = ' rel=\"noopener noreferrer\" target=\"¨E95Eblank\"';\n        }\n        return lmc + '<a href=\"' + link + '\"' + target + '>' + lnkTxt + '</a>' + append + tmc;\n      };\n    },\n\n    replaceMail = function (options, globals) {\n      'use strict';\n      return function (wholeMatch, b, mail) {\n        var href = 'mailto:';\n        b = b || '';\n        mail = showdown.subParser('unescapeSpecialChars')(mail, options, globals);\n        if (options.encodeEmails) {\n          href = showdown.helper.encodeEmailAddress(href + mail);\n          mail = showdown.helper.encodeEmailAddress(mail);\n        } else {\n          href = href + mail;\n        }\n        return b + '<a href=\"' + href + '\">' + mail + '</a>';\n      };\n    };\n\nshowdown.subParser('autoLinks', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('autoLinks.before', text, options, globals);\n\n  text = text.replace(delimUrlRegex, replaceLink(options));\n  text = text.replace(delimMailRegex, replaceMail(options, globals));\n\n  text = globals.converter._dispatch('autoLinks.after', text, options, globals);\n\n  return text;\n});\n\nshowdown.subParser('simplifiedAutoLinks', function (text, options, globals) {\n  'use strict';\n\n  if (!options.simplifiedAutoLink) {\n    return text;\n  }\n\n  text = globals.converter._dispatch('simplifiedAutoLinks.before', text, options, globals);\n\n  if (options.excludeTrailingPunctuationFromURLs) {\n    text = text.replace(simpleURLRegex2, replaceLink(options));\n  } else {\n    text = text.replace(simpleURLRegex, replaceLink(options));\n  }\n  text = text.replace(simpleMailRegex, replaceMail(options, globals));\n\n  text = globals.converter._dispatch('simplifiedAutoLinks.after', text, options, globals);\n\n  return text;\n});\n", "/**\n * These are all the transformations that form block-level\n * tags like paragraphs, headers, and list items.\n */\nshowdown.subParser('blockGamut', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('blockGamut.before', text, options, globals);\n\n  // we parse blockquotes first so that we can have headings and hrs\n  // inside blockquotes\n  text = showdown.subParser('blockQuotes')(text, options, globals);\n  text = showdown.subParser('headers')(text, options, globals);\n\n  // Do Horizontal Rules:\n  text = showdown.subParser('horizontalRule')(text, options, globals);\n\n  text = showdown.subParser('lists')(text, options, globals);\n  text = showdown.subParser('codeBlocks')(text, options, globals);\n  text = showdown.subParser('tables')(text, options, globals);\n\n  // We already ran _HashHTMLBlocks() before, in Markdown(), but that\n  // was to escape raw HTML in the original Markdown source. This time,\n  // we're escaping the markup we've just created, so that we don't wrap\n  // <p> tags around block-level tags.\n  text = showdown.subParser('hashHTMLBlocks')(text, options, globals);\n  text = showdown.subParser('paragraphs')(text, options, globals);\n\n  text = globals.converter._dispatch('blockGamut.after', text, options, globals);\n\n  return text;\n});\n", "showdown.subParser('blockQuotes', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('blockQuotes.before', text, options, globals);\n\n  // add a couple extra lines after the text and endtext mark\n  text = text + '\\n\\n';\n\n  var rgx = /(^ {0,3}>[ \\t]?.+\\n(.+\\n)*\\n*)+/gm;\n\n  if (options.splitAdjacentBlockquotes) {\n    rgx = /^ {0,3}>[\\s\\S]*?(?:\\n\\n)/gm;\n  }\n\n  text = text.replace(rgx, function (bq) {\n    // attacklab: hack around Konqueror 3.5.4 bug:\n    // \"----------bug\".replace(/^-/g,\"\") == \"bug\"\n    bq = bq.replace(/^[ \\t]*>[ \\t]?/gm, ''); // trim one level of quoting\n\n    // attacklab: clean up hack\n    bq = bq.replace(/¨0/g, '');\n\n    bq = bq.replace(/^[ \\t]+$/gm, ''); // trim whitespace-only lines\n    bq = showdown.subParser('githubCodeBlocks')(bq, options, globals);\n    bq = showdown.subParser('blockGamut')(bq, options, globals); // recurse\n\n    bq = bq.replace(/(^|\\n)/g, '$1  ');\n    // These leading spaces screw with <pre> content, so we need to fix that:\n    bq = bq.replace(/(\\s*<pre>[^\\r]+?<\\/pre>)/gm, function (wholeMatch, m1) {\n      var pre = m1;\n      // attacklab: hack around Konqueror 3.5.4 bug:\n      pre = pre.replace(/^  /mg, '¨0');\n      pre = pre.replace(/¨0/g, '');\n      return pre;\n    });\n\n    return showdown.subParser('hashBlock')('<blockquote>\\n' + bq + '\\n</blockquote>', options, globals);\n  });\n\n  text = globals.converter._dispatch('blockQuotes.after', text, options, globals);\n  return text;\n});\n", "/**\n * Process Markdown `<pre><code>` blocks.\n */\nshowdown.subParser('codeBlocks', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('codeBlocks.before', text, options, globals);\n\n  // sentinel workarounds for lack of \\A and \\Z, safari\\khtml bug\n  text += '¨0';\n\n  var pattern = /(?:\\n\\n|^)((?:(?:[ ]{4}|\\t).*\\n+)+)(\\n*[ ]{0,3}[^ \\t\\n]|(?=¨0))/g;\n  text = text.replace(pattern, function (wholeMatch, m1, m2) {\n    var codeblock = m1,\n        nextChar = m2,\n        end = '\\n';\n\n    codeblock = showdown.subParser('outdent')(codeblock, options, globals);\n    codeblock = showdown.subParser('encodeCode')(codeblock, options, globals);\n    codeblock = showdown.subParser('detab')(codeblock, options, globals);\n    codeblock = codeblock.replace(/^\\n+/g, ''); // trim leading newlines\n    codeblock = codeblock.replace(/\\n+$/g, ''); // trim trailing newlines\n\n    if (options.omitExtraWLInCodeBlocks) {\n      end = '';\n    }\n\n    codeblock = '<pre><code>' + codeblock + end + '</code></pre>';\n\n    return showdown.subParser('hashBlock')(codeblock, options, globals) + nextChar;\n  });\n\n  // strip sentinel\n  text = text.replace(/¨0/, '');\n\n  text = globals.converter._dispatch('codeBlocks.after', text, options, globals);\n  return text;\n});\n", "/**\n *\n *   *  Backtick quotes are used for <code></code> spans.\n *\n *   *  You can use multiple backticks as the delimiters if you want to\n *     include literal backticks in the code span. So, this input:\n *\n *         Just type ``foo `bar` baz`` at the prompt.\n *\n *       Will translate to:\n *\n *         <p>Just type <code>foo `bar` baz</code> at the prompt.</p>\n *\n *    There's no arbitrary limit to the number of backticks you\n *    can use as delimters. If you need three consecutive backticks\n *    in your code, use four for delimiters, etc.\n *\n *  *  You can use spaces to get literal backticks at the edges:\n *\n *         ... type `` `bar` `` ...\n *\n *       Turns to:\n *\n *         ... type <code>`bar`</code> ...\n */\nshowdown.subParser('codeSpans', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('codeSpans.before', text, options, globals);\n\n  if (typeof (text) === 'undefined') {\n    text = '';\n  }\n  text = text.replace(/(^|[^\\\\])(`+)([^\\r]*?[^`])\\2(?!`)/gm,\n    function (wholeMatch, m1, m2, m3) {\n      var c = m3;\n      c = c.replace(/^([ \\t]*)/g, '');\t// leading whitespace\n      c = c.replace(/[ \\t]*$/g, '');\t// trailing whitespace\n      c = showdown.subParser('encodeCode')(c, options, globals);\n      c = m1 + '<code>' + c + '</code>';\n      c = showdown.subParser('hashHTMLSpans')(c, options, globals);\n      return c;\n    }\n  );\n\n  text = globals.converter._dispatch('codeSpans.after', text, options, globals);\n  return text;\n});\n", "/**\n * Create a full HTML document from the processed markdown\n */\nshowdown.subParser('completeHTMLDocument', function (text, options, globals) {\n  'use strict';\n\n  if (!options.completeHTMLDocument) {\n    return text;\n  }\n\n  text = globals.converter._dispatch('completeHTMLDocument.before', text, options, globals);\n\n  var doctype = 'html',\n      doctypeParsed = '<!DOCTYPE HTML>\\n',\n      title = '',\n      charset = '<meta charset=\"utf-8\">\\n',\n      lang = '',\n      metadata = '';\n\n  if (typeof globals.metadata.parsed.doctype !== 'undefined') {\n    doctypeParsed = '<!DOCTYPE ' +  globals.metadata.parsed.doctype + '>\\n';\n    doctype = globals.metadata.parsed.doctype.toString().toLowerCase();\n    if (doctype === 'html' || doctype === 'html5') {\n      charset = '<meta charset=\"utf-8\">';\n    }\n  }\n\n  for (var meta in globals.metadata.parsed) {\n    if (globals.metadata.parsed.hasOwnProperty(meta)) {\n      switch (meta.toLowerCase()) {\n        case 'doctype':\n          break;\n\n        case 'title':\n          title = '<title>' +  globals.metadata.parsed.title + '</title>\\n';\n          break;\n\n        case 'charset':\n          if (doctype === 'html' || doctype === 'html5') {\n            charset = '<meta charset=\"' + globals.metadata.parsed.charset + '\">\\n';\n          } else {\n            charset = '<meta name=\"charset\" content=\"' + globals.metadata.parsed.charset + '\">\\n';\n          }\n          break;\n\n        case 'language':\n        case 'lang':\n          lang = ' lang=\"' + globals.metadata.parsed[meta] + '\"';\n          metadata += '<meta name=\"' + meta + '\" content=\"' + globals.metadata.parsed[meta] + '\">\\n';\n          break;\n\n        default:\n          metadata += '<meta name=\"' + meta + '\" content=\"' + globals.metadata.parsed[meta] + '\">\\n';\n      }\n    }\n  }\n\n  text = doctypeParsed + '<html' + lang + '>\\n<head>\\n' + title + charset + metadata + '</head>\\n<body>\\n' + text.trim() + '\\n</body>\\n</html>';\n\n  text = globals.converter._dispatch('completeHTMLDocument.after', text, options, globals);\n  return text;\n});\n", "/**\n * Convert all tabs to spaces\n */\nshowdown.subParser('detab', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('detab.before', text, options, globals);\n\n  // expand first n-1 tabs\n  text = text.replace(/\\t(?=\\t)/g, '    '); // g_tab_width\n\n  // replace the nth with two sentinels\n  text = text.replace(/\\t/g, '¨A¨B');\n\n  // use the sentinel to anchor our regex so it doesn't explode\n  text = text.replace(/¨B(.+?)¨A/g, function (wholeMatch, m1) {\n    var leadingText = m1,\n        numSpaces = 4 - leadingText.length % 4;  // g_tab_width\n\n    // there *must* be a better way to do this:\n    for (var i = 0; i < numSpaces; i++) {\n      leadingText += ' ';\n    }\n\n    return leadingText;\n  });\n\n  // clean up sentinels\n  text = text.replace(/¨A/g, '    ');  // g_tab_width\n  text = text.replace(/¨B/g, '');\n\n  text = globals.converter._dispatch('detab.after', text, options, globals);\n  return text;\n});\n", "showdown.subParser('ellipsis', function (text, options, globals) {\n  'use strict';\n\n  if (!options.ellipsis) {\n    return text;\n  }\n\n  text = globals.converter._dispatch('ellipsis.before', text, options, globals);\n\n  text = text.replace(/\\.\\.\\./g, '…');\n\n  text = globals.converter._dispatch('ellipsis.after', text, options, globals);\n\n  return text;\n});\n", "/**\n * Turn emoji codes into emojis\n *\n * List of supported emojis: https://github.com/showdownjs/showdown/wiki/Emojis\n */\nshowdown.subParser('emoji', function (text, options, globals) {\n  'use strict';\n\n  if (!options.emoji) {\n    return text;\n  }\n\n  text = globals.converter._dispatch('emoji.before', text, options, globals);\n\n  var emojiRgx = /:([\\S]+?):/g;\n\n  text = text.replace(emojiRgx, function (wm, emojiCode) {\n    if (showdown.helper.emojis.hasOwnProperty(emojiCode)) {\n      return showdown.helper.emojis[emojiCode];\n    }\n    return wm;\n  });\n\n  text = globals.converter._dispatch('emoji.after', text, options, globals);\n\n  return text;\n});\n", "/**\n * Smart processing for ampersands and angle brackets that need to be encoded.\n */\nshowdown.subParser('encodeAmpsAndAngles', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('encodeAmpsAndAngles.before', text, options, globals);\n\n  // Ampersand-encoding based entirely on Nat Irons's Amputator MT plugin:\n  // http://bumppo.net/projects/amputator/\n  text = text.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\\w+);)/g, '&amp;');\n\n  // Encode naked <'s\n  text = text.replace(/<(?![a-z\\/?$!])/gi, '&lt;');\n\n  // Encode <\n  text = text.replace(/</g, '&lt;');\n\n  // Encode >\n  text = text.replace(/>/g, '&gt;');\n\n  text = globals.converter._dispatch('encodeAmpsAndAngles.after', text, options, globals);\n  return text;\n});\n", "/**\n * Returns the string, with after processing the following backslash escape sequences.\n *\n * attacklab: The polite way to do this is with the new escapeCharacters() function:\n *\n *    text = escapeCharacters(text,\"\\\\\",true);\n *    text = escapeCharacters(text,\"`*_{}[]()>#+-.!\",true);\n *\n * ...but we're sidestepping its use of the (slow) RegExp constructor\n * as an optimization for Firefox.  This function gets called a LOT.\n */\nshowdown.subParser('encodeBackslashEscapes', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('encodeBackslashEscapes.before', text, options, globals);\n\n  text = text.replace(/\\\\(\\\\)/g, showdown.helper.escapeCharactersCallback);\n  text = text.replace(/\\\\([`*_{}\\[\\]()>#+.!~=|:-])/g, showdown.helper.escapeCharactersCallback);\n\n  text = globals.converter._dispatch('encodeBackslashEscapes.after', text, options, globals);\n  return text;\n});\n", "/**\n * Encode/escape certain characters inside Markdown code runs.\n * The point is that in code, these characters are literals,\n * and lose their special Markdown meanings.\n */\nshowdown.subParser('encodeCode', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('encodeCode.before', text, options, globals);\n\n  // Encode all ampersands; HTML entities are not\n  // entities within a Markdown code span.\n  text = text\n    .replace(/&/g, '&amp;')\n  // Do the angle bracket song and dance:\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n  // Now, escape characters that are magic in Markdown:\n    .replace(/([*_{}\\[\\]\\\\=~-])/g, showdown.helper.escapeCharactersCallback);\n\n  text = globals.converter._dispatch('encodeCode.after', text, options, globals);\n  return text;\n});\n", "/**\n * Within tags -- meaning between < and > -- encode [\\ ` * _ ~ =] so they\n * don't conflict with their use in Markdown for code, italics and strong.\n */\nshowdown.subParser('escapeSpecialCharsWithinTagAttributes', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('escapeSpecialCharsWithinTagAttributes.before', text, options, globals);\n\n  // Build a regex to find HTML tags.\n  var tags     = /<\\/?[a-z\\d_:-]+(?:[\\s]+[\\s\\S]+?)?>/gi,\n      comments = /<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;\n\n  text = text.replace(tags, function (wholeMatch) {\n    return wholeMatch\n      .replace(/(.)<\\/?code>(?=.)/g, '$1`')\n      .replace(/([\\\\`*_~=|])/g, showdown.helper.escapeCharactersCallback);\n  });\n\n  text = text.replace(comments, function (wholeMatch) {\n    return wholeMatch\n      .replace(/([\\\\`*_~=|])/g, showdown.helper.escapeCharactersCallback);\n  });\n\n  text = globals.converter._dispatch('escapeSpecialCharsWithinTagAttributes.after', text, options, globals);\n  return text;\n});\n", "/**\n * Handle github codeblocks prior to running HashHTML so that\n * HTML contained within the codeblock gets escaped properly\n * Example:\n * ```ruby\n *     def hello_world(x)\n *       puts \"Hello, #{x}\"\n *     end\n * ```\n */\nshowdown.subParser('githubCodeBlocks', function (text, options, globals) {\n  'use strict';\n\n  // early exit if option is not enabled\n  if (!options.ghCodeBlocks) {\n    return text;\n  }\n\n  text = globals.converter._dispatch('githubCodeBlocks.before', text, options, globals);\n\n  text += '¨0';\n\n  text = text.replace(/(?:^|\\n)(?: {0,3})(```+|~~~+)(?: *)([^\\s`~]*)\\n([\\s\\S]*?)\\n(?: {0,3})\\1/g, function (wholeMatch, delim, language, codeblock) {\n    var end = (options.omitExtraWLInCodeBlocks) ? '' : '\\n';\n\n    // First parse the github code block\n    codeblock = showdown.subParser('encodeCode')(codeblock, options, globals);\n    codeblock = showdown.subParser('detab')(codeblock, options, globals);\n    codeblock = codeblock.replace(/^\\n+/g, ''); // trim leading newlines\n    codeblock = codeblock.replace(/\\n+$/g, ''); // trim trailing whitespace\n\n    codeblock = '<pre><code' + (language ? ' class=\"' + language + ' language-' + language + '\"' : '') + '>' + codeblock + end + '</code></pre>';\n\n    codeblock = showdown.subParser('hashBlock')(codeblock, options, globals);\n\n    // Since GHCodeblocks can be false positives, we need to\n    // store the primitive text and the parsed text in a global var,\n    // and then return a token\n    return '\\n\\n¨G' + (globals.ghCodeBlocks.push({text: wholeMatch, codeblock: codeblock}) - 1) + 'G\\n\\n';\n  });\n\n  // attacklab: strip sentinel\n  text = text.replace(/¨0/, '');\n\n  return globals.converter._dispatch('githubCodeBlocks.after', text, options, globals);\n});\n", "showdown.subParser('hashBlock', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('hashBlock.before', text, options, globals);\n  text = text.replace(/(^\\n+|\\n+$)/g, '');\n  text = '\\n\\n¨K' + (globals.gHtmlBlocks.push(text) - 1) + 'K\\n\\n';\n  text = globals.converter._dispatch('hashBlock.after', text, options, globals);\n  return text;\n});\n", "/**\n * Hash and escape <code> elements that should not be parsed as markdown\n */\nshowdown.subParser('hashCodeTags', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('hashCodeTags.before', text, options, globals);\n\n  var repFunc = function (wholeMatch, match, left, right) {\n    var codeblock = left + showdown.subParser('encodeCode')(match, options, globals) + right;\n    return '¨C' + (globals.gHtmlSpans.push(codeblock) - 1) + 'C';\n  };\n\n  // Hash naked <code>\n  text = showdown.helper.replaceRecursiveRegExp(text, repFunc, '<code\\\\b[^>]*>', '</code>', 'gim');\n\n  text = globals.converter._dispatch('hashCodeTags.after', text, options, globals);\n  return text;\n});\n", "showdown.subParser('hashElement', function (text, options, globals) {\n  'use strict';\n\n  return function (wholeMatch, m1) {\n    var blockText = m1;\n\n    // Undo double lines\n    blockText = blockText.replace(/\\n\\n/g, '\\n');\n    blockText = blockText.replace(/^\\n/, '');\n\n    // strip trailing blank lines\n    blockText = blockText.replace(/\\n+$/g, '');\n\n    // Replace the element text with a marker (\"¨KxK\" where x is its key)\n    blockText = '\\n\\n¨K' + (globals.gHtmlBlocks.push(blockText) - 1) + 'K\\n\\n';\n\n    return blockText;\n  };\n});\n", "showdown.subParser('hashHTMLBlocks', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('hashHTMLBlocks.before', text, options, globals);\n\n  var blockTags = [\n        'pre',\n        'div',\n        'h1',\n        'h2',\n        'h3',\n        'h4',\n        'h5',\n        'h6',\n        'blockquote',\n        'table',\n        'dl',\n        'ol',\n        'ul',\n        'script',\n        'noscript',\n        'form',\n        'fieldset',\n        'iframe',\n        'math',\n        'style',\n        'section',\n        'header',\n        'footer',\n        'nav',\n        'article',\n        'aside',\n        'address',\n        'audio',\n        'canvas',\n        'figure',\n        'hgroup',\n        'output',\n        'video',\n        'p'\n      ],\n      repFunc = function (wholeMatch, match, left, right) {\n        var txt = wholeMatch;\n        // check if this html element is marked as markdown\n        // if so, it's contents should be parsed as markdown\n        if (left.search(/\\bmarkdown\\b/) !== -1) {\n          txt = left + globals.converter.makeHtml(match) + right;\n        }\n        return '\\n\\n¨K' + (globals.gHtmlBlocks.push(txt) - 1) + 'K\\n\\n';\n      };\n\n  if (options.backslashEscapesHTMLTags) {\n    // encode backslash escaped HTML tags\n    text = text.replace(/\\\\<(\\/?[^>]+?)>/g, function (wm, inside) {\n      return '&lt;' + inside + '&gt;';\n    });\n  }\n\n  // hash HTML Blocks\n  for (var i = 0; i < blockTags.length; ++i) {\n\n    var opTagPos,\n        rgx1     = new RegExp('^ {0,3}(<' + blockTags[i] + '\\\\b[^>]*>)', 'im'),\n        patLeft  = '<' + blockTags[i] + '\\\\b[^>]*>',\n        patRight = '</' + blockTags[i] + '>';\n    // 1. Look for the first position of the first opening HTML tag in the text\n    while ((opTagPos = showdown.helper.regexIndexOf(text, rgx1)) !== -1) {\n\n      // if the HTML tag is \\ escaped, we need to escape it and break\n\n\n      //2. Split the text in that position\n      var subTexts = showdown.helper.splitAtIndex(text, opTagPos),\n          //3. Match recursively\n          newSubText1 = showdown.helper.replaceRecursiveRegExp(subTexts[1], repFunc, patLeft, patRight, 'im');\n\n      // prevent an infinite loop\n      if (newSubText1 === subTexts[1]) {\n        break;\n      }\n      text = subTexts[0].concat(newSubText1);\n    }\n  }\n  // HR SPECIAL CASE\n  text = text.replace(/(\\n {0,3}(<(hr)\\b([^<>])*?\\/?>)[ \\t]*(?=\\n{2,}))/g,\n    showdown.subParser('hashElement')(text, options, globals));\n\n  // Special case for standalone HTML comments\n  text = showdown.helper.replaceRecursiveRegExp(text, function (txt) {\n    return '\\n\\n¨K' + (globals.gHtmlBlocks.push(txt) - 1) + 'K\\n\\n';\n  }, '^ {0,3}<!--', '-->', 'gm');\n\n  // PHP and ASP-style processor instructions (<?...?> and <%...%>)\n  text = text.replace(/(?:\\n\\n)( {0,3}(?:<([?%])[^\\r]*?\\2>)[ \\t]*(?=\\n{2,}))/g,\n    showdown.subParser('hashElement')(text, options, globals));\n\n  text = globals.converter._dispatch('hashHTMLBlocks.after', text, options, globals);\n  return text;\n});\n", "/**\n * Hash span elements that should not be parsed as markdown\n */\nshowdown.subParser('hashHTMLSpans', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('hashHTMLSpans.before', text, options, globals);\n\n  function hashHTMLSpan (html) {\n    return '¨C' + (globals.gHtmlSpans.push(html) - 1) + 'C';\n  }\n\n  // Hash Self Closing tags\n  text = text.replace(/<[^>]+?\\/>/gi, function (wm) {\n    return hashHTMLSpan(wm);\n  });\n\n  // Hash tags without properties\n  text = text.replace(/<([^>]+?)>[\\s\\S]*?<\\/\\1>/g, function (wm) {\n    return hashHTMLSpan(wm);\n  });\n\n  // Hash tags with properties\n  text = text.replace(/<([^>]+?)\\s[^>]+?>[\\s\\S]*?<\\/\\1>/g, function (wm) {\n    return hashHTMLSpan(wm);\n  });\n\n  // Hash self closing tags without />\n  text = text.replace(/<[^>]+?>/gi, function (wm) {\n    return hashHTMLSpan(wm);\n  });\n\n  /*showdown.helper.matchRecursiveRegExp(text, '<code\\\\b[^>]*>', '</code>', 'gi');*/\n\n  text = globals.converter._dispatch('hashHTMLSpans.after', text, options, globals);\n  return text;\n});\n\n/**\n * Unhash HTML spans\n */\nshowdown.subParser('unhashHTMLSpans', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('unhashHTMLSpans.before', text, options, globals);\n\n  for (var i = 0; i < globals.gHtmlSpans.length; ++i) {\n    var repText = globals.gHtmlSpans[i],\n        // limiter to prevent infinite loop (assume 10 as limit for recurse)\n        limit = 0;\n\n    while (/¨C(\\d+)C/.test(repText)) {\n      var num = RegExp.$1;\n      repText = repText.replace('¨C' + num + 'C', globals.gHtmlSpans[num]);\n      if (limit === 10) {\n        console.error('maximum nesting of 10 spans reached!!!');\n        break;\n      }\n      ++limit;\n    }\n    text = text.replace('¨C' + i + 'C', repText);\n  }\n\n  text = globals.converter._dispatch('unhashHTMLSpans.after', text, options, globals);\n  return text;\n});\n", "/**\n * Hash and escape <pre><code> elements that should not be parsed as markdown\n */\nshowdown.subParser('hashPreCodeTags', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('hashPreCodeTags.before', text, options, globals);\n\n  var repFunc = function (wholeMatch, match, left, right) {\n    // encode html entities\n    var codeblock = left + showdown.subParser('encodeCode')(match, options, globals) + right;\n    return '\\n\\n¨G' + (globals.ghCodeBlocks.push({text: wholeMatch, codeblock: codeblock}) - 1) + 'G\\n\\n';\n  };\n\n  // Hash <pre><code>\n  text = showdown.helper.replaceRecursiveRegExp(text, repFunc, '^ {0,3}<pre\\\\b[^>]*>\\\\s*<code\\\\b[^>]*>', '^ {0,3}</code>\\\\s*</pre>', 'gim');\n\n  text = globals.converter._dispatch('hashPreCodeTags.after', text, options, globals);\n  return text;\n});\n", "showdown.subParser('headers', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('headers.before', text, options, globals);\n\n  var headerLevelStart = (isNaN(parseInt(options.headerLevelStart))) ? 1 : parseInt(options.headerLevelStart),\n\n      // Set text-style headers:\n      //\tHeader 1\n      //\t========\n      //\n      //\tHeader 2\n      //\t--------\n      //\n      setextRegexH1 = (options.smoothLivePreview) ? /^(.+)[ \\t]*\\n={2,}[ \\t]*\\n+/gm : /^(.+)[ \\t]*\\n=+[ \\t]*\\n+/gm,\n      setextRegexH2 = (options.smoothLivePreview) ? /^(.+)[ \\t]*\\n-{2,}[ \\t]*\\n+/gm : /^(.+)[ \\t]*\\n-+[ \\t]*\\n+/gm;\n\n  text = text.replace(setextRegexH1, function (wholeMatch, m1) {\n\n    var spanGamut = showdown.subParser('spanGamut')(m1, options, globals),\n        hID = (options.noHeaderId) ? '' : ' id=\"' + headerId(m1) + '\"',\n        hLevel = headerLevelStart,\n        hashBlock = '<h' + hLevel + hID + '>' + spanGamut + '</h' + hLevel + '>';\n    return showdown.subParser('hashBlock')(hashBlock, options, globals);\n  });\n\n  text = text.replace(setextRegexH2, function (matchFound, m1) {\n    var spanGamut = showdown.subParser('spanGamut')(m1, options, globals),\n        hID = (options.noHeaderId) ? '' : ' id=\"' + headerId(m1) + '\"',\n        hLevel = headerLevelStart + 1,\n        hashBlock = '<h' + hLevel + hID + '>' + spanGamut + '</h' + hLevel + '>';\n    return showdown.subParser('hashBlock')(hashBlock, options, globals);\n  });\n\n  // atx-style headers:\n  //  # Header 1\n  //  ## Header 2\n  //  ## Header 2 with closing hashes ##\n  //  ...\n  //  ###### Header 6\n  //\n  var atxStyle = (options.requireSpaceBeforeHeadingText) ? /^(#{1,6})[ \\t]+(.+?)[ \\t]*#*\\n+/gm : /^(#{1,6})[ \\t]*(.+?)[ \\t]*#*\\n+/gm;\n\n  text = text.replace(atxStyle, function (wholeMatch, m1, m2) {\n    var hText = m2;\n    if (options.customizedHeaderId) {\n      hText = m2.replace(/\\s?\\{([^{]+?)}\\s*$/, '');\n    }\n\n    var span = showdown.subParser('spanGamut')(hText, options, globals),\n        hID = (options.noHeaderId) ? '' : ' id=\"' + headerId(m2) + '\"',\n        hLevel = headerLevelStart - 1 + m1.length,\n        header = '<h' + hLevel + hID + '>' + span + '</h' + hLevel + '>';\n\n    return showdown.subParser('hashBlock')(header, options, globals);\n  });\n\n  function headerId (m) {\n    var title,\n        prefix;\n\n    // It is separate from other options to allow combining prefix and customized\n    if (options.customizedHeaderId) {\n      var match = m.match(/\\{([^{]+?)}\\s*$/);\n      if (match && match[1]) {\n        m = match[1];\n      }\n    }\n\n    title = m;\n\n    // Prefix id to prevent causing inadvertent pre-existing style matches.\n    if (showdown.helper.isString(options.prefixHeaderId)) {\n      prefix = options.prefixHeaderId;\n    } else if (options.prefixHeaderId === true) {\n      prefix = 'section-';\n    } else {\n      prefix = '';\n    }\n\n    if (!options.rawPrefixHeaderId) {\n      title = prefix + title;\n    }\n\n    if (options.ghCompatibleHeaderId) {\n      title = title\n        .replace(/ /g, '-')\n        // replace previously escaped chars (&, ¨ and $)\n        .replace(/&amp;/g, '')\n        .replace(/¨T/g, '')\n        .replace(/¨D/g, '')\n        // replace rest of the chars (&~$ are repeated as they might have been escaped)\n        // borrowed from github's redcarpet (some they should produce similar results)\n        .replace(/[&+$,\\/:;=?@\"#{}|^¨~\\[\\]`\\\\*)(%.!'<>]/g, '')\n        .toLowerCase();\n    } else if (options.rawHeaderId) {\n      title = title\n        .replace(/ /g, '-')\n        // replace previously escaped chars (&, ¨ and $)\n        .replace(/&amp;/g, '&')\n        .replace(/¨T/g, '¨')\n        .replace(/¨D/g, '$')\n        // replace \" and '\n        .replace(/[\"']/g, '-')\n        .toLowerCase();\n    } else {\n      title = title\n        .replace(/[^\\w]/g, '')\n        .toLowerCase();\n    }\n\n    if (options.rawPrefixHeaderId) {\n      title = prefix + title;\n    }\n\n    if (globals.hashLinkCounts[title]) {\n      title = title + '-' + (globals.hashLinkCounts[title]++);\n    } else {\n      globals.hashLinkCounts[title] = 1;\n    }\n    return title;\n  }\n\n  text = globals.converter._dispatch('headers.after', text, options, globals);\n  return text;\n});\n", "/**\n * Turn Markdown link shortcuts into XHTML <a> tags.\n */\nshowdown.subParser('horizontalRule', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('horizontalRule.before', text, options, globals);\n\n  var key = showdown.subParser('hashBlock')('<hr />', options, globals);\n  text = text.replace(/^ {0,2}( ?-){3,}[ \\t]*$/gm, key);\n  text = text.replace(/^ {0,2}( ?\\*){3,}[ \\t]*$/gm, key);\n  text = text.replace(/^ {0,2}( ?_){3,}[ \\t]*$/gm, key);\n\n  text = globals.converter._dispatch('horizontalRule.after', text, options, globals);\n  return text;\n});\n", "/**\n * Turn Markdown image shortcuts into <img> tags.\n */\nshowdown.subParser('images', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('images.before', text, options, globals);\n\n  var inlineRegExp      = /!\\[([^\\]]*?)][ \\t]*()\\([ \\t]?<?([\\S]+?(?:\\([\\S]*?\\)[\\S]*?)?)>?(?: =([*\\d]+[A-Za-z%]{0,4})x([*\\d]+[A-Za-z%]{0,4}))?[ \\t]*(?:([\"'])([^\"]*?)\\6)?[ \\t]?\\)/g,\n      crazyRegExp       = /!\\[([^\\]]*?)][ \\t]*()\\([ \\t]?<([^>]*)>(?: =([*\\d]+[A-Za-z%]{0,4})x([*\\d]+[A-Za-z%]{0,4}))?[ \\t]*(?:(?:([\"'])([^\"]*?)\\6))?[ \\t]?\\)/g,\n      base64RegExp      = /!\\[([^\\]]*?)][ \\t]*()\\([ \\t]?<?(data:.+?\\/.+?;base64,[A-Za-z0-9+/=\\n]+?)>?(?: =([*\\d]+[A-Za-z%]{0,4})x([*\\d]+[A-Za-z%]{0,4}))?[ \\t]*(?:([\"'])([^\"]*?)\\6)?[ \\t]?\\)/g,\n      referenceRegExp   = /!\\[([^\\]]*?)] ?(?:\\n *)?\\[([\\s\\S]*?)]()()()()()/g,\n      refShortcutRegExp = /!\\[([^\\[\\]]+)]()()()()()/g;\n\n  function writeImageTagBase64 (wholeMatch, altText, linkId, url, width, height, m5, title) {\n    url = url.replace(/\\s/g, '');\n    return writeImageTag (wholeMatch, altText, linkId, url, width, height, m5, title);\n  }\n\n  function writeImageTag (wholeMatch, altText, linkId, url, width, height, m5, title) {\n\n    var gUrls   = globals.gUrls,\n        gTitles = globals.gTitles,\n        gDims   = globals.gDimensions;\n\n    linkId = linkId.toLowerCase();\n\n    if (!title) {\n      title = '';\n    }\n    // Special case for explicit empty url\n    if (wholeMatch.search(/\\(<?\\s*>? ?(['\"].*['\"])?\\)$/m) > -1) {\n      url = '';\n\n    } else if (url === '' || url === null) {\n      if (linkId === '' || linkId === null) {\n        // lower-case and turn embedded newlines into spaces\n        linkId = altText.toLowerCase().replace(/ ?\\n/g, ' ');\n      }\n      url = '#' + linkId;\n\n      if (!showdown.helper.isUndefined(gUrls[linkId])) {\n        url = gUrls[linkId];\n        if (!showdown.helper.isUndefined(gTitles[linkId])) {\n          title = gTitles[linkId];\n        }\n        if (!showdown.helper.isUndefined(gDims[linkId])) {\n          width = gDims[linkId].width;\n          height = gDims[linkId].height;\n        }\n      } else {\n        return wholeMatch;\n      }\n    }\n\n    altText = altText\n      .replace(/\"/g, '&quot;')\n    //altText = showdown.helper.escapeCharacters(altText, '*_', false);\n      .replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);\n    //url = showdown.helper.escapeCharacters(url, '*_', false);\n    url = url.replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);\n    var result = '<img src=\"' + url + '\" alt=\"' + altText + '\"';\n\n    if (title && showdown.helper.isString(title)) {\n      title = title\n        .replace(/\"/g, '&quot;')\n      //title = showdown.helper.escapeCharacters(title, '*_', false);\n        .replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);\n      result += ' title=\"' + title + '\"';\n    }\n\n    if (width && height) {\n      width  = (width === '*') ? 'auto' : width;\n      height = (height === '*') ? 'auto' : height;\n\n      result += ' width=\"' + width + '\"';\n      result += ' height=\"' + height + '\"';\n    }\n\n    result += ' />';\n\n    return result;\n  }\n\n  // First, handle reference-style labeled images: ![alt text][id]\n  text = text.replace(referenceRegExp, writeImageTag);\n\n  // Next, handle inline images:  ![alt text](url =<width>x<height> \"optional title\")\n\n  // base64 encoded images\n  text = text.replace(base64RegExp, writeImageTagBase64);\n\n  // cases with crazy urls like ./image/cat1).png\n  text = text.replace(crazyRegExp, writeImageTag);\n\n  // normal cases\n  text = text.replace(inlineRegExp, writeImageTag);\n\n  // handle reference-style shortcuts: ![img text]\n  text = text.replace(refShortcutRegExp, writeImageTag);\n\n  text = globals.converter._dispatch('images.after', text, options, globals);\n  return text;\n});\n", "showdown.subParser('italicsAndBold', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('italicsAndBold.before', text, options, globals);\n\n  // it's faster to have 3 separate regexes for each case than have just one\n  // because of backtracing, in some cases, it could lead to an exponential effect\n  // called \"catastrophic backtrace\". Ominous!\n\n  function parseInside (txt, left, right) {\n    /*\n    if (options.simplifiedAutoLink) {\n      txt = showdown.subParser('simplifiedAutoLinks')(txt, options, globals);\n    }\n    */\n    return left + txt + right;\n  }\n\n  // Parse underscores\n  if (options.literalMidWordUnderscores) {\n    text = text.replace(/\\b___(\\S[\\s\\S]*?)___\\b/g, function (wm, txt) {\n      return parseInside (txt, '<strong><em>', '</em></strong>');\n    });\n    text = text.replace(/\\b__(\\S[\\s\\S]*?)__\\b/g, function (wm, txt) {\n      return parseInside (txt, '<strong>', '</strong>');\n    });\n    text = text.replace(/\\b_(\\S[\\s\\S]*?)_\\b/g, function (wm, txt) {\n      return parseInside (txt, '<em>', '</em>');\n    });\n  } else {\n    text = text.replace(/___(\\S[\\s\\S]*?)___/g, function (wm, m) {\n      return (/\\S$/.test(m)) ? parseInside (m, '<strong><em>', '</em></strong>') : wm;\n    });\n    text = text.replace(/__(\\S[\\s\\S]*?)__/g, function (wm, m) {\n      return (/\\S$/.test(m)) ? parseInside (m, '<strong>', '</strong>') : wm;\n    });\n    text = text.replace(/_([^\\s_][\\s\\S]*?)_/g, function (wm, m) {\n      // !/^_[^_]/.test(m) - test if it doesn't start with __ (since it seems redundant, we removed it)\n      return (/\\S$/.test(m)) ? parseInside (m, '<em>', '</em>') : wm;\n    });\n  }\n\n  // Now parse asterisks\n  if (options.literalMidWordAsterisks) {\n    text = text.replace(/([^*]|^)\\B\\*\\*\\*(\\S[\\s\\S]*?)\\*\\*\\*\\B(?!\\*)/g, function (wm, lead, txt) {\n      return parseInside (txt, lead + '<strong><em>', '</em></strong>');\n    });\n    text = text.replace(/([^*]|^)\\B\\*\\*(\\S[\\s\\S]*?)\\*\\*\\B(?!\\*)/g, function (wm, lead, txt) {\n      return parseInside (txt, lead + '<strong>', '</strong>');\n    });\n    text = text.replace(/([^*]|^)\\B\\*(\\S[\\s\\S]*?)\\*\\B(?!\\*)/g, function (wm, lead, txt) {\n      return parseInside (txt, lead + '<em>', '</em>');\n    });\n  } else {\n    text = text.replace(/\\*\\*\\*(\\S[\\s\\S]*?)\\*\\*\\*/g, function (wm, m) {\n      return (/\\S$/.test(m)) ? parseInside (m, '<strong><em>', '</em></strong>') : wm;\n    });\n    text = text.replace(/\\*\\*(\\S[\\s\\S]*?)\\*\\*/g, function (wm, m) {\n      return (/\\S$/.test(m)) ? parseInside (m, '<strong>', '</strong>') : wm;\n    });\n    text = text.replace(/\\*([^\\s*][\\s\\S]*?)\\*/g, function (wm, m) {\n      // !/^\\*[^*]/.test(m) - test if it doesn't start with ** (since it seems redundant, we removed it)\n      return (/\\S$/.test(m)) ? parseInside (m, '<em>', '</em>') : wm;\n    });\n  }\n\n\n  text = globals.converter._dispatch('italicsAndBold.after', text, options, globals);\n  return text;\n});\n", "/**\n * Form HTML ordered (numbered) and unordered (bulleted) lists.\n */\nshowdown.subParser('lists', function (text, options, globals) {\n  'use strict';\n\n  /**\n   * Process the contents of a single ordered or unordered list, splitting it\n   * into individual list items.\n   * @param {string} listStr\n   * @param {boolean} trimTrailing\n   * @returns {string}\n   */\n  function processListItems (listStr, trimTrailing) {\n    // The $g_list_level global keeps track of when we're inside a list.\n    // Each time we enter a list, we increment it; when we leave a list,\n    // we decrement. If it's zero, we're not in a list anymore.\n    //\n    // We do this because when we're not inside a list, we want to treat\n    // something like this:\n    //\n    //    I recommend upgrading to version\n    //    8. Oops, now this line is treated\n    //    as a sub-list.\n    //\n    // As a single paragraph, despite the fact that the second line starts\n    // with a digit-period-space sequence.\n    //\n    // Whereas when we're inside a list (or sub-list), that line will be\n    // treated as the start of a sub-list. What a kludge, huh? This is\n    // an aspect of Markdown's syntax that's hard to parse perfectly\n    // without resorting to mind-reading. Perhaps the solution is to\n    // change the syntax rules such that sub-lists must start with a\n    // starting cardinal number; e.g. \"1.\" or \"a.\".\n    globals.gListLevel++;\n\n    // trim trailing blank lines:\n    listStr = listStr.replace(/\\n{2,}$/, '\\n');\n\n    // attacklab: add sentinel to emulate \\z\n    listStr += '¨0';\n\n    var rgx = /(\\n)?(^ {0,3})([*+-]|\\d+[.])[ \\t]+((\\[(x|X| )?])?[ \\t]*[^\\r]+?(\\n{1,2}))(?=\\n*(¨0| {0,3}([*+-]|\\d+[.])[ \\t]+))/gm,\n        isParagraphed = (/\\n[ \\t]*\\n(?!¨0)/.test(listStr));\n\n    // Since version 1.5, nesting sublists requires 4 spaces (or 1 tab) indentation,\n    // which is a syntax breaking change\n    // activating this option reverts to old behavior\n    if (options.disableForced4SpacesIndentedSublists) {\n      rgx = /(\\n)?(^ {0,3})([*+-]|\\d+[.])[ \\t]+((\\[(x|X| )?])?[ \\t]*[^\\r]+?(\\n{1,2}))(?=\\n*(¨0|\\2([*+-]|\\d+[.])[ \\t]+))/gm;\n    }\n\n    listStr = listStr.replace(rgx, function (wholeMatch, m1, m2, m3, m4, taskbtn, checked) {\n      checked = (checked && checked.trim() !== '');\n\n      var item = showdown.subParser('outdent')(m4, options, globals),\n          bulletStyle = '';\n\n      // Support for github tasklists\n      if (taskbtn && options.tasklists) {\n        bulletStyle = ' class=\"task-list-item\" style=\"list-style-type: none;\"';\n        item = item.replace(/^[ \\t]*\\[(x|X| )?]/m, function () {\n          var otp = '<input type=\"checkbox\" disabled style=\"margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;\"';\n          if (checked) {\n            otp += ' checked';\n          }\n          otp += '>';\n          return otp;\n        });\n      }\n\n      // ISSUE #312\n      // This input: - - - a\n      // causes trouble to the parser, since it interprets it as:\n      // <ul><li><li><li>a</li></li></li></ul>\n      // instead of:\n      // <ul><li>- - a</li></ul>\n      // So, to prevent it, we will put a marker (¨A)in the beginning of the line\n      // Kind of hackish/monkey patching, but seems more effective than overcomplicating the list parser\n      item = item.replace(/^([-*+]|\\d\\.)[ \\t]+[\\S\\n ]*/g, function (wm2) {\n        return '¨A' + wm2;\n      });\n\n      // m1 - Leading line or\n      // Has a double return (multi paragraph) or\n      // Has sublist\n      if (m1 || (item.search(/\\n{2,}/) > -1)) {\n        item = showdown.subParser('githubCodeBlocks')(item, options, globals);\n        item = showdown.subParser('blockGamut')(item, options, globals);\n      } else {\n        // Recursion for sub-lists:\n        item = showdown.subParser('lists')(item, options, globals);\n        item = item.replace(/\\n$/, ''); // chomp(item)\n        item = showdown.subParser('hashHTMLBlocks')(item, options, globals);\n\n        // Colapse double linebreaks\n        item = item.replace(/\\n\\n+/g, '\\n\\n');\n        if (isParagraphed) {\n          item = showdown.subParser('paragraphs')(item, options, globals);\n        } else {\n          item = showdown.subParser('spanGamut')(item, options, globals);\n        }\n      }\n\n      // now we need to remove the marker (¨A)\n      item = item.replace('¨A', '');\n      // we can finally wrap the line in list item tags\n      item =  '<li' + bulletStyle + '>' + item + '</li>\\n';\n\n      return item;\n    });\n\n    // attacklab: strip sentinel\n    listStr = listStr.replace(/¨0/g, '');\n\n    globals.gListLevel--;\n\n    if (trimTrailing) {\n      listStr = listStr.replace(/\\s+$/, '');\n    }\n\n    return listStr;\n  }\n\n  function styleStartNumber (list, listType) {\n    // check if ol and starts by a number different than 1\n    if (listType === 'ol') {\n      var res = list.match(/^ *(\\d+)\\./);\n      if (res && res[1] !== '1') {\n        return ' start=\"' + res[1] + '\"';\n      }\n    }\n    return '';\n  }\n\n  /**\n   * Check and parse consecutive lists (better fix for issue #142)\n   * @param {string} list\n   * @param {string} listType\n   * @param {boolean} trimTrailing\n   * @returns {string}\n   */\n  function parseConsecutiveLists (list, listType, trimTrailing) {\n    // check if we caught 2 or more consecutive lists by mistake\n    // we use the counterRgx, meaning if listType is UL we look for OL and vice versa\n    var olRgx = (options.disableForced4SpacesIndentedSublists) ? /^ ?\\d+\\.[ \\t]/gm : /^ {0,3}\\d+\\.[ \\t]/gm,\n        ulRgx = (options.disableForced4SpacesIndentedSublists) ? /^ ?[*+-][ \\t]/gm : /^ {0,3}[*+-][ \\t]/gm,\n        counterRxg = (listType === 'ul') ? olRgx : ulRgx,\n        result = '';\n\n    if (list.search(counterRxg) !== -1) {\n      (function parseCL (txt) {\n        var pos = txt.search(counterRxg),\n            style = styleStartNumber(list, listType);\n        if (pos !== -1) {\n          // slice\n          result += '\\n\\n<' + listType + style + '>\\n' + processListItems(txt.slice(0, pos), !!trimTrailing) + '</' + listType + '>\\n';\n\n          // invert counterType and listType\n          listType = (listType === 'ul') ? 'ol' : 'ul';\n          counterRxg = (listType === 'ul') ? olRgx : ulRgx;\n\n          //recurse\n          parseCL(txt.slice(pos));\n        } else {\n          result += '\\n\\n<' + listType + style + '>\\n' + processListItems(txt, !!trimTrailing) + '</' + listType + '>\\n';\n        }\n      })(list);\n    } else {\n      var style = styleStartNumber(list, listType);\n      result = '\\n\\n<' + listType + style + '>\\n' + processListItems(list, !!trimTrailing) + '</' + listType + '>\\n';\n    }\n\n    return result;\n  }\n\n  /** Start of list parsing **/\n  text = globals.converter._dispatch('lists.before', text, options, globals);\n  // add sentinel to hack around khtml/safari bug:\n  // http://bugs.webkit.org/show_bug.cgi?id=11231\n  text += '¨0';\n\n  if (globals.gListLevel) {\n    text = text.replace(/^(( {0,3}([*+-]|\\d+[.])[ \\t]+)[^\\r]+?(¨0|\\n{2,}(?=\\S)(?![ \\t]*(?:[*+-]|\\d+[.])[ \\t]+)))/gm,\n      function (wholeMatch, list, m2) {\n        var listType = (m2.search(/[*+-]/g) > -1) ? 'ul' : 'ol';\n        return parseConsecutiveLists(list, listType, true);\n      }\n    );\n  } else {\n    text = text.replace(/(\\n\\n|^\\n?)(( {0,3}([*+-]|\\d+[.])[ \\t]+)[^\\r]+?(¨0|\\n{2,}(?=\\S)(?![ \\t]*(?:[*+-]|\\d+[.])[ \\t]+)))/gm,\n      function (wholeMatch, m1, list, m3) {\n        var listType = (m3.search(/[*+-]/g) > -1) ? 'ul' : 'ol';\n        return parseConsecutiveLists(list, listType, false);\n      }\n    );\n  }\n\n  // strip sentinel\n  text = text.replace(/¨0/, '');\n  text = globals.converter._dispatch('lists.after', text, options, globals);\n  return text;\n});\n", "/**\n * Parse metadata at the top of the document\n */\nshowdown.subParser('metadata', function (text, options, globals) {\n  'use strict';\n\n  if (!options.metadata) {\n    return text;\n  }\n\n  text = globals.converter._dispatch('metadata.before', text, options, globals);\n\n  function parseMetadataContents (content) {\n    // raw is raw so it's not changed in any way\n    globals.metadata.raw = content;\n\n    // escape chars forbidden in html attributes\n    // double quotes\n    content = content\n      // ampersand first\n      .replace(/&/g, '&amp;')\n      // double quotes\n      .replace(/\"/g, '&quot;');\n\n    content = content.replace(/\\n {4}/g, ' ');\n    content.replace(/^([\\S ]+): +([\\s\\S]+?)$/gm, function (wm, key, value) {\n      globals.metadata.parsed[key] = value;\n      return '';\n    });\n  }\n\n  text = text.replace(/^\\s*«««+(\\S*?)\\n([\\s\\S]+?)\\n»»»+\\n/, function (wholematch, format, content) {\n    parseMetadataContents(content);\n    return '¨M';\n  });\n\n  text = text.replace(/^\\s*---+(\\S*?)\\n([\\s\\S]+?)\\n---+\\n/, function (wholematch, format, content) {\n    if (format) {\n      globals.metadata.format = format;\n    }\n    parseMetadataContents(content);\n    return '¨M';\n  });\n\n  text = text.replace(/¨M/g, '');\n\n  text = globals.converter._dispatch('metadata.after', text, options, globals);\n  return text;\n});\n", "/**\n * Remove one level of line-leading tabs or spaces\n */\nshowdown.subParser('outdent', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('outdent.before', text, options, globals);\n\n  // attacklab: hack around Konqueror 3.5.4 bug:\n  // \"----------bug\".replace(/^-/g,\"\") == \"bug\"\n  text = text.replace(/^(\\t|[ ]{1,4})/gm, '¨0'); // attacklab: g_tab_width\n\n  // attacklab: clean up hack\n  text = text.replace(/¨0/g, '');\n\n  text = globals.converter._dispatch('outdent.after', text, options, globals);\n  return text;\n});\n", "/**\n *\n */\nshowdown.subParser('paragraphs', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('paragraphs.before', text, options, globals);\n  // Strip leading and trailing lines:\n  text = text.replace(/^\\n+/g, '');\n  text = text.replace(/\\n+$/g, '');\n\n  var grafs = text.split(/\\n{2,}/g),\n      grafsOut = [],\n      end = grafs.length; // Wrap <p> tags\n\n  for (var i = 0; i < end; i++) {\n    var str = grafs[i];\n    // if this is an HTML marker, copy it\n    if (str.search(/¨(K|G)(\\d+)\\1/g) >= 0) {\n      grafsOut.push(str);\n\n    // test for presence of characters to prevent empty lines being parsed\n    // as paragraphs (resulting in undesired extra empty paragraphs)\n    } else if (str.search(/\\S/) >= 0) {\n      str = showdown.subParser('spanGamut')(str, options, globals);\n      str = str.replace(/^([ \\t]*)/g, '<p>');\n      str += '</p>';\n      grafsOut.push(str);\n    }\n  }\n\n  /** Unhashify HTML blocks */\n  end = grafsOut.length;\n  for (i = 0; i < end; i++) {\n    var blockText = '',\n        grafsOutIt = grafsOut[i],\n        codeFlag = false;\n    // if this is a marker for an html block...\n    // use RegExp.test instead of string.search because of QML bug\n    while (/¨(K|G)(\\d+)\\1/.test(grafsOutIt)) {\n      var delim = RegExp.$1,\n          num   = RegExp.$2;\n\n      if (delim === 'K') {\n        blockText = globals.gHtmlBlocks[num];\n      } else {\n        // we need to check if ghBlock is a false positive\n        if (codeFlag) {\n          // use encoded version of all text\n          blockText = showdown.subParser('encodeCode')(globals.ghCodeBlocks[num].text, options, globals);\n        } else {\n          blockText = globals.ghCodeBlocks[num].codeblock;\n        }\n      }\n      blockText = blockText.replace(/\\$/g, '$$$$'); // Escape any dollar signs\n\n      grafsOutIt = grafsOutIt.replace(/(\\n\\n)?¨(K|G)\\d+\\2(\\n\\n)?/, blockText);\n      // Check if grafsOutIt is a pre->code\n      if (/^<pre\\b[^>]*>\\s*<code\\b[^>]*>/.test(grafsOutIt)) {\n        codeFlag = true;\n      }\n    }\n    grafsOut[i] = grafsOutIt;\n  }\n  text = grafsOut.join('\\n');\n  // Strip leading and trailing lines:\n  text = text.replace(/^\\n+/g, '');\n  text = text.replace(/\\n+$/g, '');\n  return globals.converter._dispatch('paragraphs.after', text, options, globals);\n});\n", "/**\n * Run extension\n */\nshowdown.subParser('runExtension', function (ext, text, options, globals) {\n  'use strict';\n\n  if (ext.filter) {\n    text = ext.filter(text, globals.converter, options);\n\n  } else if (ext.regex) {\n    // TODO remove this when old extension loading mechanism is deprecated\n    var re = ext.regex;\n    if (!(re instanceof RegExp)) {\n      re = new RegExp(re, 'g');\n    }\n    text = text.replace(re, ext.replace);\n  }\n\n  return text;\n});\n", "/**\n * These are all the transformations that occur *within* block-level\n * tags like paragraphs, headers, and list items.\n */\nshowdown.subParser('spanGamut', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('spanGamut.before', text, options, globals);\n  text = showdown.subParser('codeSpans')(text, options, globals);\n  text = showdown.subParser('escapeSpecialCharsWithinTagAttributes')(text, options, globals);\n  text = showdown.subParser('encodeBackslashEscapes')(text, options, globals);\n\n  // Process anchor and image tags. Images must come first,\n  // because ![foo][f] looks like an anchor.\n  text = showdown.subParser('images')(text, options, globals);\n  text = showdown.subParser('anchors')(text, options, globals);\n\n  // Make links out of things like `<http://example.com/>`\n  // Must come after anchors, because you can use < and >\n  // delimiters in inline links like [this](<url>).\n  text = showdown.subParser('autoLinks')(text, options, globals);\n  text = showdown.subParser('simplifiedAutoLinks')(text, options, globals);\n  text = showdown.subParser('emoji')(text, options, globals);\n  text = showdown.subParser('underline')(text, options, globals);\n  text = showdown.subParser('italicsAndBold')(text, options, globals);\n  text = showdown.subParser('strikethrough')(text, options, globals);\n  text = showdown.subParser('ellipsis')(text, options, globals);\n\n  // we need to hash HTML tags inside spans\n  text = showdown.subParser('hashHTMLSpans')(text, options, globals);\n\n  // now we encode amps and angles\n  text = showdown.subParser('encodeAmpsAndAngles')(text, options, globals);\n\n  // Do hard breaks\n  if (options.simpleLineBreaks) {\n    // GFM style hard breaks\n    // only add line breaks if the text does not contain a block (special case for lists)\n    if (!/\\n\\n¨K/.test(text)) {\n      text = text.replace(/\\n+/g, '<br />\\n');\n    }\n  } else {\n    // Vanilla hard breaks\n    text = text.replace(/  +\\n/g, '<br />\\n');\n  }\n\n  text = globals.converter._dispatch('spanGamut.after', text, options, globals);\n  return text;\n});\n", "showdown.subParser('strikethrough', function (text, options, globals) {\n  'use strict';\n\n  function parseInside (txt) {\n    if (options.simplifiedAutoLink) {\n      txt = showdown.subParser('simplifiedAutoLinks')(txt, options, globals);\n    }\n    return '<del>' + txt + '</del>';\n  }\n\n  if (options.strikethrough) {\n    text = globals.converter._dispatch('strikethrough.before', text, options, globals);\n    text = text.replace(/(?:~){2}([\\s\\S]+?)(?:~){2}/g, function (wm, txt) { return parseInside(txt); });\n    text = globals.converter._dispatch('strikethrough.after', text, options, globals);\n  }\n\n  return text;\n});\n", "/**\n * Strips link definitions from text, stores the URLs and titles in\n * hash references.\n * Link defs are in the form: ^[id]: url \"optional title\"\n */\nshowdown.subParser('stripLinkDefinitions', function (text, options, globals) {\n  'use strict';\n\n  var regex       = /^ {0,3}\\[([^\\]]+)]:[ \\t]*\\n?[ \\t]*<?([^>\\s]+)>?(?: =([*\\d]+[A-Za-z%]{0,4})x([*\\d]+[A-Za-z%]{0,4}))?[ \\t]*\\n?[ \\t]*(?:(\\n*)[\"|'(](.+?)[\"|')][ \\t]*)?(?:\\n+|(?=¨0))/gm,\n      base64Regex = /^ {0,3}\\[([^\\]]+)]:[ \\t]*\\n?[ \\t]*<?(data:.+?\\/.+?;base64,[A-Za-z0-9+/=\\n]+?)>?(?: =([*\\d]+[A-Za-z%]{0,4})x([*\\d]+[A-Za-z%]{0,4}))?[ \\t]*\\n?[ \\t]*(?:(\\n*)[\"|'(](.+?)[\"|')][ \\t]*)?(?:\\n\\n|(?=¨0)|(?=\\n\\[))/gm;\n\n  // attacklab: sentinel workarounds for lack of \\A and \\Z, safari\\khtml bug\n  text += '¨0';\n\n  var replaceFunc = function (wholeMatch, linkId, url, width, height, blankLines, title) {\n\n    // if there aren't two instances of linkId it must not be a reference link so back out\n    linkId = linkId.toLowerCase();\n    if (text.toLowerCase().split(linkId).length - 1 < 2) {\n      return wholeMatch;\n    }\n    if (url.match(/^data:.+?\\/.+?;base64,/)) {\n      // remove newlines\n      globals.gUrls[linkId] = url.replace(/\\s/g, '');\n    } else {\n      globals.gUrls[linkId] = showdown.subParser('encodeAmpsAndAngles')(url, options, globals);  // Link IDs are case-insensitive\n    }\n\n    if (blankLines) {\n      // Oops, found blank lines, so it's not a title.\n      // Put back the parenthetical statement we stole.\n      return blankLines + title;\n\n    } else {\n      if (title) {\n        globals.gTitles[linkId] = title.replace(/\"|'/g, '&quot;');\n      }\n      if (options.parseImgDimensions && width && height) {\n        globals.gDimensions[linkId] = {\n          width:  width,\n          height: height\n        };\n      }\n    }\n    // Completely remove the definition from the text\n    return '';\n  };\n\n  // first we try to find base64 link references\n  text = text.replace(base64Regex, replaceFunc);\n\n  text = text.replace(regex, replaceFunc);\n\n  // attacklab: strip sentinel\n  text = text.replace(/¨0/, '');\n\n  return text;\n});\n", "showdown.subParser('tables', function (text, options, globals) {\n  'use strict';\n\n  if (!options.tables) {\n    return text;\n  }\n\n  var tableRgx       = /^ {0,3}\\|?.+\\|.+\\n {0,3}\\|?[ \\t]*:?[ \\t]*(?:[-=]){2,}[ \\t]*:?[ \\t]*\\|[ \\t]*:?[ \\t]*(?:[-=]){2,}[\\s\\S]+?(?:\\n\\n|¨0)/gm,\n      //singeColTblRgx = /^ {0,3}\\|.+\\|\\n {0,3}\\|[ \\t]*:?[ \\t]*(?:[-=]){2,}[ \\t]*:?[ \\t]*\\|[ \\t]*\\n(?: {0,3}\\|.+\\|\\n)+(?:\\n\\n|¨0)/gm;\n      singeColTblRgx = /^ {0,3}\\|.+\\|[ \\t]*\\n {0,3}\\|[ \\t]*:?[ \\t]*(?:[-=]){2,}[ \\t]*:?[ \\t]*\\|[ \\t]*\\n( {0,3}\\|.+\\|[ \\t]*\\n)*(?:\\n|¨0)/gm;\n\n  function parseStyles (sLine) {\n    if (/^:[ \\t]*--*$/.test(sLine)) {\n      return ' style=\"text-align:left;\"';\n    } else if (/^--*[ \\t]*:[ \\t]*$/.test(sLine)) {\n      return ' style=\"text-align:right;\"';\n    } else if (/^:[ \\t]*--*[ \\t]*:$/.test(sLine)) {\n      return ' style=\"text-align:center;\"';\n    } else {\n      return '';\n    }\n  }\n\n  function parseHeaders (header, style) {\n    var id = '';\n    header = header.trim();\n    // support both tablesHeaderId and tableHeaderId due to error in documentation so we don't break backwards compatibility\n    if (options.tablesHeaderId || options.tableHeaderId) {\n      id = ' id=\"' + header.replace(/ /g, '_').toLowerCase() + '\"';\n    }\n    header = showdown.subParser('spanGamut')(header, options, globals);\n\n    return '<th' + id + style + '>' + header + '</th>\\n';\n  }\n\n  function parseCells (cell, style) {\n    var subText = showdown.subParser('spanGamut')(cell, options, globals);\n    return '<td' + style + '>' + subText + '</td>\\n';\n  }\n\n  function buildTable (headers, cells) {\n    var tb = '<table>\\n<thead>\\n<tr>\\n',\n        tblLgn = headers.length;\n\n    for (var i = 0; i < tblLgn; ++i) {\n      tb += headers[i];\n    }\n    tb += '</tr>\\n</thead>\\n<tbody>\\n';\n\n    for (i = 0; i < cells.length; ++i) {\n      tb += '<tr>\\n';\n      for (var ii = 0; ii < tblLgn; ++ii) {\n        tb += cells[i][ii];\n      }\n      tb += '</tr>\\n';\n    }\n    tb += '</tbody>\\n</table>\\n';\n    return tb;\n  }\n\n  function parseTable (rawTable) {\n    var i, tableLines = rawTable.split('\\n');\n\n    for (i = 0; i < tableLines.length; ++i) {\n      // strip wrong first and last column if wrapped tables are used\n      if (/^ {0,3}\\|/.test(tableLines[i])) {\n        tableLines[i] = tableLines[i].replace(/^ {0,3}\\|/, '');\n      }\n      if (/\\|[ \\t]*$/.test(tableLines[i])) {\n        tableLines[i] = tableLines[i].replace(/\\|[ \\t]*$/, '');\n      }\n      // parse code spans first, but we only support one line code spans\n      tableLines[i] = showdown.subParser('codeSpans')(tableLines[i], options, globals);\n    }\n\n    var rawHeaders = tableLines[0].split('|').map(function (s) { return s.trim();}),\n        rawStyles = tableLines[1].split('|').map(function (s) { return s.trim();}),\n        rawCells = [],\n        headers = [],\n        styles = [],\n        cells = [];\n\n    tableLines.shift();\n    tableLines.shift();\n\n    for (i = 0; i < tableLines.length; ++i) {\n      if (tableLines[i].trim() === '') {\n        continue;\n      }\n      rawCells.push(\n        tableLines[i]\n          .split('|')\n          .map(function (s) {\n            return s.trim();\n          })\n      );\n    }\n\n    if (rawHeaders.length < rawStyles.length) {\n      return rawTable;\n    }\n\n    for (i = 0; i < rawStyles.length; ++i) {\n      styles.push(parseStyles(rawStyles[i]));\n    }\n\n    for (i = 0; i < rawHeaders.length; ++i) {\n      if (showdown.helper.isUndefined(styles[i])) {\n        styles[i] = '';\n      }\n      headers.push(parseHeaders(rawHeaders[i], styles[i]));\n    }\n\n    for (i = 0; i < rawCells.length; ++i) {\n      var row = [];\n      for (var ii = 0; ii < headers.length; ++ii) {\n        if (showdown.helper.isUndefined(rawCells[i][ii])) {\n\n        }\n        row.push(parseCells(rawCells[i][ii], styles[ii]));\n      }\n      cells.push(row);\n    }\n\n    return buildTable(headers, cells);\n  }\n\n  text = globals.converter._dispatch('tables.before', text, options, globals);\n\n  // find escaped pipe characters\n  text = text.replace(/\\\\(\\|)/g, showdown.helper.escapeCharactersCallback);\n\n  // parse multi column tables\n  text = text.replace(tableRgx, parseTable);\n\n  // parse one column tables\n  text = text.replace(singeColTblRgx, parseTable);\n\n  text = globals.converter._dispatch('tables.after', text, options, globals);\n\n  return text;\n});\n", "showdown.subParser('underline', function (text, options, globals) {\n  'use strict';\n\n  if (!options.underline) {\n    return text;\n  }\n\n  text = globals.converter._dispatch('underline.before', text, options, globals);\n\n  if (options.literalMidWordUnderscores) {\n    text = text.replace(/\\b___(\\S[\\s\\S]*?)___\\b/g, function (wm, txt) {\n      return '<u>' + txt + '</u>';\n    });\n    text = text.replace(/\\b__(\\S[\\s\\S]*?)__\\b/g, function (wm, txt) {\n      return '<u>' + txt + '</u>';\n    });\n  } else {\n    text = text.replace(/___(\\S[\\s\\S]*?)___/g, function (wm, m) {\n      return (/\\S$/.test(m)) ? '<u>' + m + '</u>' : wm;\n    });\n    text = text.replace(/__(\\S[\\s\\S]*?)__/g, function (wm, m) {\n      return (/\\S$/.test(m)) ? '<u>' + m + '</u>' : wm;\n    });\n  }\n\n  // escape remaining underscores to prevent them being parsed by italic and bold\n  text = text.replace(/(_)/g, showdown.helper.escapeCharactersCallback);\n\n  text = globals.converter._dispatch('underline.after', text, options, globals);\n\n  return text;\n});\n", "/**\n * Swap back in all the special characters we've hidden.\n */\nshowdown.subParser('unescapeSpecialChars', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('unescapeSpecialChars.before', text, options, globals);\n\n  text = text.replace(/¨E(\\d+)E/g, function (wholeMatch, m1) {\n    var charCodeToReplace = parseInt(m1);\n    return String.fromCharCode(charCodeToReplace);\n  });\n\n  text = globals.converter._dispatch('unescapeSpecialChars.after', text, options, globals);\n  return text;\n});\n", "showdown.subParser('makeMarkdown.blockquote', function (node, globals) {\n  'use strict';\n\n  var txt = '';\n  if (node.hasChildNodes()) {\n    var children = node.childNodes,\n        childrenLength = children.length;\n\n    for (var i = 0; i < childrenLength; ++i) {\n      var innerTxt = showdown.subParser('makeMarkdown.node')(children[i], globals);\n\n      if (innerTxt === '') {\n        continue;\n      }\n      txt += innerTxt;\n    }\n  }\n  // cleanup\n  txt = txt.trim();\n  txt = '> ' + txt.split('\\n').join('\\n> ');\n  return txt;\n});\n", "showdown.subParser('makeMarkdown.codeBlock', function (node, globals) {\n  'use strict';\n\n  var lang = node.getAttribute('language'),\n      num  = node.getAttribute('precodenum');\n  return '```' + lang + '\\n' + globals.preList[num] + '\\n```';\n});\n", "showdown.subParser('makeMarkdown.codeSpan', function (node) {\n  'use strict';\n\n  return '`' + node.innerHTML + '`';\n});\n", "showdown.subParser('makeMarkdown.emphasis', function (node, globals) {\n  'use strict';\n\n  var txt = '';\n  if (node.hasChildNodes()) {\n    txt += '*';\n    var children = node.childNodes,\n        childrenLength = children.length;\n    for (var i = 0; i < childrenLength; ++i) {\n      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);\n    }\n    txt += '*';\n  }\n  return txt;\n});\n", "showdown.subParser('makeMarkdown.header', function (node, globals, headerLevel) {\n  'use strict';\n\n  var headerMark = new Array(headerLevel + 1).join('#'),\n      txt = '';\n\n  if (node.hasChildNodes()) {\n    txt = headerMark + ' ';\n    var children = node.childNodes,\n        childrenLength = children.length;\n\n    for (var i = 0; i < childrenLength; ++i) {\n      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);\n    }\n  }\n  return txt;\n});\n", "showdown.subParser('makeMarkdown.hr', function () {\n  'use strict';\n\n  return '---';\n});\n", "showdown.subParser('makeMarkdown.image', function (node) {\n  'use strict';\n\n  var txt = '';\n  if (node.hasAttribute('src')) {\n    txt += '![' + node.getAttribute('alt') + '](';\n    txt += '<' + node.getAttribute('src') + '>';\n    if (node.hasAttribute('width') && node.hasAttribute('height')) {\n      txt += ' =' + node.getAttribute('width') + 'x' + node.getAttribute('height');\n    }\n\n    if (node.hasAttribute('title')) {\n      txt += ' \"' + node.getAttribute('title') + '\"';\n    }\n    txt += ')';\n  }\n  return txt;\n});\n", "showdown.subParser('makeMarkdown.links', function (node, globals) {\n  'use strict';\n\n  var txt = '';\n  if (node.hasChildNodes() && node.hasAttribute('href')) {\n    var children = node.childNodes,\n        childrenLength = children.length;\n    txt = '[';\n    for (var i = 0; i < childrenLength; ++i) {\n      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);\n    }\n    txt += '](';\n    txt += '<' + node.getAttribute('href') + '>';\n    if (node.hasAttribute('title')) {\n      txt += ' \"' + node.getAttribute('title') + '\"';\n    }\n    txt += ')';\n  }\n  return txt;\n});\n", "showdown.subParser('makeMarkdown.list', function (node, globals, type) {\n  'use strict';\n\n  var txt = '';\n  if (!node.hasChildNodes()) {\n    return '';\n  }\n  var listItems       = node.childNodes,\n      listItemsLenght = listItems.length,\n      listNum = node.getAttribute('start') || 1;\n\n  for (var i = 0; i < listItemsLenght; ++i) {\n    if (typeof listItems[i].tagName === 'undefined' || listItems[i].tagName.toLowerCase() !== 'li') {\n      continue;\n    }\n\n    // define the bullet to use in list\n    var bullet = '';\n    if (type === 'ol') {\n      bullet = listNum.toString() + '. ';\n    } else {\n      bullet = '- ';\n    }\n\n    // parse list item\n    txt += bullet + showdown.subParser('makeMarkdown.listItem')(listItems[i], globals);\n    ++listNum;\n  }\n\n  // add comment at the end to prevent consecutive lists to be parsed as one\n  txt += '\\n<!-- -->\\n';\n  return txt.trim();\n});\n", "showdown.subParser('makeMarkdown.listItem', function (node, globals) {\n  'use strict';\n\n  var listItemTxt = '';\n\n  var children = node.childNodes,\n      childrenLenght = children.length;\n\n  for (var i = 0; i < childrenLenght; ++i) {\n    listItemTxt += showdown.subParser('makeMarkdown.node')(children[i], globals);\n  }\n  // if it's only one liner, we need to add a newline at the end\n  if (!/\\n$/.test(listItemTxt)) {\n    listItemTxt += '\\n';\n  } else {\n    // it's multiparagraph, so we need to indent\n    listItemTxt = listItemTxt\n      .split('\\n')\n      .join('\\n    ')\n      .replace(/^ {4}$/gm, '')\n      .replace(/\\n\\n+/g, '\\n\\n');\n  }\n\n  return listItemTxt;\n});\n", "\n\nshowdown.subParser('makeMarkdown.node', function (node, globals, spansOnly) {\n  'use strict';\n\n  spansOnly = spansOnly || false;\n\n  var txt = '';\n\n  // edge case of text without wrapper paragraph\n  if (node.nodeType === 3) {\n    return showdown.subParser('makeMarkdown.txt')(node, globals);\n  }\n\n  // HTML comment\n  if (node.nodeType === 8) {\n    return '<!--' + node.data + '-->\\n\\n';\n  }\n\n  // process only node elements\n  if (node.nodeType !== 1) {\n    return '';\n  }\n\n  var tagName = node.tagName.toLowerCase();\n\n  switch (tagName) {\n\n    //\n    // BLOCKS\n    //\n    case 'h1':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 1) + '\\n\\n'; }\n      break;\n    case 'h2':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 2) + '\\n\\n'; }\n      break;\n    case 'h3':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 3) + '\\n\\n'; }\n      break;\n    case 'h4':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 4) + '\\n\\n'; }\n      break;\n    case 'h5':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 5) + '\\n\\n'; }\n      break;\n    case 'h6':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 6) + '\\n\\n'; }\n      break;\n\n    case 'p':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.paragraph')(node, globals) + '\\n\\n'; }\n      break;\n\n    case 'blockquote':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.blockquote')(node, globals) + '\\n\\n'; }\n      break;\n\n    case 'hr':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.hr')(node, globals) + '\\n\\n'; }\n      break;\n\n    case 'ol':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.list')(node, globals, 'ol') + '\\n\\n'; }\n      break;\n\n    case 'ul':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.list')(node, globals, 'ul') + '\\n\\n'; }\n      break;\n\n    case 'precode':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.codeBlock')(node, globals) + '\\n\\n'; }\n      break;\n\n    case 'pre':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.pre')(node, globals) + '\\n\\n'; }\n      break;\n\n    case 'table':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.table')(node, globals) + '\\n\\n'; }\n      break;\n\n    //\n    // SPANS\n    //\n    case 'code':\n      txt = showdown.subParser('makeMarkdown.codeSpan')(node, globals);\n      break;\n\n    case 'em':\n    case 'i':\n      txt = showdown.subParser('makeMarkdown.emphasis')(node, globals);\n      break;\n\n    case 'strong':\n    case 'b':\n      txt = showdown.subParser('makeMarkdown.strong')(node, globals);\n      break;\n\n    case 'del':\n      txt = showdown.subParser('makeMarkdown.strikethrough')(node, globals);\n      break;\n\n    case 'a':\n      txt = showdown.subParser('makeMarkdown.links')(node, globals);\n      break;\n\n    case 'img':\n      txt = showdown.subParser('makeMarkdown.image')(node, globals);\n      break;\n\n    default:\n      txt = node.outerHTML + '\\n\\n';\n  }\n\n  // common normalization\n  // TODO eventually\n\n  return txt;\n});\n", "showdown.subParser('makeMarkdown.paragraph', function (node, globals) {\n  'use strict';\n\n  var txt = '';\n  if (node.hasChildNodes()) {\n    var children = node.childNodes,\n        childrenLength = children.length;\n    for (var i = 0; i < childrenLength; ++i) {\n      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);\n    }\n  }\n\n  // some text normalization\n  txt = txt.trim();\n\n  return txt;\n});\n", "showdown.subParser('makeMarkdown.pre', function (node, globals) {\n  'use strict';\n\n  var num  = node.getAttribute('prenum');\n  return '<pre>' + globals.preList[num] + '</pre>';\n});\n", "showdown.subParser('makeMarkdown.strikethrough', function (node, globals) {\n  'use strict';\n\n  var txt = '';\n  if (node.hasChildNodes()) {\n    txt += '~~';\n    var children = node.childNodes,\n        childrenLength = children.length;\n    for (var i = 0; i < childrenLength; ++i) {\n      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);\n    }\n    txt += '~~';\n  }\n  return txt;\n});\n", "showdown.subParser('makeMarkdown.strong', function (node, globals) {\n  'use strict';\n\n  var txt = '';\n  if (node.hasChildNodes()) {\n    txt += '**';\n    var children = node.childNodes,\n        childrenLength = children.length;\n    for (var i = 0; i < childrenLength; ++i) {\n      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);\n    }\n    txt += '**';\n  }\n  return txt;\n});\n", "showdown.subParser('makeMarkdown.table', function (node, globals) {\n  'use strict';\n\n  var txt = '',\n      tableArray = [[], []],\n      headings   = node.querySelectorAll('thead>tr>th'),\n      rows       = node.querySelectorAll('tbody>tr'),\n      i, ii;\n  for (i = 0; i < headings.length; ++i) {\n    var headContent = showdown.subParser('makeMarkdown.tableCell')(headings[i], globals),\n        allign = '---';\n\n    if (headings[i].hasAttribute('style')) {\n      var style = headings[i].getAttribute('style').toLowerCase().replace(/\\s/g, '');\n      switch (style) {\n        case 'text-align:left;':\n          allign = ':---';\n          break;\n        case 'text-align:right;':\n          allign = '---:';\n          break;\n        case 'text-align:center;':\n          allign = ':---:';\n          break;\n      }\n    }\n    tableArray[0][i] = headContent.trim();\n    tableArray[1][i] = allign;\n  }\n\n  for (i = 0; i < rows.length; ++i) {\n    var r = tableArray.push([]) - 1,\n        cols = rows[i].getElementsByTagName('td');\n\n    for (ii = 0; ii < headings.length; ++ii) {\n      var cellContent = ' ';\n      if (typeof cols[ii] !== 'undefined') {\n        cellContent = showdown.subParser('makeMarkdown.tableCell')(cols[ii], globals);\n      }\n      tableArray[r].push(cellContent);\n    }\n  }\n\n  var cellSpacesCount = 3;\n  for (i = 0; i < tableArray.length; ++i) {\n    for (ii = 0; ii < tableArray[i].length; ++ii) {\n      var strLen = tableArray[i][ii].length;\n      if (strLen > cellSpacesCount) {\n        cellSpacesCount = strLen;\n      }\n    }\n  }\n\n  for (i = 0; i < tableArray.length; ++i) {\n    for (ii = 0; ii < tableArray[i].length; ++ii) {\n      if (i === 1) {\n        if (tableArray[i][ii].slice(-1) === ':') {\n          tableArray[i][ii] = showdown.helper.padEnd(tableArray[i][ii].slice(-1), cellSpacesCount - 1, '-') + ':';\n        } else {\n          tableArray[i][ii] = showdown.helper.padEnd(tableArray[i][ii], cellSpacesCount, '-');\n        }\n      } else {\n        tableArray[i][ii] = showdown.helper.padEnd(tableArray[i][ii], cellSpacesCount);\n      }\n    }\n    txt += '| ' + tableArray[i].join(' | ') + ' |\\n';\n  }\n\n  return txt.trim();\n});\n", "showdown.subParser('makeMarkdown.tableCell', function (node, globals) {\n  'use strict';\n\n  var txt = '';\n  if (!node.hasChildNodes()) {\n    return '';\n  }\n  var children = node.childNodes,\n      childrenLength = children.length;\n\n  for (var i = 0; i < childrenLength; ++i) {\n    txt += showdown.subParser('makeMarkdown.node')(children[i], globals, true);\n  }\n  return txt.trim();\n});\n", "showdown.subParser('makeMarkdown.txt', function (node) {\n  'use strict';\n\n  var txt = node.nodeValue;\n\n  // multiple spaces are collapsed\n  txt = txt.replace(/ +/g, ' ');\n\n  // replace the custom ¨NBSP; with a space\n  txt = txt.replace(/¨NBSP;/g, ' ');\n\n  // \", <, > and & should replace escaped html entities\n  txt = showdown.helper.unescapeHTMLEntities(txt);\n\n  // escape markdown magic characters\n  // emphasis, strong and strikethrough - can appear everywhere\n  // we also escape pipe (|) because of tables\n  // and escape ` because of code blocks and spans\n  txt = txt.replace(/([*_~|`])/g, '\\\\$1');\n\n  // escape > because of blockquotes\n  txt = txt.replace(/^(\\s*)>/g, '\\\\$1>');\n\n  // hash character, only troublesome at the beginning of a line because of headers\n  txt = txt.replace(/^#/gm, '\\\\#');\n\n  // horizontal rules\n  txt = txt.replace(/^(\\s*)([-=]{3,})(\\s*)$/, '$1\\\\$2$3');\n\n  // dot, because of ordered lists, only troublesome at the beginning of a line when preceded by an integer\n  txt = txt.replace(/^( {0,3}\\d+)\\./gm, '$1\\\\.');\n\n  // +, * and -, at the beginning of a line becomes a list, so we need to escape them also (asterisk was already escaped)\n  txt = txt.replace(/^( {0,3})([+-])/gm, '$1\\\\$2');\n\n  // images and links, ] followed by ( is problematic, so we escape it\n  txt = txt.replace(/]([\\s]*)\\(/g, '\\\\]$1\\\\(');\n\n  // reference URIs must also be escaped\n  txt = txt.replace(/^ {0,3}\\[([\\S \\t]*?)]:/gm, '\\\\[$1]:');\n\n  return txt;\n});\n", "var root = this;\n\n// AMD Loader\nif (typeof define === 'function' && define.amd) {\n  define(function () {\n    'use strict';\n    return showdown;\n  });\n\n// CommonJS/nodeJS Loader\n} else if (typeof module !== 'undefined' && module.exports) {\n  module.exports = showdown;\n\n// Regular Browser loader\n} else {\n  root.showdown = showdown;\n}\n", "\"use strict\";\n\n(function() {\n  var PolyfillEvent = eventConstructor();\n\n  function eventConstructor() {\n    if (typeof window.CustomEvent === \"function\") return window.CustomEvent;\n    // IE<=9 Support\n    function CustomEvent(event, params) {\n      params = params || {bubbles: false, cancelable: false, detail: undefined};\n      var evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n      return evt;\n    }\n    CustomEvent.prototype = window.Event.prototype;\n    return CustomEvent;\n  }\n\n  function buildHiddenInput(name, value) {\n    var input = document.createElement(\"input\");\n    input.type = \"hidden\";\n    input.name = name;\n    input.value = value;\n    return input;\n  }\n\n  function handleClick(element, targetModifierKey) {\n    var to = element.getAttribute(\"data-to\"),\n        method = buildHiddenInput(\"_method\", element.getAttribute(\"data-method\")),\n        csrf = buildHiddenInput(\"_csrf_token\", element.getAttribute(\"data-csrf\")),\n        form = document.createElement(\"form\"),\n        submit = document.createElement(\"input\"),\n        target = element.getAttribute(\"target\");\n\n    form.method = (element.getAttribute(\"data-method\") === \"get\") ? \"get\" : \"post\";\n    form.action = to;\n    form.style.display = \"none\";\n\n    if (target) form.target = target;\n    else if (targetModifierKey) form.target = \"_blank\";\n\n    form.appendChild(csrf);\n    form.appendChild(method);\n    document.body.appendChild(form);\n\n    // Insert a button and click it instead of using `form.submit`\n    // because the `submit` function does not emit a `submit` event.\n    submit.type = \"submit\";\n    form.appendChild(submit);\n    submit.click();\n  }\n\n  window.addEventListener(\"click\", function(e) {\n    var element = e.target;\n    if (e.defaultPrevented) return;\n\n    while (element && element.getAttribute) {\n      var phoenixLinkEvent = new PolyfillEvent('phoenix.link.click', {\n        \"bubbles\": true, \"cancelable\": true\n      });\n\n      if (!element.dispatchEvent(phoenixLinkEvent)) {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n        return false;\n      }\n\n      if (element.getAttribute(\"data-method\") && element.getAttribute(\"data-to\")) {\n        handleClick(element, e.metaKey || e.shiftKey);\n        e.preventDefault();\n        return false;\n      } else {\n        element = element.parentNode;\n      }\n    }\n  }, false);\n\n  window.addEventListener('phoenix.link.click', function (e) {\n    var message = e.target.getAttribute(\"data-confirm\");\n    if(message && !window.confirm(message)) {\n      e.preventDefault();\n    }\n  }, false);\n})();\n", "// wraps value in closure or returns closure\nexport let closure = (value) => {\n  if(typeof value === \"function\"){\n    return value\n  } else {\n    let closure = function (){ return value }\n    return closure\n  }\n}\n", "export const globalSelf = typeof self !== \"undefined\" ? self : null\nexport const phxWindow = typeof window !== \"undefined\" ? window : null\nexport const global = globalSelf || phxWindow || global\nexport const DEFAULT_VSN = \"2.0.0\"\nexport const SOCKET_STATES = {connecting: 0, open: 1, closing: 2, closed: 3}\nexport const DEFAULT_TIMEOUT = 10000\nexport const WS_CLOSE_NORMAL = 1000\nexport const CHANNEL_STATES = {\n  closed: \"closed\",\n  errored: \"errored\",\n  joined: \"joined\",\n  joining: \"joining\",\n  leaving: \"leaving\",\n}\nexport const CHANNEL_EVENTS = {\n  close: \"phx_close\",\n  error: \"phx_error\",\n  join: \"phx_join\",\n  reply: \"phx_reply\",\n  leave: \"phx_leave\"\n}\n\nexport const TRANSPORTS = {\n  longpoll: \"longpoll\",\n  websocket: \"websocket\"\n}\nexport const XHR_STATES = {\n  complete: 4\n}\n", "/**\n * Initializes the Push\n * @param {Channel} channel - The Channel\n * @param {string} event - The event, for example `\"phx_join\"`\n * @param {Object} payload - The payload, for example `{user_id: 123}`\n * @param {number} timeout - The push timeout in milliseconds\n */\nexport default class Push {\n  constructor(channel, event, payload, timeout){\n    this.channel = channel\n    this.event = event\n    this.payload = payload || function (){ return {} }\n    this.receivedResp = null\n    this.timeout = timeout\n    this.timeoutTimer = null\n    this.recHooks = []\n    this.sent = false\n  }\n\n  /**\n   *\n   * @param {number} timeout\n   */\n  resend(timeout){\n    this.timeout = timeout\n    this.reset()\n    this.send()\n  }\n\n  /**\n   *\n   */\n  send(){\n    if(this.hasReceived(\"timeout\")){ return }\n    this.startTimeout()\n    this.sent = true\n    this.channel.socket.push({\n      topic: this.channel.topic,\n      event: this.event,\n      payload: this.payload(),\n      ref: this.ref,\n      join_ref: this.channel.joinRef()\n    })\n  }\n\n  /**\n   *\n   * @param {*} status\n   * @param {*} callback\n   */\n  receive(status, callback){\n    if(this.hasReceived(status)){\n      callback(this.receivedResp.response)\n    }\n\n    this.recHooks.push({status, callback})\n    return this\n  }\n\n  /**\n   * @private\n   */\n  reset(){\n    this.cancelRefEvent()\n    this.ref = null\n    this.refEvent = null\n    this.receivedResp = null\n    this.sent = false\n  }\n\n  /**\n   * @private\n   */\n  matchReceive({status, response, _ref}){\n    this.recHooks.filter(h => h.status === status)\n      .forEach(h => h.callback(response))\n  }\n\n  /**\n   * @private\n   */\n  cancelRefEvent(){\n    if(!this.refEvent){ return }\n    this.channel.off(this.refEvent)\n  }\n\n  /**\n   * @private\n   */\n  cancelTimeout(){\n    clearTimeout(this.timeoutTimer)\n    this.timeoutTimer = null\n  }\n\n  /**\n   * @private\n   */\n  startTimeout(){\n    if(this.timeoutTimer){ this.cancelTimeout() }\n    this.ref = this.channel.socket.makeRef()\n    this.refEvent = this.channel.replyEventName(this.ref)\n\n    this.channel.on(this.refEvent, payload => {\n      this.cancelRefEvent()\n      this.cancelTimeout()\n      this.receivedResp = payload\n      this.matchReceive(payload)\n    })\n\n    this.timeoutTimer = setTimeout(() => {\n      this.trigger(\"timeout\", {})\n    }, this.timeout)\n  }\n\n  /**\n   * @private\n   */\n  hasReceived(status){\n    return this.receivedResp && this.receivedResp.status === status\n  }\n\n  /**\n   * @private\n   */\n  trigger(status, response){\n    this.channel.trigger(this.refEvent, {status, response})\n  }\n}\n", "/**\n *\n * Creates a timer that accepts a `timerCalc` function to perform\n * calculated timeout retries, such as exponential backoff.\n *\n * @example\n * let reconnectTimer = new Timer(() => this.connect(), function(tries){\n *   return [1000, 5000, 10000][tries - 1] || 10000\n * })\n * reconnectTimer.scheduleTimeout() // fires after 1000\n * reconnectTimer.scheduleTimeout() // fires after 5000\n * reconnectTimer.reset()\n * reconnectTimer.scheduleTimeout() // fires after 1000\n *\n * @param {Function} callback\n * @param {Function} timerCalc\n */\nexport default class Timer {\n  constructor(callback, timerCalc){\n    this.callback = callback\n    this.timerCalc = timerCalc\n    this.timer = null\n    this.tries = 0\n  }\n\n  reset(){\n    this.tries = 0\n    clearTimeout(this.timer)\n  }\n\n  /**\n   * Cancels any previous scheduleTimeout and schedules callback\n   */\n  scheduleTimeout(){\n    clearTimeout(this.timer)\n\n    this.timer = setTimeout(() => {\n      this.tries = this.tries + 1\n      this.callback()\n    }, this.timerCalc(this.tries + 1))\n  }\n}\n", "import {closure} from \"./utils\"\nimport {\n  CHANNEL_EVENTS,\n  CHANNEL_STATES,\n} from \"./constants\"\n\nimport Push from \"./push\"\nimport Timer from \"./timer\"\n\n/**\n *\n * @param {string} topic\n * @param {(Object|function)} params\n * @param {Socket} socket\n */\nexport default class Channel {\n  constructor(topic, params, socket){\n    this.state = CHANNEL_STATES.closed\n    this.topic = topic\n    this.params = closure(params || {})\n    this.socket = socket\n    this.bindings = []\n    this.bindingRef = 0\n    this.timeout = this.socket.timeout\n    this.joinedOnce = false\n    this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.params, this.timeout)\n    this.pushBuffer = []\n    this.stateChangeRefs = []\n\n    this.rejoinTimer = new Timer(() => {\n      if(this.socket.isConnected()){ this.rejoin() }\n    }, this.socket.rejoinAfterMs)\n    this.stateChangeRefs.push(this.socket.onError(() => this.rejoinTimer.reset()))\n    this.stateChangeRefs.push(this.socket.onOpen(() => {\n      this.rejoinTimer.reset()\n      if(this.isErrored()){ this.rejoin() }\n    })\n    )\n    this.joinPush.receive(\"ok\", () => {\n      this.state = CHANNEL_STATES.joined\n      this.rejoinTimer.reset()\n      this.pushBuffer.forEach(pushEvent => pushEvent.send())\n      this.pushBuffer = []\n    })\n    this.joinPush.receive(\"error\", () => {\n      this.state = CHANNEL_STATES.errored\n      if(this.socket.isConnected()){ this.rejoinTimer.scheduleTimeout() }\n    })\n    this.onClose(() => {\n      this.rejoinTimer.reset()\n      if(this.socket.hasLogger()) this.socket.log(\"channel\", `close ${this.topic} ${this.joinRef()}`)\n      this.state = CHANNEL_STATES.closed\n      this.socket.remove(this)\n    })\n    this.onError(reason => {\n      if(this.socket.hasLogger()) this.socket.log(\"channel\", `error ${this.topic}`, reason)\n      if(this.isJoining()){ this.joinPush.reset() }\n      this.state = CHANNEL_STATES.errored\n      if(this.socket.isConnected()){ this.rejoinTimer.scheduleTimeout() }\n    })\n    this.joinPush.receive(\"timeout\", () => {\n      if(this.socket.hasLogger()) this.socket.log(\"channel\", `timeout ${this.topic} (${this.joinRef()})`, this.joinPush.timeout)\n      let leavePush = new Push(this, CHANNEL_EVENTS.leave, closure({}), this.timeout)\n      leavePush.send()\n      this.state = CHANNEL_STATES.errored\n      this.joinPush.reset()\n      if(this.socket.isConnected()){ this.rejoinTimer.scheduleTimeout() }\n    })\n    this.on(CHANNEL_EVENTS.reply, (payload, ref) => {\n      this.trigger(this.replyEventName(ref), payload)\n    })\n  }\n\n  /**\n   * Join the channel\n   * @param {integer} timeout\n   * @returns {Push}\n   */\n  join(timeout = this.timeout){\n    if(this.joinedOnce){\n      throw new Error(\"tried to join multiple times. 'join' can only be called a single time per channel instance\")\n    } else {\n      this.timeout = timeout\n      this.joinedOnce = true\n      this.rejoin()\n      return this.joinPush\n    }\n  }\n\n  /**\n   * Hook into channel close\n   * @param {Function} callback\n   */\n  onClose(callback){\n    this.on(CHANNEL_EVENTS.close, callback)\n  }\n\n  /**\n   * Hook into channel errors\n   * @param {Function} callback\n   */\n  onError(callback){\n    return this.on(CHANNEL_EVENTS.error, reason => callback(reason))\n  }\n\n  /**\n   * Subscribes on channel events\n   *\n   * Subscription returns a ref counter, which can be used later to\n   * unsubscribe the exact event listener\n   *\n   * @example\n   * const ref1 = channel.on(\"event\", do_stuff)\n   * const ref2 = channel.on(\"event\", do_other_stuff)\n   * channel.off(\"event\", ref1)\n   * // Since unsubscription, do_stuff won't fire,\n   * // while do_other_stuff will keep firing on the \"event\"\n   *\n   * @param {string} event\n   * @param {Function} callback\n   * @returns {integer} ref\n   */\n  on(event, callback){\n    let ref = this.bindingRef++\n    this.bindings.push({event, ref, callback})\n    return ref\n  }\n\n  /**\n   * Unsubscribes off of channel events\n   *\n   * Use the ref returned from a channel.on() to unsubscribe one\n   * handler, or pass nothing for the ref to unsubscribe all\n   * handlers for the given event.\n   *\n   * @example\n   * // Unsubscribe the do_stuff handler\n   * const ref1 = channel.on(\"event\", do_stuff)\n   * channel.off(\"event\", ref1)\n   *\n   * // Unsubscribe all handlers from event\n   * channel.off(\"event\")\n   *\n   * @param {string} event\n   * @param {integer} ref\n   */\n  off(event, ref){\n    this.bindings = this.bindings.filter((bind) => {\n      return !(bind.event === event && (typeof ref === \"undefined\" || ref === bind.ref))\n    })\n  }\n\n  /**\n   * @private\n   */\n  canPush(){ return this.socket.isConnected() && this.isJoined() }\n\n  /**\n   * Sends a message `event` to phoenix with the payload `payload`.\n   * Phoenix receives this in the `handle_in(event, payload, socket)`\n   * function. if phoenix replies or it times out (default 10000ms),\n   * then optionally the reply can be received.\n   *\n   * @example\n   * channel.push(\"event\")\n   *   .receive(\"ok\", payload => console.log(\"phoenix replied:\", payload))\n   *   .receive(\"error\", err => console.log(\"phoenix errored\", err))\n   *   .receive(\"timeout\", () => console.log(\"timed out pushing\"))\n   * @param {string} event\n   * @param {Object} payload\n   * @param {number} [timeout]\n   * @returns {Push}\n   */\n  push(event, payload, timeout = this.timeout){\n    payload = payload || {}\n    if(!this.joinedOnce){\n      throw new Error(`tried to push '${event}' to '${this.topic}' before joining. Use channel.join() before pushing events`)\n    }\n    let pushEvent = new Push(this, event, function (){ return payload }, timeout)\n    if(this.canPush()){\n      pushEvent.send()\n    } else {\n      pushEvent.startTimeout()\n      this.pushBuffer.push(pushEvent)\n    }\n\n    return pushEvent\n  }\n\n  /** Leaves the channel\n   *\n   * Unsubscribes from server events, and\n   * instructs channel to terminate on server\n   *\n   * Triggers onClose() hooks\n   *\n   * To receive leave acknowledgements, use the `receive`\n   * hook to bind to the server ack, ie:\n   *\n   * @example\n   * channel.leave().receive(\"ok\", () => alert(\"left!\") )\n   *\n   * @param {integer} timeout\n   * @returns {Push}\n   */\n  leave(timeout = this.timeout){\n    this.rejoinTimer.reset()\n    this.joinPush.cancelTimeout()\n\n    this.state = CHANNEL_STATES.leaving\n    let onClose = () => {\n      if(this.socket.hasLogger()) this.socket.log(\"channel\", `leave ${this.topic}`)\n      this.trigger(CHANNEL_EVENTS.close, \"leave\")\n    }\n    let leavePush = new Push(this, CHANNEL_EVENTS.leave, closure({}), timeout)\n    leavePush.receive(\"ok\", () => onClose())\n      .receive(\"timeout\", () => onClose())\n    leavePush.send()\n    if(!this.canPush()){ leavePush.trigger(\"ok\", {}) }\n\n    return leavePush\n  }\n\n  /**\n   * Overridable message hook\n   *\n   * Receives all events for specialized message handling\n   * before dispatching to the channel callbacks.\n   *\n   * Must return the payload, modified or unmodified\n   * @param {string} event\n   * @param {Object} payload\n   * @param {integer} ref\n   * @returns {Object}\n   */\n  onMessage(_event, payload, _ref){ return payload }\n\n  /**\n   * @private\n   */\n  isMember(topic, event, payload, joinRef){\n    if(this.topic !== topic){ return false }\n\n    if(joinRef && joinRef !== this.joinRef()){\n      if(this.socket.hasLogger()) this.socket.log(\"channel\", \"dropping outdated message\", {topic, event, payload, joinRef})\n      return false\n    } else {\n      return true\n    }\n  }\n\n  /**\n   * @private\n   */\n  joinRef(){ return this.joinPush.ref }\n\n  /**\n   * @private\n   */\n  rejoin(timeout = this.timeout){\n    if(this.isLeaving()){ return }\n    this.socket.leaveOpenTopic(this.topic)\n    this.state = CHANNEL_STATES.joining\n    this.joinPush.resend(timeout)\n  }\n\n  /**\n   * @private\n   */\n  trigger(event, payload, ref, joinRef){\n    let handledPayload = this.onMessage(event, payload, ref, joinRef)\n    if(payload && !handledPayload){ throw new Error(\"channel onMessage callbacks must return the payload, modified or unmodified\") }\n\n    let eventBindings = this.bindings.filter(bind => bind.event === event)\n\n    for(let i = 0; i < eventBindings.length; i++){\n      let bind = eventBindings[i]\n      bind.callback(handledPayload, ref, joinRef || this.joinRef())\n    }\n  }\n\n  /**\n   * @private\n   */\n  replyEventName(ref){ return `chan_reply_${ref}` }\n\n  /**\n   * @private\n   */\n  isClosed(){ return this.state === CHANNEL_STATES.closed }\n\n  /**\n   * @private\n   */\n  isErrored(){ return this.state === CHANNEL_STATES.errored }\n\n  /**\n   * @private\n   */\n  isJoined(){ return this.state === CHANNEL_STATES.joined }\n\n  /**\n   * @private\n   */\n  isJoining(){ return this.state === CHANNEL_STATES.joining }\n\n  /**\n   * @private\n   */\n  isLeaving(){ return this.state === CHANNEL_STATES.leaving }\n}\n", "import {\n  global,\n  XHR_STATES\n} from \"./constants\"\n\nexport default class Ajax {\n\n  static request(method, endPoint, accept, body, timeout, ontimeout, callback){\n    if(global.XDomainRequest){\n      let req = new global.XDomainRequest() // IE8, IE9\n      return this.xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback)\n    } else {\n      let req = new global.XMLHttpRequest() // IE7+, Firefox, Chrome, Opera, Safari\n      return this.xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback)\n    }\n  }\n\n  static xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback){\n    req.timeout = timeout\n    req.open(method, endPoint)\n    req.onload = () => {\n      let response = this.parseJSON(req.responseText)\n      callback && callback(response)\n    }\n    if(ontimeout){ req.ontimeout = ontimeout }\n\n    // Work around bug in IE9 that requires an attached onprogress handler\n    req.onprogress = () => { }\n\n    req.send(body)\n    return req\n  }\n\n  static xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback){\n    req.open(method, endPoint, true)\n    req.timeout = timeout\n    req.setRequestHeader(\"Content-Type\", accept)\n    req.onerror = () => callback && callback(null)\n    req.onreadystatechange = () => {\n      if(req.readyState === XHR_STATES.complete && callback){\n        let response = this.parseJSON(req.responseText)\n        callback(response)\n      }\n    }\n    if(ontimeout){ req.ontimeout = ontimeout }\n\n    req.send(body)\n    return req\n  }\n\n  static parseJSON(resp){\n    if(!resp || resp === \"\"){ return null }\n\n    try {\n      return JSON.parse(resp)\n    } catch (e){\n      console && console.log(\"failed to parse JSON response\", resp)\n      return null\n    }\n  }\n\n  static serialize(obj, parentKey){\n    let queryStr = []\n    for(var key in obj){\n      if(!Object.prototype.hasOwnProperty.call(obj, key)){ continue }\n      let paramKey = parentKey ? `${parentKey}[${key}]` : key\n      let paramVal = obj[key]\n      if(typeof paramVal === \"object\"){\n        queryStr.push(this.serialize(paramVal, paramKey))\n      } else {\n        queryStr.push(encodeURIComponent(paramKey) + \"=\" + encodeURIComponent(paramVal))\n      }\n    }\n    return queryStr.join(\"&\")\n  }\n\n  static appendParams(url, params){\n    if(Object.keys(params).length === 0){ return url }\n\n    let prefix = url.match(/\\?/) ? \"&\" : \"?\"\n    return `${url}${prefix}${this.serialize(params)}`\n  }\n}\n", "import {\n  SOCKET_STATES,\n  TRANSPORTS\n} from \"./constants\"\n\nimport Ajax from \"./ajax\"\n\nlet arrayBufferToBase64 = (buffer) => {\n  let binary = \"\"\n  let bytes = new Uint8Array(buffer)\n  let len = bytes.byteLength\n  for(let i = 0; i < len; i++){ binary += String.fromCharCode(bytes[i]) }\n  return btoa(binary)\n}\n\nexport default class LongPoll {\n\n  constructor(endPoint){\n    this.endPoint = null\n    this.token = null\n    this.skipHeartbeat = true\n    this.reqs = new Set()\n    this.awaitingBatchAck = false\n    this.currentBatch = null\n    this.currentBatchTimer = null\n    this.batchBuffer = []\n    this.onopen = function (){ } // noop\n    this.onerror = function (){ } // noop\n    this.onmessage = function (){ } // noop\n    this.onclose = function (){ } // noop\n    this.pollEndpoint = this.normalizeEndpoint(endPoint)\n    this.readyState = SOCKET_STATES.connecting\n    // we must wait for the caller to finish setting up our callbacks and timeout properties\n    setTimeout(() => this.poll(), 0)\n  }\n\n  normalizeEndpoint(endPoint){\n    return (endPoint\n      .replace(\"ws://\", \"http://\")\n      .replace(\"wss://\", \"https://\")\n      .replace(new RegExp(\"(.*)\\/\" + TRANSPORTS.websocket), \"$1/\" + TRANSPORTS.longpoll))\n  }\n\n  endpointURL(){\n    return Ajax.appendParams(this.pollEndpoint, {token: this.token})\n  }\n\n  closeAndRetry(code, reason, wasClean){\n    this.close(code, reason, wasClean)\n    this.readyState = SOCKET_STATES.connecting\n  }\n\n  ontimeout(){\n    this.onerror(\"timeout\")\n    this.closeAndRetry(1005, \"timeout\", false)\n  }\n\n  isActive(){ return this.readyState === SOCKET_STATES.open || this.readyState === SOCKET_STATES.connecting }\n\n  poll(){\n    this.ajax(\"GET\", \"application/json\", null, () => this.ontimeout(), resp => {\n      if(resp){\n        var {status, token, messages} = resp\n        this.token = token\n      } else {\n        status = 0\n      }\n\n      switch(status){\n        case 200:\n          messages.forEach(msg => {\n            // Tasks are what things like event handlers, setTimeout callbacks,\n            // promise resolves and more are run within.\n            // In modern browsers, there are two different kinds of tasks,\n            // microtasks and macrotasks.\n            // Microtasks are mainly used for Promises, while macrotasks are\n            // used for everything else.\n            // Microtasks always have priority over macrotasks. If the JS engine\n            // is looking for a task to run, it will always try to empty the\n            // microtask queue before attempting to run anything from the\n            // macrotask queue.\n            //\n            // For the WebSocket transport, messages always arrive in their own\n            // event. This means that if any promises are resolved from within,\n            // their callbacks will always finish execution by the time the\n            // next message event handler is run.\n            //\n            // In order to emulate this behaviour, we need to make sure each\n            // onmessage handler is run within its own macrotask.\n            setTimeout(() => this.onmessage({data: msg}), 0)\n          })\n          this.poll()\n          break\n        case 204:\n          this.poll()\n          break\n        case 410:\n          this.readyState = SOCKET_STATES.open\n          this.onopen({})\n          this.poll()\n          break\n        case 403:\n          this.onerror(403)\n          this.close(1008, \"forbidden\", false)\n          break\n        case 0:\n        case 500:\n          this.onerror(500)\n          this.closeAndRetry(1011, \"internal server error\", 500)\n          break\n        default: throw new Error(`unhandled poll status ${status}`)\n      }\n    })\n  }\n\n  // we collect all pushes within the current event loop by\n  // setTimeout 0, which optimizes back-to-back procedural\n  // pushes against an empty buffer\n\n  send(body){\n    if(typeof(body) !== \"string\"){ body = arrayBufferToBase64(body) }\n    if(this.currentBatch){\n      this.currentBatch.push(body)\n    } else if(this.awaitingBatchAck){\n      this.batchBuffer.push(body)\n    } else {\n      this.currentBatch = [body]\n      this.currentBatchTimer = setTimeout(() => {\n        this.batchSend(this.currentBatch)\n        this.currentBatch = null\n      }, 0)\n    }\n  }\n\n  batchSend(messages){\n    this.awaitingBatchAck = true\n    this.ajax(\"POST\", \"application/x-ndjson\", messages.join(\"\\n\"), () => this.onerror(\"timeout\"), resp => {\n      this.awaitingBatchAck = false\n      if(!resp || resp.status !== 200){\n        this.onerror(resp && resp.status)\n        this.closeAndRetry(1011, \"internal server error\", false)\n      } else if(this.batchBuffer.length > 0){\n        this.batchSend(this.batchBuffer)\n        this.batchBuffer = []\n      }\n    })\n  }\n\n  close(code, reason, wasClean){\n    for(let req of this.reqs){ req.abort() }\n    this.readyState = SOCKET_STATES.closed\n    let opts = Object.assign({code: 1000, reason: undefined, wasClean: true}, {code, reason, wasClean})\n    this.batchBuffer = []\n    clearTimeout(this.currentBatchTimer)\n    this.currentBatchTimer = null\n    if(typeof(CloseEvent) !== \"undefined\"){\n      this.onclose(new CloseEvent(\"close\", opts))\n    } else {\n      this.onclose(opts)\n    }\n  }\n\n  ajax(method, contentType, body, onCallerTimeout, callback){\n    let req\n    let ontimeout = () => {\n      this.reqs.delete(req)\n      onCallerTimeout()\n    }\n    req = Ajax.request(method, this.endpointURL(), contentType, body, this.timeout, ontimeout, resp => {\n      this.reqs.delete(req)\n      if(this.isActive()){ callback(resp) }\n    })\n    this.reqs.add(req)\n  }\n}\n", "/**\n * Initializes the Presence\n * @param {Channel} channel - The Channel\n * @param {Object} opts - The options,\n *        for example `{events: {state: \"state\", diff: \"diff\"}}`\n */\nexport default class Presence {\n\n  constructor(channel, opts = {}){\n    let events = opts.events || {state: \"presence_state\", diff: \"presence_diff\"}\n    this.state = {}\n    this.pendingDiffs = []\n    this.channel = channel\n    this.joinRef = null\n    this.caller = {\n      onJoin: function (){ },\n      onLeave: function (){ },\n      onSync: function (){ }\n    }\n\n    this.channel.on(events.state, newState => {\n      let {onJoin, onLeave, onSync} = this.caller\n\n      this.joinRef = this.channel.joinRef()\n      this.state = Presence.syncState(this.state, newState, onJoin, onLeave)\n\n      this.pendingDiffs.forEach(diff => {\n        this.state = Presence.syncDiff(this.state, diff, onJoin, onLeave)\n      })\n      this.pendingDiffs = []\n      onSync()\n    })\n\n    this.channel.on(events.diff, diff => {\n      let {onJoin, onLeave, onSync} = this.caller\n\n      if(this.inPendingSyncState()){\n        this.pendingDiffs.push(diff)\n      } else {\n        this.state = Presence.syncDiff(this.state, diff, onJoin, onLeave)\n        onSync()\n      }\n    })\n  }\n\n  onJoin(callback){ this.caller.onJoin = callback }\n\n  onLeave(callback){ this.caller.onLeave = callback }\n\n  onSync(callback){ this.caller.onSync = callback }\n\n  list(by){ return Presence.list(this.state, by) }\n\n  inPendingSyncState(){\n    return !this.joinRef || (this.joinRef !== this.channel.joinRef())\n  }\n\n  // lower-level public static API\n\n  /**\n   * Used to sync the list of presences on the server\n   * with the client's state. An optional `onJoin` and `onLeave` callback can\n   * be provided to react to changes in the client's local presences across\n   * disconnects and reconnects with the server.\n   *\n   * @returns {Presence}\n   */\n  static syncState(currentState, newState, onJoin, onLeave){\n    let state = this.clone(currentState)\n    let joins = {}\n    let leaves = {}\n\n    this.map(state, (key, presence) => {\n      if(!newState[key]){\n        leaves[key] = presence\n      }\n    })\n    this.map(newState, (key, newPresence) => {\n      let currentPresence = state[key]\n      if(currentPresence){\n        let newRefs = newPresence.metas.map(m => m.phx_ref)\n        let curRefs = currentPresence.metas.map(m => m.phx_ref)\n        let joinedMetas = newPresence.metas.filter(m => curRefs.indexOf(m.phx_ref) < 0)\n        let leftMetas = currentPresence.metas.filter(m => newRefs.indexOf(m.phx_ref) < 0)\n        if(joinedMetas.length > 0){\n          joins[key] = newPresence\n          joins[key].metas = joinedMetas\n        }\n        if(leftMetas.length > 0){\n          leaves[key] = this.clone(currentPresence)\n          leaves[key].metas = leftMetas\n        }\n      } else {\n        joins[key] = newPresence\n      }\n    })\n    return this.syncDiff(state, {joins: joins, leaves: leaves}, onJoin, onLeave)\n  }\n\n  /**\n   *\n   * Used to sync a diff of presence join and leave\n   * events from the server, as they happen. Like `syncState`, `syncDiff`\n   * accepts optional `onJoin` and `onLeave` callbacks to react to a user\n   * joining or leaving from a device.\n   *\n   * @returns {Presence}\n   */\n  static syncDiff(state, diff, onJoin, onLeave){\n    let {joins, leaves} = this.clone(diff)\n    if(!onJoin){ onJoin = function (){ } }\n    if(!onLeave){ onLeave = function (){ } }\n\n    this.map(joins, (key, newPresence) => {\n      let currentPresence = state[key]\n      state[key] = this.clone(newPresence)\n      if(currentPresence){\n        let joinedRefs = state[key].metas.map(m => m.phx_ref)\n        let curMetas = currentPresence.metas.filter(m => joinedRefs.indexOf(m.phx_ref) < 0)\n        state[key].metas.unshift(...curMetas)\n      }\n      onJoin(key, currentPresence, newPresence)\n    })\n    this.map(leaves, (key, leftPresence) => {\n      let currentPresence = state[key]\n      if(!currentPresence){ return }\n      let refsToRemove = leftPresence.metas.map(m => m.phx_ref)\n      currentPresence.metas = currentPresence.metas.filter(p => {\n        return refsToRemove.indexOf(p.phx_ref) < 0\n      })\n      onLeave(key, currentPresence, leftPresence)\n      if(currentPresence.metas.length === 0){\n        delete state[key]\n      }\n    })\n    return state\n  }\n\n  /**\n   * Returns the array of presences, with selected metadata.\n   *\n   * @param {Object} presences\n   * @param {Function} chooser\n   *\n   * @returns {Presence}\n   */\n  static list(presences, chooser){\n    if(!chooser){ chooser = function (key, pres){ return pres } }\n\n    return this.map(presences, (key, presence) => {\n      return chooser(key, presence)\n    })\n  }\n\n  // private\n\n  static map(obj, func){\n    return Object.getOwnPropertyNames(obj).map(key => func(key, obj[key]))\n  }\n\n  static clone(obj){ return JSON.parse(JSON.stringify(obj)) }\n}\n", "/* The default serializer for encoding and decoding messages */\nimport {\n  CHANNEL_EVENTS\n} from \"./constants\"\n\nexport default {\n  HEADER_LENGTH: 1,\n  META_LENGTH: 4,\n  KINDS: {push: 0, reply: 1, broadcast: 2},\n\n  encode(msg, callback){\n    if(msg.payload.constructor === ArrayBuffer){\n      return callback(this.binaryEncode(msg))\n    } else {\n      let payload = [msg.join_ref, msg.ref, msg.topic, msg.event, msg.payload]\n      return callback(JSON.stringify(payload))\n    }\n  },\n\n  decode(rawPayload, callback){\n    if(rawPayload.constructor === ArrayBuffer){\n      return callback(this.binaryDecode(rawPayload))\n    } else {\n      let [join_ref, ref, topic, event, payload] = JSON.parse(rawPayload)\n      return callback({join_ref, ref, topic, event, payload})\n    }\n  },\n\n  // private\n\n  binaryEncode(message){\n    let {join_ref, ref, event, topic, payload} = message\n    let metaLength = this.META_LENGTH + join_ref.length + ref.length + topic.length + event.length\n    let header = new ArrayBuffer(this.HEADER_LENGTH + metaLength)\n    let view = new DataView(header)\n    let offset = 0\n\n    view.setUint8(offset++, this.KINDS.push) // kind\n    view.setUint8(offset++, join_ref.length)\n    view.setUint8(offset++, ref.length)\n    view.setUint8(offset++, topic.length)\n    view.setUint8(offset++, event.length)\n    Array.from(join_ref, char => view.setUint8(offset++, char.charCodeAt(0)))\n    Array.from(ref, char => view.setUint8(offset++, char.charCodeAt(0)))\n    Array.from(topic, char => view.setUint8(offset++, char.charCodeAt(0)))\n    Array.from(event, char => view.setUint8(offset++, char.charCodeAt(0)))\n\n    var combined = new Uint8Array(header.byteLength + payload.byteLength)\n    combined.set(new Uint8Array(header), 0)\n    combined.set(new Uint8Array(payload), header.byteLength)\n\n    return combined.buffer\n  },\n\n  binaryDecode(buffer){\n    let view = new DataView(buffer)\n    let kind = view.getUint8(0)\n    let decoder = new TextDecoder()\n    switch(kind){\n      case this.KINDS.push: return this.decodePush(buffer, view, decoder)\n      case this.KINDS.reply: return this.decodeReply(buffer, view, decoder)\n      case this.KINDS.broadcast: return this.decodeBroadcast(buffer, view, decoder)\n    }\n  },\n\n  decodePush(buffer, view, decoder){\n    let joinRefSize = view.getUint8(1)\n    let topicSize = view.getUint8(2)\n    let eventSize = view.getUint8(3)\n    let offset = this.HEADER_LENGTH + this.META_LENGTH - 1 // pushes have no ref\n    let joinRef = decoder.decode(buffer.slice(offset, offset + joinRefSize))\n    offset = offset + joinRefSize\n    let topic = decoder.decode(buffer.slice(offset, offset + topicSize))\n    offset = offset + topicSize\n    let event = decoder.decode(buffer.slice(offset, offset + eventSize))\n    offset = offset + eventSize\n    let data = buffer.slice(offset, buffer.byteLength)\n    return {join_ref: joinRef, ref: null, topic: topic, event: event, payload: data}\n  },\n\n  decodeReply(buffer, view, decoder){\n    let joinRefSize = view.getUint8(1)\n    let refSize = view.getUint8(2)\n    let topicSize = view.getUint8(3)\n    let eventSize = view.getUint8(4)\n    let offset = this.HEADER_LENGTH + this.META_LENGTH\n    let joinRef = decoder.decode(buffer.slice(offset, offset + joinRefSize))\n    offset = offset + joinRefSize\n    let ref = decoder.decode(buffer.slice(offset, offset + refSize))\n    offset = offset + refSize\n    let topic = decoder.decode(buffer.slice(offset, offset + topicSize))\n    offset = offset + topicSize\n    let event = decoder.decode(buffer.slice(offset, offset + eventSize))\n    offset = offset + eventSize\n    let data = buffer.slice(offset, buffer.byteLength)\n    let payload = {status: event, response: data}\n    return {join_ref: joinRef, ref: ref, topic: topic, event: CHANNEL_EVENTS.reply, payload: payload}\n  },\n\n  decodeBroadcast(buffer, view, decoder){\n    let topicSize = view.getUint8(1)\n    let eventSize = view.getUint8(2)\n    let offset = this.HEADER_LENGTH + 2\n    let topic = decoder.decode(buffer.slice(offset, offset + topicSize))\n    offset = offset + topicSize\n    let event = decoder.decode(buffer.slice(offset, offset + eventSize))\n    offset = offset + eventSize\n    let data = buffer.slice(offset, buffer.byteLength)\n\n    return {join_ref: null, ref: null, topic: topic, event: event, payload: data}\n  }\n}\n", "import {\n  global,\n  phxWindow,\n  CHANNEL_EVENTS,\n  DEFAULT_TIMEOUT,\n  DEFAULT_VSN,\n  SOCKET_STATES,\n  TRANSPORTS,\n  WS_CLOSE_NORMAL\n} from \"./constants\"\n\nimport {\n  closure\n} from \"./utils\"\n\nimport Ajax from \"./ajax\"\nimport Channel from \"./channel\"\nimport LongPoll from \"./longpoll\"\nimport Serializer from \"./serializer\"\nimport Timer from \"./timer\"\n\n/** Initializes the Socket *\n *\n * For IE8 support use an ES5-shim (https://github.com/es-shims/es5-shim)\n *\n * @param {string} endPoint - The string WebSocket endpoint, ie, `\"ws://example.com/socket\"`,\n *                                               `\"wss://example.com\"`\n *                                               `\"/socket\"` (inherited host & protocol)\n * @param {Object} [opts] - Optional configuration\n * @param {Function} [opts.transport] - The Websocket Transport, for example WebSocket or Phoenix.LongPoll.\n *\n * Defaults to WebSocket with automatic LongPoll fallback if WebSocket is not defined.\n * To fallback to LongPoll when WebSocket attempts fail, use `longPollFallbackMs: 2500`.\n *\n * @param {Function} [opts.longPollFallbackMs] - The millisecond time to attempt the primary transport\n * before falling back to the LongPoll transport. Disabled by default.\n *\n * @param {Function} [opts.debug] - When true, enables debug logging. Default false.\n *\n * @param {Function} [opts.encode] - The function to encode outgoing messages.\n *\n * Defaults to JSON encoder.\n *\n * @param {Function} [opts.decode] - The function to decode incoming messages.\n *\n * Defaults to JSON:\n *\n * ```javascript\n * (payload, callback) => callback(JSON.parse(payload))\n * ```\n *\n * @param {number} [opts.timeout] - The default timeout in milliseconds to trigger push timeouts.\n *\n * Defaults `DEFAULT_TIMEOUT`\n * @param {number} [opts.heartbeatIntervalMs] - The millisec interval to send a heartbeat message\n * @param {number} [opts.reconnectAfterMs] - The optional function that returns the millisec\n * socket reconnect interval.\n *\n * Defaults to stepped backoff of:\n *\n * ```javascript\n * function(tries){\n *   return [10, 50, 100, 150, 200, 250, 500, 1000, 2000][tries - 1] || 5000\n * }\n * ````\n *\n * @param {number} [opts.rejoinAfterMs] - The optional function that returns the millisec\n * rejoin interval for individual channels.\n *\n * ```javascript\n * function(tries){\n *   return [1000, 2000, 5000][tries - 1] || 10000\n * }\n * ````\n *\n * @param {Function} [opts.logger] - The optional function for specialized logging, ie:\n *\n * ```javascript\n * function(kind, msg, data) {\n *   console.log(`${kind}: ${msg}`, data)\n * }\n * ```\n *\n * @param {number} [opts.longpollerTimeout] - The maximum timeout of a long poll AJAX request.\n *\n * Defaults to 20s (double the server long poll timer).\n *\n * @param {(Object|function)} [opts.params] - The optional params to pass when connecting\n * @param {string} [opts.binaryType] - The binary type to use for binary WebSocket frames.\n *\n * Defaults to \"arraybuffer\"\n *\n * @param {vsn} [opts.vsn] - The serializer's protocol version to send on connect.\n *\n * Defaults to DEFAULT_VSN.\n *\n * @param {Object} [opts.sessionStorage] - An optional Storage compatible object\n * Phoenix uses sessionStorage for longpoll fallback history. Overriding the store is\n * useful when Phoenix won't have access to `sessionStorage`. For example, This could\n * happen if a site loads a cross-domain channel in an iframe. Example usage:\n *\n *     class InMemoryStorage {\n *       constructor() { this.storage = {} }\n *       getItem(keyName) { return this.storage[keyName] || null }\n *       removeItem(keyName) { delete this.storage[keyName] }\n *       setItem(keyName, keyValue) { this.storage[keyName] = keyValue }\n *     }\n *\n*/\nexport default class Socket {\n  constructor(endPoint, opts = {}){\n    this.stateChangeCallbacks = {open: [], close: [], error: [], message: []}\n    this.channels = []\n    this.sendBuffer = []\n    this.ref = 0\n    this.timeout = opts.timeout || DEFAULT_TIMEOUT\n    this.transport = opts.transport || global.WebSocket || LongPoll\n    this.primaryPassedHealthCheck = false\n    this.longPollFallbackMs = opts.longPollFallbackMs\n    this.fallbackTimer = null\n    this.sessionStore = opts.sessionStorage || (global && global.sessionStorage)\n    this.establishedConnections = 0\n    this.defaultEncoder = Serializer.encode.bind(Serializer)\n    this.defaultDecoder = Serializer.decode.bind(Serializer)\n    this.closeWasClean = false\n    this.binaryType = opts.binaryType || \"arraybuffer\"\n    this.connectClock = 1\n    if(this.transport !== LongPoll){\n      this.encode = opts.encode || this.defaultEncoder\n      this.decode = opts.decode || this.defaultDecoder\n    } else {\n      this.encode = this.defaultEncoder\n      this.decode = this.defaultDecoder\n    }\n    let awaitingConnectionOnPageShow = null\n    if(phxWindow && phxWindow.addEventListener){\n      phxWindow.addEventListener(\"pagehide\", _e => {\n        if(this.conn){\n          this.disconnect()\n          awaitingConnectionOnPageShow = this.connectClock\n        }\n      })\n      phxWindow.addEventListener(\"pageshow\", _e => {\n        if(awaitingConnectionOnPageShow === this.connectClock){\n          awaitingConnectionOnPageShow = null\n          this.connect()\n        }\n      })\n    }\n    this.heartbeatIntervalMs = opts.heartbeatIntervalMs || 30000\n    this.rejoinAfterMs = (tries) => {\n      if(opts.rejoinAfterMs){\n        return opts.rejoinAfterMs(tries)\n      } else {\n        return [1000, 2000, 5000][tries - 1] || 10000\n      }\n    }\n    this.reconnectAfterMs = (tries) => {\n      if(opts.reconnectAfterMs){\n        return opts.reconnectAfterMs(tries)\n      } else {\n        return [10, 50, 100, 150, 200, 250, 500, 1000, 2000][tries - 1] || 5000\n      }\n    }\n    this.logger = opts.logger || null\n    if(!this.logger && opts.debug){\n      this.logger = (kind, msg, data) => { console.log(`${kind}: ${msg}`, data) }\n    }\n    this.longpollerTimeout = opts.longpollerTimeout || 20000\n    this.params = closure(opts.params || {})\n    this.endPoint = `${endPoint}/${TRANSPORTS.websocket}`\n    this.vsn = opts.vsn || DEFAULT_VSN\n    this.heartbeatTimeoutTimer = null\n    this.heartbeatTimer = null\n    this.pendingHeartbeatRef = null\n    this.reconnectTimer = new Timer(() => {\n      this.teardown(() => this.connect())\n    }, this.reconnectAfterMs)\n  }\n\n  /**\n   * Returns the LongPoll transport reference\n   */\n  getLongPollTransport(){ return LongPoll }\n\n  /**\n   * Disconnects and replaces the active transport\n   *\n   * @param {Function} newTransport - The new transport class to instantiate\n   *\n   */\n  replaceTransport(newTransport){\n    this.connectClock++\n    this.closeWasClean = true\n    clearTimeout(this.fallbackTimer)\n    this.reconnectTimer.reset()\n    if(this.conn){\n      this.conn.close()\n      this.conn = null\n    }\n    this.transport = newTransport\n  }\n\n  /**\n   * Returns the socket protocol\n   *\n   * @returns {string}\n   */\n  protocol(){ return location.protocol.match(/^https/) ? \"wss\" : \"ws\" }\n\n  /**\n   * The fully qualified socket url\n   *\n   * @returns {string}\n   */\n  endPointURL(){\n    let uri = Ajax.appendParams(\n      Ajax.appendParams(this.endPoint, this.params()), {vsn: this.vsn})\n    if(uri.charAt(0) !== \"/\"){ return uri }\n    if(uri.charAt(1) === \"/\"){ return `${this.protocol()}:${uri}` }\n\n    return `${this.protocol()}://${location.host}${uri}`\n  }\n\n  /**\n   * Disconnects the socket\n   *\n   * See https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent#Status_codes for valid status codes.\n   *\n   * @param {Function} callback - Optional callback which is called after socket is disconnected.\n   * @param {integer} code - A status code for disconnection (Optional).\n   * @param {string} reason - A textual description of the reason to disconnect. (Optional)\n   */\n  disconnect(callback, code, reason){\n    this.connectClock++\n    this.closeWasClean = true\n    clearTimeout(this.fallbackTimer)\n    this.reconnectTimer.reset()\n    this.teardown(callback, code, reason)\n  }\n\n  /**\n   *\n   * @param {Object} params - The params to send when connecting, for example `{user_id: userToken}`\n   *\n   * Passing params to connect is deprecated; pass them in the Socket constructor instead:\n   * `new Socket(\"/socket\", {params: {user_id: userToken}})`.\n   */\n  connect(params){\n    if(params){\n      console && console.log(\"passing params to connect is deprecated. Instead pass :params to the Socket constructor\")\n      this.params = closure(params)\n    }\n    if(this.conn){ return }\n    if(this.longPollFallbackMs && this.transport !== LongPoll){\n      this.connectWithFallback(LongPoll, this.longPollFallbackMs)\n    } else {\n      this.transportConnect()\n    }\n  }\n\n  /**\n   * Logs the message. Override `this.logger` for specialized logging. noops by default\n   * @param {string} kind\n   * @param {string} msg\n   * @param {Object} data\n   */\n  log(kind, msg, data){ this.logger && this.logger(kind, msg, data) }\n\n  /**\n   * Returns true if a logger has been set on this socket.\n   */\n  hasLogger(){ return this.logger !== null }\n\n  /**\n   * Registers callbacks for connection open events\n   *\n   * @example socket.onOpen(function(){ console.info(\"the socket was opened\") })\n   *\n   * @param {Function} callback\n   */\n  onOpen(callback){\n    let ref = this.makeRef()\n    this.stateChangeCallbacks.open.push([ref, callback])\n    return ref\n  }\n\n  /**\n   * Registers callbacks for connection close events\n   * @param {Function} callback\n   */\n  onClose(callback){\n    let ref = this.makeRef()\n    this.stateChangeCallbacks.close.push([ref, callback])\n    return ref\n  }\n\n  /**\n   * Registers callbacks for connection error events\n   *\n   * @example socket.onError(function(error){ alert(\"An error occurred\") })\n   *\n   * @param {Function} callback\n   */\n  onError(callback){\n    let ref = this.makeRef()\n    this.stateChangeCallbacks.error.push([ref, callback])\n    return ref\n  }\n\n  /**\n   * Registers callbacks for connection message events\n   * @param {Function} callback\n   */\n  onMessage(callback){\n    let ref = this.makeRef()\n    this.stateChangeCallbacks.message.push([ref, callback])\n    return ref\n  }\n\n  /**\n   * Pings the server and invokes the callback with the RTT in milliseconds\n   * @param {Function} callback\n   *\n   * Returns true if the ping was pushed or false if unable to be pushed.\n   */\n  ping(callback){\n    if(!this.isConnected()){ return false }\n    let ref = this.makeRef()\n    let startTime = Date.now()\n    this.push({topic: \"phoenix\", event: \"heartbeat\", payload: {}, ref: ref})\n    let onMsgRef = this.onMessage(msg => {\n      if(msg.ref === ref){\n        this.off([onMsgRef])\n        callback(Date.now() - startTime)\n      }\n    })\n    return true\n  }\n\n  /**\n   * @private\n   */\n\n  transportConnect(){\n    this.connectClock++\n    this.closeWasClean = false\n    this.conn = new this.transport(this.endPointURL())\n    this.conn.binaryType = this.binaryType\n    this.conn.timeout = this.longpollerTimeout\n    this.conn.onopen = () => this.onConnOpen()\n    this.conn.onerror = error => this.onConnError(error)\n    this.conn.onmessage = event => this.onConnMessage(event)\n    this.conn.onclose = event => this.onConnClose(event)\n  }\n\n  getSession(key){ return this.sessionStore && this.sessionStore.getItem(key) }\n\n  storeSession(key, val){ this.sessionStore && this.sessionStore.setItem(key, val) }\n\n  connectWithFallback(fallbackTransport, fallbackThreshold = 2500){\n    clearTimeout(this.fallbackTimer)\n    let established = false\n    let primaryTransport = true\n    let openRef, errorRef\n    let fallback = (reason) => {\n      this.log(\"transport\", `falling back to ${fallbackTransport.name}...`, reason)\n      this.off([openRef, errorRef])\n      primaryTransport = false\n      this.replaceTransport(fallbackTransport)\n      this.transportConnect()\n    }\n    if(this.getSession(`phx:fallback:${fallbackTransport.name}`)){ return fallback(\"memorized\") }\n\n    this.fallbackTimer = setTimeout(fallback, fallbackThreshold)\n\n    errorRef = this.onError(reason => {\n      this.log(\"transport\", \"error\", reason)\n      if(primaryTransport && !established){\n        clearTimeout(this.fallbackTimer)\n        fallback(reason)\n      }\n    })\n    this.onOpen(() => {\n      established = true\n      if(!primaryTransport){\n        // only memorize LP if we never connected to primary\n        if(!this.primaryPassedHealthCheck){ this.storeSession(`phx:fallback:${fallbackTransport.name}`, \"true\") }\n        return this.log(\"transport\", `established ${fallbackTransport.name} fallback`)\n      }\n      // if we've established primary, give the fallback a new period to attempt ping\n      clearTimeout(this.fallbackTimer)\n      this.fallbackTimer = setTimeout(fallback, fallbackThreshold)\n      this.ping(rtt => {\n        this.log(\"transport\", \"connected to primary after\", rtt)\n        this.primaryPassedHealthCheck = true\n        clearTimeout(this.fallbackTimer)\n      })\n    })\n    this.transportConnect()\n  }\n\n  clearHeartbeats(){\n    clearTimeout(this.heartbeatTimer)\n    clearTimeout(this.heartbeatTimeoutTimer)\n  }\n\n  onConnOpen(){\n    if(this.hasLogger()) this.log(\"transport\", `${this.transport.name} connected to ${this.endPointURL()}`)\n    this.closeWasClean = false\n    this.establishedConnections++\n    this.flushSendBuffer()\n    this.reconnectTimer.reset()\n    this.resetHeartbeat()\n    this.stateChangeCallbacks.open.forEach(([, callback]) => callback())\n  }\n\n  /**\n   * @private\n   */\n\n  heartbeatTimeout(){\n    if(this.pendingHeartbeatRef){\n      this.pendingHeartbeatRef = null\n      if(this.hasLogger()){ this.log(\"transport\", \"heartbeat timeout. Attempting to re-establish connection\") }\n      this.triggerChanError()\n      this.closeWasClean = false\n      this.teardown(() => this.reconnectTimer.scheduleTimeout(), WS_CLOSE_NORMAL, \"heartbeat timeout\")\n    }\n  }\n\n  resetHeartbeat(){\n    if(this.conn && this.conn.skipHeartbeat){ return }\n    this.pendingHeartbeatRef = null\n    this.clearHeartbeats()\n    this.heartbeatTimer = setTimeout(() => this.sendHeartbeat(), this.heartbeatIntervalMs)\n  }\n\n  teardown(callback, code, reason){\n    if(!this.conn){\n      return callback && callback()\n    }\n\n    this.waitForBufferDone(() => {\n      if(this.conn){\n        if(code){ this.conn.close(code, reason || \"\") } else { this.conn.close() }\n      }\n\n      this.waitForSocketClosed(() => {\n        if(this.conn){\n          this.conn.onopen = function (){ } // noop\n          this.conn.onerror = function (){ } // noop\n          this.conn.onmessage = function (){ } // noop\n          this.conn.onclose = function (){ } // noop\n          this.conn = null\n        }\n\n        callback && callback()\n      })\n    })\n  }\n\n  waitForBufferDone(callback, tries = 1){\n    if(tries === 5 || !this.conn || !this.conn.bufferedAmount){\n      callback()\n      return\n    }\n\n    setTimeout(() => {\n      this.waitForBufferDone(callback, tries + 1)\n    }, 150 * tries)\n  }\n\n  waitForSocketClosed(callback, tries = 1){\n    if(tries === 5 || !this.conn || this.conn.readyState === SOCKET_STATES.closed){\n      callback()\n      return\n    }\n\n    setTimeout(() => {\n      this.waitForSocketClosed(callback, tries + 1)\n    }, 150 * tries)\n  }\n\n  onConnClose(event){\n    let closeCode = event && event.code\n    if(this.hasLogger()) this.log(\"transport\", \"close\", event)\n    this.triggerChanError()\n    this.clearHeartbeats()\n    if(!this.closeWasClean && closeCode !== 1000){\n      this.reconnectTimer.scheduleTimeout()\n    }\n    this.stateChangeCallbacks.close.forEach(([, callback]) => callback(event))\n  }\n\n  /**\n   * @private\n   */\n  onConnError(error){\n    if(this.hasLogger()) this.log(\"transport\", error)\n    let transportBefore = this.transport\n    let establishedBefore = this.establishedConnections\n    this.stateChangeCallbacks.error.forEach(([, callback]) => {\n      callback(error, transportBefore, establishedBefore)\n    })\n    if(transportBefore === this.transport || establishedBefore > 0){\n      this.triggerChanError()\n    }\n  }\n\n  /**\n   * @private\n   */\n  triggerChanError(){\n    this.channels.forEach(channel => {\n      if(!(channel.isErrored() || channel.isLeaving() || channel.isClosed())){\n        channel.trigger(CHANNEL_EVENTS.error)\n      }\n    })\n  }\n\n  /**\n   * @returns {string}\n   */\n  connectionState(){\n    switch(this.conn && this.conn.readyState){\n      case SOCKET_STATES.connecting: return \"connecting\"\n      case SOCKET_STATES.open: return \"open\"\n      case SOCKET_STATES.closing: return \"closing\"\n      default: return \"closed\"\n    }\n  }\n\n  /**\n   * @returns {boolean}\n   */\n  isConnected(){ return this.connectionState() === \"open\" }\n\n  /**\n   * @private\n   *\n   * @param {Channel}\n   */\n  remove(channel){\n    this.off(channel.stateChangeRefs)\n    this.channels = this.channels.filter(c => c !== channel)\n  }\n\n  /**\n   * Removes `onOpen`, `onClose`, `onError,` and `onMessage` registrations.\n   *\n   * @param {refs} - list of refs returned by calls to\n   *                 `onOpen`, `onClose`, `onError,` and `onMessage`\n   */\n  off(refs){\n    for(let key in this.stateChangeCallbacks){\n      this.stateChangeCallbacks[key] = this.stateChangeCallbacks[key].filter(([ref]) => {\n        return refs.indexOf(ref) === -1\n      })\n    }\n  }\n\n  /**\n   * Initiates a new channel for the given topic\n   *\n   * @param {string} topic\n   * @param {Object} chanParams - Parameters for the channel\n   * @returns {Channel}\n   */\n  channel(topic, chanParams = {}){\n    let chan = new Channel(topic, chanParams, this)\n    this.channels.push(chan)\n    return chan\n  }\n\n  /**\n   * @param {Object} data\n   */\n  push(data){\n    if(this.hasLogger()){\n      let {topic, event, payload, ref, join_ref} = data\n      this.log(\"push\", `${topic} ${event} (${join_ref}, ${ref})`, payload)\n    }\n\n    if(this.isConnected()){\n      this.encode(data, result => this.conn.send(result))\n    } else {\n      this.sendBuffer.push(() => this.encode(data, result => this.conn.send(result)))\n    }\n  }\n\n  /**\n   * Return the next message ref, accounting for overflows\n   * @returns {string}\n   */\n  makeRef(){\n    let newRef = this.ref + 1\n    if(newRef === this.ref){ this.ref = 0 } else { this.ref = newRef }\n\n    return this.ref.toString()\n  }\n\n  sendHeartbeat(){\n    if(this.pendingHeartbeatRef && !this.isConnected()){ return }\n    this.pendingHeartbeatRef = this.makeRef()\n    this.push({topic: \"phoenix\", event: \"heartbeat\", payload: {}, ref: this.pendingHeartbeatRef})\n    this.heartbeatTimeoutTimer = setTimeout(() => this.heartbeatTimeout(), this.heartbeatIntervalMs)\n  }\n\n  flushSendBuffer(){\n    if(this.isConnected() && this.sendBuffer.length > 0){\n      this.sendBuffer.forEach(callback => callback())\n      this.sendBuffer = []\n    }\n  }\n\n  onConnMessage(rawMessage){\n    this.decode(rawMessage.data, msg => {\n      let {topic, event, payload, ref, join_ref} = msg\n      if(ref && ref === this.pendingHeartbeatRef){\n        this.clearHeartbeats()\n        this.pendingHeartbeatRef = null\n        this.heartbeatTimer = setTimeout(() => this.sendHeartbeat(), this.heartbeatIntervalMs)\n      }\n\n      if(this.hasLogger()) this.log(\"receive\", `${payload.status || \"\"} ${topic} ${event} ${ref && \"(\" + ref + \")\" || \"\"}`, payload)\n\n      for(let i = 0; i < this.channels.length; i++){\n        const channel = this.channels[i]\n        if(!channel.isMember(topic, event, payload, join_ref)){ continue }\n        channel.trigger(event, payload, ref, join_ref)\n      }\n\n      for(let i = 0; i < this.stateChangeCallbacks.message.length; i++){\n        let [, callback] = this.stateChangeCallbacks.message[i]\n        callback(msg)\n      }\n    })\n  }\n\n  leaveOpenTopic(topic){\n    let dupChannel = this.channels.find(c => c.topic === topic && (c.isJoined() || c.isJoining()))\n    if(dupChannel){\n      if(this.hasLogger()) this.log(\"transport\", `leaving duplicate topic \"${topic}\"`)\n      dupChannel.leave()\n    }\n  }\n}\n", "export const CONSECUTIVE_RELOADS = \"consecutive-reloads\"\nexport const MAX_RELOADS = 10\nexport const RELOAD_JITTER_MIN = 5000\nexport const RELOAD_JITTER_MAX = 10000\nexport const FAILSAFE_JITTER = 30000\nexport const PHX_EVENT_CLASSES = [\n  \"phx-click-loading\", \"phx-change-loading\", \"phx-submit-loading\",\n  \"phx-keydown-loading\", \"phx-keyup-loading\", \"phx-blur-loading\", \"phx-focus-loading\",\n  \"phx-hook-loading\"\n]\nexport const PHX_COMPONENT = \"data-phx-component\"\nexport const PHX_LIVE_LINK = \"data-phx-link\"\nexport const PHX_TRACK_STATIC = \"track-static\"\nexport const PHX_LINK_STATE = \"data-phx-link-state\"\nexport const PHX_REF_LOADING = \"data-phx-ref-loading\"\nexport const PHX_REF_SRC = \"data-phx-ref-src\"\nexport const PHX_REF_LOCK = \"data-phx-ref-lock\"\nexport const PHX_TRACK_UPLOADS = \"track-uploads\"\nexport const PHX_UPLOAD_REF = \"data-phx-upload-ref\"\nexport const PHX_PREFLIGHTED_REFS = \"data-phx-preflighted-refs\"\nexport const PHX_DONE_REFS = \"data-phx-done-refs\"\nexport const PHX_DROP_TARGET = \"drop-target\"\nexport const PHX_ACTIVE_ENTRY_REFS = \"data-phx-active-refs\"\nexport const PHX_LIVE_FILE_UPDATED = \"phx:live-file:updated\"\nexport const PHX_SKIP = \"data-phx-skip\"\nexport const PHX_MAGIC_ID = \"data-phx-id\"\nexport const PHX_PRUNE = \"data-phx-prune\"\nexport const PHX_CONNECTED_CLASS = \"phx-connected\"\nexport const PHX_LOADING_CLASS = \"phx-loading\"\nexport const PHX_ERROR_CLASS = \"phx-error\"\nexport const PHX_CLIENT_ERROR_CLASS = \"phx-client-error\"\nexport const PHX_SERVER_ERROR_CLASS = \"phx-server-error\"\nexport const PHX_PARENT_ID = \"data-phx-parent-id\"\nexport const PHX_MAIN = \"data-phx-main\"\nexport const PHX_ROOT_ID = \"data-phx-root-id\"\nexport const PHX_VIEWPORT_TOP = \"viewport-top\"\nexport const PHX_VIEWPORT_BOTTOM = \"viewport-bottom\"\nexport const PHX_TRIGGER_ACTION = \"trigger-action\"\nexport const PHX_HAS_FOCUSED = \"phx-has-focused\"\nexport const FOCUSABLE_INPUTS = [\"text\", \"textarea\", \"number\", \"email\", \"password\", \"search\", \"tel\", \"url\", \"date\", \"time\", \"datetime-local\", \"color\", \"range\"]\nexport const CHECKABLE_INPUTS = [\"checkbox\", \"radio\"]\nexport const PHX_HAS_SUBMITTED = \"phx-has-submitted\"\nexport const PHX_SESSION = \"data-phx-session\"\nexport const PHX_VIEW_SELECTOR = `[${PHX_SESSION}]`\nexport const PHX_STICKY = \"data-phx-sticky\"\nexport const PHX_STATIC = \"data-phx-static\"\nexport const PHX_READONLY = \"data-phx-readonly\"\nexport const PHX_DISABLED = \"data-phx-disabled\"\nexport const PHX_DISABLE_WITH = \"disable-with\"\nexport const PHX_DISABLE_WITH_RESTORE = \"data-phx-disable-with-restore\"\nexport const PHX_HOOK = \"hook\"\nexport const PHX_DEBOUNCE = \"debounce\"\nexport const PHX_THROTTLE = \"throttle\"\nexport const PHX_UPDATE = \"update\"\nexport const PHX_STREAM = \"stream\"\nexport const PHX_STREAM_REF = \"data-phx-stream\"\nexport const PHX_KEY = \"key\"\nexport const PHX_PRIVATE = \"phxPrivate\"\nexport const PHX_AUTO_RECOVER = \"auto-recover\"\nexport const PHX_LV_DEBUG = \"phx:live-socket:debug\"\nexport const PHX_LV_PROFILE = \"phx:live-socket:profiling\"\nexport const PHX_LV_LATENCY_SIM = \"phx:live-socket:latency-sim\"\nexport const PHX_LV_HISTORY_POSITION = \"phx:nav-history-position\"\nexport const PHX_PROGRESS = \"progress\"\nexport const PHX_MOUNTED = \"mounted\"\nexport const PHX_RELOAD_STATUS = \"__phoenix_reload_status__\"\nexport const LOADER_TIMEOUT = 1\nexport const MAX_CHILD_JOIN_ATTEMPTS = 3\nexport const BEFORE_UNLOAD_LOADER_TIMEOUT = 200\nexport const BINDING_PREFIX = \"phx-\"\nexport const PUSH_TIMEOUT = 30000\nexport const LINK_HEADER = \"x-requested-with\"\nexport const RESPONSE_URL_HEADER = \"x-response-url\"\nexport const DEBOUNCE_TRIGGER = \"debounce-trigger\"\nexport const THROTTLED = \"throttled\"\nexport const DEBOUNCE_PREV_KEY = \"debounce-prev-key\"\nexport const DEFAULTS = {\n  debounce: 300,\n  throttle: 300\n}\nexport const PHX_PENDING_ATTRS = [PHX_REF_LOADING, PHX_REF_SRC, PHX_REF_LOCK]\n// Rendered\nexport const DYNAMICS = \"d\"\nexport const STATIC = \"s\"\nexport const ROOT = \"r\"\nexport const COMPONENTS = \"c\"\nexport const EVENTS = \"e\"\nexport const REPLY = \"r\"\nexport const TITLE = \"t\"\nexport const TEMPLATES = \"p\"\nexport const STREAM = \"stream\"\n", "import {\n  logError\n} from \"./utils\"\n\nexport default class EntryUploader {\n  constructor(entry, config, liveSocket){\n    let {chunk_size, chunk_timeout} = config\n    this.liveSocket = liveSocket\n    this.entry = entry\n    this.offset = 0\n    this.chunkSize = chunk_size\n    this.chunkTimeout = chunk_timeout\n    this.chunkTimer = null\n    this.errored = false\n    this.uploadChannel = liveSocket.channel(`lvu:${entry.ref}`, {token: entry.metadata()})\n  }\n\n  error(reason){\n    if(this.errored){ return }\n    this.uploadChannel.leave()\n    this.errored = true\n    clearTimeout(this.chunkTimer)\n    this.entry.error(reason)\n  }\n\n  upload(){\n    this.uploadChannel.onError(reason => this.error(reason))\n    this.uploadChannel.join()\n      .receive(\"ok\", _data => this.readNextChunk())\n      .receive(\"error\", reason => this.error(reason))\n  }\n\n  isDone(){ return this.offset >= this.entry.file.size }\n\n  readNextChunk(){\n    let reader = new window.FileReader()\n    let blob = this.entry.file.slice(this.offset, this.chunkSize + this.offset)\n    reader.onload = (e) => {\n      if(e.target.error === null){\n        this.offset += e.target.result.byteLength\n        this.pushChunk(e.target.result)\n      } else {\n        return logError(\"Read error: \" + e.target.error)\n      }\n    }\n    reader.readAsArrayBuffer(blob)\n  }\n\n  pushChunk(chunk){\n    if(!this.uploadChannel.isJoined()){ return }\n    this.uploadChannel.push(\"chunk\", chunk, this.chunkTimeout)\n      .receive(\"ok\", () => {\n        this.entry.progress((this.offset / this.entry.file.size) * 100)\n        if(!this.isDone()){\n          this.chunkTimer = setTimeout(() => this.readNextChunk(), this.liveSocket.getLatencySim() || 0)\n        }\n      })\n      .receive(\"error\", ({reason}) => this.error(reason))\n  }\n}\n", "import {\n  PHX_VIEW_SELECTOR\n} from \"./constants\"\n\nimport EntryUploader from \"./entry_uploader\"\n\nexport let logError = (msg, obj) => console.error && console.error(msg, obj)\n\nexport let isCid = (cid) => {\n  let type = typeof(cid)\n  return type === \"number\" || (type === \"string\" && /^(0|[1-9]\\d*)$/.test(cid))\n}\n\nexport function detectDuplicateIds(){\n  let ids = new Set()\n  let elems = document.querySelectorAll(\"*[id]\")\n  for(let i = 0, len = elems.length; i < len; i++){\n    if(ids.has(elems[i].id)){\n      console.error(`Multiple IDs detected: ${elems[i].id}. Ensure unique element ids.`)\n    } else {\n      ids.add(elems[i].id)\n    }\n  }\n}\n\nexport let debug = (view, kind, msg, obj) => {\n  if(view.liveSocket.isDebugEnabled()){\n    console.log(`${view.id} ${kind}: ${msg} - `, obj)\n  }\n}\n\n// wraps value in closure or returns closure\nexport let closure = (val) => typeof val === \"function\" ? val : function (){ return val }\n\nexport let clone = (obj) => { return JSON.parse(JSON.stringify(obj)) }\n\nexport let closestPhxBinding = (el, binding, borderEl) => {\n  do {\n    if(el.matches(`[${binding}]`) && !el.disabled){ return el }\n    el = el.parentElement || el.parentNode\n  } while(el !== null && el.nodeType === 1 && !((borderEl && borderEl.isSameNode(el)) || el.matches(PHX_VIEW_SELECTOR)))\n  return null\n}\n\nexport let isObject = (obj) => {\n  return obj !== null && typeof obj === \"object\" && !(obj instanceof Array)\n}\n\nexport let isEqualObj = (obj1, obj2) => JSON.stringify(obj1) === JSON.stringify(obj2)\n\nexport let isEmpty = (obj) => {\n  for(let x in obj){ return false }\n  return true\n}\n\nexport let maybe = (el, callback) => el && callback(el)\n\nexport let channelUploader = function (entries, onError, resp, liveSocket){\n  entries.forEach(entry => {\n    let entryUploader = new EntryUploader(entry, resp.config, liveSocket)\n    entryUploader.upload()\n  })\n}\n", "let Browser = {\n  canPushState(){ return (typeof (history.pushState) !== \"undefined\") },\n\n  dropLocal(localStorage, namespace, subkey){\n    return localStorage.removeItem(this.localKey(namespace, subkey))\n  },\n\n  updateLocal(localStorage, namespace, subkey, initial, func){\n    let current = this.getLocal(localStorage, namespace, subkey)\n    let key = this.localKey(namespace, subkey)\n    let newVal = current === null ? initial : func(current)\n    localStorage.setItem(key, JSON.stringify(newVal))\n    return newVal\n  },\n\n  getLocal(localStorage, namespace, subkey){\n    return JSON.parse(localStorage.getItem(this.localKey(namespace, subkey)))\n  },\n\n  updateCurrentState(callback){\n    if(!this.canPushState()){ return }\n    history.replaceState(callback(history.state || {}), \"\", window.location.href)\n  },\n\n  pushState(kind, meta, to){\n    if(this.canPushState()){\n      if(to !== window.location.href){\n        if(meta.type == \"redirect\" && meta.scroll){\n          // If we're redirecting store the current scrollY for the current history state.\n          let currentState = history.state || {}\n          currentState.scroll = meta.scroll\n          history.replaceState(currentState, \"\", window.location.href)\n        }\n\n        delete meta.scroll // Only store the scroll in the redirect case.\n        history[kind + \"State\"](meta, \"\", to || null) // IE will coerce undefined to string\n\n        // when using navigate, we'd call pushState immediately before patching the DOM,\n        // jumping back to the top of the page, effectively ignoring the scrollIntoView;\n        // therefore we wait for the next frame (after the DOM patch) and only then try\n        // to scroll to the hashEl\n        window.requestAnimationFrame(() => {\n          let hashEl = this.getHashTargetEl(window.location.hash)\n  \n          if(hashEl){\n            hashEl.scrollIntoView()\n          } else if(meta.type === \"redirect\"){\n            window.scroll(0, 0)\n          }\n        })\n      }\n    } else {\n      this.redirect(to)\n    }\n  },\n\n  setCookie(name, value, maxAgeSeconds){\n    let expires = typeof(maxAgeSeconds) === \"number\" ? ` max-age=${maxAgeSeconds};` : \"\"\n    document.cookie = `${name}=${value};${expires} path=/`\n  },\n\n  getCookie(name){\n    return document.cookie.replace(new RegExp(`(?:(?:^|.*;\\s*)${name}\\s*\\=\\s*([^;]*).*$)|^.*$`), \"$1\")\n  },\n\n  deleteCookie(name){\n    document.cookie = `${name}=; max-age=-1; path=/`\n  },\n\n  redirect(toURL, flash){\n    if(flash){ this.setCookie(\"__phoenix_flash__\", flash, 60) }\n    window.location = toURL\n  },\n\n  localKey(namespace, subkey){ return `${namespace}-${subkey}` },\n\n  getHashTargetEl(maybeHash){\n    let hash = maybeHash.toString().substring(1)\n    if(hash === \"\"){ return }\n    return document.getElementById(hash) || document.querySelector(`a[name=\"${hash}\"]`)\n  }\n}\n\nexport default Browser\n", "import {\n  CHECKABLE_INPUTS,\n  DEBOUNCE_PREV_KEY,\n  DEBOUNCE_TRIGGER,\n  FOCUSABLE_INPUTS,\n  PHX_COMPONENT,\n  PHX_HAS_FOCUSED,\n  PHX_HAS_SUBMITTED,\n  PHX_MAIN,\n  PHX_PARENT_ID,\n  PHX_PRIVATE,\n  PHX_REF_SRC,\n  PHX_PENDING_ATTRS,\n  PHX_ROOT_ID,\n  PHX_SESSION,\n  PHX_STATIC,\n  PHX_UPLOAD_REF,\n  PHX_VIEW_SELECTOR,\n  PHX_STICKY,\n  PHX_EVENT_CLASSES,\n  THROTTLED,\n} from \"./constants\"\n\nimport {\n  logError\n} from \"./utils\"\n\nlet DOM = {\n  byId(id){ return document.getElementById(id) || logError(`no id found for ${id}`) },\n\n  removeClass(el, className){\n    el.classList.remove(className)\n    if(el.classList.length === 0){ el.removeAttribute(\"class\") }\n  },\n\n  all(node, query, callback){\n    if(!node){ return [] }\n    let array = Array.from(node.querySelectorAll(query))\n    return callback ? array.forEach(callback) : array\n  },\n\n  childNodeLength(html){\n    let template = document.createElement(\"template\")\n    template.innerHTML = html\n    return template.content.childElementCount\n  },\n\n  isUploadInput(el){ return el.type === \"file\" && el.getAttribute(PHX_UPLOAD_REF) !== null },\n\n  isAutoUpload(inputEl){ return inputEl.hasAttribute(\"data-phx-auto-upload\") },\n\n  findUploadInputs(node){\n    const formId = node.id\n    const inputsOutsideForm = this.all(document, `input[type=\"file\"][${PHX_UPLOAD_REF}][form=\"${formId}\"]`)\n    return this.all(node, `input[type=\"file\"][${PHX_UPLOAD_REF}]`).concat(inputsOutsideForm)\n  },\n\n  findComponentNodeList(node, cid){\n    return this.filterWithinSameLiveView(this.all(node, `[${PHX_COMPONENT}=\"${cid}\"]`), node)\n  },\n\n  isPhxDestroyed(node){\n    return node.id && DOM.private(node, \"destroyed\") ? true : false\n  },\n\n  wantsNewTab(e){\n    let wantsNewTab = e.ctrlKey || e.shiftKey || e.metaKey || (e.button && e.button === 1)\n    let isDownload = (e.target instanceof HTMLAnchorElement && e.target.hasAttribute(\"download\"))\n    let isTargetBlank = e.target.hasAttribute(\"target\") && e.target.getAttribute(\"target\").toLowerCase() === \"_blank\"\n    let isTargetNamedTab = e.target.hasAttribute(\"target\") && !e.target.getAttribute(\"target\").startsWith(\"_\")\n    return wantsNewTab || isTargetBlank || isDownload || isTargetNamedTab\n  },\n\n  isUnloadableFormSubmit(e){\n    // Ignore form submissions intended to close a native <dialog> element\n    // https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dialog#usage_notes\n    let isDialogSubmit = (e.target && e.target.getAttribute(\"method\") === \"dialog\") ||\n      (e.submitter && e.submitter.getAttribute(\"formmethod\") === \"dialog\")\n\n    if(isDialogSubmit){\n      return false\n    } else {\n      return !e.defaultPrevented && !this.wantsNewTab(e)\n    }\n  },\n\n  isNewPageClick(e, currentLocation){\n    let href = e.target instanceof HTMLAnchorElement ? e.target.getAttribute(\"href\") : null\n    let url\n\n    if(e.defaultPrevented || href === null || this.wantsNewTab(e)){ return false }\n    if(href.startsWith(\"mailto:\") || href.startsWith(\"tel:\")){ return false }\n    if(e.target.isContentEditable){ return false }\n\n    try {\n      url = new URL(href)\n    } catch {\n      try {\n        url = new URL(href, currentLocation)\n      } catch {\n        // bad URL, fallback to let browser try it as external\n        return true\n      }\n    }\n\n    if(url.host === currentLocation.host && url.protocol === currentLocation.protocol){\n      if(url.pathname === currentLocation.pathname && url.search === currentLocation.search){\n        return url.hash === \"\" && !url.href.endsWith(\"#\")\n      }\n    }\n    return url.protocol.startsWith(\"http\")\n  },\n\n  markPhxChildDestroyed(el){\n    if(this.isPhxChild(el)){ el.setAttribute(PHX_SESSION, \"\") }\n    this.putPrivate(el, \"destroyed\", true)\n  },\n\n  findPhxChildrenInFragment(html, parentId){\n    let template = document.createElement(\"template\")\n    template.innerHTML = html\n    return this.findPhxChildren(template.content, parentId)\n  },\n\n  isIgnored(el, phxUpdate){\n    return (el.getAttribute(phxUpdate) || el.getAttribute(\"data-phx-update\")) === \"ignore\"\n  },\n\n  isPhxUpdate(el, phxUpdate, updateTypes){\n    return el.getAttribute && updateTypes.indexOf(el.getAttribute(phxUpdate)) >= 0\n  },\n\n  findPhxSticky(el){ return this.all(el, `[${PHX_STICKY}]`) },\n\n  findPhxChildren(el, parentId){\n    return this.all(el, `${PHX_VIEW_SELECTOR}[${PHX_PARENT_ID}=\"${parentId}\"]`)\n  },\n\n  findExistingParentCIDs(node, cids){\n    // we only want to find parents that exist on the page\n    // if a cid is not on the page, the only way it can be added back to the page\n    // is if a parent adds it back, therefore if a cid does not exist on the page,\n    // we should not try to render it by itself (because it would be rendered twice,\n    // one by the parent, and a second time by itself)\n    let parentCids = new Set()\n    let childrenCids = new Set()\n\n    cids.forEach(cid => {\n      this.filterWithinSameLiveView(this.all(node, `[${PHX_COMPONENT}=\"${cid}\"]`), node).forEach(parent => {\n        parentCids.add(cid)\n        this.all(parent, `[${PHX_COMPONENT}]`)\n          .map(el => parseInt(el.getAttribute(PHX_COMPONENT)))\n          .forEach(childCID => childrenCids.add(childCID))\n      })\n    })\n\n    childrenCids.forEach(childCid => parentCids.delete(childCid))\n\n    return parentCids\n  },\n\n  filterWithinSameLiveView(nodes, parent){\n    if(parent.querySelector(PHX_VIEW_SELECTOR)){\n      return nodes.filter(el => this.withinSameLiveView(el, parent))\n    } else {\n      return nodes\n    }\n  },\n\n  withinSameLiveView(node, parent){\n    while(node = node.parentNode){\n      if(node.isSameNode(parent)){ return true }\n      if(node.getAttribute(PHX_SESSION) !== null){ return false }\n    }\n  },\n\n  private(el, key){ return el[PHX_PRIVATE] && el[PHX_PRIVATE][key] },\n\n  deletePrivate(el, key){ el[PHX_PRIVATE] && delete (el[PHX_PRIVATE][key]) },\n\n  putPrivate(el, key, value){\n    if(!el[PHX_PRIVATE]){ el[PHX_PRIVATE] = {} }\n    el[PHX_PRIVATE][key] = value\n  },\n\n  updatePrivate(el, key, defaultVal, updateFunc){\n    let existing = this.private(el, key)\n    if(existing === undefined){\n      this.putPrivate(el, key, updateFunc(defaultVal))\n    } else {\n      this.putPrivate(el, key, updateFunc(existing))\n    }\n  },\n\n  syncPendingAttrs(fromEl, toEl){\n    if(!fromEl.hasAttribute(PHX_REF_SRC)){ return }\n    PHX_EVENT_CLASSES.forEach(className => {\n      fromEl.classList.contains(className) && toEl.classList.add(className)\n    })\n    PHX_PENDING_ATTRS.filter(attr => fromEl.hasAttribute(attr)).forEach(attr => {\n      toEl.setAttribute(attr, fromEl.getAttribute(attr))\n    })\n  },\n\n  copyPrivates(target, source){\n    if(source[PHX_PRIVATE]){\n      target[PHX_PRIVATE] = source[PHX_PRIVATE]\n    }\n  },\n\n  putTitle(str){\n    let titleEl = document.querySelector(\"title\")\n    if(titleEl){\n      let {prefix, suffix, default: defaultTitle} = titleEl.dataset\n      let isEmpty = typeof(str) !== \"string\" || str.trim() === \"\"\n      if(isEmpty && typeof(defaultTitle) !== \"string\"){ return }\n\n      let inner = isEmpty ? defaultTitle : str\n      document.title = `${prefix || \"\"}${inner || \"\"}${suffix || \"\"}`\n    } else {\n      document.title = str\n    }\n  },\n\n  debounce(el, event, phxDebounce, defaultDebounce, phxThrottle, defaultThrottle, asyncFilter, callback){\n    let debounce = el.getAttribute(phxDebounce)\n    let throttle = el.getAttribute(phxThrottle)\n\n    if(debounce === \"\"){ debounce = defaultDebounce }\n    if(throttle === \"\"){ throttle = defaultThrottle }\n    let value = debounce || throttle\n    switch(value){\n      case null: return callback()\n\n      case \"blur\":\n        if(this.once(el, \"debounce-blur\")){\n          el.addEventListener(\"blur\", () => {\n            if(asyncFilter()){ callback() }\n          })\n        }\n        return\n\n      default:\n        let timeout = parseInt(value)\n        let trigger = () => throttle ? this.deletePrivate(el, THROTTLED) : callback()\n        let currentCycle = this.incCycle(el, DEBOUNCE_TRIGGER, trigger)\n        if(isNaN(timeout)){ return logError(`invalid throttle/debounce value: ${value}`) }\n        if(throttle){\n          let newKeyDown = false\n          if(event.type === \"keydown\"){\n            let prevKey = this.private(el, DEBOUNCE_PREV_KEY)\n            this.putPrivate(el, DEBOUNCE_PREV_KEY, event.key)\n            newKeyDown = prevKey !== event.key\n          }\n\n          if(!newKeyDown && this.private(el, THROTTLED)){\n            return false\n          } else {\n            callback()\n            const t = setTimeout(() => {\n              if(asyncFilter()){ this.triggerCycle(el, DEBOUNCE_TRIGGER) }\n            }, timeout)\n            this.putPrivate(el, THROTTLED, t)\n          }\n        } else {\n          setTimeout(() => {\n            if(asyncFilter()){ this.triggerCycle(el, DEBOUNCE_TRIGGER, currentCycle) }\n          }, timeout)\n        }\n\n        let form = el.form\n        if(form && this.once(form, \"bind-debounce\")){\n          form.addEventListener(\"submit\", () => {\n            Array.from((new FormData(form)).entries(), ([name]) => {\n              let input = form.querySelector(`[name=\"${name}\"]`)\n              this.incCycle(input, DEBOUNCE_TRIGGER)\n              this.deletePrivate(input, THROTTLED)\n            })\n          })\n        }\n        if(this.once(el, \"bind-debounce\")){\n          el.addEventListener(\"blur\", () => {\n            // because we trigger the callback here,\n            // we also clear the throttle timeout to prevent the callback\n            // from being called again after the timeout fires\n            clearTimeout(this.private(el, THROTTLED))\n            this.triggerCycle(el, DEBOUNCE_TRIGGER)\n          })\n        }\n    }\n  },\n\n  triggerCycle(el, key, currentCycle){\n    let [cycle, trigger] = this.private(el, key)\n    if(!currentCycle){ currentCycle = cycle }\n    if(currentCycle === cycle){\n      this.incCycle(el, key)\n      trigger()\n    }\n  },\n\n  once(el, key){\n    if(this.private(el, key) === true){ return false }\n    this.putPrivate(el, key, true)\n    return true\n  },\n\n  incCycle(el, key, trigger = function (){ }){\n    let [currentCycle] = this.private(el, key) || [0, trigger]\n    currentCycle++\n    this.putPrivate(el, key, [currentCycle, trigger])\n    return currentCycle\n  },\n\n  // maintains or adds privately used hook information\n  // fromEl and toEl can be the same element in the case of a newly added node\n  // fromEl and toEl can be any HTML node type, so we need to check if it's an element node\n  maintainPrivateHooks(fromEl, toEl, phxViewportTop, phxViewportBottom){\n    // maintain the hooks created with createHook\n    if(fromEl.hasAttribute && fromEl.hasAttribute(\"data-phx-hook\") && !toEl.hasAttribute(\"data-phx-hook\")){\n      toEl.setAttribute(\"data-phx-hook\", fromEl.getAttribute(\"data-phx-hook\"))\n    }\n    // add hooks to elements with viewport attributes\n    if(toEl.hasAttribute && (toEl.hasAttribute(phxViewportTop) || toEl.hasAttribute(phxViewportBottom))){\n      toEl.setAttribute(\"data-phx-hook\", \"Phoenix.InfiniteScroll\")\n    }\n  },\n\n  putCustomElHook(el, hook){\n    if(el.isConnected){\n      el.setAttribute(\"data-phx-hook\", \"\")\n    } else {\n      console.error(`\n        hook attached to non-connected DOM element\n        ensure you are calling createHook within your connectedCallback. ${el.outerHTML}\n      `)\n    }\n    this.putPrivate(el, \"custom-el-hook\", hook)\n  },\n\n  getCustomElHook(el){ return this.private(el, \"custom-el-hook\") },\n\n  isUsedInput(el){\n    return (el.nodeType === Node.ELEMENT_NODE &&\n      (this.private(el, PHX_HAS_FOCUSED) || this.private(el, PHX_HAS_SUBMITTED)))\n  },\n\n  resetForm(form){\n    Array.from(form.elements).forEach(input => {\n      this.deletePrivate(input, PHX_HAS_FOCUSED)\n      this.deletePrivate(input, PHX_HAS_SUBMITTED)\n    })\n  },\n\n  isPhxChild(node){\n    return node.getAttribute && node.getAttribute(PHX_PARENT_ID)\n  },\n\n  isPhxSticky(node){\n    return node.getAttribute && node.getAttribute(PHX_STICKY) !== null\n  },\n\n  isChildOfAny(el, parents){\n    return !!parents.find(parent => parent.contains(el))\n  },\n\n  firstPhxChild(el){\n    return this.isPhxChild(el) ? el : this.all(el, `[${PHX_PARENT_ID}]`)[0]\n  },\n\n  dispatchEvent(target, name, opts = {}){\n    let defaultBubble = true\n    let isUploadTarget = target.nodeName === \"INPUT\" && target.type === \"file\"\n    if(isUploadTarget && name === \"click\"){\n      defaultBubble = false\n    }\n    let bubbles = opts.bubbles === undefined ? defaultBubble : !!opts.bubbles\n    let eventOpts = {bubbles: bubbles, cancelable: true, detail: opts.detail || {}}\n    let event = name === \"click\" ? new MouseEvent(\"click\", eventOpts) : new CustomEvent(name, eventOpts)\n    target.dispatchEvent(event)\n  },\n\n  cloneNode(node, html){\n    if(typeof (html) === \"undefined\"){\n      return node.cloneNode(true)\n    } else {\n      let cloned = node.cloneNode(false)\n      cloned.innerHTML = html\n      return cloned\n    }\n  },\n\n  // merge attributes from source to target\n  // if an element is ignored, we only merge data attributes\n  // including removing data attributes that are no longer in the source\n  mergeAttrs(target, source, opts = {}){\n    let exclude = new Set(opts.exclude || [])\n    let isIgnored = opts.isIgnored\n    let sourceAttrs = source.attributes\n    for(let i = sourceAttrs.length - 1; i >= 0; i--){\n      let name = sourceAttrs[i].name\n      if(!exclude.has(name)){\n        const sourceValue = source.getAttribute(name)\n        if(target.getAttribute(name) !== sourceValue && (!isIgnored || (isIgnored && name.startsWith(\"data-\")))){\n          target.setAttribute(name, sourceValue)\n        }\n      } else {\n        // We exclude the value from being merged on focused inputs, because the\n        // user's input should always win.\n        // We can still assign it as long as the value property is the same, though.\n        // This prevents a situation where the updated hook is not being triggered\n        // when an input is back in its \"original state\", because the attribute\n        // was never changed, see:\n        // https://github.com/phoenixframework/phoenix_live_view/issues/2163\n        if(name === \"value\" && target.value === source.value){\n          // actually set the value attribute to sync it with the value property\n          target.setAttribute(\"value\", source.getAttribute(name))\n        }\n      }\n    }\n\n    let targetAttrs = target.attributes\n    for(let i = targetAttrs.length - 1; i >= 0; i--){\n      let name = targetAttrs[i].name\n      if(isIgnored){\n        if(name.startsWith(\"data-\") && !source.hasAttribute(name) && !PHX_PENDING_ATTRS.includes(name)){ target.removeAttribute(name) }\n      } else {\n        if(!source.hasAttribute(name)){ target.removeAttribute(name) }\n      }\n    }\n  },\n\n  mergeFocusedInput(target, source){\n    // skip selects because FF will reset highlighted index for any setAttribute\n    if(!(target instanceof HTMLSelectElement)){ DOM.mergeAttrs(target, source, {exclude: [\"value\"]}) }\n\n    if(source.readOnly){\n      target.setAttribute(\"readonly\", true)\n    } else {\n      target.removeAttribute(\"readonly\")\n    }\n  },\n\n  hasSelectionRange(el){\n    return el.setSelectionRange && (el.type === \"text\" || el.type === \"textarea\")\n  },\n\n  restoreFocus(focused, selectionStart, selectionEnd){\n    if(focused instanceof HTMLSelectElement){ focused.focus() }\n    if(!DOM.isTextualInput(focused)){ return }\n\n    let wasFocused = focused.matches(\":focus\")\n    if(!wasFocused){ focused.focus() }\n    if(this.hasSelectionRange(focused)){\n      focused.setSelectionRange(selectionStart, selectionEnd)\n    }\n  },\n\n  isFormInput(el){ return /^(?:input|select|textarea)$/i.test(el.tagName) && el.type !== \"button\" },\n\n  syncAttrsToProps(el){\n    if(el instanceof HTMLInputElement && CHECKABLE_INPUTS.indexOf(el.type.toLocaleLowerCase()) >= 0){\n      el.checked = el.getAttribute(\"checked\") !== null\n    }\n  },\n\n  isTextualInput(el){ return FOCUSABLE_INPUTS.indexOf(el.type) >= 0 },\n\n  isNowTriggerFormExternal(el, phxTriggerExternal){\n    return el.getAttribute && el.getAttribute(phxTriggerExternal) !== null\n  },\n\n  cleanChildNodes(container, phxUpdate){\n    if(DOM.isPhxUpdate(container, phxUpdate, [\"append\", \"prepend\"])){\n      let toRemove = []\n      container.childNodes.forEach(childNode => {\n        if(!childNode.id){\n          // Skip warning if it's an empty text node (e.g. a new-line)\n          let isEmptyTextNode = childNode.nodeType === Node.TEXT_NODE && childNode.nodeValue.trim() === \"\"\n          if(!isEmptyTextNode && childNode.nodeType !== Node.COMMENT_NODE){\n            logError(\"only HTML element tags with an id are allowed inside containers with phx-update.\\n\\n\" +\n              `removing illegal node: \"${(childNode.outerHTML || childNode.nodeValue).trim()}\"\\n\\n`)\n          }\n          toRemove.push(childNode)\n        }\n      })\n      toRemove.forEach(childNode => childNode.remove())\n    }\n  },\n\n  replaceRootContainer(container, tagName, attrs){\n    let retainedAttrs = new Set([\"id\", PHX_SESSION, PHX_STATIC, PHX_MAIN, PHX_ROOT_ID])\n    if(container.tagName.toLowerCase() === tagName.toLowerCase()){\n      Array.from(container.attributes)\n        .filter(attr => !retainedAttrs.has(attr.name.toLowerCase()))\n        .forEach(attr => container.removeAttribute(attr.name))\n\n      Object.keys(attrs)\n        .filter(name => !retainedAttrs.has(name.toLowerCase()))\n        .forEach(attr => container.setAttribute(attr, attrs[attr]))\n\n      return container\n\n    } else {\n      let newContainer = document.createElement(tagName)\n      Object.keys(attrs).forEach(attr => newContainer.setAttribute(attr, attrs[attr]))\n      retainedAttrs.forEach(attr => newContainer.setAttribute(attr, container.getAttribute(attr)))\n      newContainer.innerHTML = container.innerHTML\n      container.replaceWith(newContainer)\n      return newContainer\n    }\n  },\n\n  getSticky(el, name, defaultVal){\n    let op = (DOM.private(el, \"sticky\") || []).find(([existingName,]) => name === existingName)\n    if(op){\n      let [_name, _op, stashedResult] = op\n      return stashedResult\n    } else {\n      return typeof(defaultVal) === \"function\" ? defaultVal() : defaultVal\n    }\n  },\n\n  deleteSticky(el, name){\n    this.updatePrivate(el, \"sticky\", [], ops => {\n      return ops.filter(([existingName, _]) => existingName !== name)\n    })\n  },\n\n  putSticky(el, name, op){\n    let stashedResult = op(el)\n    this.updatePrivate(el, \"sticky\", [], ops => {\n      let existingIndex = ops.findIndex(([existingName,]) => name === existingName)\n      if(existingIndex >= 0){\n        ops[existingIndex] = [name, op, stashedResult]\n      } else {\n        ops.push([name, op, stashedResult])\n      }\n      return ops\n    })\n  },\n\n  applyStickyOperations(el){\n    let ops = DOM.private(el, \"sticky\")\n    if(!ops){ return }\n\n    ops.forEach(([name, op, _stashed]) => this.putSticky(el, name, op))\n  }\n}\n\nexport default DOM\n", "import {\n  PHX_ACTIVE_ENTRY_REFS,\n  PHX_LIVE_FILE_UPDATED,\n  PHX_PREFLIGHTED_REFS\n} from \"./constants\"\n\nimport {\n  channelUploader,\n  logError\n} from \"./utils\"\n\nimport LiveUploader from \"./live_uploader\"\n\nexport default class UploadEntry {\n  static isActive(fileEl, file){\n    let isNew = file._phxRef === undefined\n    let activeRefs = fileEl.getAttribute(PHX_ACTIVE_ENTRY_REFS).split(\",\")\n    let isActive = activeRefs.indexOf(LiveUploader.genFileRef(file)) >= 0\n    return file.size > 0 && (isNew || isActive)\n  }\n\n  static isPreflighted(fileEl, file){\n    let preflightedRefs = fileEl.getAttribute(PHX_PREFLIGHTED_REFS).split(\",\")\n    let isPreflighted = preflightedRefs.indexOf(LiveUploader.genFileRef(file)) >= 0\n    return isPreflighted && this.isActive(fileEl, file)\n  }\n\n  static isPreflightInProgress(file){\n    return file._preflightInProgress === true\n  }\n\n  static markPreflightInProgress(file){\n    file._preflightInProgress = true\n  }\n\n  constructor(fileEl, file, view, autoUpload){\n    this.ref = LiveUploader.genFileRef(file)\n    this.fileEl = fileEl\n    this.file = file\n    this.view = view\n    this.meta = null\n    this._isCancelled = false\n    this._isDone = false\n    this._progress = 0\n    this._lastProgressSent = -1\n    this._onDone = function(){ }\n    this._onElUpdated = this.onElUpdated.bind(this)\n    this.fileEl.addEventListener(PHX_LIVE_FILE_UPDATED, this._onElUpdated)\n    this.autoUpload = autoUpload\n  }\n\n  metadata(){ return this.meta }\n\n  progress(progress){\n    this._progress = Math.floor(progress)\n    if(this._progress > this._lastProgressSent){\n      if(this._progress >= 100){\n        this._progress = 100\n        this._lastProgressSent = 100\n        this._isDone = true\n        this.view.pushFileProgress(this.fileEl, this.ref, 100, () => {\n          LiveUploader.untrackFile(this.fileEl, this.file)\n          this._onDone()\n        })\n      } else {\n        this._lastProgressSent = this._progress\n        this.view.pushFileProgress(this.fileEl, this.ref, this._progress)\n      }\n    }\n  }\n\n  isCancelled(){ return this._isCancelled }\n\n  cancel(){\n    this.file._preflightInProgress = false\n    this._isCancelled = true\n    this._isDone = true\n    this._onDone()\n  }\n\n  isDone(){ return this._isDone }\n\n  error(reason = \"failed\"){\n    this.fileEl.removeEventListener(PHX_LIVE_FILE_UPDATED, this._onElUpdated)\n    this.view.pushFileProgress(this.fileEl, this.ref, {error: reason})\n    if(!this.isAutoUpload()){ LiveUploader.clearFiles(this.fileEl) }\n  }\n\n  isAutoUpload(){ return this.autoUpload }\n\n  //private\n\n  onDone(callback){\n    this._onDone = () => {\n      this.fileEl.removeEventListener(PHX_LIVE_FILE_UPDATED, this._onElUpdated)\n      callback()\n    }\n  }\n\n  onElUpdated(){\n    let activeRefs = this.fileEl.getAttribute(PHX_ACTIVE_ENTRY_REFS).split(\",\")\n    if(activeRefs.indexOf(this.ref) === -1){\n      LiveUploader.untrackFile(this.fileEl, this.file)\n      this.cancel()\n    }\n  }\n\n  toPreflightPayload(){\n    return {\n      last_modified: this.file.lastModified,\n      name: this.file.name,\n      relative_path: this.file.webkitRelativePath,\n      size: this.file.size,\n      type: this.file.type,\n      ref: this.ref,\n      meta: typeof(this.file.meta) === \"function\" ? this.file.meta() : undefined\n    }\n  }\n\n  uploader(uploaders){\n    if(this.meta.uploader){\n      let callback = uploaders[this.meta.uploader] || logError(`no uploader configured for ${this.meta.uploader}`)\n      return {name: this.meta.uploader, callback: callback}\n    } else {\n      return {name: \"channel\", callback: channelUploader}\n    }\n  }\n\n  zipPostFlight(resp){\n    this.meta = resp.entries[this.ref]\n    if(!this.meta){ logError(`no preflight upload response returned with ref ${this.ref}`, {input: this.fileEl, response: resp}) }\n  }\n}\n", "import {\n  PHX_DONE_REFS,\n  PHX_PREFLIGHTED_REFS,\n  PHX_UPLOAD_REF\n} from \"./constants\"\n\nimport {\n} from \"./utils\"\n\nimport DOM from \"./dom\"\nimport UploadEntry from \"./upload_entry\"\n\nlet liveUploaderFileRef = 0\n\nexport default class LiveUploader {\n  static genFileRef(file){\n    let ref = file._phxRef\n    if(ref !== undefined){\n      return ref\n    } else {\n      file._phxRef = (liveUploaderFileRef++).toString()\n      return file._phxRef\n    }\n  }\n\n  static getEntryDataURL(inputEl, ref, callback){\n    let file = this.activeFiles(inputEl).find(file => this.genFileRef(file) === ref)\n    callback(URL.createObjectURL(file))\n  }\n\n  static hasUploadsInProgress(formEl){\n    let active = 0\n    DOM.findUploadInputs(formEl).forEach(input => {\n      if(input.getAttribute(PHX_PREFLIGHTED_REFS) !== input.getAttribute(PHX_DONE_REFS)){\n        active++\n      }\n    })\n    return active > 0\n  }\n\n  static serializeUploads(inputEl){\n    let files = this.activeFiles(inputEl)\n    let fileData = {}\n    files.forEach(file => {\n      let entry = {path: inputEl.name}\n      let uploadRef = inputEl.getAttribute(PHX_UPLOAD_REF)\n      fileData[uploadRef] = fileData[uploadRef] || []\n      entry.ref = this.genFileRef(file)\n      entry.last_modified = file.lastModified\n      entry.name = file.name || entry.ref\n      entry.relative_path = file.webkitRelativePath\n      entry.type = file.type\n      entry.size = file.size\n      if(typeof(file.meta) === \"function\"){ entry.meta = file.meta() }\n      fileData[uploadRef].push(entry)\n    })\n    return fileData\n  }\n\n  static clearFiles(inputEl){\n    inputEl.value = null\n    inputEl.removeAttribute(PHX_UPLOAD_REF)\n    DOM.putPrivate(inputEl, \"files\", [])\n  }\n\n  static untrackFile(inputEl, file){\n    DOM.putPrivate(inputEl, \"files\", DOM.private(inputEl, \"files\").filter(f => !Object.is(f, file)))\n  }\n\n  static trackFiles(inputEl, files, dataTransfer){\n    if(inputEl.getAttribute(\"multiple\") !== null){\n      let newFiles = files.filter(file => !this.activeFiles(inputEl).find(f => Object.is(f, file)))\n      DOM.updatePrivate(inputEl, \"files\", [], (existing) => existing.concat(newFiles))\n      inputEl.value = null\n    } else {\n      // Reset inputEl files to align output with programmatic changes (i.e. drag and drop)\n      if(dataTransfer && dataTransfer.files.length > 0){ inputEl.files = dataTransfer.files }\n      DOM.putPrivate(inputEl, \"files\", files)\n    }\n  }\n\n  static activeFileInputs(formEl){\n    let fileInputs = DOM.findUploadInputs(formEl)\n    return Array.from(fileInputs).filter(el => el.files && this.activeFiles(el).length > 0)\n  }\n\n  static activeFiles(input){\n    return (DOM.private(input, \"files\") || []).filter(f => UploadEntry.isActive(input, f))\n  }\n\n  static inputsAwaitingPreflight(formEl){\n    let fileInputs = DOM.findUploadInputs(formEl)\n    return Array.from(fileInputs).filter(input => this.filesAwaitingPreflight(input).length > 0)\n  }\n\n  static filesAwaitingPreflight(input){\n    return this.activeFiles(input).filter(f => !UploadEntry.isPreflighted(input, f) && !UploadEntry.isPreflightInProgress(f))\n  }\n\n  static markPreflightInProgress(entries){\n    entries.forEach(entry => UploadEntry.markPreflightInProgress(entry.file))\n  }\n\n  constructor(inputEl, view, onComplete){\n    this.autoUpload = DOM.isAutoUpload(inputEl)\n    this.view = view\n    this.onComplete = onComplete\n    this._entries =\n      Array.from(LiveUploader.filesAwaitingPreflight(inputEl) || [])\n        .map(file => new UploadEntry(inputEl, file, view, this.autoUpload))\n\n    // prevent sending duplicate preflight requests\n    LiveUploader.markPreflightInProgress(this._entries)\n\n    this.numEntriesInProgress = this._entries.length\n  }\n\n  isAutoUpload(){ return this.autoUpload }\n\n  entries(){ return this._entries }\n\n  initAdapterUpload(resp, onError, liveSocket){\n    this._entries =\n      this._entries.map(entry => {\n        if(entry.isCancelled()){\n          this.numEntriesInProgress--\n          if(this.numEntriesInProgress === 0){ this.onComplete() }\n        } else {\n          entry.zipPostFlight(resp)\n          entry.onDone(() => {\n            this.numEntriesInProgress--\n            if(this.numEntriesInProgress === 0){ this.onComplete() }\n          })\n        }\n        return entry\n      })\n\n    let groupedEntries = this._entries.reduce((acc, entry) => {\n      if(!entry.meta){ return acc }\n      let {name, callback} = entry.uploader(liveSocket.uploaders)\n      acc[name] = acc[name] || {callback: callback, entries: []}\n      acc[name].entries.push(entry)\n      return acc\n    }, {})\n\n    for(let name in groupedEntries){\n      let {callback, entries} = groupedEntries[name]\n      callback(entries, onError, resp, liveSocket)\n    }\n  }\n}\n", "let ARIA = {\n  anyOf(instance, classes){ return classes.find(name => instance instanceof name) },\n\n  isFocusable(el, interactiveOnly){\n    return (\n      (el instanceof HTMLAnchorElement && el.rel !== \"ignore\") ||\n      (el instanceof HTMLAreaElement && el.href !== undefined) ||\n      (!el.disabled && (this.anyOf(el, [HTMLInputElement, HTMLSelectElement, HTMLTextAreaElement, HTMLButtonElement]))) ||\n      (el instanceof HTMLIFrameElement) ||\n      (el.tabIndex > 0 || (!interactiveOnly && el.getAttribute(\"tabindex\") !== null && el.getAttribute(\"aria-hidden\") !== \"true\"))\n    )\n  },\n\n  attemptFocus(el, interactiveOnly){\n    if(this.isFocusable(el, interactiveOnly)){ try { el.focus() } catch {} }\n    return !!document.activeElement && document.activeElement.isSameNode(el)\n  },\n\n  focusFirstInteractive(el){\n    let child = el.firstElementChild\n    while(child){\n      if(this.attemptFocus(child, true) || this.focusFirstInteractive(child, true)){\n        return true\n      }\n      child = child.nextElementSibling\n    }\n  },\n\n  focusFirst(el){\n    let child = el.firstElementChild\n    while(child){\n      if(this.attemptFocus(child) || this.focusFirst(child)){\n        return true\n      }\n      child = child.nextElementSibling\n    }\n  },\n\n  focusLast(el){\n    let child = el.lastElementChild\n    while(child){\n      if(this.attemptFocus(child) || this.focusLast(child)){\n        return true\n      }\n      child = child.previousElementSibling\n    }\n  }\n}\nexport default ARIA\n", "import {\n  PHX_ACTIVE_ENTRY_REFS,\n  PHX_LIVE_FILE_UPDATED,\n  PHX_PREFLIGHTED_REFS,\n  PHX_UPLOAD_REF\n} from \"./constants\"\n\nimport LiveUploader from \"./live_uploader\"\nimport ARIA from \"./aria\"\n\nlet Hooks = {\n  LiveFileUpload: {\n    activeRefs(){ return this.el.getAttribute(PHX_ACTIVE_ENTRY_REFS) },\n\n    preflightedRefs(){ return this.el.getAttribute(PHX_PREFLIGHTED_REFS) },\n\n    mounted(){ this.preflightedWas = this.preflightedRefs() },\n\n    updated(){\n      let newPreflights = this.preflightedRefs()\n      if(this.preflightedWas !== newPreflights){\n        this.preflightedWas = newPreflights\n        if(newPreflights === \"\"){\n          this.__view().cancelSubmit(this.el.form)\n        }\n      }\n\n      if(this.activeRefs() === \"\"){ this.el.value = null }\n      this.el.dispatchEvent(new CustomEvent(PHX_LIVE_FILE_UPDATED))\n    }\n  },\n\n  LiveImgPreview: {\n    mounted(){\n      this.ref = this.el.getAttribute(\"data-phx-entry-ref\")\n      this.inputEl = document.getElementById(this.el.getAttribute(PHX_UPLOAD_REF))\n      LiveUploader.getEntryDataURL(this.inputEl, this.ref, url => {\n        this.url = url\n        this.el.src = url\n      })\n    },\n    destroyed(){\n      URL.revokeObjectURL(this.url)\n    }\n  },\n  FocusWrap: {\n    mounted(){\n      this.focusStart = this.el.firstElementChild\n      this.focusEnd = this.el.lastElementChild\n      this.focusStart.addEventListener(\"focus\", () => ARIA.focusLast(this.el))\n      this.focusEnd.addEventListener(\"focus\", () => ARIA.focusFirst(this.el))\n      this.el.addEventListener(\"phx:show-end\", () => this.el.focus())\n      if(window.getComputedStyle(this.el).display !== \"none\"){\n        ARIA.focusFirst(this.el)\n      }\n    }\n  }\n}\n\nlet findScrollContainer = (el) => {\n  // the scroll event won't be fired on the html/body element even if overflow is set\n  // therefore we return null to instead listen for scroll events on document\n  if([\"HTML\", \"BODY\"].indexOf(el.nodeName.toUpperCase()) >= 0) return null\n  if([\"scroll\", \"auto\"].indexOf(getComputedStyle(el).overflowY) >= 0) return el\n  return findScrollContainer(el.parentElement)\n}\n\nlet scrollTop = (scrollContainer) => {\n  if(scrollContainer){\n    return scrollContainer.scrollTop\n  } else {\n    return document.documentElement.scrollTop || document.body.scrollTop\n  }\n}\n\nlet bottom = (scrollContainer) => {\n  if(scrollContainer){\n    return scrollContainer.getBoundingClientRect().bottom\n  } else {\n    // when we have no container, the whole page scrolls,\n    // therefore the bottom coordinate is the viewport height\n    return window.innerHeight || document.documentElement.clientHeight\n  }\n}\n\nlet top = (scrollContainer) => {\n  if(scrollContainer){\n    return scrollContainer.getBoundingClientRect().top\n  } else {\n    // when we have no container the whole page scrolls,\n    // therefore the top coordinate is 0\n    return 0\n  }\n}\n\nlet isAtViewportTop = (el, scrollContainer) => {\n  let rect = el.getBoundingClientRect()\n  return Math.ceil(rect.top) >= top(scrollContainer) && Math.ceil(rect.left) >= 0 && Math.floor(rect.top) <= bottom(scrollContainer)\n}\n\nlet isAtViewportBottom = (el, scrollContainer) => {\n  let rect = el.getBoundingClientRect()\n  return Math.ceil(rect.bottom) >= top(scrollContainer) && Math.ceil(rect.left) >= 0 && Math.floor(rect.bottom) <= bottom(scrollContainer)\n}\n\nlet isWithinViewport = (el, scrollContainer) => {\n  let rect = el.getBoundingClientRect()\n  return Math.ceil(rect.top) >= top(scrollContainer) && Math.ceil(rect.left) >= 0 && Math.floor(rect.top) <= bottom(scrollContainer)\n}\n\nHooks.InfiniteScroll = {\n  mounted(){\n    this.scrollContainer = findScrollContainer(this.el)\n    let scrollBefore = scrollTop(this.scrollContainer)\n    let topOverran = false\n    let throttleInterval = 500\n    let pendingOp = null\n\n    let onTopOverrun = this.throttle(throttleInterval, (topEvent, firstChild) => {\n      pendingOp = () => true\n      this.liveSocket.execJSHookPush(this.el, topEvent, {id: firstChild.id, _overran: true}, () => {\n        pendingOp = null\n      })\n    })\n\n    let onFirstChildAtTop = this.throttle(throttleInterval, (topEvent, firstChild) => {\n      pendingOp = () => firstChild.scrollIntoView({block: \"start\"})\n      this.liveSocket.execJSHookPush(this.el, topEvent, {id: firstChild.id}, () => {\n        pendingOp = null\n        // make sure that the DOM is patched by waiting for the next tick\n        window.requestAnimationFrame(() => {\n          if(!isWithinViewport(firstChild, this.scrollContainer)){\n            firstChild.scrollIntoView({block: \"start\"})\n          }\n        })\n      })\n    })\n\n    let onLastChildAtBottom = this.throttle(throttleInterval, (bottomEvent, lastChild) => {\n      pendingOp = () => lastChild.scrollIntoView({block: \"end\"})\n      this.liveSocket.execJSHookPush(this.el, bottomEvent, {id: lastChild.id}, () => {\n        pendingOp = null\n        // make sure that the DOM is patched by waiting for the next tick\n        window.requestAnimationFrame(() => {\n          if(!isWithinViewport(lastChild, this.scrollContainer)){\n            lastChild.scrollIntoView({block: \"end\"})\n          }\n        })\n      })\n    })\n\n    this.onScroll = (_e) => {\n      let scrollNow = scrollTop(this.scrollContainer)\n\n      if(pendingOp){\n        scrollBefore = scrollNow\n        return pendingOp()\n      }\n      let rect = this.el.getBoundingClientRect()\n      let topEvent = this.el.getAttribute(this.liveSocket.binding(\"viewport-top\"))\n      let bottomEvent = this.el.getAttribute(this.liveSocket.binding(\"viewport-bottom\"))\n      let lastChild = this.el.lastElementChild\n      let firstChild = this.el.firstElementChild\n      let isScrollingUp = scrollNow < scrollBefore\n      let isScrollingDown = scrollNow > scrollBefore\n\n      // el overran while scrolling up\n      if(isScrollingUp && topEvent && !topOverran && rect.top >= 0){\n        topOverran = true\n        onTopOverrun(topEvent, firstChild)\n      } else if(isScrollingDown && topOverran && rect.top <= 0){\n        topOverran = false\n      }\n\n      if(topEvent && isScrollingUp && isAtViewportTop(firstChild, this.scrollContainer)){\n        onFirstChildAtTop(topEvent, firstChild)\n      } else if(bottomEvent && isScrollingDown && isAtViewportBottom(lastChild, this.scrollContainer)){\n        onLastChildAtBottom(bottomEvent, lastChild)\n      }\n      scrollBefore = scrollNow\n    }\n\n    if(this.scrollContainer){\n      this.scrollContainer.addEventListener(\"scroll\", this.onScroll)\n    } else {\n      window.addEventListener(\"scroll\", this.onScroll)\n    }\n  },\n  \n  destroyed(){\n    if(this.scrollContainer){\n      this.scrollContainer.removeEventListener(\"scroll\", this.onScroll)\n    } else {\n      window.removeEventListener(\"scroll\", this.onScroll)\n    }\n  },\n\n  throttle(interval, callback){\n    let lastCallAt = 0\n    let timer\n\n    return (...args) => {\n      let now = Date.now()\n      let remainingTime = interval - (now - lastCallAt)\n\n      if(remainingTime <= 0 || remainingTime > interval){\n        if(timer){\n          clearTimeout(timer)\n          timer = null\n        }\n        lastCallAt = now\n        callback(...args)\n      } else if(!timer){\n        timer = setTimeout(() => {\n          lastCallAt = Date.now()\n          timer = null\n          callback(...args)\n        }, remainingTime)\n      }\n    }\n  }\n}\nexport default Hooks\n", "import {\n  PHX_REF_LOADING,\n  PHX_REF_LOCK,\n  PHX_REF_SRC,\n  PHX_EVENT_CLASSES,\n  PHX_DISABLED,\n  PHX_READONLY,\n  PHX_DISABLE_WITH_RESTORE\n} from \"./constants\"\n\nimport DOM from \"./dom\"\n\nexport default class ElementRef {\n  constructor(el){\n    this.el = el\n    this.loadingRef = el.hasAttribute(PHX_REF_LOADING) ? parseInt(el.getAttribute(PHX_REF_LOADING), 10) : null\n    this.lockRef = el.hasAttribute(PHX_REF_LOCK) ? parseInt(el.getAttribute(PHX_REF_LOCK), 10) : null\n  }\n\n  // public\n\n  maybeUndo(ref, phxEvent, eachCloneCallback){\n    if(!this.isWithin(ref)){ return }\n\n    // undo locks and apply clones\n    this.undoLocks(ref, phxEvent, eachCloneCallback)\n\n    // undo loading states\n    this.undoLoading(ref, phxEvent)\n\n    // clean up if fully resolved\n    if(this.isFullyResolvedBy(ref)){ this.el.removeAttribute(PHX_REF_SRC) }\n  }\n\n  // private\n\n  isWithin(ref){\n    return !((this.loadingRef !== null && this.loadingRef > ref) && (this.lockRef !== null && this.lockRef > ref))\n  }\n\n  // Check for cloned PHX_REF_LOCK element that has been morphed behind\n  // the scenes while this element was locked in the DOM.\n  // When we apply the cloned tree to the active DOM element, we must\n  //\n  //   1. execute pending mounted hooks for nodes now in the DOM\n  //   2. undo any ref inside the cloned tree that has since been ack'd\n  undoLocks(ref, phxEvent, eachCloneCallback){\n    if(!this.isLockUndoneBy(ref)){ return }\n\n    let clonedTree = DOM.private(this.el, PHX_REF_LOCK)\n    if(clonedTree){\n      eachCloneCallback(clonedTree)\n      DOM.deletePrivate(this.el, PHX_REF_LOCK)\n    }\n    this.el.removeAttribute(PHX_REF_LOCK)\n\n    let opts = {detail: {ref: ref, event: phxEvent}, bubbles: true, cancelable: false}\n    this.el.dispatchEvent(new CustomEvent(`phx:undo-lock:${this.lockRef}`, opts))\n  }\n\n  undoLoading(ref, phxEvent){\n    if(!this.isLoadingUndoneBy(ref)){\n      if(this.canUndoLoading(ref) && this.el.classList.contains(\"phx-submit-loading\")){\n        this.el.classList.remove(\"phx-change-loading\")\n      }\n      return\n    }\n\n    if(this.canUndoLoading(ref)){\n      this.el.removeAttribute(PHX_REF_LOADING)\n      let disabledVal = this.el.getAttribute(PHX_DISABLED)\n      let readOnlyVal = this.el.getAttribute(PHX_READONLY)\n      // restore inputs\n      if(readOnlyVal !== null){\n        this.el.readOnly = readOnlyVal === \"true\" ? true : false\n        this.el.removeAttribute(PHX_READONLY)\n      }\n      if(disabledVal !== null){\n        this.el.disabled = disabledVal === \"true\" ? true : false\n        this.el.removeAttribute(PHX_DISABLED)\n      }\n      // restore disables\n      let disableRestore = this.el.getAttribute(PHX_DISABLE_WITH_RESTORE)\n      if(disableRestore !== null){\n        this.el.innerText = disableRestore\n        this.el.removeAttribute(PHX_DISABLE_WITH_RESTORE)\n      }\n\n      let opts = {detail: {ref: ref, event: phxEvent}, bubbles: true, cancelable: false}\n      this.el.dispatchEvent(new CustomEvent(`phx:undo-loading:${this.loadingRef}`, opts))\n    }\n\n    // remove classes\n    PHX_EVENT_CLASSES.forEach(name => {\n      if(name !== \"phx-submit-loading\" || this.canUndoLoading(ref)){\n        DOM.removeClass(this.el, name)\n      }\n    })\n  }\n\n  isLoadingUndoneBy(ref){ return this.loadingRef === null ? false : this.loadingRef <= ref }\n  isLockUndoneBy(ref){ return this.lockRef === null ? false : this.lockRef <= ref }\n\n  isFullyResolvedBy(ref){\n    return (this.loadingRef === null || this.loadingRef <= ref) && (this.lockRef === null || this.lockRef <= ref)\n  }\n\n  // only remove the phx-submit-loading class if we are not locked\n  canUndoLoading(ref){ return this.lockRef === null || this.lockRef <= ref }\n}\n", "import {\n  maybe\n} from \"./utils\"\n\nimport DOM from \"./dom\"\n\nexport default class DOMPostMorphRestorer {\n  constructor(containerBefore, containerAfter, updateType){\n    let idsBefore = new Set()\n    let idsAfter = new Set([...containerAfter.children].map(child => child.id))\n\n    let elementsToModify = []\n\n    Array.from(containerBefore.children).forEach(child => {\n      if(child.id){ // all of our children should be elements with ids\n        idsBefore.add(child.id)\n        if(idsAfter.has(child.id)){\n          let previousElementId = child.previousElementSibling && child.previousElementSibling.id\n          elementsToModify.push({elementId: child.id, previousElementId: previousElementId})\n        }\n      }\n    })\n\n    this.containerId = containerAfter.id\n    this.updateType = updateType\n    this.elementsToModify = elementsToModify\n    this.elementIdsToAdd = [...idsAfter].filter(id => !idsBefore.has(id))\n  }\n\n  // We do the following to optimize append/prepend operations:\n  //   1) Track ids of modified elements & of new elements\n  //   2) All the modified elements are put back in the correct position in the DOM tree\n  //      by storing the id of their previous sibling\n  //   3) New elements are going to be put in the right place by morphdom during append.\n  //      For prepend, we move them to the first position in the container\n  perform(){\n    let container = DOM.byId(this.containerId)\n    this.elementsToModify.forEach(elementToModify => {\n      if(elementToModify.previousElementId){\n        maybe(document.getElementById(elementToModify.previousElementId), previousElem => {\n          maybe(document.getElementById(elementToModify.elementId), elem => {\n            let isInRightPlace = elem.previousElementSibling && elem.previousElementSibling.id == previousElem.id\n            if(!isInRightPlace){\n              previousElem.insertAdjacentElement(\"afterend\", elem)\n            }\n          })\n        })\n      } else {\n        // This is the first element in the container\n        maybe(document.getElementById(elementToModify.elementId), elem => {\n          let isInRightPlace = elem.previousElementSibling == null\n          if(!isInRightPlace){\n            container.insertAdjacentElement(\"afterbegin\", elem)\n          }\n        })\n      }\n    })\n\n    if(this.updateType == \"prepend\"){\n      this.elementIdsToAdd.reverse().forEach(elemId => {\n        maybe(document.getElementById(elemId), elem => container.insertAdjacentElement(\"afterbegin\", elem))\n      })\n    }\n  }\n}\n", "var DOCUMENT_FRAGMENT_NODE = 11;\n\nfunction morphAttrs(fromNode, toNode) {\n    var toNodeAttrs = toNode.attributes;\n    var attr;\n    var attrName;\n    var attrNamespaceURI;\n    var attrValue;\n    var fromValue;\n\n    // document-fragments dont have attributes so lets not do anything\n    if (toNode.nodeType === DOCUMENT_FRAGMENT_NODE || fromNode.nodeType === DOCUMENT_FRAGMENT_NODE) {\n      return;\n    }\n\n    // update attributes on original DOM element\n    for (var i = toNodeAttrs.length - 1; i >= 0; i--) {\n        attr = toNodeAttrs[i];\n        attrName = attr.name;\n        attrNamespaceURI = attr.namespaceURI;\n        attrValue = attr.value;\n\n        if (attrNamespaceURI) {\n            attrName = attr.localName || attrName;\n            fromValue = fromNode.getAttributeNS(attrNamespaceURI, attrName);\n\n            if (fromValue !== attrValue) {\n                if (attr.prefix === 'xmlns'){\n                    attrName = attr.name; // It's not allowed to set an attribute with the XMLNS namespace without specifying the `xmlns` prefix\n                }\n                fromNode.setAttributeNS(attrNamespaceURI, attrName, attrValue);\n            }\n        } else {\n            fromValue = fromNode.getAttribute(attrName);\n\n            if (fromValue !== attrValue) {\n                fromNode.setAttribute(attrName, attrValue);\n            }\n        }\n    }\n\n    // Remove any extra attributes found on the original DOM element that\n    // weren't found on the target element.\n    var fromNodeAttrs = fromNode.attributes;\n\n    for (var d = fromNodeAttrs.length - 1; d >= 0; d--) {\n        attr = fromNodeAttrs[d];\n        attrName = attr.name;\n        attrNamespaceURI = attr.namespaceURI;\n\n        if (attrNamespaceURI) {\n            attrName = attr.localName || attrName;\n\n            if (!toNode.hasAttributeNS(attrNamespaceURI, attrName)) {\n                fromNode.removeAttributeNS(attrNamespaceURI, attrName);\n            }\n        } else {\n            if (!toNode.hasAttribute(attrName)) {\n                fromNode.removeAttribute(attrName);\n            }\n        }\n    }\n}\n\nvar range; // Create a range object for efficently rendering strings to elements.\nvar NS_XHTML = 'http://www.w3.org/1999/xhtml';\n\nvar doc = typeof document === 'undefined' ? undefined : document;\nvar HAS_TEMPLATE_SUPPORT = !!doc && 'content' in doc.createElement('template');\nvar HAS_RANGE_SUPPORT = !!doc && doc.createRange && 'createContextualFragment' in doc.createRange();\n\nfunction createFragmentFromTemplate(str) {\n    var template = doc.createElement('template');\n    template.innerHTML = str;\n    return template.content.childNodes[0];\n}\n\nfunction createFragmentFromRange(str) {\n    if (!range) {\n        range = doc.createRange();\n        range.selectNode(doc.body);\n    }\n\n    var fragment = range.createContextualFragment(str);\n    return fragment.childNodes[0];\n}\n\nfunction createFragmentFromWrap(str) {\n    var fragment = doc.createElement('body');\n    fragment.innerHTML = str;\n    return fragment.childNodes[0];\n}\n\n/**\n * This is about the same\n * var html = new DOMParser().parseFromString(str, 'text/html');\n * return html.body.firstChild;\n *\n * @method toElement\n * @param {String} str\n */\nfunction toElement(str) {\n    str = str.trim();\n    if (HAS_TEMPLATE_SUPPORT) {\n      // avoid restrictions on content for things like `<tr><th>Hi</th></tr>` which\n      // createContextualFragment doesn't support\n      // <template> support not available in IE\n      return createFragmentFromTemplate(str);\n    } else if (HAS_RANGE_SUPPORT) {\n      return createFragmentFromRange(str);\n    }\n\n    return createFragmentFromWrap(str);\n}\n\n/**\n * Returns true if two node's names are the same.\n *\n * NOTE: We don't bother checking `namespaceURI` because you will never find two HTML elements with the same\n *       nodeName and different namespace URIs.\n *\n * @param {Element} a\n * @param {Element} b The target element\n * @return {boolean}\n */\nfunction compareNodeNames(fromEl, toEl) {\n    var fromNodeName = fromEl.nodeName;\n    var toNodeName = toEl.nodeName;\n    var fromCodeStart, toCodeStart;\n\n    if (fromNodeName === toNodeName) {\n        return true;\n    }\n\n    fromCodeStart = fromNodeName.charCodeAt(0);\n    toCodeStart = toNodeName.charCodeAt(0);\n\n    // If the target element is a virtual DOM node or SVG node then we may\n    // need to normalize the tag name before comparing. Normal HTML elements that are\n    // in the \"http://www.w3.org/1999/xhtml\"\n    // are converted to upper case\n    if (fromCodeStart <= 90 && toCodeStart >= 97) { // from is upper and to is lower\n        return fromNodeName === toNodeName.toUpperCase();\n    } else if (toCodeStart <= 90 && fromCodeStart >= 97) { // to is upper and from is lower\n        return toNodeName === fromNodeName.toUpperCase();\n    } else {\n        return false;\n    }\n}\n\n/**\n * Create an element, optionally with a known namespace URI.\n *\n * @param {string} name the element name, e.g. 'div' or 'svg'\n * @param {string} [namespaceURI] the element's namespace URI, i.e. the value of\n * its `xmlns` attribute or its inferred namespace.\n *\n * @return {Element}\n */\nfunction createElementNS(name, namespaceURI) {\n    return !namespaceURI || namespaceURI === NS_XHTML ?\n        doc.createElement(name) :\n        doc.createElementNS(namespaceURI, name);\n}\n\n/**\n * Copies the children of one DOM element to another DOM element\n */\nfunction moveChildren(fromEl, toEl) {\n    var curChild = fromEl.firstChild;\n    while (curChild) {\n        var nextChild = curChild.nextSibling;\n        toEl.appendChild(curChild);\n        curChild = nextChild;\n    }\n    return toEl;\n}\n\nfunction syncBooleanAttrProp(fromEl, toEl, name) {\n    if (fromEl[name] !== toEl[name]) {\n        fromEl[name] = toEl[name];\n        if (fromEl[name]) {\n            fromEl.setAttribute(name, '');\n        } else {\n            fromEl.removeAttribute(name);\n        }\n    }\n}\n\nvar specialElHandlers = {\n    OPTION: function(fromEl, toEl) {\n        var parentNode = fromEl.parentNode;\n        if (parentNode) {\n            var parentName = parentNode.nodeName.toUpperCase();\n            if (parentName === 'OPTGROUP') {\n                parentNode = parentNode.parentNode;\n                parentName = parentNode && parentNode.nodeName.toUpperCase();\n            }\n            if (parentName === 'SELECT' && !parentNode.hasAttribute('multiple')) {\n                if (fromEl.hasAttribute('selected') && !toEl.selected) {\n                    // Workaround for MS Edge bug where the 'selected' attribute can only be\n                    // removed if set to a non-empty value:\n                    // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/12087679/\n                    fromEl.setAttribute('selected', 'selected');\n                    fromEl.removeAttribute('selected');\n                }\n                // We have to reset select element's selectedIndex to -1, otherwise setting\n                // fromEl.selected using the syncBooleanAttrProp below has no effect.\n                // The correct selectedIndex will be set in the SELECT special handler below.\n                parentNode.selectedIndex = -1;\n            }\n        }\n        syncBooleanAttrProp(fromEl, toEl, 'selected');\n    },\n    /**\n     * The \"value\" attribute is special for the <input> element since it sets\n     * the initial value. Changing the \"value\" attribute without changing the\n     * \"value\" property will have no effect since it is only used to the set the\n     * initial value.  Similar for the \"checked\" attribute, and \"disabled\".\n     */\n    INPUT: function(fromEl, toEl) {\n        syncBooleanAttrProp(fromEl, toEl, 'checked');\n        syncBooleanAttrProp(fromEl, toEl, 'disabled');\n\n        if (fromEl.value !== toEl.value) {\n            fromEl.value = toEl.value;\n        }\n\n        if (!toEl.hasAttribute('value')) {\n            fromEl.removeAttribute('value');\n        }\n    },\n\n    TEXTAREA: function(fromEl, toEl) {\n        var newValue = toEl.value;\n        if (fromEl.value !== newValue) {\n            fromEl.value = newValue;\n        }\n\n        var firstChild = fromEl.firstChild;\n        if (firstChild) {\n            // Needed for IE. Apparently IE sets the placeholder as the\n            // node value and vise versa. This ignores an empty update.\n            var oldValue = firstChild.nodeValue;\n\n            if (oldValue == newValue || (!newValue && oldValue == fromEl.placeholder)) {\n                return;\n            }\n\n            firstChild.nodeValue = newValue;\n        }\n    },\n    SELECT: function(fromEl, toEl) {\n        if (!toEl.hasAttribute('multiple')) {\n            var selectedIndex = -1;\n            var i = 0;\n            // We have to loop through children of fromEl, not toEl since nodes can be moved\n            // from toEl to fromEl directly when morphing.\n            // At the time this special handler is invoked, all children have already been morphed\n            // and appended to / removed from fromEl, so using fromEl here is safe and correct.\n            var curChild = fromEl.firstChild;\n            var optgroup;\n            var nodeName;\n            while(curChild) {\n                nodeName = curChild.nodeName && curChild.nodeName.toUpperCase();\n                if (nodeName === 'OPTGROUP') {\n                    optgroup = curChild;\n                    curChild = optgroup.firstChild;\n                } else {\n                    if (nodeName === 'OPTION') {\n                        if (curChild.hasAttribute('selected')) {\n                            selectedIndex = i;\n                            break;\n                        }\n                        i++;\n                    }\n                    curChild = curChild.nextSibling;\n                    if (!curChild && optgroup) {\n                        curChild = optgroup.nextSibling;\n                        optgroup = null;\n                    }\n                }\n            }\n\n            fromEl.selectedIndex = selectedIndex;\n        }\n    }\n};\n\nvar ELEMENT_NODE = 1;\nvar DOCUMENT_FRAGMENT_NODE$1 = 11;\nvar TEXT_NODE = 3;\nvar COMMENT_NODE = 8;\n\nfunction noop() {}\n\nfunction defaultGetNodeKey(node) {\n  if (node) {\n    return (node.getAttribute && node.getAttribute('id')) || node.id;\n  }\n}\n\nfunction morphdomFactory(morphAttrs) {\n\n  return function morphdom(fromNode, toNode, options) {\n    if (!options) {\n      options = {};\n    }\n\n    if (typeof toNode === 'string') {\n      if (fromNode.nodeName === '#document' || fromNode.nodeName === 'HTML' || fromNode.nodeName === 'BODY') {\n        var toNodeHtml = toNode;\n        toNode = doc.createElement('html');\n        toNode.innerHTML = toNodeHtml;\n      } else {\n        toNode = toElement(toNode);\n      }\n    } else if (toNode.nodeType === DOCUMENT_FRAGMENT_NODE$1) {\n      toNode = toNode.firstElementChild;\n    }\n\n    var getNodeKey = options.getNodeKey || defaultGetNodeKey;\n    var onBeforeNodeAdded = options.onBeforeNodeAdded || noop;\n    var onNodeAdded = options.onNodeAdded || noop;\n    var onBeforeElUpdated = options.onBeforeElUpdated || noop;\n    var onElUpdated = options.onElUpdated || noop;\n    var onBeforeNodeDiscarded = options.onBeforeNodeDiscarded || noop;\n    var onNodeDiscarded = options.onNodeDiscarded || noop;\n    var onBeforeElChildrenUpdated = options.onBeforeElChildrenUpdated || noop;\n    var skipFromChildren = options.skipFromChildren || noop;\n    var addChild = options.addChild || function(parent, child){ return parent.appendChild(child); };\n    var childrenOnly = options.childrenOnly === true;\n\n    // This object is used as a lookup to quickly find all keyed elements in the original DOM tree.\n    var fromNodesLookup = Object.create(null);\n    var keyedRemovalList = [];\n\n    function addKeyedRemoval(key) {\n      keyedRemovalList.push(key);\n    }\n\n    function walkDiscardedChildNodes(node, skipKeyedNodes) {\n      if (node.nodeType === ELEMENT_NODE) {\n        var curChild = node.firstChild;\n        while (curChild) {\n\n          var key = undefined;\n\n          if (skipKeyedNodes && (key = getNodeKey(curChild))) {\n            // If we are skipping keyed nodes then we add the key\n            // to a list so that it can be handled at the very end.\n            addKeyedRemoval(key);\n          } else {\n            // Only report the node as discarded if it is not keyed. We do this because\n            // at the end we loop through all keyed elements that were unmatched\n            // and then discard them in one final pass.\n            onNodeDiscarded(curChild);\n            if (curChild.firstChild) {\n              walkDiscardedChildNodes(curChild, skipKeyedNodes);\n            }\n          }\n\n          curChild = curChild.nextSibling;\n        }\n      }\n    }\n\n    /**\n    * Removes a DOM node out of the original DOM\n    *\n    * @param  {Node} node The node to remove\n    * @param  {Node} parentNode The nodes parent\n    * @param  {Boolean} skipKeyedNodes If true then elements with keys will be skipped and not discarded.\n    * @return {undefined}\n    */\n    function removeNode(node, parentNode, skipKeyedNodes) {\n      if (onBeforeNodeDiscarded(node) === false) {\n        return;\n      }\n\n      if (parentNode) {\n        parentNode.removeChild(node);\n      }\n\n      onNodeDiscarded(node);\n      walkDiscardedChildNodes(node, skipKeyedNodes);\n    }\n\n    // // TreeWalker implementation is no faster, but keeping this around in case this changes in the future\n    // function indexTree(root) {\n    //     var treeWalker = document.createTreeWalker(\n    //         root,\n    //         NodeFilter.SHOW_ELEMENT);\n    //\n    //     var el;\n    //     while((el = treeWalker.nextNode())) {\n    //         var key = getNodeKey(el);\n    //         if (key) {\n    //             fromNodesLookup[key] = el;\n    //         }\n    //     }\n    // }\n\n    // // NodeIterator implementation is no faster, but keeping this around in case this changes in the future\n    //\n    // function indexTree(node) {\n    //     var nodeIterator = document.createNodeIterator(node, NodeFilter.SHOW_ELEMENT);\n    //     var el;\n    //     while((el = nodeIterator.nextNode())) {\n    //         var key = getNodeKey(el);\n    //         if (key) {\n    //             fromNodesLookup[key] = el;\n    //         }\n    //     }\n    // }\n\n    function indexTree(node) {\n      if (node.nodeType === ELEMENT_NODE || node.nodeType === DOCUMENT_FRAGMENT_NODE$1) {\n        var curChild = node.firstChild;\n        while (curChild) {\n          var key = getNodeKey(curChild);\n          if (key) {\n            fromNodesLookup[key] = curChild;\n          }\n\n          // Walk recursively\n          indexTree(curChild);\n\n          curChild = curChild.nextSibling;\n        }\n      }\n    }\n\n    indexTree(fromNode);\n\n    function handleNodeAdded(el) {\n      onNodeAdded(el);\n\n      var curChild = el.firstChild;\n      while (curChild) {\n        var nextSibling = curChild.nextSibling;\n\n        var key = getNodeKey(curChild);\n        if (key) {\n          var unmatchedFromEl = fromNodesLookup[key];\n          // if we find a duplicate #id node in cache, replace `el` with cache value\n          // and morph it to the child node.\n          if (unmatchedFromEl && compareNodeNames(curChild, unmatchedFromEl)) {\n            curChild.parentNode.replaceChild(unmatchedFromEl, curChild);\n            morphEl(unmatchedFromEl, curChild);\n          } else {\n            handleNodeAdded(curChild);\n          }\n        } else {\n          // recursively call for curChild and it's children to see if we find something in\n          // fromNodesLookup\n          handleNodeAdded(curChild);\n        }\n\n        curChild = nextSibling;\n      }\n    }\n\n    function cleanupFromEl(fromEl, curFromNodeChild, curFromNodeKey) {\n      // We have processed all of the \"to nodes\". If curFromNodeChild is\n      // non-null then we still have some from nodes left over that need\n      // to be removed\n      while (curFromNodeChild) {\n        var fromNextSibling = curFromNodeChild.nextSibling;\n        if ((curFromNodeKey = getNodeKey(curFromNodeChild))) {\n          // Since the node is keyed it might be matched up later so we defer\n          // the actual removal to later\n          addKeyedRemoval(curFromNodeKey);\n        } else {\n          // NOTE: we skip nested keyed nodes from being removed since there is\n          //       still a chance they will be matched up later\n          removeNode(curFromNodeChild, fromEl, true /* skip keyed nodes */);\n        }\n        curFromNodeChild = fromNextSibling;\n      }\n    }\n\n    function morphEl(fromEl, toEl, childrenOnly) {\n      var toElKey = getNodeKey(toEl);\n\n      if (toElKey) {\n        // If an element with an ID is being morphed then it will be in the final\n        // DOM so clear it out of the saved elements collection\n        delete fromNodesLookup[toElKey];\n      }\n\n      if (!childrenOnly) {\n        // optional\n        var beforeUpdateResult = onBeforeElUpdated(fromEl, toEl);\n        if (beforeUpdateResult === false) {\n          return;\n        } else if (beforeUpdateResult instanceof HTMLElement) {\n          fromEl = beforeUpdateResult;\n          // reindex the new fromEl in case it's not in the same\n          // tree as the original fromEl\n          // (Phoenix LiveView sometimes returns a cloned tree,\n          //  but keyed lookups would still point to the original tree)\n          indexTree(fromEl);\n        }\n\n        // update attributes on original DOM element first\n        morphAttrs(fromEl, toEl);\n        // optional\n        onElUpdated(fromEl);\n\n        if (onBeforeElChildrenUpdated(fromEl, toEl) === false) {\n          return;\n        }\n      }\n\n      if (fromEl.nodeName !== 'TEXTAREA') {\n        morphChildren(fromEl, toEl);\n      } else {\n        specialElHandlers.TEXTAREA(fromEl, toEl);\n      }\n    }\n\n    function morphChildren(fromEl, toEl) {\n      var skipFrom = skipFromChildren(fromEl, toEl);\n      var curToNodeChild = toEl.firstChild;\n      var curFromNodeChild = fromEl.firstChild;\n      var curToNodeKey;\n      var curFromNodeKey;\n\n      var fromNextSibling;\n      var toNextSibling;\n      var matchingFromEl;\n\n      // walk the children\n      outer: while (curToNodeChild) {\n        toNextSibling = curToNodeChild.nextSibling;\n        curToNodeKey = getNodeKey(curToNodeChild);\n\n        // walk the fromNode children all the way through\n        while (!skipFrom && curFromNodeChild) {\n          fromNextSibling = curFromNodeChild.nextSibling;\n\n          if (curToNodeChild.isSameNode && curToNodeChild.isSameNode(curFromNodeChild)) {\n            curToNodeChild = toNextSibling;\n            curFromNodeChild = fromNextSibling;\n            continue outer;\n          }\n\n          curFromNodeKey = getNodeKey(curFromNodeChild);\n\n          var curFromNodeType = curFromNodeChild.nodeType;\n\n          // this means if the curFromNodeChild doesnt have a match with the curToNodeChild\n          var isCompatible = undefined;\n\n          if (curFromNodeType === curToNodeChild.nodeType) {\n            if (curFromNodeType === ELEMENT_NODE) {\n              // Both nodes being compared are Element nodes\n\n              if (curToNodeKey) {\n                // The target node has a key so we want to match it up with the correct element\n                // in the original DOM tree\n                if (curToNodeKey !== curFromNodeKey) {\n                  // The current element in the original DOM tree does not have a matching key so\n                  // let's check our lookup to see if there is a matching element in the original\n                  // DOM tree\n                  if ((matchingFromEl = fromNodesLookup[curToNodeKey])) {\n                    if (fromNextSibling === matchingFromEl) {\n                      // Special case for single element removals. To avoid removing the original\n                      // DOM node out of the tree (since that can break CSS transitions, etc.),\n                      // we will instead discard the current node and wait until the next\n                      // iteration to properly match up the keyed target element with its matching\n                      // element in the original tree\n                      isCompatible = false;\n                    } else {\n                      // We found a matching keyed element somewhere in the original DOM tree.\n                      // Let's move the original DOM node into the current position and morph\n                      // it.\n\n                      // NOTE: We use insertBefore instead of replaceChild because we want to go through\n                      // the `removeNode()` function for the node that is being discarded so that\n                      // all lifecycle hooks are correctly invoked\n                      fromEl.insertBefore(matchingFromEl, curFromNodeChild);\n\n                      // fromNextSibling = curFromNodeChild.nextSibling;\n\n                      if (curFromNodeKey) {\n                        // Since the node is keyed it might be matched up later so we defer\n                        // the actual removal to later\n                        addKeyedRemoval(curFromNodeKey);\n                      } else {\n                        // NOTE: we skip nested keyed nodes from being removed since there is\n                        //       still a chance they will be matched up later\n                        removeNode(curFromNodeChild, fromEl, true /* skip keyed nodes */);\n                      }\n\n                      curFromNodeChild = matchingFromEl;\n                      curFromNodeKey = getNodeKey(curFromNodeChild);\n                    }\n                  } else {\n                    // The nodes are not compatible since the \"to\" node has a key and there\n                    // is no matching keyed node in the source tree\n                    isCompatible = false;\n                  }\n                }\n              } else if (curFromNodeKey) {\n                // The original has a key\n                isCompatible = false;\n              }\n\n              isCompatible = isCompatible !== false && compareNodeNames(curFromNodeChild, curToNodeChild);\n              if (isCompatible) {\n                // We found compatible DOM elements so transform\n                // the current \"from\" node to match the current\n                // target DOM node.\n                // MORPH\n                morphEl(curFromNodeChild, curToNodeChild);\n              }\n\n            } else if (curFromNodeType === TEXT_NODE || curFromNodeType == COMMENT_NODE) {\n              // Both nodes being compared are Text or Comment nodes\n              isCompatible = true;\n              // Simply update nodeValue on the original node to\n              // change the text value\n              if (curFromNodeChild.nodeValue !== curToNodeChild.nodeValue) {\n                curFromNodeChild.nodeValue = curToNodeChild.nodeValue;\n              }\n\n            }\n          }\n\n          if (isCompatible) {\n            // Advance both the \"to\" child and the \"from\" child since we found a match\n            // Nothing else to do as we already recursively called morphChildren above\n            curToNodeChild = toNextSibling;\n            curFromNodeChild = fromNextSibling;\n            continue outer;\n          }\n\n          // No compatible match so remove the old node from the DOM and continue trying to find a\n          // match in the original DOM. However, we only do this if the from node is not keyed\n          // since it is possible that a keyed node might match up with a node somewhere else in the\n          // target tree and we don't want to discard it just yet since it still might find a\n          // home in the final DOM tree. After everything is done we will remove any keyed nodes\n          // that didn't find a home\n          if (curFromNodeKey) {\n            // Since the node is keyed it might be matched up later so we defer\n            // the actual removal to later\n            addKeyedRemoval(curFromNodeKey);\n          } else {\n            // NOTE: we skip nested keyed nodes from being removed since there is\n            //       still a chance they will be matched up later\n            removeNode(curFromNodeChild, fromEl, true /* skip keyed nodes */);\n          }\n\n          curFromNodeChild = fromNextSibling;\n        } // END: while(curFromNodeChild) {}\n\n        // If we got this far then we did not find a candidate match for\n        // our \"to node\" and we exhausted all of the children \"from\"\n        // nodes. Therefore, we will just append the current \"to\" node\n        // to the end\n        if (curToNodeKey && (matchingFromEl = fromNodesLookup[curToNodeKey]) && compareNodeNames(matchingFromEl, curToNodeChild)) {\n          // MORPH\n          if(!skipFrom){ addChild(fromEl, matchingFromEl); }\n          morphEl(matchingFromEl, curToNodeChild);\n        } else {\n          var onBeforeNodeAddedResult = onBeforeNodeAdded(curToNodeChild);\n          if (onBeforeNodeAddedResult !== false) {\n            if (onBeforeNodeAddedResult) {\n              curToNodeChild = onBeforeNodeAddedResult;\n            }\n\n            if (curToNodeChild.actualize) {\n              curToNodeChild = curToNodeChild.actualize(fromEl.ownerDocument || doc);\n            }\n            addChild(fromEl, curToNodeChild);\n            handleNodeAdded(curToNodeChild);\n          }\n        }\n\n        curToNodeChild = toNextSibling;\n        curFromNodeChild = fromNextSibling;\n      }\n\n      cleanupFromEl(fromEl, curFromNodeChild, curFromNodeKey);\n\n      var specialElHandler = specialElHandlers[fromEl.nodeName];\n      if (specialElHandler) {\n        specialElHandler(fromEl, toEl);\n      }\n    } // END: morphChildren(...)\n\n    var morphedNode = fromNode;\n    var morphedNodeType = morphedNode.nodeType;\n    var toNodeType = toNode.nodeType;\n\n    if (!childrenOnly) {\n      // Handle the case where we are given two DOM nodes that are not\n      // compatible (e.g. <div> --> <span> or <div> --> TEXT)\n      if (morphedNodeType === ELEMENT_NODE) {\n        if (toNodeType === ELEMENT_NODE) {\n          if (!compareNodeNames(fromNode, toNode)) {\n            onNodeDiscarded(fromNode);\n            morphedNode = moveChildren(fromNode, createElementNS(toNode.nodeName, toNode.namespaceURI));\n          }\n        } else {\n          // Going from an element node to a text node\n          morphedNode = toNode;\n        }\n      } else if (morphedNodeType === TEXT_NODE || morphedNodeType === COMMENT_NODE) { // Text or comment node\n        if (toNodeType === morphedNodeType) {\n          if (morphedNode.nodeValue !== toNode.nodeValue) {\n            morphedNode.nodeValue = toNode.nodeValue;\n          }\n\n          return morphedNode;\n        } else {\n          // Text node to something else\n          morphedNode = toNode;\n        }\n      }\n    }\n\n    if (morphedNode === toNode) {\n      // The \"to node\" was not compatible with the \"from node\" so we had to\n      // toss out the \"from node\" and use the \"to node\"\n      onNodeDiscarded(fromNode);\n    } else {\n      if (toNode.isSameNode && toNode.isSameNode(morphedNode)) {\n        return;\n      }\n\n      morphEl(morphedNode, toNode, childrenOnly);\n\n      // We now need to loop over any keyed nodes that might need to be\n      // removed. We only do the removal if we know that the keyed node\n      // never found a match. When a keyed node is matched up we remove\n      // it out of fromNodesLookup and we use fromNodesLookup to determine\n      // if a keyed node has been matched up or not\n      if (keyedRemovalList) {\n        for (var i=0, len=keyedRemovalList.length; i<len; i++) {\n          var elToRemove = fromNodesLookup[keyedRemovalList[i]];\n          if (elToRemove) {\n            removeNode(elToRemove, elToRemove.parentNode, false);\n          }\n        }\n      }\n    }\n\n    if (!childrenOnly && morphedNode !== fromNode && fromNode.parentNode) {\n      if (morphedNode.actualize) {\n        morphedNode = morphedNode.actualize(fromNode.ownerDocument || doc);\n      }\n      // If we had to swap out the from node with a new node because the old\n      // node was not compatible with the target node then we need to\n      // replace the old DOM node in the original DOM tree. This is only\n      // possible if the original DOM node was part of a DOM tree which\n      // we know is the case if it has a parent node.\n      fromNode.parentNode.replaceChild(morphedNode, fromNode);\n    }\n\n    return morphedNode;\n  };\n}\n\nvar morphdom = morphdomFactory(morphAttrs);\n\nexport default morphdom;\n", "import {\n  PHX_COMPONENT,\n  PHX_PRUNE,\n  PHX_ROOT_ID,\n  PHX_SESSION,\n  PHX_SKIP,\n  PHX_MAGIC_ID,\n  PHX_STATIC,\n  PHX_TRIGGER_ACTION,\n  PHX_UPDATE,\n  PHX_REF_SRC,\n  PHX_REF_LOCK,\n  PHX_STREAM,\n  PHX_STREAM_REF,\n  PHX_VIEWPORT_TOP,\n  PHX_VIEWPORT_BOTTOM,\n} from \"./constants\"\n\nimport {\n  detectDuplicateIds,\n  isCid\n} from \"./utils\"\n\nimport DOM from \"./dom\"\nimport DOMPostMorphRestorer from \"./dom_post_morph_restorer\"\nimport morphdom from \"morphdom\"\n\nexport default class DOMPatch {\n  static patchWithClonedTree(container, clonedTree, liveSocket){\n    let focused = liveSocket.getActiveElement()\n    let {selectionStart, selectionEnd} = focused && DOM.hasSelectionRange(focused) ? focused : {}\n    let phxUpdate = liveSocket.binding(PHX_UPDATE)\n\n    morphdom(container, clonedTree, {\n      childrenOnly: false,\n      onBeforeElUpdated: (fromEl, toEl) => {\n        DOM.syncPendingAttrs(fromEl, toEl)\n        // we cannot morph locked children\n        if(!container.isSameNode(fromEl) && fromEl.hasAttribute(PHX_REF_LOCK)){ return false }\n        if(DOM.isIgnored(fromEl, phxUpdate)){ return false }\n        if(focused && focused.isSameNode(fromEl) && DOM.isFormInput(fromEl)){\n          DOM.mergeFocusedInput(fromEl, toEl)\n          return false\n        }\n      }\n    })\n\n    liveSocket.silenceEvents(() => DOM.restoreFocus(focused, selectionStart, selectionEnd))\n  }\n\n  constructor(view, container, id, html, streams, targetCID){\n    this.view = view\n    this.liveSocket = view.liveSocket\n    this.container = container\n    this.id = id\n    this.rootID = view.root.id\n    this.html = html\n    this.streams = streams\n    this.streamInserts = {}\n    this.streamComponentRestore = {}\n    this.targetCID = targetCID\n    this.cidPatch = isCid(this.targetCID)\n    this.pendingRemoves = []\n    this.phxRemove = this.liveSocket.binding(\"remove\")\n    this.targetContainer = this.isCIDPatch() ? this.targetCIDContainer(html) : container\n    this.callbacks = {\n      beforeadded: [], beforeupdated: [], beforephxChildAdded: [],\n      afteradded: [], afterupdated: [], afterdiscarded: [], afterphxChildAdded: [],\n      aftertransitionsDiscarded: []\n    }\n  }\n\n  before(kind, callback){ this.callbacks[`before${kind}`].push(callback) }\n  after(kind, callback){ this.callbacks[`after${kind}`].push(callback) }\n\n  trackBefore(kind, ...args){\n    this.callbacks[`before${kind}`].forEach(callback => callback(...args))\n  }\n\n  trackAfter(kind, ...args){\n    this.callbacks[`after${kind}`].forEach(callback => callback(...args))\n  }\n\n  markPrunableContentForRemoval(){\n    let phxUpdate = this.liveSocket.binding(PHX_UPDATE)\n    DOM.all(this.container, `[${phxUpdate}=append] > *, [${phxUpdate}=prepend] > *`, el => {\n      el.setAttribute(PHX_PRUNE, \"\")\n    })\n  }\n\n  perform(isJoinPatch){\n    let {view, liveSocket, html, container, targetContainer} = this\n    if(this.isCIDPatch() && !targetContainer){ return }\n\n    let focused = liveSocket.getActiveElement()\n    let {selectionStart, selectionEnd} = focused && DOM.hasSelectionRange(focused) ? focused : {}\n    let phxUpdate = liveSocket.binding(PHX_UPDATE)\n    let phxViewportTop = liveSocket.binding(PHX_VIEWPORT_TOP)\n    let phxViewportBottom = liveSocket.binding(PHX_VIEWPORT_BOTTOM)\n    let phxTriggerExternal = liveSocket.binding(PHX_TRIGGER_ACTION)\n    let added = []\n    let updates = []\n    let appendPrependUpdates = []\n\n    let externalFormTriggered = null\n\n    function morph(targetContainer, source, withChildren=false){\n      let morphCallbacks = {\n        // normally, we are running with childrenOnly, as the patch HTML for a LV\n        // does not include the LV attrs (data-phx-session, etc.)\n        // when we are patching a live component, we do want to patch the root element as well;\n        // another case is the recursive patch of a stream item that was kept on reset (-> onBeforeNodeAdded)\n        childrenOnly: targetContainer.getAttribute(PHX_COMPONENT) === null && !withChildren,\n        getNodeKey: (node) => {\n          if(DOM.isPhxDestroyed(node)){ return null }\n          // If we have a join patch, then by definition there was no PHX_MAGIC_ID.\n          // This is important to reduce the amount of elements morphdom discards.\n          if(isJoinPatch){ return node.id }\n          return node.id || (node.getAttribute && node.getAttribute(PHX_MAGIC_ID))\n        },\n        // skip indexing from children when container is stream\n        skipFromChildren: (from) => { return from.getAttribute(phxUpdate) === PHX_STREAM },\n        // tell morphdom how to add a child\n        addChild: (parent, child) => {\n          let {ref, streamAt} = this.getStreamInsert(child)\n          if(ref === undefined){ return parent.appendChild(child) }\n\n          this.setStreamRef(child, ref)\n\n          // streaming\n          if(streamAt === 0){\n            parent.insertAdjacentElement(\"afterbegin\", child)\n          } else if(streamAt === -1){\n            let lastChild = parent.lastElementChild\n            if(lastChild && !lastChild.hasAttribute(PHX_STREAM_REF)){\n              let nonStreamChild = Array.from(parent.children).find(c => !c.hasAttribute(PHX_STREAM_REF))\n              parent.insertBefore(child, nonStreamChild)\n            } else {\n              parent.appendChild(child)\n            }\n          } else if(streamAt > 0){\n            let sibling = Array.from(parent.children)[streamAt]\n            parent.insertBefore(child, sibling)\n          }\n        },\n        onBeforeNodeAdded: (el) => {\n          DOM.maintainPrivateHooks(el, el, phxViewportTop, phxViewportBottom)\n          this.trackBefore(\"added\", el)\n\n          let morphedEl = el\n          // this is a stream item that was kept on reset, recursively morph it\n          if(this.streamComponentRestore[el.id]){\n            morphedEl = this.streamComponentRestore[el.id]\n            delete this.streamComponentRestore[el.id]\n            morph.call(this, morphedEl, el, true)\n          }\n\n          return morphedEl\n        },\n        onNodeAdded: (el) => {\n          if(el.getAttribute){ this.maybeReOrderStream(el, true) }\n\n          // hack to fix Safari handling of img srcset and video tags\n          if(el instanceof HTMLImageElement && el.srcset){\n            el.srcset = el.srcset\n          } else if(el instanceof HTMLVideoElement && el.autoplay){\n            el.play()\n          }\n          if(DOM.isNowTriggerFormExternal(el, phxTriggerExternal)){\n            externalFormTriggered = el\n          }\n\n          // nested view handling\n          if((DOM.isPhxChild(el) && view.ownsElement(el)) || DOM.isPhxSticky(el) && view.ownsElement(el.parentNode)){\n            this.trackAfter(\"phxChildAdded\", el)\n          }\n          added.push(el)\n        },\n        onNodeDiscarded: (el) => this.onNodeDiscarded(el),\n        onBeforeNodeDiscarded: (el) => {\n          if(el.getAttribute && el.getAttribute(PHX_PRUNE) !== null){ return true }\n          if(el.parentElement !== null && el.id &&\n            DOM.isPhxUpdate(el.parentElement, phxUpdate, [PHX_STREAM, \"append\", \"prepend\"])){\n            return false\n          }\n          if(this.maybePendingRemove(el)){ return false }\n          if(this.skipCIDSibling(el)){ return false }\n\n          return true\n        },\n        onElUpdated: (el) => {\n          if(DOM.isNowTriggerFormExternal(el, phxTriggerExternal)){\n            externalFormTriggered = el\n          }\n          updates.push(el)\n          this.maybeReOrderStream(el, false)\n        },\n        onBeforeElUpdated: (fromEl, toEl) => {\n          // if we are patching the root target container and the id has changed, treat it as a new node\n          // by replacing the fromEl with the toEl, which ensures hooks are torn down and re-created\n          if(fromEl.id && fromEl.isSameNode(targetContainer) && fromEl.id !== toEl.id){\n            morphCallbacks.onNodeDiscarded(fromEl)\n            fromEl.replaceWith(toEl)\n            return morphCallbacks.onNodeAdded(toEl)\n          }\n          DOM.syncPendingAttrs(fromEl, toEl)\n          DOM.maintainPrivateHooks(fromEl, toEl, phxViewportTop, phxViewportBottom)\n          DOM.cleanChildNodes(toEl, phxUpdate)\n          if(this.skipCIDSibling(toEl)){\n            // if this is a live component used in a stream, we may need to reorder it\n            this.maybeReOrderStream(fromEl)\n            return false\n          }\n          if(DOM.isPhxSticky(fromEl)){\n            [PHX_SESSION, PHX_STATIC, PHX_ROOT_ID]\n              .map(attr => [attr, fromEl.getAttribute(attr), toEl.getAttribute(attr)])\n              .forEach(([attr, fromVal, toVal]) => {\n                if(toVal && fromVal !== toVal){ fromEl.setAttribute(attr, toVal) }\n              })\n\n            return false\n          }\n          if(DOM.isIgnored(fromEl, phxUpdate) || (fromEl.form && fromEl.form.isSameNode(externalFormTriggered))){\n            this.trackBefore(\"updated\", fromEl, toEl)\n            DOM.mergeAttrs(fromEl, toEl, {isIgnored: DOM.isIgnored(fromEl, phxUpdate)})\n            updates.push(fromEl)\n            DOM.applyStickyOperations(fromEl)\n            return false\n          }\n          if(fromEl.type === \"number\" && (fromEl.validity && fromEl.validity.badInput)){ return false }\n          // If the element has  PHX_REF_SRC, it is loading or locked and awaiting an ack.\n          // If it's locked, we clone the fromEl tree and instruct morphdom to use\n          // the cloned tree as the source of the morph for this branch from here on out.\n          // We keep a reference to the cloned tree in the element's private data, and\n          // on ack (view.undoRefs), we morph the cloned tree with the true fromEl in the DOM to\n          // apply any changes that happened while the element was locked.\n          let isFocusedFormEl = focused && fromEl.isSameNode(focused) && DOM.isFormInput(fromEl)\n          let focusedSelectChanged = isFocusedFormEl && this.isChangedSelect(fromEl, toEl)\n          if(fromEl.hasAttribute(PHX_REF_SRC)){\n            if(DOM.isUploadInput(fromEl)){\n              DOM.mergeAttrs(fromEl, toEl, {isIgnored: true})\n              this.trackBefore(\"updated\", fromEl, toEl)\n              updates.push(fromEl)\n            }\n            DOM.applyStickyOperations(fromEl)\n            let isLocked = fromEl.hasAttribute(PHX_REF_LOCK)\n            let clone = isLocked ? DOM.private(fromEl, PHX_REF_LOCK) || fromEl.cloneNode(true) : null\n            if(clone){\n              DOM.putPrivate(fromEl, PHX_REF_LOCK, clone)\n              if(!isFocusedFormEl){\n                fromEl = clone\n              }\n            }\n          }\n\n          // nested view handling\n          if(DOM.isPhxChild(toEl)){\n            let prevSession = fromEl.getAttribute(PHX_SESSION)\n            DOM.mergeAttrs(fromEl, toEl, {exclude: [PHX_STATIC]})\n            if(prevSession !== \"\"){ fromEl.setAttribute(PHX_SESSION, prevSession) }\n            fromEl.setAttribute(PHX_ROOT_ID, this.rootID)\n            DOM.applyStickyOperations(fromEl)\n            return false\n          }\n\n          // input handling\n          DOM.copyPrivates(toEl, fromEl)\n\n          // skip patching focused inputs unless focus is a select that has changed options\n          if(isFocusedFormEl && fromEl.type !== \"hidden\" && !focusedSelectChanged){\n            this.trackBefore(\"updated\", fromEl, toEl)\n            DOM.mergeFocusedInput(fromEl, toEl)\n            DOM.syncAttrsToProps(fromEl)\n            updates.push(fromEl)\n            DOM.applyStickyOperations(fromEl)\n            return false\n          } else {\n            // blur focused select if it changed so native UI is updated (ie safari won't update visible options)\n            if(focusedSelectChanged){ fromEl.blur() }\n            if(DOM.isPhxUpdate(toEl, phxUpdate, [\"append\", \"prepend\"])){\n              appendPrependUpdates.push(new DOMPostMorphRestorer(fromEl, toEl, toEl.getAttribute(phxUpdate)))\n            }\n\n            DOM.syncAttrsToProps(toEl)\n            DOM.applyStickyOperations(toEl)\n            this.trackBefore(\"updated\", fromEl, toEl)\n            return fromEl\n          }\n        }\n      }\n      morphdom(targetContainer, source, morphCallbacks)\n    }\n\n    this.trackBefore(\"added\", container)\n    this.trackBefore(\"updated\", container, container)\n\n    liveSocket.time(\"morphdom\", () => {\n      this.streams.forEach(([ref, inserts, deleteIds, reset]) => {\n        inserts.forEach(([key, streamAt, limit]) => {\n          this.streamInserts[key] = {ref, streamAt, limit, reset}\n        })\n        if(reset !== undefined){\n          DOM.all(container, `[${PHX_STREAM_REF}=\"${ref}\"]`, child => {\n            this.removeStreamChildElement(child)\n          })\n        }\n        deleteIds.forEach(id => {\n          let child = container.querySelector(`[id=\"${id}\"]`)\n          if(child){ this.removeStreamChildElement(child) }\n        })\n      })\n\n      // clear stream items from the dead render if they are not inserted again\n      if(isJoinPatch){\n        DOM.all(this.container, `[${phxUpdate}=${PHX_STREAM}]`, el => {\n          // make sure to only remove elements owned by the current view\n          // see https://github.com/phoenixframework/phoenix_live_view/issues/3047\n          this.liveSocket.owner(el, (view) => {\n            if(view === this.view){\n              Array.from(el.children).forEach(child => {\n                this.removeStreamChildElement(child)\n              })\n            }\n          })\n        })\n      }\n\n      morph.call(this, targetContainer, html)\n    })\n\n    if(liveSocket.isDebugEnabled()){\n      detectDuplicateIds()\n      // warn if there are any inputs named \"id\"\n      Array.from(document.querySelectorAll(\"input[name=id]\")).forEach(node => {\n        if(node.form){\n          console.error(\"Detected an input with name=\\\"id\\\" inside a form! This will cause problems when patching the DOM.\\n\", node)\n        }\n      })\n    }\n\n    if(appendPrependUpdates.length > 0){\n      liveSocket.time(\"post-morph append/prepend restoration\", () => {\n        appendPrependUpdates.forEach(update => update.perform())\n      })\n    }\n\n    liveSocket.silenceEvents(() => DOM.restoreFocus(focused, selectionStart, selectionEnd))\n    DOM.dispatchEvent(document, \"phx:update\")\n    added.forEach(el => this.trackAfter(\"added\", el))\n    updates.forEach(el => this.trackAfter(\"updated\", el))\n\n    this.transitionPendingRemoves()\n\n    if(externalFormTriggered){\n      liveSocket.unload()\n      // use prototype's submit in case there's a form control with name or id of \"submit\"\n      // https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/submit\n      Object.getPrototypeOf(externalFormTriggered).submit.call(externalFormTriggered)\n    }\n    return true\n  }\n\n  onNodeDiscarded(el){\n    // nested view handling\n    if(DOM.isPhxChild(el) || DOM.isPhxSticky(el)){ this.liveSocket.destroyViewByEl(el) }\n    this.trackAfter(\"discarded\", el)\n  }\n\n  maybePendingRemove(node){\n    if(node.getAttribute && node.getAttribute(this.phxRemove) !== null){\n      this.pendingRemoves.push(node)\n      return true\n    } else {\n      return false\n    }\n  }\n\n  removeStreamChildElement(child){\n    // we need to store the node if it is actually re-added in the same patch\n    // we do NOT want to execute phx-remove, we do NOT want to call onNodeDiscarded\n    if(this.streamInserts[child.id]){\n      this.streamComponentRestore[child.id] = child\n      child.remove()\n    } else {\n      // only remove the element now if it has no phx-remove binding\n      if(!this.maybePendingRemove(child)){\n        child.remove()\n        this.onNodeDiscarded(child)\n      }\n    }\n  }\n\n  getStreamInsert(el){\n    let insert = el.id ? this.streamInserts[el.id] : {}\n    return insert || {}\n  }\n\n  setStreamRef(el, ref){\n    DOM.putSticky(el, PHX_STREAM_REF, el => el.setAttribute(PHX_STREAM_REF, ref))\n  }\n\n  maybeReOrderStream(el, isNew){\n    let {ref, streamAt, reset} = this.getStreamInsert(el)\n    if(streamAt === undefined){ return }\n\n    // we need to set the PHX_STREAM_REF here as well as addChild is invoked only for parents\n    this.setStreamRef(el, ref)\n\n    if(!reset && !isNew){\n      // we only reorder if the element is new or it's a stream reset\n      return\n    }\n\n    // check if the element has a parent element;\n    // it doesn't if we are currently recursively morphing (restoring a saved stream child)\n    // because the element is not yet added to the real dom;\n    // reordering does not make sense in that case anyway\n    if(!el.parentElement){ return }\n\n    if(streamAt === 0){\n      el.parentElement.insertBefore(el, el.parentElement.firstElementChild)\n    } else if(streamAt > 0){\n      let children = Array.from(el.parentElement.children)\n      let oldIndex = children.indexOf(el)\n      if(streamAt >= children.length - 1){\n        el.parentElement.appendChild(el)\n      } else {\n        let sibling = children[streamAt]\n        if(oldIndex > streamAt){\n          el.parentElement.insertBefore(el, sibling)\n        } else {\n          el.parentElement.insertBefore(el, sibling.nextElementSibling)\n        }\n      }\n    }\n\n    this.maybeLimitStream(el)\n  }\n\n  maybeLimitStream(el){\n    let {limit} = this.getStreamInsert(el)\n    let children = limit !== null && Array.from(el.parentElement.children)\n    if(limit && limit < 0 && children.length > limit * -1){\n      children.slice(0, children.length + limit).forEach(child => this.removeStreamChildElement(child))\n    } else if(limit && limit >= 0 && children.length > limit){\n      children.slice(limit).forEach(child => this.removeStreamChildElement(child))\n    }\n  }\n\n  transitionPendingRemoves(){\n    let {pendingRemoves, liveSocket} = this\n    if(pendingRemoves.length > 0){\n      liveSocket.transitionRemoves(pendingRemoves, false, () => {\n        pendingRemoves.forEach(el => {\n          let child = DOM.firstPhxChild(el)\n          if(child){ liveSocket.destroyViewByEl(child) }\n          el.remove()\n        })\n        this.trackAfter(\"transitionsDiscarded\", pendingRemoves)\n      })\n    }\n  }\n\n  isChangedSelect(fromEl, toEl){\n    if(!(fromEl instanceof HTMLSelectElement) || fromEl.multiple){ return false }\n    if(fromEl.options.length !== toEl.options.length){ return true }\n\n    // keep the current value\n    toEl.value = fromEl.value\n\n    // in general we have to be very careful with using isEqualNode as it does not a reliable\n    // DOM tree equality check, but for selection attributes and options it works fine\n    return !fromEl.isEqualNode(toEl)\n  }\n\n  isCIDPatch(){ return this.cidPatch }\n\n  skipCIDSibling(el){\n    return el.nodeType === Node.ELEMENT_NODE && el.hasAttribute(PHX_SKIP)\n  }\n\n  targetCIDContainer(html){\n    if(!this.isCIDPatch()){ return }\n    let [first, ...rest] = DOM.findComponentNodeList(this.container, this.targetCID)\n    if(rest.length === 0 && DOM.childNodeLength(html) === 1){\n      return first\n    } else {\n      return first && first.parentNode\n    }\n  }\n\n  indexOf(parent, child){ return Array.from(parent.children).indexOf(child) }\n}\n", "import {\n  COMPONENTS,\n  DYNAMICS,\n  TEMPLATES,\n  EVENTS,\n  PHX_COMPONENT,\n  PHX_SKIP,\n  PHX_MAGIC_ID,\n  REPLY,\n  STATIC,\n  TITLE,\n  STREAM,\n  ROOT,\n} from \"./constants\"\n\nimport {\n  isObject,\n  logError,\n  isCid,\n} from \"./utils\"\n\nconst VOID_TAGS = new Set([\n  \"area\",\n  \"base\",\n  \"br\",\n  \"col\",\n  \"command\",\n  \"embed\",\n  \"hr\",\n  \"img\",\n  \"input\",\n  \"keygen\",\n  \"link\",\n  \"meta\",\n  \"param\",\n  \"source\",\n  \"track\",\n  \"wbr\"\n])\nconst quoteChars = new Set([\"'\", \"\\\"\"])\n\nexport let modifyRoot = (html, attrs, clearInnerHTML) => {\n  let i = 0\n  let insideComment = false\n  let beforeTag, afterTag, tag, tagNameEndsAt, id, newHTML\n\n  let lookahead = html.match(/^(\\s*(?:<!--.*?-->\\s*)*)<([^\\s\\/>]+)/)\n  if(lookahead === null){ throw new Error(`malformed html ${html}`) }\n\n  i = lookahead[0].length\n  beforeTag = lookahead[1]\n  tag = lookahead[2]\n  tagNameEndsAt = i\n\n  // Scan the opening tag for id, if there is any\n  for(i; i < html.length; i++){\n    if(html.charAt(i) === \">\" ){ break }\n    if(html.charAt(i) === \"=\"){\n      let isId = html.slice(i - 3, i) === \" id\"\n      i++\n      let char = html.charAt(i)\n      if(quoteChars.has(char)){\n        let attrStartsAt = i\n        i++\n        for(i; i < html.length; i++){\n          if(html.charAt(i) === char){ break }\n        }\n        if(isId){\n          id = html.slice(attrStartsAt + 1, i)\n          break\n        }\n      }\n    }\n  }\n\n  let closeAt = html.length - 1\n  insideComment = false\n  while(closeAt >= beforeTag.length + tag.length){\n    let char = html.charAt(closeAt)\n    if(insideComment){\n      if(char === \"-\" && html.slice(closeAt - 3, closeAt) === \"<!-\"){\n        insideComment = false\n        closeAt -= 4\n      } else {\n        closeAt -= 1\n      }\n    } else if(char === \">\" && html.slice(closeAt - 2, closeAt) === \"--\"){\n      insideComment = true\n      closeAt -= 3\n    } else if(char === \">\"){\n      break\n    } else {\n      closeAt -= 1\n    }\n  }\n  afterTag = html.slice(closeAt + 1, html.length)\n\n  let attrsStr =\n    Object.keys(attrs)\n      .map(attr => attrs[attr] === true ? attr : `${attr}=\"${attrs[attr]}\"`)\n      .join(\" \")\n\n  if(clearInnerHTML){\n    // Keep the id if any\n    let idAttrStr = id ? ` id=\"${id}\"` : \"\"\n    if(VOID_TAGS.has(tag)){\n      newHTML = `<${tag}${idAttrStr}${attrsStr === \"\" ? \"\" : \" \"}${attrsStr}/>`\n    } else {\n      newHTML = `<${tag}${idAttrStr}${attrsStr === \"\" ? \"\" : \" \"}${attrsStr}></${tag}>`\n    }\n  } else {\n    let rest = html.slice(tagNameEndsAt, closeAt + 1)\n    newHTML = `<${tag}${attrsStr === \"\" ? \"\" : \" \"}${attrsStr}${rest}`\n  }\n\n  return [newHTML, beforeTag, afterTag]\n}\n\nexport default class Rendered {\n  static extract(diff){\n    let {[REPLY]: reply, [EVENTS]: events, [TITLE]: title} = diff\n    delete diff[REPLY]\n    delete diff[EVENTS]\n    delete diff[TITLE]\n    return {diff, title, reply: reply || null, events: events || []}\n  }\n\n  constructor(viewId, rendered){\n    this.viewId = viewId\n    this.rendered = {}\n    this.magicId = 0\n    this.mergeDiff(rendered)\n  }\n\n  parentViewId(){ return this.viewId }\n\n  toString(onlyCids){\n    let [str, streams] = this.recursiveToString(this.rendered, this.rendered[COMPONENTS], onlyCids, true, {})\n    return [str, streams]\n  }\n\n  recursiveToString(rendered, components = rendered[COMPONENTS], onlyCids, changeTracking, rootAttrs){\n    onlyCids = onlyCids ? new Set(onlyCids) : null\n    let output = {buffer: \"\", components: components, onlyCids: onlyCids, streams: new Set()}\n    this.toOutputBuffer(rendered, null, output, changeTracking, rootAttrs)\n    return [output.buffer, output.streams]\n  }\n\n  componentCIDs(diff){ return Object.keys(diff[COMPONENTS] || {}).map(i => parseInt(i)) }\n\n  isComponentOnlyDiff(diff){\n    if(!diff[COMPONENTS]){ return false }\n    return Object.keys(diff).length === 1\n  }\n\n  getComponent(diff, cid){ return diff[COMPONENTS][cid] }\n\n  resetRender(cid){\n    // we are racing a component destroy, it could not exist, so\n    // make sure that we don't try to set reset on undefined\n    if(this.rendered[COMPONENTS][cid]){\n      this.rendered[COMPONENTS][cid].reset = true\n    }\n  }\n\n  mergeDiff(diff){\n    let newc = diff[COMPONENTS]\n    let cache = {}\n    delete diff[COMPONENTS]\n    this.rendered = this.mutableMerge(this.rendered, diff)\n    this.rendered[COMPONENTS] = this.rendered[COMPONENTS] || {}\n\n    if(newc){\n      let oldc = this.rendered[COMPONENTS]\n\n      for(let cid in newc){\n        newc[cid] = this.cachedFindComponent(cid, newc[cid], oldc, newc, cache)\n      }\n\n      for(let cid in newc){ oldc[cid] = newc[cid] }\n      diff[COMPONENTS] = newc\n    }\n  }\n\n  cachedFindComponent(cid, cdiff, oldc, newc, cache){\n    if(cache[cid]){\n      return cache[cid]\n    } else {\n      let ndiff, stat, scid = cdiff[STATIC]\n\n      if(isCid(scid)){\n        let tdiff\n\n        if(scid > 0){\n          tdiff = this.cachedFindComponent(scid, newc[scid], oldc, newc, cache)\n        } else {\n          tdiff = oldc[-scid]\n        }\n\n        stat = tdiff[STATIC]\n        ndiff = this.cloneMerge(tdiff, cdiff, true)\n        ndiff[STATIC] = stat\n      } else {\n        ndiff = cdiff[STATIC] !== undefined || oldc[cid] === undefined ?\n          cdiff : this.cloneMerge(oldc[cid], cdiff, false)\n      }\n\n      cache[cid] = ndiff\n      return ndiff\n    }\n  }\n\n  mutableMerge(target, source){\n    if(source[STATIC] !== undefined){\n      return source\n    } else {\n      this.doMutableMerge(target, source)\n      return target\n    }\n  }\n\n  doMutableMerge(target, source){\n    for(let key in source){\n      let val = source[key]\n      let targetVal = target[key]\n      let isObjVal = isObject(val)\n      if(isObjVal && val[STATIC] === undefined && isObject(targetVal)){\n        this.doMutableMerge(targetVal, val)\n      } else {\n        target[key] = val\n      }\n    }\n    if(target[ROOT]){\n      target.newRender = true\n    }\n  }\n\n  // Merges cid trees together, copying statics from source tree.\n  //\n  // The `pruneMagicId` is passed to control pruning the magicId of the\n  // target. We must always prune the magicId when we are sharing statics\n  // from another component. If not pruning, we replicate the logic from\n  // mutableMerge, where we set newRender to true if there is a root\n  // (effectively forcing the new version to be rendered instead of skipped)\n  //\n  cloneMerge(target, source, pruneMagicId){\n    let merged = {...target, ...source}\n    for(let key in merged){\n      let val = source[key]\n      let targetVal = target[key]\n      if(isObject(val) && val[STATIC] === undefined && isObject(targetVal)){\n        merged[key] = this.cloneMerge(targetVal, val, pruneMagicId)\n      } else if(val === undefined && isObject(targetVal)){\n        merged[key] = this.cloneMerge(targetVal, {}, pruneMagicId)\n      }\n    }\n    if(pruneMagicId){\n      delete merged.magicId\n      delete merged.newRender\n    } else if(target[ROOT]){\n      merged.newRender = true\n    }\n    return merged\n  }\n\n  componentToString(cid){\n    let [str, streams] = this.recursiveCIDToString(this.rendered[COMPONENTS], cid, null)\n    let [strippedHTML, _before, _after] = modifyRoot(str, {})\n    return [strippedHTML, streams]\n  }\n\n  pruneCIDs(cids){\n    cids.forEach(cid => delete this.rendered[COMPONENTS][cid])\n  }\n\n  // private\n\n  get(){ return this.rendered }\n\n  isNewFingerprint(diff = {}){ return !!diff[STATIC] }\n\n  templateStatic(part, templates){\n    if(typeof (part) === \"number\"){\n      return templates[part]\n    } else {\n      return part\n    }\n  }\n\n  nextMagicID(){\n    this.magicId++\n    return `m${this.magicId}-${this.parentViewId()}`\n  }\n\n  // Converts rendered tree to output buffer.\n  //\n  // changeTracking controls if we can apply the PHX_SKIP optimization.\n  // It is disabled for comprehensions since we must re-render the entire collection\n  // and no individual element is tracked inside the comprehension.\n  toOutputBuffer(rendered, templates, output, changeTracking, rootAttrs = {}){\n    if(rendered[DYNAMICS]){ return this.comprehensionToBuffer(rendered, templates, output) }\n    let {[STATIC]: statics} = rendered\n    statics = this.templateStatic(statics, templates)\n    let isRoot = rendered[ROOT]\n    let prevBuffer = output.buffer\n    if(isRoot){ output.buffer = \"\" }\n\n    // this condition is called when first rendering an optimizable function component.\n    // LC have their magicId previously set\n    if(changeTracking && isRoot && !rendered.magicId){\n      rendered.newRender = true\n      rendered.magicId = this.nextMagicID()\n    }\n\n    output.buffer += statics[0]\n    for(let i = 1; i < statics.length; i++){\n      this.dynamicToBuffer(rendered[i - 1], templates, output, changeTracking)\n      output.buffer += statics[i]\n    }\n\n    // Applies the root tag \"skip\" optimization if supported, which clears\n    // the root tag attributes and innerHTML, and only maintains the magicId.\n    // We can only skip when changeTracking is supported (outside of a comprehension),\n    // and when the root element hasn't experienced an unrendered merge (newRender true).\n    if(isRoot){\n      let skip = false\n      let attrs\n      // When a LC is re-added to the page, we need to re-render the entire LC tree,\n      // therefore changeTracking is false; however, we need to keep all the magicIds\n      // from any function component so the next time the LC is updated, we can apply\n      // the skip optimization\n      if(changeTracking || rendered.magicId){\n        skip = changeTracking && !rendered.newRender\n        attrs = {[PHX_MAGIC_ID]: rendered.magicId, ...rootAttrs}\n      } else {\n        attrs = rootAttrs\n      }\n      if(skip){ attrs[PHX_SKIP] = true }\n      let [newRoot, commentBefore, commentAfter] = modifyRoot(output.buffer, attrs, skip)\n      rendered.newRender = false\n      output.buffer = prevBuffer + commentBefore + newRoot + commentAfter\n    }\n  }\n\n  comprehensionToBuffer(rendered, templates, output){\n    let {[DYNAMICS]: dynamics, [STATIC]: statics, [STREAM]: stream} = rendered\n    let [_ref, _inserts, deleteIds, reset] = stream || [null, {}, [], null]\n    statics = this.templateStatic(statics, templates)\n    let compTemplates = templates || rendered[TEMPLATES]\n    for(let d = 0; d < dynamics.length; d++){\n      let dynamic = dynamics[d]\n      output.buffer += statics[0]\n      for(let i = 1; i < statics.length; i++){\n        // Inside a comprehension, we don't track how dynamics change\n        // over time (and features like streams would make that impossible\n        // unless we move the stream diffing away from morphdom),\n        // so we can't perform root change tracking.\n        let changeTracking = false\n        this.dynamicToBuffer(dynamic[i - 1], compTemplates, output, changeTracking)\n        output.buffer += statics[i]\n      }\n    }\n\n    if(stream !== undefined && (rendered[DYNAMICS].length > 0 || deleteIds.length > 0 || reset)){\n      delete rendered[STREAM]\n      rendered[DYNAMICS] = []\n      output.streams.add(stream)\n    }\n  }\n\n  dynamicToBuffer(rendered, templates, output, changeTracking){\n    if(typeof (rendered) === \"number\"){\n      let [str, streams] = this.recursiveCIDToString(output.components, rendered, output.onlyCids)\n      output.buffer += str\n      output.streams = new Set([...output.streams, ...streams])\n    } else if(isObject(rendered)){\n      this.toOutputBuffer(rendered, templates, output, changeTracking, {})\n    } else {\n      output.buffer += rendered\n    }\n  }\n\n  recursiveCIDToString(components, cid, onlyCids){\n    let component = components[cid] || logError(`no component for CID ${cid}`, components)\n    let attrs = {[PHX_COMPONENT]: cid}\n    let skip = onlyCids && !onlyCids.has(cid)\n    // Two optimization paths apply here:\n    //\n    //   1. The onlyCids optimization works by the server diff telling us only specific\n    //     cid's have changed. This allows us to skip rendering any component that hasn't changed,\n    //     which ultimately sets PHX_SKIP root attribute and avoids rendering the innerHTML.\n    //\n    //   2. The root PHX_SKIP optimization generalizes to all HEEx function components, and\n    //     works in the same PHX_SKIP attribute fashion as 1, but the newRender tracking is done\n    //     at the general diff merge level. If we merge a diff with new dynamics, we necessarily have\n    //     experienced a change which must be a newRender, and thus we can't skip the render.\n    //\n    // Both optimization flows apply here. newRender is set based on the onlyCids optimization, and\n    // we track a deterministic magicId based on the cid.\n    //\n    // changeTracking is about the entire tree\n    // newRender is about the current root in the tree\n    //\n    // By default changeTracking is enabled, but we special case the flow where the client is pruning\n    // cids and the server adds the component back. In such cases, we explicitly disable changeTracking\n    // with resetRender for this cid, then re-enable it after the recursive call to skip the optimization\n    // for the entire component tree.\n    component.newRender = !skip\n    component.magicId = `c${cid}-${this.parentViewId()}`\n    // enable change tracking as long as the component hasn't been reset\n    let changeTracking = !component.reset\n    let [html, streams] = this.recursiveToString(component, components, onlyCids, changeTracking, attrs)\n    // disable reset after we've rendered\n    delete component.reset\n\n    return [html, streams]\n  }\n}\n", "import DOM from \"./dom\"\nimport ARIA from \"./aria\"\n\nlet focusStack = []\nlet default_transition_time = 200\n\nlet JS = {\n  // private\n  exec(e, eventType, phxEvent, view, sourceEl, defaults){\n    let [defaultKind, defaultArgs] = defaults || [null, {callback: defaults && defaults.callback}]\n    let commands = phxEvent.charAt(0) === \"[\" ?\n      JSON.parse(phxEvent) : [[defaultKind, defaultArgs]]\n\n    commands.forEach(([kind, args]) => {\n      if(kind === defaultKind){\n        // always prefer the args, but keep existing keys from the defaultArgs\n        args = {...defaultArgs, ...args}\n        args.callback = args.callback || defaultArgs.callback\n      }\n      this.filterToEls(view.liveSocket, sourceEl, args).forEach(el => {\n        this[`exec_${kind}`](e, eventType, phxEvent, view, sourceEl, el, args)\n      })\n    })\n  },\n\n  isVisible(el){\n    return !!(el.offsetWidth || el.offsetHeight || el.getClientRects().length > 0)\n  },\n\n  // returns true if any part of the element is inside the viewport\n  isInViewport(el){\n    const rect = el.getBoundingClientRect()\n    const windowHeight = window.innerHeight || document.documentElement.clientHeight\n    const windowWidth = window.innerWidth || document.documentElement.clientWidth\n\n    return (\n      rect.right > 0 &&\n      rect.bottom > 0 &&\n      rect.left < windowWidth &&\n      rect.top < windowHeight\n    )\n  },\n\n  // private\n\n  // commands\n\n  exec_exec(e, eventType, phxEvent, view, sourceEl, el, {attr, to}){\n    let nodes = to ? DOM.all(document, to) : [sourceEl]\n    nodes.forEach(node => {\n      let encodedJS = node.getAttribute(attr)\n      if(!encodedJS){ throw new Error(`expected ${attr} to contain JS command on \"${to}\"`) }\n      view.liveSocket.execJS(node, encodedJS, eventType)\n    })\n  },\n\n  exec_dispatch(e, eventType, phxEvent, view, sourceEl, el, {event, detail, bubbles}){\n    detail = detail || {}\n    detail.dispatcher = sourceEl\n    DOM.dispatchEvent(el, event, {detail, bubbles})\n  },\n\n  exec_push(e, eventType, phxEvent, view, sourceEl, el, args){\n    let {event, data, target, page_loading, loading, value, dispatcher, callback} = args\n    let pushOpts = {loading, value, target, page_loading: !!page_loading}\n    let targetSrc = eventType === \"change\" && dispatcher ? dispatcher : sourceEl\n    let phxTarget = target || targetSrc.getAttribute(view.binding(\"target\")) || targetSrc\n    view.withinTargets(phxTarget, (targetView, targetCtx) => {\n      if(!targetView.isConnected()){ return }\n      if(eventType === \"change\"){\n        let {newCid, _target} = args\n        _target = _target || (DOM.isFormInput(sourceEl) ? sourceEl.name : undefined)\n        if(_target){ pushOpts._target = _target }\n        targetView.pushInput(sourceEl, targetCtx, newCid, event || phxEvent, pushOpts, callback)\n      } else if(eventType === \"submit\"){\n        let {submitter} = args\n        targetView.submitForm(sourceEl, targetCtx, event || phxEvent, submitter, pushOpts, callback)\n      } else {\n        targetView.pushEvent(eventType, sourceEl, targetCtx, event || phxEvent, data, pushOpts, callback)\n      }\n    })\n  },\n\n  exec_navigate(e, eventType, phxEvent, view, sourceEl, el, {href, replace}){\n    view.liveSocket.historyRedirect(e, href, replace ? \"replace\" : \"push\", null, sourceEl)\n  },\n\n  exec_patch(e, eventType, phxEvent, view, sourceEl, el, {href, replace}){\n    view.liveSocket.pushHistoryPatch(e, href, replace ? \"replace\" : \"push\", sourceEl)\n  },\n\n  exec_focus(e, eventType, phxEvent, view, sourceEl, el){\n    window.requestAnimationFrame(() => ARIA.attemptFocus(el))\n  },\n\n  exec_focus_first(e, eventType, phxEvent, view, sourceEl, el){\n    window.requestAnimationFrame(() => ARIA.focusFirstInteractive(el) || ARIA.focusFirst(el))\n  },\n\n  exec_push_focus(e, eventType, phxEvent, view, sourceEl, el){\n    window.requestAnimationFrame(() => focusStack.push(el || sourceEl))\n  },\n\n  exec_pop_focus(_e, _eventType, _phxEvent, _view, _sourceEl, _el){\n    window.requestAnimationFrame(() => {\n      const el = focusStack.pop()\n      if(el){ el.focus() }\n    })\n  },\n\n  exec_add_class(e, eventType, phxEvent, view, sourceEl, el, {names, transition, time, blocking}){\n    this.addOrRemoveClasses(el, names, [], transition, time, view, blocking)\n  },\n\n  exec_remove_class(e, eventType, phxEvent, view, sourceEl, el, {names, transition, time, blocking}){\n    this.addOrRemoveClasses(el, [], names, transition, time, view, blocking)\n  },\n\n  exec_toggle_class(e, eventType, phxEvent, view, sourceEl, el, {names, transition, time, blocking}){\n    this.toggleClasses(el, names, transition, time, view, blocking)\n  },\n\n  exec_toggle_attr(e, eventType, phxEvent, view, sourceEl, el, {attr: [attr, val1, val2]}){\n    this.toggleAttr(el, attr, val1, val2)\n  },\n\n  exec_transition(e, eventType, phxEvent, view, sourceEl, el, {time, transition, blocking}){\n    this.addOrRemoveClasses(el, [], [], transition, time, view, blocking)\n  },\n\n  exec_toggle(e, eventType, phxEvent, view, sourceEl, el, {display, ins, outs, time, blocking}){\n    this.toggle(eventType, view, el, display, ins, outs, time, blocking)\n  },\n\n  exec_show(e, eventType, phxEvent, view, sourceEl, el, {display, transition, time, blocking}){\n    this.show(eventType, view, el, display, transition, time, blocking)\n  },\n\n  exec_hide(e, eventType, phxEvent, view, sourceEl, el, {display, transition, time, blocking}){\n    this.hide(eventType, view, el, display, transition, time, blocking)\n  },\n\n  exec_set_attr(e, eventType, phxEvent, view, sourceEl, el, {attr: [attr, val]}){\n    this.setOrRemoveAttrs(el, [[attr, val]], [])\n  },\n\n  exec_remove_attr(e, eventType, phxEvent, view, sourceEl, el, {attr}){\n    this.setOrRemoveAttrs(el, [], [attr])\n  },\n\n  // utils for commands\n\n  show(eventType, view, el, display, transition, time, blocking){\n    if(!this.isVisible(el)){\n      this.toggle(eventType, view, el, display, transition, null, time, blocking)\n    }\n  },\n\n  hide(eventType, view, el, display, transition, time, blocking){\n    if(this.isVisible(el)){\n      this.toggle(eventType, view, el, display, null, transition, time, blocking)\n    }\n  },\n\n  toggle(eventType, view, el, display, ins, outs, time, blocking){\n    time = time || default_transition_time\n    let [inClasses, inStartClasses, inEndClasses] = ins || [[], [], []]\n    let [outClasses, outStartClasses, outEndClasses] = outs || [[], [], []]\n    if(inClasses.length > 0 || outClasses.length > 0){\n      if(this.isVisible(el)){\n        let onStart = () => {\n          this.addOrRemoveClasses(el, outStartClasses, inClasses.concat(inStartClasses).concat(inEndClasses))\n          window.requestAnimationFrame(() => {\n            this.addOrRemoveClasses(el, outClasses, [])\n            window.requestAnimationFrame(() => this.addOrRemoveClasses(el, outEndClasses, outStartClasses))\n          })\n        }\n        let onEnd = () => {\n          this.addOrRemoveClasses(el, [], outClasses.concat(outEndClasses))\n          DOM.putSticky(el, \"toggle\", currentEl => currentEl.style.display = \"none\")\n          el.dispatchEvent(new Event(\"phx:hide-end\"))\n        }\n        el.dispatchEvent(new Event(\"phx:hide-start\"))\n        if(blocking === false){\n          onStart()\n          setTimeout(onEnd, time)\n        } else {\n          view.transition(time, onStart, onEnd)\n        }\n      } else {\n        if(eventType === \"remove\"){ return }\n        let onStart = () => {\n          this.addOrRemoveClasses(el, inStartClasses, outClasses.concat(outStartClasses).concat(outEndClasses))\n          let stickyDisplay = display || this.defaultDisplay(el)\n          DOM.putSticky(el, \"toggle\", currentEl => currentEl.style.display = stickyDisplay)\n          window.requestAnimationFrame(() => {\n            this.addOrRemoveClasses(el, inClasses, [])\n            window.requestAnimationFrame(() => this.addOrRemoveClasses(el, inEndClasses, inStartClasses))\n          })\n        }\n        let onEnd = () => {\n          this.addOrRemoveClasses(el, [], inClasses.concat(inEndClasses))\n          el.dispatchEvent(new Event(\"phx:show-end\"))\n        }\n        el.dispatchEvent(new Event(\"phx:show-start\"))\n        if(blocking === false){\n          onStart()\n          setTimeout(onEnd, time)\n        } else {\n          view.transition(time, onStart, onEnd)\n        }\n      }\n    } else {\n      if(this.isVisible(el)){\n        window.requestAnimationFrame(() => {\n          el.dispatchEvent(new Event(\"phx:hide-start\"))\n          DOM.putSticky(el, \"toggle\", currentEl => currentEl.style.display = \"none\")\n          el.dispatchEvent(new Event(\"phx:hide-end\"))\n        })\n      } else {\n        window.requestAnimationFrame(() => {\n          el.dispatchEvent(new Event(\"phx:show-start\"))\n          let stickyDisplay = display || this.defaultDisplay(el)\n          DOM.putSticky(el, \"toggle\", currentEl => currentEl.style.display = stickyDisplay)\n          el.dispatchEvent(new Event(\"phx:show-end\"))\n        })\n      }\n    }\n  },\n\n  toggleClasses(el, classes, transition, time, view, blocking){\n    window.requestAnimationFrame(() => {\n      let [prevAdds, prevRemoves] = DOM.getSticky(el, \"classes\", [[], []])\n      let newAdds = classes.filter(name => prevAdds.indexOf(name) < 0 && !el.classList.contains(name))\n      let newRemoves = classes.filter(name => prevRemoves.indexOf(name) < 0 && el.classList.contains(name))\n      this.addOrRemoveClasses(el, newAdds, newRemoves, transition, time, view, blocking)\n    })\n  },\n\n  toggleAttr(el, attr, val1, val2){\n    if(el.hasAttribute(attr)){\n      if(val2 !== undefined){\n        // toggle between val1 and val2\n        if(el.getAttribute(attr) === val1){\n          this.setOrRemoveAttrs(el, [[attr, val2]], [])\n        } else {\n          this.setOrRemoveAttrs(el, [[attr, val1]], [])\n        }\n      } else {\n        // remove attr\n        this.setOrRemoveAttrs(el, [], [attr])\n      }\n    } else {\n      this.setOrRemoveAttrs(el, [[attr, val1]], [])\n    }\n  },\n\n  addOrRemoveClasses(el, adds, removes, transition, time, view, blocking){\n    time = time || default_transition_time\n    let [transitionRun, transitionStart, transitionEnd] = transition || [[], [], []]\n    if(transitionRun.length > 0){\n      let onStart = () => {\n        this.addOrRemoveClasses(el, transitionStart, [].concat(transitionRun).concat(transitionEnd))\n        window.requestAnimationFrame(() => {\n          this.addOrRemoveClasses(el, transitionRun, [])\n          window.requestAnimationFrame(() => this.addOrRemoveClasses(el, transitionEnd, transitionStart))\n        })\n      }\n      let onDone = () => this.addOrRemoveClasses(el, adds.concat(transitionEnd), removes.concat(transitionRun).concat(transitionStart))\n      if(blocking === false){\n        onStart()\n        setTimeout(onDone, time)\n      } else {\n        view.transition(time, onStart, onDone)\n      }\n      return\n    }\n\n    window.requestAnimationFrame(() => {\n      let [prevAdds, prevRemoves] = DOM.getSticky(el, \"classes\", [[], []])\n      let keepAdds = adds.filter(name => prevAdds.indexOf(name) < 0 && !el.classList.contains(name))\n      let keepRemoves = removes.filter(name => prevRemoves.indexOf(name) < 0 && el.classList.contains(name))\n      let newAdds = prevAdds.filter(name => removes.indexOf(name) < 0).concat(keepAdds)\n      let newRemoves = prevRemoves.filter(name => adds.indexOf(name) < 0).concat(keepRemoves)\n\n      DOM.putSticky(el, \"classes\", currentEl => {\n        currentEl.classList.remove(...newRemoves)\n        currentEl.classList.add(...newAdds)\n        return [newAdds, newRemoves]\n      })\n    })\n  },\n\n  setOrRemoveAttrs(el, sets, removes){\n    let [prevSets, prevRemoves] = DOM.getSticky(el, \"attrs\", [[], []])\n\n    let alteredAttrs = sets.map(([attr, _val]) => attr).concat(removes)\n    let newSets = prevSets.filter(([attr, _val]) => !alteredAttrs.includes(attr)).concat(sets)\n    let newRemoves = prevRemoves.filter((attr) => !alteredAttrs.includes(attr)).concat(removes)\n\n    DOM.putSticky(el, \"attrs\", currentEl => {\n      newRemoves.forEach(attr => currentEl.removeAttribute(attr))\n      newSets.forEach(([attr, val]) => currentEl.setAttribute(attr, val))\n      return [newSets, newRemoves]\n    })\n  },\n\n  hasAllClasses(el, classes){ return classes.every(name => el.classList.contains(name)) },\n\n  isToggledOut(el, outClasses){\n    return !this.isVisible(el) || this.hasAllClasses(el, outClasses)\n  },\n\n  filterToEls(liveSocket, sourceEl, {to}){\n    let defaultQuery = () => {\n      if(typeof(to) === \"string\"){\n        return document.querySelectorAll(to)\n      } else if(to.closest){\n        let toEl = sourceEl.closest(to.closest)\n        return toEl ? [toEl] : []\n      } else if(to.inner){\n        return sourceEl.querySelectorAll(to.inner)\n      }\n    }\n    return to ? liveSocket.jsQuerySelectorAll(sourceEl, to, defaultQuery) : [sourceEl]\n  },\n\n  defaultDisplay(el){\n    return {tr: \"table-row\", td: \"table-cell\"}[el.tagName.toLowerCase()] || \"block\"\n  },\n\n  transitionClasses(val){\n    if(!val){ return null }\n\n    let [trans, tStart, tEnd] = Array.isArray(val) ? val : [val.split(\" \"), [], []]\n    trans = Array.isArray(trans) ? trans : trans.split(\" \")\n    tStart = Array.isArray(tStart) ? tStart : tStart.split(\" \")\n    tEnd = Array.isArray(tEnd) ? tEnd : tEnd.split(\" \")\n    return [trans, tStart, tEnd]\n  }\n}\n\nexport default JS\n", "import JS from \"./js\"\nimport DOM from \"./dom\"\n\nconst HOOK_ID = \"hookId\"\n\nlet viewHookID = 1\nexport default class ViewHook {\n  static makeID(){ return viewHookID++ }\n  static elementID(el){ return DOM.private(el, HOOK_ID) }\n\n  constructor(view, el, callbacks){\n    this.el = el\n    this.__attachView(view)\n    this.__callbacks = callbacks\n    this.__listeners = new Set()\n    this.__isDisconnected = false\n    DOM.putPrivate(this.el, HOOK_ID, this.constructor.makeID())\n    for(let key in this.__callbacks){ this[key] = this.__callbacks[key] }\n  }\n\n  __attachView(view){\n    if(view){\n      this.__view = () => view\n      this.liveSocket = view.liveSocket\n    } else {\n      this.__view = () => {\n        throw new Error(`hook not yet attached to a live view: ${this.el.outerHTML}`)\n      }\n      this.liveSocket = null\n    }\n  }\n\n  __mounted(){ this.mounted && this.mounted() }\n  __updated(){ this.updated && this.updated() }\n  __beforeUpdate(){ this.beforeUpdate && this.beforeUpdate() }\n  __destroyed(){\n    this.destroyed && this.destroyed()\n    DOM.deletePrivate(this.el, HOOK_ID) // https://github.com/phoenixframework/phoenix_live_view/issues/3496\n  }\n  __reconnected(){\n    if(this.__isDisconnected){\n      this.__isDisconnected = false\n      this.reconnected && this.reconnected()\n    }\n  }\n  __disconnected(){\n    this.__isDisconnected = true\n    this.disconnected && this.disconnected()\n  }\n\n  /**\n   * Binds the hook to JS commands.\n   *\n   * @param {ViewHook} hook - The ViewHook instance to bind.\n   *\n   * @returns {Object} An object with methods to manipulate the DOM and execute JavaScript.\n   */\n  js(){\n    let hook = this\n\n    return {\n      /**\n       * Executes encoded JavaScript in the context of the hook element.\n       *\n       * @param {string} encodedJS - The encoded JavaScript string to execute.\n       */\n      exec(encodedJS){\n        hook.__view().liveSocket.execJS(hook.el, encodedJS, \"hook\")\n      },\n\n      /**\n       * Shows an element.\n       *\n       * @param {HTMLElement} el - The element to show.\n       * @param {Object} [opts={}] - Optional settings.\n       * @param {string} [opts.display] - The CSS display value to set. Defaults \"block\".\n       * @param {string} [opts.transition] - The CSS transition classes to set when showing.\n       * @param {number} [opts.time] - The transition duration in milliseconds. Defaults 200.\n       * @param {boolean} [opts.blocking] - The boolean flag to block the UI during the transition.\n       *  Defaults `true`.\n       */\n      show(el, opts = {}){\n        let owner = hook.__view().liveSocket.owner(el)\n        JS.show(\"hook\", owner, el, opts.display, opts.transition, opts.time, opts.blocking)\n      },\n\n      /**\n       * Hides an element.\n       *\n       * @param {HTMLElement} el - The element to hide.\n       * @param {Object} [opts={}] - Optional settings.\n       * @param {string} [opts.transition] - The CSS transition classes to set when hiding.\n       * @param {number} [opts.time] - The transition duration in milliseconds. Defaults 200.\n       * @param {boolean} [opts.blocking] - The boolean flag to block the UI during the transition.\n       *   Defaults `true`.\n       */\n      hide(el, opts = {}){\n        let owner = hook.__view().liveSocket.owner(el)\n        JS.hide(\"hook\", owner, el, null, opts.transition, opts.time, opts.blocking)\n      },\n\n      /**\n       * Toggles the visibility of an element.\n       *\n       * @param {HTMLElement} el - The element to toggle.\n       * @param {Object} [opts={}] - Optional settings.\n       * @param {string} [opts.display] - The CSS display value to set. Defaults \"block\".\n       * @param {string} [opts.in] - The CSS transition classes for showing.\n       *   Accepts either the string of classes to apply when toggling in, or\n       *   a 3-tuple containing the transition class, the class to apply\n       *   to start the transition, and the ending transition class, such as:\n       *\n       *       [\"ease-out duration-300\", \"opacity-0\", \"opacity-100\"]\n       *\n       * @param {string} [opts.out] - The CSS transition classes for hiding.\n       *   Accepts either string of classes to apply when toggling out, or\n       *   a 3-tuple containing the transition class, the class to apply\n       *   to start the transition, and the ending transition class, such as:\n       *\n       *       [\"ease-out duration-300\", \"opacity-100\", \"opacity-0\"]\n       *\n       * @param {number} [opts.time] - The transition duration in milliseconds.\n       *\n       * @param {boolean} [opts.blocking] - The boolean flag to block the UI during the transition.\n       *   Defaults `true`.\n       */\n      toggle(el, opts = {}){\n        let owner = hook.__view().liveSocket.owner(el)\n        opts.in = JS.transitionClasses(opts.in)\n        opts.out = JS.transitionClasses(opts.out)\n        JS.toggle(\"hook\", owner, el, opts.display, opts.in, opts.out, opts.time, opts.blocking)\n      },\n\n      /**\n       * Adds CSS classes to an element.\n       *\n       * @param {HTMLElement} el - The element to add classes to.\n       * @param {string|string[]} names - The class name(s) to add.\n       * @param {Object} [opts={}] - Optional settings.\n       * @param {string} [opts.transition] - The CSS transition property to set.\n       *   Accepts a string of classes to apply when adding classes or\n       *   a 3-tuple containing the transition class, the class to apply\n       *   to start the transition, and the ending transition class, such as:\n       *\n       *       [\"ease-out duration-300\", \"opacity-0\", \"opacity-100\"]\n       *\n       * @param {number} [opts.time] - The transition duration in milliseconds.\n       * @param {boolean} [opts.blocking] - The boolean flag to block the UI during the transition.\n       *   Defaults `true`.\n       */\n      addClass(el, names, opts = {}){\n        names = Array.isArray(names) ? names : names.split(\" \")\n        let owner = hook.__view().liveSocket.owner(el)\n        JS.addOrRemoveClasses(el, names, [], opts.transition, opts.time, owner, opts.blocking)\n      },\n\n      /**\n       * Removes CSS classes from an element.\n       *\n       * @param {HTMLElement} el - The element to remove classes from.\n       * @param {string|string[]} names - The class name(s) to remove.\n       * @param {Object} [opts={}] - Optional settings.\n       * @param {string} [opts.transition] - The CSS transition classes to set.\n       *   Accepts a string of classes to apply when removing classes or\n       *   a 3-tuple containing the transition class, the class to apply\n       *   to start the transition, and the ending transition class, such as:\n       *\n       *       [\"ease-out duration-300\", \"opacity-100\", \"opacity-0\"]\n       *\n       * @param {number} [opts.time] - The transition duration in milliseconds.\n       * @param {boolean} [opts.blocking] - The boolean flag to block the UI during the transition.\n       *   Defaults `true`.\n       */\n      removeClass(el, names, opts = {}){\n        opts.transition = JS.transitionClasses(opts.transition)\n        names = Array.isArray(names) ? names : names.split(\" \")\n        let owner = hook.__view().liveSocket.owner(el)\n        JS.addOrRemoveClasses(el, [], names, opts.transition, opts.time, owner, opts.blocking)\n      },\n\n      /**\n       * Toggles CSS classes on an element.\n       *\n       * @param {HTMLElement} el - The element to toggle classes on.\n       * @param {string|string[]} names - The class name(s) to toggle.\n       * @param {Object} [opts={}] - Optional settings.\n       * @param {string} [opts.transition] - The CSS transition classes to set.\n       *   Accepts a string of classes to apply when toggling classes or\n       *   a 3-tuple containing the transition class, the class to apply\n       *   to start the transition, and the ending transition class, such as:\n       *\n       *       [\"ease-out duration-300\", \"opacity-100\", \"opacity-0\"]\n       *\n       * @param {number} [opts.time] - The transition duration in milliseconds.\n       * @param {boolean} [opts.blocking] - The boolean flag to block the UI during the transition.\n       *   Defaults `true`.\n       */\n      toggleClass(el, names, opts = {}){\n        opts.transition = JS.transitionClasses(opts.transition)\n        names = Array.isArray(names) ? names : names.split(\" \")\n        let owner = hook.__view().liveSocket.owner(el)\n        JS.toggleClasses(el, names, opts.transition, opts.time, owner, opts.blocking)\n      },\n\n      /**\n       * Applies a CSS transition to an element.\n       *\n       * @param {HTMLElement} el - The element to apply the transition to.\n       * @param {string|string[]} transition - The transition class(es) to apply.\n       *   Accepts a string of classes to apply when transitioning or\n       *   a 3-tuple containing the transition class, the class to apply\n       *   to start the transition, and the ending transition class, such as:\n       *\n       *       [\"ease-out duration-300\", \"opacity-100\", \"opacity-0\"]\n       *\n       * @param {Object} [opts={}] - Optional settings.\n       * @param {number} [opts.time] - The transition duration in milliseconds.\n       * @param {boolean} [opts.blocking] - The boolean flag to block the UI during the transition.\n       *   Defaults `true`.\n       */\n      transition(el, transition, opts = {}){\n        let owner = hook.__view().liveSocket.owner(el)\n        JS.addOrRemoveClasses(el, [], [], JS.transitionClasses(transition), opts.time, owner, opts.blocking)\n      },\n\n      /**\n       * Sets an attribute on an element.\n       *\n       * @param {HTMLElement} el - The element to set the attribute on.\n       * @param {string} attr - The attribute name to set.\n       * @param {string} val - The value to set for the attribute.\n       */\n      setAttribute(el, attr, val){ JS.setOrRemoveAttrs(el, [[attr, val]], []) },\n\n      /**\n       * Removes an attribute from an element.\n       *\n       * @param {HTMLElement} el - The element to remove the attribute from.\n       * @param {string} attr - The attribute name to remove.\n       */\n      removeAttribute(el, attr){ JS.setOrRemoveAttrs(el, [], [attr]) },\n\n      /**\n       * Toggles an attribute on an element between two values.\n       *\n       * @param {HTMLElement} el - The element to toggle the attribute on.\n       * @param {string} attr - The attribute name to toggle.\n       * @param {string} val1 - The first value to toggle between.\n       * @param {string} val2 - The second value to toggle between.\n       */\n      toggleAttribute(el, attr, val1, val2){ JS.toggleAttr(el, attr, val1, val2) },\n    }\n  }\n\n  pushEvent(event, payload = {}, onReply){\n    if(onReply === undefined){\n      return new Promise((resolve, reject) => {\n        try {\n          const ref = this.__view().pushHookEvent(this.el, null, event, payload, (reply, _ref) => resolve(reply))\n          if(ref === false){\n            reject(new Error(\"unable to push hook event. LiveView not connected\"))\n          }\n        } catch (error){\n          reject(error)\n        }\n      })\n    }\n    return this.__view().pushHookEvent(this.el, null, event, payload, onReply)\n  }\n\n  pushEventTo(phxTarget, event, payload = {}, onReply){\n    if(onReply === undefined){\n      return new Promise((resolve, reject) => {\n        try {\n          this.__view().withinTargets(phxTarget, (view, targetCtx) => {\n            const ref = view.pushHookEvent(this.el, targetCtx, event, payload, (reply, _ref) => resolve(reply))\n            if(ref === false){\n              reject(new Error(\"unable to push hook event. LiveView not connected\"))\n            }\n          })\n        } catch (error){\n          reject(error)\n        }\n      })\n    }\n    return this.__view().withinTargets(phxTarget, (view, targetCtx) => {\n      return view.pushHookEvent(this.el, targetCtx, event, payload, onReply)\n    })\n  }\n\n  handleEvent(event, callback){\n    let callbackRef = (customEvent, bypass) => bypass ? event : callback(customEvent.detail)\n    window.addEventListener(`phx:${event}`, callbackRef)\n    this.__listeners.add(callbackRef)\n    return callbackRef\n  }\n\n  removeHandleEvent(callbackRef){\n    let event = callbackRef(null, true)\n    window.removeEventListener(`phx:${event}`, callbackRef)\n    this.__listeners.delete(callbackRef)\n  }\n\n  upload(name, files){\n    return this.__view().dispatchUploads(null, name, files)\n  }\n\n  uploadTo(phxTarget, name, files){\n    return this.__view().withinTargets(phxTarget, (view, targetCtx) => {\n      view.dispatchUploads(targetCtx, name, files)\n    })\n  }\n\n  __cleanup__(){\n    this.__listeners.forEach(callbackRef => this.removeHandleEvent(callbackRef))\n  }\n}\n", "import {\n  BEFORE_UNLOAD_LOADER_TIMEOUT,\n  CHECKABLE_INPUTS,\n  CONSECUTIVE_RELOADS,\n  PHX_AUTO_RECOVER,\n  PHX_COMPONENT,\n  PHX_CONNECTED_CLASS,\n  PHX_DISABLE_WITH,\n  PHX_DISABLE_WITH_RESTORE,\n  PHX_DISABLED,\n  PHX_LOADING_CLASS,\n  PHX_ERROR_CLASS,\n  PHX_CLIENT_ERROR_CLASS,\n  PHX_SERVER_ERROR_CLASS,\n  PHX_HAS_FOCUSED,\n  PHX_HAS_SUBMITTED,\n  PHX_HOOK,\n  PHX_PARENT_ID,\n  PHX_PROGRESS,\n  PHX_READONLY,\n  PHX_REF_LOADING,\n  PHX_REF_SRC,\n  PHX_REF_LOCK,\n  PHX_ROOT_ID,\n  PHX_SESSION,\n  PHX_STATIC,\n  PHX_TRACK_STATIC,\n  PHX_TRACK_UPLOADS,\n  PHX_UPDATE,\n  PHX_UPLOAD_REF,\n  PHX_VIEW_SELECTOR,\n  PHX_MAIN,\n  PHX_MOUNTED,\n  PUSH_TIMEOUT,\n  PHX_VIEWPORT_TOP,\n  PHX_VIEWPORT_BOTTOM,\n  MAX_CHILD_JOIN_ATTEMPTS\n} from \"./constants\"\n\nimport {\n  clone,\n  closestPhxBinding,\n  isEmpty,\n  isEqualObj,\n  logError,\n  maybe,\n  isCid,\n} from \"./utils\"\n\nimport Browser from \"./browser\"\nimport DOM from \"./dom\"\nimport ElementRef from \"./element_ref\"\nimport DOMPatch from \"./dom_patch\"\nimport LiveUploader from \"./live_uploader\"\nimport Rendered from \"./rendered\"\nimport ViewHook from \"./view_hook\"\n\nexport let prependFormDataKey = (key, prefix) => {\n  let isArray = key.endsWith(\"[]\")\n  // Remove the \"[]\" if it's an array\n  let baseKey = isArray ? key.slice(0, -2) : key\n  // Replace last occurrence of key before a closing bracket or the end with key plus suffix\n  baseKey = baseKey.replace(/([^\\[\\]]+)(\\]?$)/, `${prefix}$1$2`)\n  // Add back the \"[]\" if it was an array\n  if(isArray){ baseKey += \"[]\" }\n  return baseKey\n}\n\nlet serializeForm = (form, metadata, onlyNames = []) => {\n  const {submitter, ...meta} = metadata\n\n  // We must inject the submitter in the order that it exists in the DOM\n  // relative to other inputs. For example, for checkbox groups, the order must be maintained.\n  let injectedElement\n  if(submitter && submitter.name){\n    const input = document.createElement(\"input\")\n    input.type = \"hidden\"\n    // set the form attribute if the submitter has one;\n    // this can happen if the element is outside the actual form element\n    const formId = submitter.getAttribute(\"form\")\n    if(formId){\n      input.setAttribute(\"form\", formId)\n    }\n    input.name = submitter.name\n    input.value = submitter.value\n    submitter.parentElement.insertBefore(input, submitter)\n    injectedElement = input\n  }\n\n  const formData = new FormData(form)\n  const toRemove = []\n\n  formData.forEach((val, key, _index) => {\n    if(val instanceof File){ toRemove.push(key) }\n  })\n\n  // Cleanup after building fileData\n  toRemove.forEach(key => formData.delete(key))\n\n  const params = new URLSearchParams()\n\n  let elements = Array.from(form.elements)\n  for(let [key, val] of formData.entries()){\n    if(onlyNames.length === 0 || onlyNames.indexOf(key) >= 0){\n      let inputs = elements.filter(input => input.name === key)\n      let isUnused = !inputs.some(input => (DOM.private(input, PHX_HAS_FOCUSED) || DOM.private(input, PHX_HAS_SUBMITTED)))\n      let hidden = inputs.every(input => input.type === \"hidden\")\n      if(isUnused && !(submitter && submitter.name == key) && !hidden){\n        params.append(prependFormDataKey(key, \"_unused_\"), \"\")\n      }\n      params.append(key, val)\n    }\n  }\n\n  // remove the injected element again\n  // (it would be removed by the next dom patch anyway, but this is cleaner)\n  if(submitter && injectedElement){\n    submitter.parentElement.removeChild(injectedElement)\n  }\n\n  for(let metaKey in meta){ params.append(metaKey, meta[metaKey]) }\n\n  return params.toString()\n}\n\nexport default class View {\n  static closestView(el){\n    let liveViewEl = el.closest(PHX_VIEW_SELECTOR)\n    return liveViewEl ? DOM.private(liveViewEl, \"view\") : null\n  }\n\n  constructor(el, liveSocket, parentView, flash, liveReferer){\n    this.isDead = false\n    this.liveSocket = liveSocket\n    this.flash = flash\n    this.parent = parentView\n    this.root = parentView ? parentView.root : this\n    this.el = el\n    DOM.putPrivate(this.el, \"view\", this)\n    this.id = this.el.id\n    this.ref = 0\n    this.lastAckRef = null\n    this.childJoins = 0\n    this.loaderTimer = null\n    this.pendingDiffs = []\n    this.pendingForms = new Set()\n    this.redirect = false\n    this.href = null\n    this.joinCount = this.parent ? this.parent.joinCount - 1 : 0\n    this.joinAttempts = 0\n    this.joinPending = true\n    this.destroyed = false\n    this.joinCallback = function(onDone){ onDone && onDone() }\n    this.stopCallback = function(){ }\n    this.pendingJoinOps = this.parent ? null : []\n    this.viewHooks = {}\n    this.formSubmits = []\n    this.children = this.parent ? null : {}\n    this.root.children[this.id] = {}\n    this.formsForRecovery = {}\n    this.channel = this.liveSocket.channel(`lv:${this.id}`, () => {\n      let url = this.href && this.expandURL(this.href)\n      return {\n        redirect: this.redirect ? url : undefined,\n        url: this.redirect ? undefined : url || undefined,\n        params: this.connectParams(liveReferer),\n        session: this.getSession(),\n        static: this.getStatic(),\n        flash: this.flash,\n      }\n    })\n  }\n\n  setHref(href){ this.href = href }\n\n  setRedirect(href){\n    this.redirect = true\n    this.href = href\n  }\n\n  isMain(){ return this.el.hasAttribute(PHX_MAIN) }\n\n  connectParams(liveReferer){\n    let params = this.liveSocket.params(this.el)\n    let manifest =\n      DOM.all(document, `[${this.binding(PHX_TRACK_STATIC)}]`)\n        .map(node => node.src || node.href).filter(url => typeof (url) === \"string\")\n\n    if(manifest.length > 0){ params[\"_track_static\"] = manifest }\n    params[\"_mounts\"] = this.joinCount\n    params[\"_mount_attempts\"] = this.joinAttempts\n    params[\"_live_referer\"] = liveReferer\n    this.joinAttempts++\n\n    return params\n  }\n\n  isConnected(){ return this.channel.canPush() }\n\n  getSession(){ return this.el.getAttribute(PHX_SESSION) }\n\n  getStatic(){\n    let val = this.el.getAttribute(PHX_STATIC)\n    return val === \"\" ? null : val\n  }\n\n  destroy(callback = function (){ }){\n    this.destroyAllChildren()\n    this.destroyed = true\n    delete this.root.children[this.id]\n    if(this.parent){ delete this.root.children[this.parent.id][this.id] }\n    clearTimeout(this.loaderTimer)\n    let onFinished = () => {\n      callback()\n      for(let id in this.viewHooks){\n        this.destroyHook(this.viewHooks[id])\n      }\n    }\n\n    DOM.markPhxChildDestroyed(this.el)\n\n    this.log(\"destroyed\", () => [\"the child has been removed from the parent\"])\n    this.channel.leave()\n      .receive(\"ok\", onFinished)\n      .receive(\"error\", onFinished)\n      .receive(\"timeout\", onFinished)\n  }\n\n  setContainerClasses(...classes){\n    this.el.classList.remove(\n      PHX_CONNECTED_CLASS,\n      PHX_LOADING_CLASS,\n      PHX_ERROR_CLASS,\n      PHX_CLIENT_ERROR_CLASS,\n      PHX_SERVER_ERROR_CLASS\n    )\n    this.el.classList.add(...classes)\n  }\n\n  showLoader(timeout){\n    clearTimeout(this.loaderTimer)\n    if(timeout){\n      this.loaderTimer = setTimeout(() => this.showLoader(), timeout)\n    } else {\n      for(let id in this.viewHooks){ this.viewHooks[id].__disconnected() }\n      this.setContainerClasses(PHX_LOADING_CLASS)\n    }\n  }\n\n  execAll(binding){\n    DOM.all(this.el, `[${binding}]`, el => this.liveSocket.execJS(el, el.getAttribute(binding)))\n  }\n\n  hideLoader(){\n    clearTimeout(this.loaderTimer)\n    this.setContainerClasses(PHX_CONNECTED_CLASS)\n    this.execAll(this.binding(\"connected\"))\n  }\n\n  triggerReconnected(){\n    for(let id in this.viewHooks){ this.viewHooks[id].__reconnected() }\n  }\n\n  log(kind, msgCallback){\n    this.liveSocket.log(this, kind, msgCallback)\n  }\n\n  transition(time, onStart, onDone = function(){}){\n    this.liveSocket.transition(time, onStart, onDone)\n  }\n\n  // calls the callback with the view and target element for the given phxTarget\n  // targets can be:\n  //  * an element itself, then it is simply passed to liveSocket.owner;\n  //  * a CID (Component ID), then we first search the component's element in the DOM\n  //  * a selector, then we search the selector in the DOM and call the callback\n  //    for each element found with the corresponding owner view\n  withinTargets(phxTarget, callback, dom = document, viewEl){\n    // in the form recovery case we search in a template fragment instead of\n    // the real dom, therefore we optionally pass dom and viewEl\n\n    if(phxTarget instanceof HTMLElement || phxTarget instanceof SVGElement){\n      return this.liveSocket.owner(phxTarget, view => callback(view, phxTarget))\n    }\n\n    if(isCid(phxTarget)){\n      let targets = DOM.findComponentNodeList(viewEl || this.el, phxTarget)\n      if(targets.length === 0){\n        logError(`no component found matching phx-target of ${phxTarget}`)\n      } else {\n        callback(this, parseInt(phxTarget))\n      }\n    } else {\n      let targets = Array.from(dom.querySelectorAll(phxTarget))\n      if(targets.length === 0){ logError(`nothing found matching the phx-target selector \"${phxTarget}\"`) }\n      targets.forEach(target => this.liveSocket.owner(target, view => callback(view, target)))\n    }\n  }\n\n  applyDiff(type, rawDiff, callback){\n    this.log(type, () => [\"\", clone(rawDiff)])\n    let {diff, reply, events, title} = Rendered.extract(rawDiff)\n    callback({diff, reply, events})\n    if(typeof title === \"string\" || type == \"mount\"){ window.requestAnimationFrame(() => DOM.putTitle(title)) }\n  }\n\n  onJoin(resp){\n    let {rendered, container, liveview_version} = resp\n    if(container){\n      let [tag, attrs] = container\n      this.el = DOM.replaceRootContainer(this.el, tag, attrs)\n    }\n    this.childJoins = 0\n    this.joinPending = true\n    this.flash = null\n    if(this.root === this){\n      this.formsForRecovery = this.getFormsForRecovery()\n    }\n    if(this.isMain() && window.history.state === null){\n      // set initial history entry if this is the first page load\n      this.liveSocket.replaceRootHistory()\n    }\n\n    if(liveview_version !== this.liveSocket.version()){\n      console.error(`LiveView asset version mismatch. JavaScript version ${this.liveSocket.version()} vs. server ${liveview_version}. To avoid issues, please ensure that your assets use the same version as the server.`)\n    }\n\n    Browser.dropLocal(this.liveSocket.localStorage, window.location.pathname, CONSECUTIVE_RELOADS)\n    this.applyDiff(\"mount\", rendered, ({diff, events}) => {\n      this.rendered = new Rendered(this.id, diff)\n      let [html, streams] = this.renderContainer(null, \"join\")\n      this.dropPendingRefs()\n      this.joinCount++\n      this.joinAttempts = 0\n\n      this.maybeRecoverForms(html, () => {\n        this.onJoinComplete(resp, html, streams, events)\n      })\n    })\n  }\n\n  dropPendingRefs(){\n    DOM.all(document, `[${PHX_REF_SRC}=\"${this.refSrc()}\"]`, el => {\n      el.removeAttribute(PHX_REF_LOADING)\n      el.removeAttribute(PHX_REF_SRC)\n      el.removeAttribute(PHX_REF_LOCK)\n    })\n  }\n\n  onJoinComplete({live_patch}, html, streams, events){\n    // In order to provide a better experience, we want to join\n    // all LiveViews first and only then apply their patches.\n    if(this.joinCount > 1 || (this.parent && !this.parent.isJoinPending())){\n      return this.applyJoinPatch(live_patch, html, streams, events)\n    }\n\n    // One downside of this approach is that we need to find phxChildren\n    // in the html fragment, instead of directly on the DOM. The fragment\n    // also does not include PHX_STATIC, so we need to copy it over from\n    // the DOM.\n    let newChildren = DOM.findPhxChildrenInFragment(html, this.id).filter(toEl => {\n      let fromEl = toEl.id && this.el.querySelector(`[id=\"${toEl.id}\"]`)\n      let phxStatic = fromEl && fromEl.getAttribute(PHX_STATIC)\n      if(phxStatic){ toEl.setAttribute(PHX_STATIC, phxStatic) }\n      // set PHX_ROOT_ID to prevent events from being dispatched to the root view\n      // while the child join is still pending\n      if(fromEl){ fromEl.setAttribute(PHX_ROOT_ID, this.root.id) }\n      return this.joinChild(toEl)\n    })\n\n    if(newChildren.length === 0){\n      if(this.parent){\n        this.root.pendingJoinOps.push([this, () => this.applyJoinPatch(live_patch, html, streams, events)])\n        this.parent.ackJoin(this)\n      } else {\n        this.onAllChildJoinsComplete()\n        this.applyJoinPatch(live_patch, html, streams, events)\n      }\n    } else {\n      this.root.pendingJoinOps.push([this, () => this.applyJoinPatch(live_patch, html, streams, events)])\n    }\n  }\n\n  attachTrueDocEl(){\n    this.el = DOM.byId(this.id)\n    this.el.setAttribute(PHX_ROOT_ID, this.root.id)\n  }\n\n  // this is invoked for dead and live views, so we must filter by\n  // by owner to ensure we aren't duplicating hooks across disconnect\n  // and connected states. This also handles cases where hooks exist\n  // in a root layout with a LV in the body\n  execNewMounted(parent = this.el){\n    let phxViewportTop = this.binding(PHX_VIEWPORT_TOP)\n    let phxViewportBottom = this.binding(PHX_VIEWPORT_BOTTOM)\n    DOM.all(parent, `[${phxViewportTop}], [${phxViewportBottom}]`, hookEl => {\n      if(this.ownsElement(hookEl)){\n        DOM.maintainPrivateHooks(hookEl, hookEl, phxViewportTop, phxViewportBottom)\n        this.maybeAddNewHook(hookEl)\n      }\n    })\n    DOM.all(parent, `[${this.binding(PHX_HOOK)}], [data-phx-${PHX_HOOK}]`, hookEl => {\n      if(this.ownsElement(hookEl)){\n        this.maybeAddNewHook(hookEl)\n      }\n    })\n    DOM.all(parent, `[${this.binding(PHX_MOUNTED)}]`, el => {\n      if(this.ownsElement(el)){\n        this.maybeMounted(el)\n      }\n    })\n  }\n\n  applyJoinPatch(live_patch, html, streams, events){\n    this.attachTrueDocEl()\n    let patch = new DOMPatch(this, this.el, this.id, html, streams, null)\n    patch.markPrunableContentForRemoval()\n    this.performPatch(patch, false, true)\n    this.joinNewChildren()\n    this.execNewMounted()\n\n    this.joinPending = false\n    this.liveSocket.dispatchEvents(events)\n    this.applyPendingUpdates()\n\n    if(live_patch){\n      let {kind, to} = live_patch\n      this.liveSocket.historyPatch(to, kind)\n    }\n    this.hideLoader()\n    if(this.joinCount > 1){ this.triggerReconnected() }\n    this.stopCallback()\n  }\n\n  triggerBeforeUpdateHook(fromEl, toEl){\n    this.liveSocket.triggerDOM(\"onBeforeElUpdated\", [fromEl, toEl])\n    let hook = this.getHook(fromEl)\n    let isIgnored = hook && DOM.isIgnored(fromEl, this.binding(PHX_UPDATE))\n    if(hook && !fromEl.isEqualNode(toEl) && !(isIgnored && isEqualObj(fromEl.dataset, toEl.dataset))){\n      hook.__beforeUpdate()\n      return hook\n    }\n  }\n\n  maybeMounted(el){\n    let phxMounted = el.getAttribute(this.binding(PHX_MOUNTED))\n    let hasBeenInvoked = phxMounted && DOM.private(el, \"mounted\")\n    if(phxMounted && !hasBeenInvoked){\n      this.liveSocket.execJS(el, phxMounted)\n      DOM.putPrivate(el, \"mounted\", true)\n    }\n  }\n\n  maybeAddNewHook(el){\n    let newHook = this.addHook(el)\n    if(newHook){ newHook.__mounted() }\n  }\n\n  performPatch(patch, pruneCids, isJoinPatch = false){\n    let removedEls = []\n    let phxChildrenAdded = false\n    let updatedHookIds = new Set()\n\n    this.liveSocket.triggerDOM(\"onPatchStart\", [patch.targetContainer])\n\n    patch.after(\"added\", el => {\n      this.liveSocket.triggerDOM(\"onNodeAdded\", [el])\n      let phxViewportTop = this.binding(PHX_VIEWPORT_TOP)\n      let phxViewportBottom = this.binding(PHX_VIEWPORT_BOTTOM)\n      DOM.maintainPrivateHooks(el, el, phxViewportTop, phxViewportBottom)\n      this.maybeAddNewHook(el)\n      if(el.getAttribute){ this.maybeMounted(el) }\n    })\n\n    patch.after(\"phxChildAdded\", el => {\n      if(DOM.isPhxSticky(el)){\n        this.liveSocket.joinRootViews()\n      } else {\n        phxChildrenAdded = true\n      }\n    })\n\n    patch.before(\"updated\", (fromEl, toEl) => {\n      let hook = this.triggerBeforeUpdateHook(fromEl, toEl)\n      if(hook){ updatedHookIds.add(fromEl.id) }\n    })\n\n    patch.after(\"updated\", el => {\n      if(updatedHookIds.has(el.id)){ this.getHook(el).__updated() }\n    })\n\n    patch.after(\"discarded\", (el) => {\n      if(el.nodeType === Node.ELEMENT_NODE){ removedEls.push(el) }\n    })\n\n    patch.after(\"transitionsDiscarded\", els => this.afterElementsRemoved(els, pruneCids))\n    patch.perform(isJoinPatch)\n    this.afterElementsRemoved(removedEls, pruneCids)\n\n    this.liveSocket.triggerDOM(\"onPatchEnd\", [patch.targetContainer])\n    return phxChildrenAdded\n  }\n\n  afterElementsRemoved(elements, pruneCids){\n    let destroyedCIDs = []\n    elements.forEach(parent => {\n      let components = DOM.all(parent, `[${PHX_COMPONENT}]`)\n      let hooks = DOM.all(parent, `[${this.binding(PHX_HOOK)}], [data-phx-hook]`)\n      components.concat(parent).forEach(el => {\n        let cid = this.componentID(el)\n        if(isCid(cid) && destroyedCIDs.indexOf(cid) === -1){ destroyedCIDs.push(cid) }\n      })\n      hooks.concat(parent).forEach(hookEl => {\n        let hook = this.getHook(hookEl)\n        hook && this.destroyHook(hook)\n      })\n    })\n    // We should not pruneCids on joins. Otherwise, in case of\n    // rejoins, we may notify cids that no longer belong to the\n    // current LiveView to be removed.\n    if(pruneCids){\n      this.maybePushComponentsDestroyed(destroyedCIDs)\n    }\n  }\n\n  joinNewChildren(){\n    DOM.findPhxChildren(this.el, this.id).forEach(el => this.joinChild(el))\n  }\n\n  maybeRecoverForms(html, callback){\n    const phxChange = this.binding(\"change\")\n    const oldForms = this.root.formsForRecovery\n    // So why do we create a template element here?\n    // One way to recover forms would be to immediately apply the mount\n    // patch and then afterwards recover the forms. However, this would\n    // cause a flicker, because the mount patch would remove the form content\n    // until it is restored. Therefore LV decided to do form recovery with the\n    // raw HTML before it is applied and delay the mount patch until the form\n    // recovery events are done.\n    let template = document.createElement(\"template\")\n    template.innerHTML = html\n    // because we work with a template element, we must manually copy the attributes\n    // otherwise the owner / target helpers don't work properly\n    const rootEl = template.content.firstElementChild\n    rootEl.id = this.id\n    rootEl.setAttribute(PHX_ROOT_ID, this.root.id)\n    rootEl.setAttribute(PHX_SESSION, this.getSession())\n    rootEl.setAttribute(PHX_STATIC, this.getStatic())\n    rootEl.setAttribute(PHX_PARENT_ID, this.parent ? this.parent.id : null)\n\n    // we go over all form elements in the new HTML for the LV\n    // and look for old forms in the `formsForRecovery` object;\n    // the formsForRecovery can also contain forms from child views\n    const formsToRecover =\n      // we go over all forms in the new DOM; because this is only the HTML for the current\n      // view, we can be sure that all forms are owned by this view:\n      DOM.all(template.content, \"form\")\n        // only recover forms that have an id and are in the old DOM\n        .filter(newForm => newForm.id && oldForms[newForm.id])\n        // abandon forms we already tried to recover to prevent looping a failed state\n        .filter(newForm => !this.pendingForms.has(newForm.id))\n        // only recover if the form has the same phx-change value\n        .filter(newForm => oldForms[newForm.id].getAttribute(phxChange) === newForm.getAttribute(phxChange))\n        .map(newForm => {\n          return [oldForms[newForm.id], newForm]\n        })\n\n    if(formsToRecover.length === 0){\n      return callback()\n    }\n\n    formsToRecover.forEach(([oldForm, newForm], i) => {\n      this.pendingForms.add(newForm.id)\n      // it is important to use the firstElementChild of the template content\n      // because when traversing a documentFragment using parentNode, we won't ever arrive at\n      // the fragment; as the template is always a LiveView, we can be sure that there is only\n      // one child on the root level\n      this.pushFormRecovery(oldForm, newForm, template.content.firstElementChild, () => {\n        this.pendingForms.delete(newForm.id)\n        // we only call the callback once all forms have been recovered\n        if(i === formsToRecover.length - 1){\n          callback()\n        }\n      })\n    })\n  }\n\n  getChildById(id){ return this.root.children[this.id][id] }\n\n  getDescendentByEl(el){\n    if(el.id === this.id){\n      return this\n    } else {\n      return this.children[el.getAttribute(PHX_PARENT_ID)]?.[el.id]\n    }\n  }\n\n  destroyDescendent(id){\n    for(let parentId in this.root.children){\n      for(let childId in this.root.children[parentId]){\n        if(childId === id){ return this.root.children[parentId][childId].destroy() }\n      }\n    }\n  }\n\n  joinChild(el){\n    let child = this.getChildById(el.id)\n    if(!child){\n      let view = new View(el, this.liveSocket, this)\n      this.root.children[this.id][view.id] = view\n      view.join()\n      this.childJoins++\n      return true\n    }\n  }\n\n  isJoinPending(){ return this.joinPending }\n\n  ackJoin(_child){\n    this.childJoins--\n\n    if(this.childJoins === 0){\n      if(this.parent){\n        this.parent.ackJoin(this)\n      } else {\n        this.onAllChildJoinsComplete()\n      }\n    }\n  }\n\n  onAllChildJoinsComplete(){\n    // we can clear pending form recoveries now that we've joined.\n    // They either all resolved or were abandoned\n    this.pendingForms.clear()\n    // we can also clear the formsForRecovery object to not keep old form elements around\n    this.formsForRecovery = {}\n    this.joinCallback(() => {\n      this.pendingJoinOps.forEach(([view, op]) => {\n        if(!view.isDestroyed()){ op() }\n      })\n      this.pendingJoinOps = []\n    })\n  }\n\n  update(diff, events){\n    if(this.isJoinPending() || (this.liveSocket.hasPendingLink() && this.root.isMain())){\n      return this.pendingDiffs.push({diff, events})\n    }\n\n    this.rendered.mergeDiff(diff)\n    let phxChildrenAdded = false\n\n    // When the diff only contains component diffs, then walk components\n    // and patch only the parent component containers found in the diff.\n    // Otherwise, patch entire LV container.\n    if(this.rendered.isComponentOnlyDiff(diff)){\n      this.liveSocket.time(\"component patch complete\", () => {\n        let parentCids = DOM.findExistingParentCIDs(this.el, this.rendered.componentCIDs(diff))\n        parentCids.forEach(parentCID => {\n          if(this.componentPatch(this.rendered.getComponent(diff, parentCID), parentCID)){ phxChildrenAdded = true }\n        })\n      })\n    } else if(!isEmpty(diff)){\n      this.liveSocket.time(\"full patch complete\", () => {\n        let [html, streams] = this.renderContainer(diff, \"update\")\n        let patch = new DOMPatch(this, this.el, this.id, html, streams, null)\n        phxChildrenAdded = this.performPatch(patch, true)\n      })\n    }\n\n    this.liveSocket.dispatchEvents(events)\n    if(phxChildrenAdded){ this.joinNewChildren() }\n  }\n\n  renderContainer(diff, kind){\n    return this.liveSocket.time(`toString diff (${kind})`, () => {\n      let tag = this.el.tagName\n      // Don't skip any component in the diff nor any marked as pruned\n      // (as they may have been added back)\n      let cids = diff ? this.rendered.componentCIDs(diff) : null\n      let [html, streams] = this.rendered.toString(cids)\n      return [`<${tag}>${html}</${tag}>`, streams]\n    })\n  }\n\n  componentPatch(diff, cid){\n    if(isEmpty(diff)) return false\n    let [html, streams] = this.rendered.componentToString(cid)\n    let patch = new DOMPatch(this, this.el, this.id, html, streams, cid)\n    let childrenAdded = this.performPatch(patch, true)\n    return childrenAdded\n  }\n\n  getHook(el){ return this.viewHooks[ViewHook.elementID(el)] }\n\n  addHook(el){\n    let hookElId = ViewHook.elementID(el)\n\n    if(hookElId && !this.viewHooks[hookElId]){\n      // hook created, but not attached (createHook for web component)\n      let hook = DOM.getCustomElHook(el) || logError(`no hook found for custom element: ${el.id}`)\n      this.viewHooks[hookElId] = hook\n      hook.__attachView(this)\n      return hook\n    }\n    else if(hookElId || !el.getAttribute){\n      // no hook found\n      return\n    } else {\n      // new hook found with phx-hook attribute\n      let hookName = el.getAttribute(`data-phx-${PHX_HOOK}`) || el.getAttribute(this.binding(PHX_HOOK))\n      if(hookName && !this.ownsElement(el)){ return }\n      let callbacks = this.liveSocket.getHookCallbacks(hookName)\n\n      if(callbacks){\n        if(!el.id){ logError(`no DOM ID for hook \"${hookName}\". Hooks require a unique ID on each element.`, el) }\n        let hook = new ViewHook(this, el, callbacks)\n        this.viewHooks[ViewHook.elementID(hook.el)] = hook\n        return hook\n      } else if(hookName !== null){\n        logError(`unknown hook found for \"${hookName}\"`, el)\n      }\n    }\n  }\n\n  destroyHook(hook){\n    hook.__destroyed()\n    hook.__cleanup__()\n    delete this.viewHooks[ViewHook.elementID(hook.el)]\n  }\n\n  applyPendingUpdates(){\n    this.pendingDiffs.forEach(({diff, events}) => this.update(diff, events))\n    this.pendingDiffs = []\n    this.eachChild(child => child.applyPendingUpdates())\n  }\n\n  eachChild(callback){\n    let children = this.root.children[this.id] || {}\n    for(let id in children){ callback(this.getChildById(id)) }\n  }\n\n  onChannel(event, cb){\n    this.liveSocket.onChannel(this.channel, event, resp => {\n      if(this.isJoinPending()){\n        this.root.pendingJoinOps.push([this, () => cb(resp)])\n      } else {\n        this.liveSocket.requestDOMUpdate(() => cb(resp))\n      }\n    })\n  }\n\n  bindChannel(){\n    // The diff event should be handled by the regular update operations.\n    // All other operations are queued to be applied only after join.\n    this.liveSocket.onChannel(this.channel, \"diff\", (rawDiff) => {\n      this.liveSocket.requestDOMUpdate(() => {\n        this.applyDiff(\"update\", rawDiff, ({diff, events}) => this.update(diff, events))\n      })\n    })\n    this.onChannel(\"redirect\", ({to, flash}) => this.onRedirect({to, flash}))\n    this.onChannel(\"live_patch\", (redir) => this.onLivePatch(redir))\n    this.onChannel(\"live_redirect\", (redir) => this.onLiveRedirect(redir))\n    this.channel.onError(reason => this.onError(reason))\n    this.channel.onClose(reason => this.onClose(reason))\n  }\n\n  destroyAllChildren(){ this.eachChild(child => child.destroy()) }\n\n  onLiveRedirect(redir){\n    let {to, kind, flash} = redir\n    let url = this.expandURL(to)\n    let e = new CustomEvent(\"phx:server-navigate\", {detail: {to, kind, flash}})\n    this.liveSocket.historyRedirect(e, url, kind, flash)\n  }\n\n  onLivePatch(redir){\n    let {to, kind} = redir\n    this.href = this.expandURL(to)\n    this.liveSocket.historyPatch(to, kind)\n  }\n\n  expandURL(to){\n    return to.startsWith(\"/\") ? `${window.location.protocol}//${window.location.host}${to}` : to\n  }\n\n  onRedirect({to, flash, reloadToken}){ this.liveSocket.redirect(to, flash, reloadToken) }\n\n  isDestroyed(){ return this.destroyed }\n\n  joinDead(){ this.isDead = true }\n\n  joinPush(){\n    this.joinPush = this.joinPush || this.channel.join()\n    return this.joinPush\n  }\n\n  join(callback){\n    this.showLoader(this.liveSocket.loaderTimeout)\n    this.bindChannel()\n    if(this.isMain()){\n      this.stopCallback = this.liveSocket.withPageLoading({to: this.href, kind: \"initial\"})\n    }\n    this.joinCallback = (onDone) => {\n      onDone = onDone || function(){}\n      callback ? callback(this.joinCount, onDone) : onDone()\n    }\n\n    this.wrapPush(() => this.channel.join(), {\n      ok: (resp) => this.liveSocket.requestDOMUpdate(() => this.onJoin(resp)),\n      error: (error) => this.onJoinError(error),\n      timeout: () => this.onJoinError({reason: \"timeout\"})\n    })\n  }\n\n  onJoinError(resp){\n    if(resp.reason === \"reload\"){\n      this.log(\"error\", () => [`failed mount with ${resp.status}. Falling back to page reload`, resp])\n      this.onRedirect({to: this.root.href, reloadToken: resp.token})\n      return\n    } else if(resp.reason === \"unauthorized\" || resp.reason === \"stale\"){\n      this.log(\"error\", () => [\"unauthorized live_redirect. Falling back to page request\", resp])\n      this.onRedirect({to: this.root.href})\n      return\n    }\n    if(resp.redirect || resp.live_redirect){\n      this.joinPending = false\n      this.channel.leave()\n    }\n    if(resp.redirect){ return this.onRedirect(resp.redirect) }\n    if(resp.live_redirect){ return this.onLiveRedirect(resp.live_redirect) }\n    this.log(\"error\", () => [\"unable to join\", resp])\n    if(this.isMain()){\n      this.displayError([PHX_LOADING_CLASS, PHX_ERROR_CLASS, PHX_SERVER_ERROR_CLASS])\n      if(this.liveSocket.isConnected()){ this.liveSocket.reloadWithJitter(this) }\n    } else {\n      if(this.joinAttempts >= MAX_CHILD_JOIN_ATTEMPTS){\n        // put the root review into permanent error state, but don't destroy it as it can remain active\n        this.root.displayError([PHX_LOADING_CLASS, PHX_ERROR_CLASS, PHX_SERVER_ERROR_CLASS])\n        this.log(\"error\", () => [`giving up trying to mount after ${MAX_CHILD_JOIN_ATTEMPTS} tries`, resp])\n        this.destroy()\n      }\n      let trueChildEl = DOM.byId(this.el.id)\n      if(trueChildEl){\n        DOM.mergeAttrs(trueChildEl, this.el)\n        this.displayError([PHX_LOADING_CLASS, PHX_ERROR_CLASS, PHX_SERVER_ERROR_CLASS])\n        this.el = trueChildEl\n      } else {\n        this.destroy()\n      }\n    }\n  }\n\n  onClose(reason){\n    if(this.isDestroyed()){ return }\n    if(this.isMain() && this.liveSocket.hasPendingLink() && reason !== \"leave\"){\n      return this.liveSocket.reloadWithJitter(this)\n    }\n    this.destroyAllChildren()\n    this.liveSocket.dropActiveElement(this)\n    // document.activeElement can be null in Internet Explorer 11\n    if(document.activeElement){ document.activeElement.blur() }\n    if(this.liveSocket.isUnloaded()){\n      this.showLoader(BEFORE_UNLOAD_LOADER_TIMEOUT)\n    }\n  }\n\n  onError(reason){\n    this.onClose(reason)\n    if(this.liveSocket.isConnected()){ this.log(\"error\", () => [\"view crashed\", reason]) }\n    if(!this.liveSocket.isUnloaded()){\n      if(this.liveSocket.isConnected()){\n        this.displayError([PHX_LOADING_CLASS, PHX_ERROR_CLASS, PHX_SERVER_ERROR_CLASS])\n      } else {\n        this.displayError([PHX_LOADING_CLASS, PHX_ERROR_CLASS, PHX_CLIENT_ERROR_CLASS])\n      }\n    }\n  }\n\n  displayError(classes){\n    if(this.isMain()){ DOM.dispatchEvent(window, \"phx:page-loading-start\", {detail: {to: this.href, kind: \"error\"}}) }\n    this.showLoader()\n    this.setContainerClasses(...classes)\n    this.execAll(this.binding(\"disconnected\"))\n  }\n\n  wrapPush(callerPush, receives){\n    let latency = this.liveSocket.getLatencySim()\n    let withLatency = latency ?\n      (cb) => setTimeout(() => !this.isDestroyed() && cb(), latency) :\n      (cb) => !this.isDestroyed() && cb()\n\n    withLatency(() => {\n      callerPush()\n        .receive(\"ok\", resp => withLatency(() => receives.ok && receives.ok(resp)))\n        .receive(\"error\", reason => withLatency(() => receives.error && receives.error(reason)))\n        .receive(\"timeout\", () => withLatency(() => receives.timeout && receives.timeout()))\n    })\n  }\n\n  pushWithReply(refGenerator, event, payload){\n    if(!this.isConnected()){ return Promise.reject({error: \"noconnection\"}) }\n\n    let [ref, [el], opts] = refGenerator ? refGenerator() : [null, [], {}]\n    let oldJoinCount = this.joinCount\n    let onLoadingDone = function(){}\n    if(opts.page_loading){\n      onLoadingDone = this.liveSocket.withPageLoading({kind: \"element\", target: el})\n    }\n\n    if(typeof (payload.cid) !== \"number\"){ delete payload.cid }\n\n    return new Promise((resolve, reject) => {\n      this.wrapPush(() => this.channel.push(event, payload, PUSH_TIMEOUT), {\n        ok: (resp) => {\n          if(ref !== null){ this.lastAckRef = ref }\n          let finish = (hookReply) => {\n            if(resp.redirect){ this.onRedirect(resp.redirect) }\n            if(resp.live_patch){ this.onLivePatch(resp.live_patch) }\n            if(resp.live_redirect){ this.onLiveRedirect(resp.live_redirect) }\n            onLoadingDone()\n            resolve({resp: resp, reply: hookReply})\n          }\n          if(resp.diff){\n            this.liveSocket.requestDOMUpdate(() => {\n              this.applyDiff(\"update\", resp.diff, ({diff, reply, events}) => {\n                if(ref !== null){\n                  this.undoRefs(ref, payload.event)\n                }\n                this.update(diff, events)\n                finish(reply)\n              })\n            })\n          } else {\n            if(ref !== null){ this.undoRefs(ref, payload.event) }\n            finish(null)\n          }\n        },\n        error: (reason) => reject({error: reason}),\n        timeout: () => {\n          reject({timeout: true})\n          if(this.joinCount === oldJoinCount){\n            this.liveSocket.reloadWithJitter(this, () => {\n              this.log(\"timeout\", () => [\"received timeout while communicating with server. Falling back to hard refresh for recovery\"])\n            })\n          }\n        }\n      })\n    })\n  }\n\n  undoRefs(ref, phxEvent, onlyEls){\n    if(!this.isConnected()){ return } // exit if external form triggered\n    let selector = `[${PHX_REF_SRC}=\"${this.refSrc()}\"]`\n\n    if(onlyEls){\n      onlyEls = new Set(onlyEls)\n      DOM.all(document, selector, parent => {\n        if(onlyEls && !onlyEls.has(parent)){ return }\n        // undo any child refs within parent first\n        DOM.all(parent, selector, child => this.undoElRef(child, ref, phxEvent))\n        this.undoElRef(parent, ref, phxEvent)\n      })\n    } else {\n      DOM.all(document, selector, el => this.undoElRef(el, ref, phxEvent))\n    }\n  }\n\n  undoElRef(el, ref, phxEvent){\n    let elRef = new ElementRef(el)\n\n    elRef.maybeUndo(ref, phxEvent, clonedTree => {\n      let hook = this.triggerBeforeUpdateHook(el, clonedTree)\n      DOMPatch.patchWithClonedTree(el, clonedTree, this.liveSocket)\n      DOM.all(el, `[${PHX_REF_SRC}=\"${this.refSrc()}\"]`, child => this.undoElRef(child, ref, phxEvent))\n      this.execNewMounted(el)\n      if(hook){ hook.__updated() }\n    })\n  }\n\n  refSrc(){ return this.el.id }\n\n  putRef(elements, phxEvent, eventType, opts = {}){\n    let newRef = this.ref++\n    let disableWith = this.binding(PHX_DISABLE_WITH)\n    if(opts.loading){\n      let loadingEls = DOM.all(document, opts.loading).map(el => {\n        return {el, lock: true, loading: true}\n      })\n      elements = elements.concat(loadingEls)\n    }\n\n    for(let {el, lock, loading} of elements){\n      if(!lock && !loading){ throw new Error(\"putRef requires lock or loading\") }\n      el.setAttribute(PHX_REF_SRC, this.refSrc())\n      if(loading){ el.setAttribute(PHX_REF_LOADING, newRef) }\n      if(lock){ el.setAttribute(PHX_REF_LOCK, newRef) }\n\n      if(!loading || (opts.submitter && !(el === opts.submitter || el === opts.form))){ continue }\n\n      let lockCompletePromise = new Promise(resolve => {\n        el.addEventListener(`phx:undo-lock:${newRef}`, () => resolve(detail), {once: true})\n      })\n\n      let loadingCompletePromise = new Promise(resolve => {\n        el.addEventListener(`phx:undo-loading:${newRef}`, () => resolve(detail), {once: true})\n      })\n\n      el.classList.add(`phx-${eventType}-loading`)\n      let disableText = el.getAttribute(disableWith)\n      if(disableText !== null){\n        if(!el.getAttribute(PHX_DISABLE_WITH_RESTORE)){\n          el.setAttribute(PHX_DISABLE_WITH_RESTORE, el.innerText)\n        }\n        if(disableText !== \"\"){ el.innerText = disableText }\n        // PHX_DISABLED could have already been set in disableForm\n        el.setAttribute(PHX_DISABLED, el.getAttribute(PHX_DISABLED) || el.disabled)\n        el.setAttribute(\"disabled\", \"\")\n      }\n\n      let detail = {\n        event: phxEvent,\n        eventType: eventType,\n        ref: newRef,\n        isLoading: loading,\n        isLocked: lock,\n        lockElements: elements.filter(({lock}) => lock).map(({el}) => el),\n        loadingElements: elements.filter(({loading}) => loading).map(({el}) => el),\n        unlock: (els) => {\n          els = Array.isArray(els) ? els : [els]\n          this.undoRefs(newRef, phxEvent, els)\n        },\n        lockComplete: lockCompletePromise,\n        loadingComplete: loadingCompletePromise,\n        lock: (lockEl) => {\n          return new Promise(resolve => {\n            if(this.isAcked(newRef)){ return resolve(detail) }\n            lockEl.setAttribute(PHX_REF_LOCK, newRef)\n            lockEl.setAttribute(PHX_REF_SRC, this.refSrc())\n            lockEl.addEventListener(`phx:lock-stop:${newRef}`, () => resolve(detail), {once: true})\n          })\n        }\n      }\n      el.dispatchEvent(new CustomEvent(\"phx:push\", {\n        detail: detail,\n        bubbles: true,\n        cancelable: false\n      }))\n      if(phxEvent){\n        el.dispatchEvent(new CustomEvent(`phx:push:${phxEvent}`, {\n          detail: detail,\n          bubbles: true,\n          cancelable: false\n        }))\n      }\n    }\n    return [newRef, elements.map(({el}) => el), opts]\n  }\n\n  isAcked(ref){ return this.lastAckRef !== null && this.lastAckRef >= ref }\n\n  componentID(el){\n    let cid = el.getAttribute && el.getAttribute(PHX_COMPONENT)\n    return cid ? parseInt(cid) : null\n  }\n\n  targetComponentID(target, targetCtx, opts = {}){\n    if(isCid(targetCtx)){ return targetCtx }\n\n    let cidOrSelector = opts.target || target.getAttribute(this.binding(\"target\"))\n    if(isCid(cidOrSelector)){\n      return parseInt(cidOrSelector)\n    } else if(targetCtx && (cidOrSelector !== null || opts.target)){\n      return this.closestComponentID(targetCtx)\n    } else {\n      return null\n    }\n  }\n\n  closestComponentID(targetCtx){\n    if(isCid(targetCtx)){\n      return targetCtx\n    } else if(targetCtx){\n      return maybe(targetCtx.closest(`[${PHX_COMPONENT}]`), el => this.ownsElement(el) && this.componentID(el))\n    } else {\n      return null\n    }\n  }\n\n  pushHookEvent(el, targetCtx, event, payload, onReply){\n    if(!this.isConnected()){\n      this.log(\"hook\", () => [\"unable to push hook event. LiveView not connected\", event, payload])\n      return false\n    }\n    let [ref, els, opts] = this.putRef([{el, loading: true, lock: true}], event, \"hook\")\n    this.pushWithReply(() => [ref, els, opts], \"event\", {\n      type: \"hook\",\n      event: event,\n      value: payload,\n      cid: this.closestComponentID(targetCtx)\n    }).then(({resp: _resp, reply: hookReply}) => onReply(hookReply, ref))\n\n    return ref\n  }\n\n  extractMeta(el, meta, value){\n    let prefix = this.binding(\"value-\")\n    for(let i = 0; i < el.attributes.length; i++){\n      if(!meta){ meta = {} }\n      let name = el.attributes[i].name\n      if(name.startsWith(prefix)){ meta[name.replace(prefix, \"\")] = el.getAttribute(name) }\n    }\n    if(el.value !== undefined && !(el instanceof HTMLFormElement)){\n      if(!meta){ meta = {} }\n      meta.value = el.value\n\n      if(el.tagName === \"INPUT\" && CHECKABLE_INPUTS.indexOf(el.type) >= 0 && !el.checked){\n        delete meta.value\n      }\n    }\n    if(value){\n      if(!meta){ meta = {} }\n      for(let key in value){ meta[key] = value[key] }\n    }\n    return meta\n  }\n\n  pushEvent(type, el, targetCtx, phxEvent, meta, opts = {}, onReply){\n    this.pushWithReply(() => this.putRef([{el, loading: true, lock: true}], phxEvent, type, opts), \"event\", {\n      type: type,\n      event: phxEvent,\n      value: this.extractMeta(el, meta, opts.value),\n      cid: this.targetComponentID(el, targetCtx, opts)\n    }).then(({reply}) => onReply && onReply(reply))\n  }\n\n  pushFileProgress(fileEl, entryRef, progress, onReply = function (){ }){\n    this.liveSocket.withinOwners(fileEl.form, (view, targetCtx) => {\n      view.pushWithReply(null, \"progress\", {\n        event: fileEl.getAttribute(view.binding(PHX_PROGRESS)),\n        ref: fileEl.getAttribute(PHX_UPLOAD_REF),\n        entry_ref: entryRef,\n        progress: progress,\n        cid: view.targetComponentID(fileEl.form, targetCtx)\n      }).then(({resp}) => onReply(resp))\n    })\n  }\n\n  pushInput(inputEl, targetCtx, forceCid, phxEvent, opts, callback){\n    if(!inputEl.form){\n      throw new Error(\"form events require the input to be inside a form\")\n    }\n\n    let uploads\n    let cid = isCid(forceCid) ? forceCid : this.targetComponentID(inputEl.form, targetCtx, opts)\n    let refGenerator = () => {\n      return this.putRef([\n        {el: inputEl, loading: true, lock: true},\n        {el: inputEl.form, loading: true, lock: true}\n      ], phxEvent, \"change\", opts)\n    }\n    let formData\n    let meta  = this.extractMeta(inputEl.form)\n    if(inputEl instanceof HTMLButtonElement){ meta.submitter = inputEl }\n    if(inputEl.getAttribute(this.binding(\"change\"))){\n      formData = serializeForm(inputEl.form, {_target: opts._target, ...meta}, [inputEl.name])\n    } else {\n      formData = serializeForm(inputEl.form, {_target: opts._target, ...meta})\n    }\n    if(DOM.isUploadInput(inputEl) && inputEl.files && inputEl.files.length > 0){\n      LiveUploader.trackFiles(inputEl, Array.from(inputEl.files))\n    }\n    uploads = LiveUploader.serializeUploads(inputEl)\n\n    let event = {\n      type: \"form\",\n      event: phxEvent,\n      value: formData,\n      uploads: uploads,\n      cid: cid\n    }\n    this.pushWithReply(refGenerator, \"event\", event).then(({resp}) => {\n      if(DOM.isUploadInput(inputEl) && DOM.isAutoUpload(inputEl)){\n        if(LiveUploader.filesAwaitingPreflight(inputEl).length > 0){\n          let [ref, _els] = refGenerator()\n          this.undoRefs(ref, phxEvent, [inputEl.form])\n          this.uploadFiles(inputEl.form, phxEvent, targetCtx, ref, cid, (_uploads) => {\n            callback && callback(resp)\n            this.triggerAwaitingSubmit(inputEl.form, phxEvent)\n            this.undoRefs(ref, phxEvent)\n          })\n        }\n      } else {\n        callback && callback(resp)\n      }\n    })\n  }\n\n  triggerAwaitingSubmit(formEl, phxEvent){\n    let awaitingSubmit = this.getScheduledSubmit(formEl)\n    if(awaitingSubmit){\n      let [_el, _ref, _opts, callback] = awaitingSubmit\n      this.cancelSubmit(formEl, phxEvent)\n      callback()\n    }\n  }\n\n  getScheduledSubmit(formEl){\n    return this.formSubmits.find(([el, _ref, _opts, _callback]) => el.isSameNode(formEl))\n  }\n\n  scheduleSubmit(formEl, ref, opts, callback){\n    if(this.getScheduledSubmit(formEl)){ return true }\n    this.formSubmits.push([formEl, ref, opts, callback])\n  }\n\n  cancelSubmit(formEl, phxEvent){\n    this.formSubmits = this.formSubmits.filter(([el, ref, _opts, _callback]) => {\n      if(el.isSameNode(formEl)){\n        this.undoRefs(ref, phxEvent)\n        return false\n      } else {\n        return true\n      }\n    })\n  }\n\n  disableForm(formEl, phxEvent, opts = {}){\n    let filterIgnored = el => {\n      let userIgnored = closestPhxBinding(el, `${this.binding(PHX_UPDATE)}=ignore`, el.form)\n      return !(userIgnored || closestPhxBinding(el, \"data-phx-update=ignore\", el.form))\n    }\n    let filterDisables = el => {\n      return el.hasAttribute(this.binding(PHX_DISABLE_WITH))\n    }\n    let filterButton = el => el.tagName == \"BUTTON\"\n\n    let filterInput = el => [\"INPUT\", \"TEXTAREA\", \"SELECT\"].includes(el.tagName)\n\n    let formElements = Array.from(formEl.elements)\n    let disables = formElements.filter(filterDisables)\n    let buttons = formElements.filter(filterButton).filter(filterIgnored)\n    let inputs = formElements.filter(filterInput).filter(filterIgnored)\n\n    buttons.forEach(button => {\n      button.setAttribute(PHX_DISABLED, button.disabled)\n      button.disabled = true\n    })\n    inputs.forEach(input => {\n      input.setAttribute(PHX_READONLY, input.readOnly)\n      input.readOnly = true\n      if(input.files){\n        input.setAttribute(PHX_DISABLED, input.disabled)\n        input.disabled = true\n      }\n    })\n    let formEls = disables.concat(buttons).concat(inputs).map(el => {\n      return {el, loading: true, lock: true}\n    })\n\n    // we reverse the order so form children are already locked by the time\n    // the form is locked\n    let els = [{el: formEl, loading: true, lock: false}].concat(formEls).reverse()\n    return this.putRef(els, phxEvent, \"submit\", opts)\n  }\n\n  pushFormSubmit(formEl, targetCtx, phxEvent, submitter, opts, onReply){\n    let refGenerator = () => this.disableForm(formEl, phxEvent, {\n      ...opts,\n      form: formEl,\n      submitter: submitter\n    })\n    let cid = this.targetComponentID(formEl, targetCtx)\n    if(LiveUploader.hasUploadsInProgress(formEl)){\n      let [ref, _els] = refGenerator()\n      let push = () => this.pushFormSubmit(formEl, targetCtx, phxEvent, submitter, opts, onReply)\n      return this.scheduleSubmit(formEl, ref, opts, push)\n    } else if(LiveUploader.inputsAwaitingPreflight(formEl).length > 0){\n      let [ref, els] = refGenerator()\n      let proxyRefGen = () => [ref, els, opts]\n      this.uploadFiles(formEl, phxEvent, targetCtx, ref, cid, (_uploads) => {\n        // if we still having pending preflights it means we have invalid entries\n        // and the phx-submit cannot be completed\n        if(LiveUploader.inputsAwaitingPreflight(formEl).length > 0){\n          return this.undoRefs(ref, phxEvent)\n        }\n        let meta = this.extractMeta(formEl)\n        let formData = serializeForm(formEl, {submitter, ...meta})\n        this.pushWithReply(proxyRefGen, \"event\", {\n          type: \"form\",\n          event: phxEvent,\n          value: formData,\n          cid: cid\n        }).then(({resp}) => onReply(resp))\n      })\n    } else if(!(formEl.hasAttribute(PHX_REF_SRC) && formEl.classList.contains(\"phx-submit-loading\"))){\n      let meta = this.extractMeta(formEl)\n      let formData = serializeForm(formEl, {submitter, ...meta})\n      this.pushWithReply(refGenerator, \"event\", {\n        type: \"form\",\n        event: phxEvent,\n        value: formData,\n        cid: cid\n      }).then(({resp}) => onReply(resp))\n    }\n  }\n\n  uploadFiles(formEl, phxEvent, targetCtx, ref, cid, onComplete){\n    let joinCountAtUpload = this.joinCount\n    let inputEls = LiveUploader.activeFileInputs(formEl)\n    let numFileInputsInProgress = inputEls.length\n\n    // get each file input\n    inputEls.forEach(inputEl => {\n      let uploader = new LiveUploader(inputEl, this, () => {\n        numFileInputsInProgress--\n        if(numFileInputsInProgress === 0){ onComplete() }\n      })\n\n      let entries = uploader.entries().map(entry => entry.toPreflightPayload())\n\n      if(entries.length === 0){\n        numFileInputsInProgress--\n        return\n      }\n\n      let payload = {\n        ref: inputEl.getAttribute(PHX_UPLOAD_REF),\n        entries: entries,\n        cid: this.targetComponentID(inputEl.form, targetCtx)\n      }\n\n      this.log(\"upload\", () => [\"sending preflight request\", payload])\n\n      this.pushWithReply(null, \"allow_upload\", payload).then(({resp}) => {\n        this.log(\"upload\", () => [\"got preflight response\", resp])\n        // the preflight will reject entries beyond the max entries\n        // so we error and cancel entries on the client that are missing from the response\n        uploader.entries().forEach(entry => {\n          if(resp.entries && !resp.entries[entry.ref]){\n            this.handleFailedEntryPreflight(entry.ref, \"failed preflight\", uploader)\n          }\n        })\n        // for auto uploads, we may have an empty entries response from the server\n        // for form submits that contain invalid entries\n        if(resp.error || Object.keys(resp.entries).length === 0){\n          this.undoRefs(ref, phxEvent)\n          let errors = resp.error || []\n          errors.map(([entry_ref, reason]) => {\n            this.handleFailedEntryPreflight(entry_ref, reason, uploader)\n          })\n        } else {\n          let onError = (callback) => {\n            this.channel.onError(() => {\n              if(this.joinCount === joinCountAtUpload){ callback() }\n            })\n          }\n          uploader.initAdapterUpload(resp, onError, this.liveSocket)\n        }\n      })\n    })\n  }\n\n  handleFailedEntryPreflight(uploadRef, reason, uploader){\n    if(uploader.isAutoUpload()){\n      // uploadRef may be top level upload config ref or entry ref\n      let entry = uploader.entries().find(entry => entry.ref === uploadRef.toString())\n      if(entry){ entry.cancel() }\n    } else {\n      uploader.entries().map(entry => entry.cancel())\n    }\n    this.log(\"upload\", () => [`error for entry ${uploadRef}`, reason])\n  }\n\n  dispatchUploads(targetCtx, name, filesOrBlobs){\n    let targetElement = this.targetCtxElement(targetCtx) || this.el\n    let inputs = DOM.findUploadInputs(targetElement).filter(el => el.name === name)\n    if(inputs.length === 0){ logError(`no live file inputs found matching the name \"${name}\"`) }\n    else if(inputs.length > 1){ logError(`duplicate live file inputs found matching the name \"${name}\"`) }\n    else { DOM.dispatchEvent(inputs[0], PHX_TRACK_UPLOADS, {detail: {files: filesOrBlobs}}) }\n  }\n\n  targetCtxElement(targetCtx){\n    if(isCid(targetCtx)){\n      let [target] = DOM.findComponentNodeList(this.el, targetCtx)\n      return target\n    } else if(targetCtx){\n      return targetCtx\n    } else {\n      return null\n    }\n  }\n\n  pushFormRecovery(oldForm, newForm, templateDom, callback){\n    // we are only recovering forms inside the current view, therefore it is safe to\n    // skip withinOwners here and always use this when referring to the view\n    const phxChange = this.binding(\"change\")\n    const phxTarget = newForm.getAttribute(this.binding(\"target\")) || newForm\n    const phxEvent = newForm.getAttribute(this.binding(PHX_AUTO_RECOVER)) || newForm.getAttribute(this.binding(\"change\"))\n    const inputs = Array.from(oldForm.elements).filter(el => DOM.isFormInput(el) && el.name && !el.hasAttribute(phxChange))\n    if(inputs.length === 0){ return }\n\n    // we must clear tracked uploads before recovery as they no longer have valid refs\n    inputs.forEach(input => input.hasAttribute(PHX_UPLOAD_REF) && LiveUploader.clearFiles(input))\n    // pushInput assumes that there is a source element that initiated the change;\n    // because this is not the case when we recover forms, we provide the first input we find\n    let input = inputs.find(el => el.type !== \"hidden\") || inputs[0]\n\n    // in the case that there are multiple targets, we count the number of pending recovery events\n    // and only call the callback once all events have been processed\n    let pending = 0\n    // withinTargets(phxTarget, callback, dom, viewEl)\n    this.withinTargets(phxTarget, (targetView, targetCtx) => {\n      const cid = this.targetComponentID(newForm, targetCtx)\n      pending++\n      targetView.pushInput(input, targetCtx, cid, phxEvent, {_target: input.name}, () => {\n        pending--\n        if(pending === 0){ callback() }\n      })\n    }, templateDom, templateDom)\n  }\n\n  pushLinkPatch(e, href, targetEl, callback){\n    let linkRef = this.liveSocket.setPendingLink(href)\n    // only add loading states if event is trusted (it was triggered by user, such as click) and\n    // it's not a forward/back navigation from popstate\n    let loading = e.isTrusted && e.type !== \"popstate\"\n    let refGen = targetEl ? () => this.putRef([{el: targetEl, loading: loading, lock: true}], null, \"click\") : null\n    let fallback = () => this.liveSocket.redirect(window.location.href)\n    let url = href.startsWith(\"/\") ? `${location.protocol}//${location.host}${href}` : href\n\n    this.pushWithReply(refGen, \"live_patch\", {url}).then(\n      ({resp}) => {\n        this.liveSocket.requestDOMUpdate(() => {\n          if(resp.link_redirect){\n            this.liveSocket.replaceMain(href, null, callback, linkRef)\n          } else {\n            if(this.liveSocket.commitPendingLink(linkRef)){\n              this.href = href\n            }\n            this.applyPendingUpdates()\n            callback && callback(linkRef)\n          }\n        })\n      },\n      ({error: _error, timeout: _timeout}) => fallback()\n    )\n  }\n\n  getFormsForRecovery(){\n    if(this.joinCount === 0){ return {} }\n\n    let phxChange = this.binding(\"change\")\n\n    return DOM.all(this.el, `form[${phxChange}]`)\n      .filter(form => form.id)\n      .filter(form => form.elements.length > 0)\n      .filter(form => form.getAttribute(this.binding(PHX_AUTO_RECOVER)) !== \"ignore\")\n      .map(form => form.cloneNode(true))\n      .reduce((acc, form) => {\n        acc[form.id] = form\n        return acc\n      }, {})\n  }\n\n  maybePushComponentsDestroyed(destroyedCIDs){\n    let willDestroyCIDs = destroyedCIDs.filter(cid => {\n      return DOM.findComponentNodeList(this.el, cid).length === 0\n    })\n\n    if(willDestroyCIDs.length > 0){\n      // we must reset the render change tracking for cids that\n      // could be added back from the server so we don't skip them\n      willDestroyCIDs.forEach(cid => this.rendered.resetRender(cid))\n\n      this.pushWithReply(null, \"cids_will_destroy\", {cids: willDestroyCIDs}).then(() => {\n        // we must wait for pending transitions to complete before determining\n        // if the cids were added back to the DOM in the meantime (#3139)\n        this.liveSocket.requestDOMUpdate(() => {\n          // See if any of the cids we wanted to destroy were added back,\n          // if they were added back, we don't actually destroy them.\n          let completelyDestroyCIDs = willDestroyCIDs.filter(cid => {\n            return DOM.findComponentNodeList(this.el, cid).length === 0\n          })\n\n          if(completelyDestroyCIDs.length > 0){\n            this.pushWithReply(null, \"cids_destroyed\", {cids: completelyDestroyCIDs}).then(({resp}) => {\n              this.rendered.pruneCIDs(resp.cids)\n            })\n          }\n        })\n      })\n    }\n  }\n\n  ownsElement(el){\n    let parentViewEl = el.closest(PHX_VIEW_SELECTOR)\n    return el.getAttribute(PHX_PARENT_ID) === this.id ||\n      (parentViewEl && parentViewEl.id === this.id) ||\n      (!parentViewEl && this.isDead)\n  }\n\n  submitForm(form, targetCtx, phxEvent, submitter, opts = {}){\n    DOM.putPrivate(form, PHX_HAS_SUBMITTED, true)\n    const inputs = Array.from(form.elements)\n    inputs.forEach(input => DOM.putPrivate(input, PHX_HAS_SUBMITTED, true))\n    this.liveSocket.blurActiveElement(this)\n    this.pushFormSubmit(form, targetCtx, phxEvent, submitter, opts, () => {\n      this.liveSocket.restorePreviouslyActiveFocus()\n    })\n  }\n\n  binding(kind){ return this.liveSocket.binding(kind) }\n}\n", "/** Initializes the LiveSocket\n *\n *\n * @param {string} endPoint - The string WebSocket endpoint, ie, `\"wss://example.com/live\"`,\n *                                               `\"/live\"` (inherited host & protocol)\n * @param {Phoenix.Socket} socket - the required Phoenix Socket class imported from \"phoenix\". For example:\n *\n *     import {Socket} from \"phoenix\"\n *     import {LiveSocket} from \"phoenix_live_view\"\n *     let liveSocket = new LiveSocket(\"/live\", Socket, {...})\n *\n * @param {Object} [opts] - Optional configuration. Outside of keys listed below, all\n * configuration is passed directly to the Phoenix Socket constructor.\n * @param {Object} [opts.defaults] - The optional defaults to use for various bindings,\n * such as `phx-debounce`. Supports the following keys:\n *\n *   - debounce - the millisecond phx-debounce time. Defaults 300\n *   - throttle - the millisecond phx-throttle time. Defaults 300\n *\n * @param {Function} [opts.params] - The optional function for passing connect params.\n * The function receives the element associated with a given LiveView. For example:\n *\n *     (el) => {view: el.getAttribute(\"data-my-view-name\", token: window.myToken}\n *\n * @param {string} [opts.bindingPrefix] - The optional prefix to use for all phx DOM annotations.\n * Defaults to \"phx-\".\n * @param {Object} [opts.hooks] - The optional object for referencing LiveView hook callbacks.\n * @param {Object} [opts.uploaders] - The optional object for referencing LiveView uploader callbacks.\n * @param {integer} [opts.loaderTimeout] - The optional delay in milliseconds to wait before apply\n * loading states.\n * @param {integer} [opts.maxReloads] - The maximum reloads before entering failsafe mode.\n * @param {integer} [opts.reloadJitterMin] - The minimum time between normal reload attempts.\n * @param {integer} [opts.reloadJitterMax] - The maximum time between normal reload attempts.\n * @param {integer} [opts.failsafeJitter] - The time between reload attempts in failsafe mode.\n * @param {Function} [opts.viewLogger] - The optional function to log debug information. For example:\n *\n *     (view, kind, msg, obj) => console.log(`${view.id} ${kind}: ${msg} - `, obj)\n *\n * @param {Object} [opts.metadata] - The optional object mapping event names to functions for\n * populating event metadata. For example:\n *\n *     metadata: {\n *       click: (e, el) => {\n *         return {\n *           ctrlKey: e.ctrlKey,\n *           metaKey: e.metaKey,\n *           detail: e.detail || 1,\n *         }\n *       },\n *       keydown: (e, el) => {\n *         return {\n *           key: e.key,\n *           ctrlKey: e.ctrlKey,\n *           metaKey: e.metaKey,\n *           shiftKey: e.shiftKey\n *         }\n *       }\n *     }\n * @param {Object} [opts.sessionStorage] - An optional Storage compatible object\n * Useful when LiveView won't have access to `sessionStorage`.  For example, This could\n * happen if a site loads a cross-domain LiveView in an iframe.  Example usage:\n *\n *     class InMemoryStorage {\n *       constructor() { this.storage = {} }\n *       getItem(keyName) { return this.storage[keyName] || null }\n *       removeItem(keyName) { delete this.storage[keyName] }\n *       setItem(keyName, keyValue) { this.storage[keyName] = keyValue }\n *     }\n *\n * @param {Object} [opts.localStorage] - An optional Storage compatible object\n * Useful for when LiveView won't have access to `localStorage`.\n * See `opts.sessionStorage` for examples.\n*/\n\nimport {\n  BINDING_PREFIX,\n  CONSECUTIVE_RELOADS,\n  DEFAULTS,\n  FAILSAFE_JITTER,\n  LOADER_TIMEOUT,\n  MAX_RELOADS,\n  PHX_DEBOUNCE,\n  PHX_DROP_TARGET,\n  PHX_HAS_FOCUSED,\n  PHX_KEY,\n  PHX_LINK_STATE,\n  PHX_LIVE_LINK,\n  PHX_LV_DEBUG,\n  PHX_LV_LATENCY_SIM,\n  PHX_LV_PROFILE,\n  PHX_LV_HISTORY_POSITION,\n  PHX_MAIN,\n  PHX_PARENT_ID,\n  PHX_VIEW_SELECTOR,\n  PHX_ROOT_ID,\n  PHX_THROTTLE,\n  PHX_TRACK_UPLOADS,\n  PHX_SESSION,\n  RELOAD_JITTER_MIN,\n  RELOAD_JITTER_MAX,\n  PHX_REF_SRC,\n  PHX_RELOAD_STATUS\n} from \"./constants\"\n\nimport {\n  clone,\n  closestPhxBinding,\n  closure,\n  debug,\n  maybe\n} from \"./utils\"\n\nimport Browser from \"./browser\"\nimport DOM from \"./dom\"\nimport Hooks from \"./hooks\"\nimport LiveUploader from \"./live_uploader\"\nimport View from \"./view\"\nimport JS from \"./js\"\n\nexport let isUsedInput = (el) => DOM.isUsedInput(el)\n\nexport default class LiveSocket {\n  constructor(url, phxSocket, opts = {}){\n    this.unloaded = false\n    if(!phxSocket || phxSocket.constructor.name === \"Object\"){\n      throw new Error(`\n      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:\n\n          import {Socket} from \"phoenix\"\n          import {LiveSocket} from \"phoenix_live_view\"\n          let liveSocket = new LiveSocket(\"/live\", Socket, {...})\n      `)\n    }\n    this.socket = new phxSocket(url, opts)\n    this.bindingPrefix = opts.bindingPrefix || BINDING_PREFIX\n    this.opts = opts\n    this.params = closure(opts.params || {})\n    this.viewLogger = opts.viewLogger\n    this.metadataCallbacks = opts.metadata || {}\n    this.defaults = Object.assign(clone(DEFAULTS), opts.defaults || {})\n    this.activeElement = null\n    this.prevActive = null\n    this.silenced = false\n    this.main = null\n    this.outgoingMainEl = null\n    this.clickStartedAtTarget = null\n    this.linkRef = 1\n    this.roots = {}\n    this.href = window.location.href\n    this.pendingLink = null\n    this.currentLocation = clone(window.location)\n    this.hooks = opts.hooks || {}\n    this.uploaders = opts.uploaders || {}\n    this.loaderTimeout = opts.loaderTimeout || LOADER_TIMEOUT\n    this.reloadWithJitterTimer = null\n    this.maxReloads = opts.maxReloads || MAX_RELOADS\n    this.reloadJitterMin = opts.reloadJitterMin || RELOAD_JITTER_MIN\n    this.reloadJitterMax = opts.reloadJitterMax || RELOAD_JITTER_MAX\n    this.failsafeJitter = opts.failsafeJitter || FAILSAFE_JITTER\n    this.localStorage = opts.localStorage || window.localStorage\n    this.sessionStorage = opts.sessionStorage || window.sessionStorage\n    this.boundTopLevelEvents = false\n    this.boundEventNames = new Set()\n    this.serverCloseRef = null\n    this.domCallbacks = Object.assign({\n      jsQuerySelectorAll: null,\n      onPatchStart: closure(),\n      onPatchEnd: closure(),\n      onNodeAdded: closure(),\n      onBeforeElUpdated: closure()},\n    opts.dom || {})\n    this.transitions = new TransitionSet()\n    this.currentHistoryPosition = parseInt(this.sessionStorage.getItem(PHX_LV_HISTORY_POSITION)) || 0\n    window.addEventListener(\"pagehide\", _e => {\n      this.unloaded = true\n    })\n    this.socket.onOpen(() => {\n      if(this.isUnloaded()){\n        // reload page if being restored from back/forward cache and browser does not emit \"pageshow\"\n        window.location.reload()\n      }\n    })\n  }\n\n  // public\n\n  version(){ return LV_VSN }\n\n  isProfileEnabled(){ return this.sessionStorage.getItem(PHX_LV_PROFILE) === \"true\" }\n\n  isDebugEnabled(){ return this.sessionStorage.getItem(PHX_LV_DEBUG) === \"true\" }\n\n  isDebugDisabled(){ return this.sessionStorage.getItem(PHX_LV_DEBUG) === \"false\" }\n\n  enableDebug(){ this.sessionStorage.setItem(PHX_LV_DEBUG, \"true\") }\n\n  enableProfiling(){ this.sessionStorage.setItem(PHX_LV_PROFILE, \"true\") }\n\n  disableDebug(){ this.sessionStorage.setItem(PHX_LV_DEBUG, \"false\") }\n\n  disableProfiling(){ this.sessionStorage.removeItem(PHX_LV_PROFILE) }\n\n  enableLatencySim(upperBoundMs){\n    this.enableDebug()\n    console.log(\"latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable\")\n    this.sessionStorage.setItem(PHX_LV_LATENCY_SIM, upperBoundMs)\n  }\n\n  disableLatencySim(){ this.sessionStorage.removeItem(PHX_LV_LATENCY_SIM) }\n\n  getLatencySim(){\n    let str = this.sessionStorage.getItem(PHX_LV_LATENCY_SIM)\n    return str ? parseInt(str) : null\n  }\n\n  getSocket(){ return this.socket }\n\n  connect(){\n    // enable debug by default if on localhost and not explicitly disabled\n    if(window.location.hostname === \"localhost\" && !this.isDebugDisabled()){ this.enableDebug() }\n    let doConnect = () => {\n      this.resetReloadStatus()\n      if(this.joinRootViews()){\n        this.bindTopLevelEvents()\n        this.socket.connect()\n      } else if(this.main){\n        this.socket.connect()\n      } else {\n        this.bindTopLevelEvents({dead: true})\n      }\n      this.joinDeadView()\n    }\n    if([\"complete\", \"loaded\", \"interactive\"].indexOf(document.readyState) >= 0){\n      doConnect()\n    } else {\n      document.addEventListener(\"DOMContentLoaded\", () => doConnect())\n    }\n  }\n\n  disconnect(callback){\n    clearTimeout(this.reloadWithJitterTimer)\n    // remove the socket close listener to avoid trying to handle\n    // a server close event when it is actually caused by us disconnecting\n    if(this.serverCloseRef){\n      this.socket.off(this.serverCloseRef)\n      this.serverCloseRef = null\n    }\n    this.socket.disconnect(callback)\n  }\n\n  replaceTransport(transport){\n    clearTimeout(this.reloadWithJitterTimer)\n    this.socket.replaceTransport(transport)\n    this.connect()\n  }\n\n  execJS(el, encodedJS, eventType = null){\n    let e = new CustomEvent(\"phx:exec\", {detail: {sourceElement: el}})\n    this.owner(el, view => JS.exec(e, eventType, encodedJS, view, el))\n  }\n\n  // private\n\n  execJSHookPush(el, phxEvent, data, callback){\n    this.withinOwners(el, view => {\n      let e = new CustomEvent(\"phx:exec\", {detail: {sourceElement: el}})\n      JS.exec(e, \"hook\", phxEvent, view, el, [\"push\", {data, callback}])\n    })\n  }\n\n  unload(){\n    if(this.unloaded){ return }\n    if(this.main && this.isConnected()){ this.log(this.main, \"socket\", () => [\"disconnect for page nav\"]) }\n    this.unloaded = true\n    this.destroyAllViews()\n    this.disconnect()\n  }\n\n  triggerDOM(kind, args){ this.domCallbacks[kind](...args) }\n\n  time(name, func){\n    if(!this.isProfileEnabled() || !console.time){ return func() }\n    console.time(name)\n    let result = func()\n    console.timeEnd(name)\n    return result\n  }\n\n  log(view, kind, msgCallback){\n    if(this.viewLogger){\n      let [msg, obj] = msgCallback()\n      this.viewLogger(view, kind, msg, obj)\n    } else if(this.isDebugEnabled()){\n      let [msg, obj] = msgCallback()\n      debug(view, kind, msg, obj)\n    }\n  }\n\n  requestDOMUpdate(callback){\n    this.transitions.after(callback)\n  }\n\n  transition(time, onStart, onDone = function(){}){\n    this.transitions.addTransition(time, onStart, onDone)\n  }\n\n  onChannel(channel, event, cb){\n    channel.on(event, data => {\n      let latency = this.getLatencySim()\n      if(!latency){\n        cb(data)\n      } else {\n        setTimeout(() => cb(data), latency)\n      }\n    })\n  }\n\n  reloadWithJitter(view, log){\n    clearTimeout(this.reloadWithJitterTimer)\n    this.disconnect()\n    let minMs = this.reloadJitterMin\n    let maxMs = this.reloadJitterMax\n    let afterMs = Math.floor(Math.random() * (maxMs - minMs + 1)) + minMs\n    let tries = Browser.updateLocal(this.localStorage, window.location.pathname, CONSECUTIVE_RELOADS, 0, count => count + 1)\n    if(tries >= this.maxReloads){\n      afterMs = this.failsafeJitter\n    }\n    this.reloadWithJitterTimer = setTimeout(() => {\n      // if view has recovered, such as transport replaced, then cancel\n      if(view.isDestroyed() || view.isConnected()){ return }\n      view.destroy()\n      log ? log() : this.log(view, \"join\", () => [`encountered ${tries} consecutive reloads`])\n      if(tries >= this.maxReloads){\n        this.log(view, \"join\", () => [`exceeded ${this.maxReloads} consecutive reloads. Entering failsafe mode`])\n      }\n      if(this.hasPendingLink()){\n        window.location = this.pendingLink\n      } else {\n        window.location.reload()\n      }\n    }, afterMs)\n  }\n\n  getHookCallbacks(name){\n    return name && name.startsWith(\"Phoenix.\") ? Hooks[name.split(\".\")[1]] : this.hooks[name]\n  }\n\n  isUnloaded(){ return this.unloaded }\n\n  isConnected(){ return this.socket.isConnected() }\n\n  getBindingPrefix(){ return this.bindingPrefix }\n\n  binding(kind){ return `${this.getBindingPrefix()}${kind}` }\n\n  channel(topic, params){ return this.socket.channel(topic, params) }\n\n  joinDeadView(){\n    let body = document.body\n    if(body && !this.isPhxView(body) && !this.isPhxView(document.firstElementChild)){\n      let view = this.newRootView(body)\n      view.setHref(this.getHref())\n      view.joinDead()\n      if(!this.main){ this.main = view }\n      window.requestAnimationFrame(() => view.execNewMounted())\n    }\n  }\n\n  joinRootViews(){\n    let rootsFound = false\n    DOM.all(document, `${PHX_VIEW_SELECTOR}:not([${PHX_PARENT_ID}])`, rootEl => {\n      if(!this.getRootById(rootEl.id)){\n        let view = this.newRootView(rootEl)\n        view.setHref(this.getHref())\n        view.join()\n        if(rootEl.hasAttribute(PHX_MAIN)){ this.main = view }\n      }\n      rootsFound = true\n    })\n    return rootsFound\n  }\n\n  redirect(to, flash, reloadToken){\n    if(reloadToken){ Browser.setCookie(PHX_RELOAD_STATUS, reloadToken, 60) }\n    this.unload()\n    Browser.redirect(to, flash)\n  }\n\n  replaceMain(href, flash, callback = null, linkRef = this.setPendingLink(href)){\n    let liveReferer = this.currentLocation.href\n    this.outgoingMainEl = this.outgoingMainEl || this.main.el\n    let removeEls = DOM.all(this.outgoingMainEl, `[${this.binding(\"remove\")}]`)\n    let newMainEl = DOM.cloneNode(this.outgoingMainEl, \"\")\n    this.main.showLoader(this.loaderTimeout)\n    this.main.destroy()\n\n    this.main = this.newRootView(newMainEl, flash, liveReferer)\n    this.main.setRedirect(href)\n    this.transitionRemoves(removeEls, true)\n    this.main.join((joinCount, onDone) => {\n      if(joinCount === 1 && this.commitPendingLink(linkRef)){\n        this.requestDOMUpdate(() => {\n          // remove phx-remove els right before we replace the main element\n          removeEls.forEach(el => el.remove())\n          DOM.findPhxSticky(document).forEach(el => newMainEl.appendChild(el))\n          this.outgoingMainEl.replaceWith(newMainEl)\n          this.outgoingMainEl = null\n          callback && callback(linkRef)\n          onDone()\n        })\n      }\n    })\n  }\n\n  transitionRemoves(elements, skipSticky, callback){\n    let removeAttr = this.binding(\"remove\")\n    if(skipSticky){\n      const stickies = DOM.findPhxSticky(document) || []\n      elements = elements.filter(el => !DOM.isChildOfAny(el, stickies))\n    }\n    let silenceEvents = (e) => {\n      e.preventDefault()\n      e.stopImmediatePropagation()\n    }\n    elements.forEach(el => {\n      // prevent all listeners we care about from bubbling to window\n      // since we are removing the element\n      for(let event of this.boundEventNames){\n        el.addEventListener(event, silenceEvents, true)\n      }\n      this.execJS(el, el.getAttribute(removeAttr), \"remove\")\n    })\n    // remove the silenced listeners when transitions are done incase the element is re-used\n    // and call caller's callback as soon as we are done with transitions\n    this.requestDOMUpdate(() => {\n      elements.forEach(el => {\n        for(let event of this.boundEventNames){\n          el.removeEventListener(event, silenceEvents, true)\n        }\n      })\n      callback && callback()\n    })\n  }\n\n  isPhxView(el){ return el.getAttribute && el.getAttribute(PHX_SESSION) !== null }\n\n  newRootView(el, flash, liveReferer){\n    let view = new View(el, this, null, flash, liveReferer)\n    this.roots[view.id] = view\n    return view\n  }\n\n  owner(childEl, callback){\n    let view = maybe(childEl.closest(PHX_VIEW_SELECTOR), el => this.getViewByEl(el)) || this.main\n    return view && callback ? callback(view) : view\n  }\n\n  withinOwners(childEl, callback){\n    this.owner(childEl, view => callback(view, childEl))\n  }\n\n  getViewByEl(el){\n    let rootId = el.getAttribute(PHX_ROOT_ID)\n    return maybe(this.getRootById(rootId), root => root.getDescendentByEl(el))\n  }\n\n  getRootById(id){ return this.roots[id] }\n\n  destroyAllViews(){\n    for(let id in this.roots){\n      this.roots[id].destroy()\n      delete this.roots[id]\n    }\n    this.main = null\n  }\n\n  destroyViewByEl(el){\n    let root = this.getRootById(el.getAttribute(PHX_ROOT_ID))\n    if(root && root.id === el.id){\n      root.destroy()\n      delete this.roots[root.id]\n    } else if(root){\n      root.destroyDescendent(el.id)\n    }\n  }\n\n  getActiveElement(){\n    return document.activeElement\n  }\n\n  dropActiveElement(view){\n    if(this.prevActive && view.ownsElement(this.prevActive)){\n      this.prevActive = null\n    }\n  }\n\n  restorePreviouslyActiveFocus(){\n    if(this.prevActive && this.prevActive !== document.body){\n      this.prevActive.focus()\n    }\n  }\n\n  blurActiveElement(){\n    this.prevActive = this.getActiveElement()\n    if(this.prevActive !== document.body){ this.prevActive.blur() }\n  }\n\n  bindTopLevelEvents({dead} = {}){\n    if(this.boundTopLevelEvents){ return }\n\n    this.boundTopLevelEvents = true\n    // enter failsafe reload if server has gone away intentionally, such as \"disconnect\" broadcast\n    this.serverCloseRef = this.socket.onClose(event => {\n      // failsafe reload if normal closure and we still have a main LV\n      if(event && event.code === 1000 && this.main){ return this.reloadWithJitter(this.main) }\n    })\n    document.body.addEventListener(\"click\", function (){ }) // ensure all click events bubble for mobile Safari\n    window.addEventListener(\"pageshow\", e => {\n      if(e.persisted){ // reload page if being restored from back/forward cache\n        this.getSocket().disconnect()\n        this.withPageLoading({to: window.location.href, kind: \"redirect\"})\n        window.location.reload()\n      }\n    }, true)\n    if(!dead){ this.bindNav() }\n    this.bindClicks()\n    if(!dead){ this.bindForms() }\n    this.bind({keyup: \"keyup\", keydown: \"keydown\"}, (e, type, view, targetEl, phxEvent, _phxTarget) => {\n      let matchKey = targetEl.getAttribute(this.binding(PHX_KEY))\n      let pressedKey = e.key && e.key.toLowerCase() // chrome clicked autocompletes send a keydown without key\n      if(matchKey && matchKey.toLowerCase() !== pressedKey){ return }\n\n      let data = {key: e.key, ...this.eventMeta(type, e, targetEl)}\n      JS.exec(e, type, phxEvent, view, targetEl, [\"push\", {data}])\n    })\n    this.bind({blur: \"focusout\", focus: \"focusin\"}, (e, type, view, targetEl, phxEvent, phxTarget) => {\n      if(!phxTarget){\n        let data = {key: e.key, ...this.eventMeta(type, e, targetEl)}\n        JS.exec(e, type, phxEvent, view, targetEl, [\"push\", {data}])\n      }\n    })\n    this.bind({blur: \"blur\", focus: \"focus\"}, (e, type, view, targetEl, phxEvent, phxTarget) => {\n      // blur and focus are triggered on document and window. Discard one to avoid dups\n      if(phxTarget === \"window\"){\n        let data = this.eventMeta(type, e, targetEl)\n        JS.exec(e, type, phxEvent, view, targetEl, [\"push\", {data}])\n      }\n    })\n    this.on(\"dragover\", e => e.preventDefault())\n    this.on(\"drop\", e => {\n      e.preventDefault()\n      let dropTargetId = maybe(closestPhxBinding(e.target, this.binding(PHX_DROP_TARGET)), trueTarget => {\n        return trueTarget.getAttribute(this.binding(PHX_DROP_TARGET))\n      })\n      let dropTarget = dropTargetId && document.getElementById(dropTargetId)\n      let files = Array.from(e.dataTransfer.files || [])\n      if(!dropTarget || dropTarget.disabled || files.length === 0 || !(dropTarget.files instanceof FileList)){ return }\n\n      LiveUploader.trackFiles(dropTarget, files, e.dataTransfer)\n      dropTarget.dispatchEvent(new Event(\"input\", {bubbles: true}))\n    })\n    this.on(PHX_TRACK_UPLOADS, e => {\n      let uploadTarget = e.target\n      if(!DOM.isUploadInput(uploadTarget)){ return }\n      let files = Array.from(e.detail.files || []).filter(f => f instanceof File || f instanceof Blob)\n      LiveUploader.trackFiles(uploadTarget, files)\n      uploadTarget.dispatchEvent(new Event(\"input\", {bubbles: true}))\n    })\n  }\n\n  eventMeta(eventName, e, targetEl){\n    let callback = this.metadataCallbacks[eventName]\n    return callback ? callback(e, targetEl) : {}\n  }\n\n  setPendingLink(href){\n    this.linkRef++\n    this.pendingLink = href\n    this.resetReloadStatus()\n    return this.linkRef\n  }\n\n  // anytime we are navigating or connecting, drop reload cookie in case\n  // we issue the cookie but the next request was interrupted and the server never dropped it\n  resetReloadStatus(){ Browser.deleteCookie(PHX_RELOAD_STATUS) }\n\n  commitPendingLink(linkRef){\n    if(this.linkRef !== linkRef){\n      return false\n    } else {\n      this.href = this.pendingLink\n      this.pendingLink = null\n      return true\n    }\n  }\n\n  getHref(){ return this.href }\n\n  hasPendingLink(){ return !!this.pendingLink }\n\n  bind(events, callback){\n    for(let event in events){\n      let browserEventName = events[event]\n\n      this.on(browserEventName, e => {\n        let binding = this.binding(event)\n        let windowBinding = this.binding(`window-${event}`)\n        let targetPhxEvent = e.target.getAttribute && e.target.getAttribute(binding)\n        if(targetPhxEvent){\n          this.debounce(e.target, e, browserEventName, () => {\n            this.withinOwners(e.target, view => {\n              callback(e, event, view, e.target, targetPhxEvent, null)\n            })\n          })\n        } else {\n          DOM.all(document, `[${windowBinding}]`, el => {\n            let phxEvent = el.getAttribute(windowBinding)\n            this.debounce(el, e, browserEventName, () => {\n              this.withinOwners(el, view => {\n                callback(e, event, view, el, phxEvent, \"window\")\n              })\n            })\n          })\n        }\n      })\n    }\n  }\n\n  bindClicks(){\n    this.on(\"mousedown\", e => this.clickStartedAtTarget = e.target)\n    this.bindClick(\"click\", \"click\")\n  }\n\n  bindClick(eventName, bindingName){\n    let click = this.binding(bindingName)\n    window.addEventListener(eventName, e => {\n      let target = null\n      // a synthetic click event (detail 0) will not have caused a mousedown event,\n      // therefore the clickStartedAtTarget is stale\n      if(e.detail === 0) this.clickStartedAtTarget = e.target\n      let clickStartedAtTarget = this.clickStartedAtTarget || e.target\n      // when searching the target for the click event, we always want to\n      // use the actual event target, see #3372\n      target = closestPhxBinding(e.target, click)\n      this.dispatchClickAway(e, clickStartedAtTarget)\n      this.clickStartedAtTarget = null\n      let phxEvent = target && target.getAttribute(click)\n      if(!phxEvent){\n        if(DOM.isNewPageClick(e, window.location)){ this.unload() }\n        return\n      }\n\n      if(target.getAttribute(\"href\") === \"#\"){ e.preventDefault() }\n\n      // noop if we are in the middle of awaiting an ack for this el already\n      if(target.hasAttribute(PHX_REF_SRC)){ return }\n\n      this.debounce(target, e, \"click\", () => {\n        this.withinOwners(target, view => {\n          JS.exec(e, \"click\", phxEvent, view, target, [\"push\", {data: this.eventMeta(\"click\", e, target)}])\n        })\n      })\n    }, false)\n  }\n\n  dispatchClickAway(e, clickStartedAt){\n    let phxClickAway = this.binding(\"click-away\")\n    DOM.all(document, `[${phxClickAway}]`, el => {\n      if(!(el.isSameNode(clickStartedAt) || el.contains(clickStartedAt))){\n        this.withinOwners(el, view => {\n          let phxEvent = el.getAttribute(phxClickAway)\n          if(JS.isVisible(el) && JS.isInViewport(el)){\n            JS.exec(e, \"click\", phxEvent, view, el, [\"push\", {data: this.eventMeta(\"click\", e, e.target)}])\n          }\n        })\n      }\n    })\n  }\n\n  bindNav(){\n    if(!Browser.canPushState()){ return }\n    if(history.scrollRestoration){ history.scrollRestoration = \"manual\" }\n    let scrollTimer = null\n    window.addEventListener(\"scroll\", _e => {\n      clearTimeout(scrollTimer)\n      scrollTimer = setTimeout(() => {\n        Browser.updateCurrentState(state => Object.assign(state, {scroll: window.scrollY}))\n      }, 100)\n    })\n    window.addEventListener(\"popstate\", event => {\n      if(!this.registerNewLocation(window.location)){ return }\n      let {type, backType, id, root, scroll, position} = event.state || {}\n      let href = window.location.href\n\n      // Compare positions to determine direction\n      let isForward = position > this.currentHistoryPosition\n\n      type = isForward ? type : (backType || type)\n\n      // Update current position\n      this.currentHistoryPosition = position || 0\n      this.sessionStorage.setItem(PHX_LV_HISTORY_POSITION, this.currentHistoryPosition.toString())\n\n      DOM.dispatchEvent(window, \"phx:navigate\", {detail: {href, patch: type === \"patch\", pop: true, direction: isForward ? \"forward\" : \"backward\"}})\n      this.requestDOMUpdate(() => {\n        if(this.main.isConnected() && (type === \"patch\" && id === this.main.id)){\n          this.main.pushLinkPatch(event, href, null, () => {\n            this.maybeScroll(scroll)\n          })\n        } else {\n          this.replaceMain(href, null, () => {\n            if(root){ this.replaceRootHistory() }\n            this.maybeScroll(scroll)\n          })\n        }\n      })\n    }, false)\n    window.addEventListener(\"click\", e => {\n      let target = closestPhxBinding(e.target, PHX_LIVE_LINK)\n      let type = target && target.getAttribute(PHX_LIVE_LINK)\n      if(!type || !this.isConnected() || !this.main || DOM.wantsNewTab(e)){ return }\n\n      // When wrapping an SVG element in an anchor tag, the href can be an SVGAnimatedString\n      let href = target.href instanceof SVGAnimatedString ? target.href.baseVal : target.href\n\n      let linkState = target.getAttribute(PHX_LINK_STATE)\n      e.preventDefault()\n      e.stopImmediatePropagation() // do not bubble click to regular phx-click bindings\n      if(this.pendingLink === href){ return }\n\n      this.requestDOMUpdate(() => {\n        if(type === \"patch\"){\n          this.pushHistoryPatch(e, href, linkState, target)\n        } else if(type === \"redirect\"){\n          this.historyRedirect(e, href, linkState, null, target)\n        } else {\n          throw new Error(`expected ${PHX_LIVE_LINK} to be \"patch\" or \"redirect\", got: ${type}`)\n        }\n        let phxClick = target.getAttribute(this.binding(\"click\"))\n        if(phxClick){\n          this.requestDOMUpdate(() => this.execJS(target, phxClick, \"click\"))\n        }\n      })\n    }, false)\n  }\n\n  maybeScroll(scroll){\n    if(typeof(scroll) === \"number\"){\n      requestAnimationFrame(() => {\n        window.scrollTo(0, scroll)\n      }) // the body needs to render before we scroll.\n    }\n  }\n\n  dispatchEvent(event, payload = {}){\n    DOM.dispatchEvent(window, `phx:${event}`, {detail: payload})\n  }\n\n  dispatchEvents(events){\n    events.forEach(([event, payload]) => this.dispatchEvent(event, payload))\n  }\n\n  withPageLoading(info, callback){\n    DOM.dispatchEvent(window, \"phx:page-loading-start\", {detail: info})\n    let done = () => DOM.dispatchEvent(window, \"phx:page-loading-stop\", {detail: info})\n    return callback ? callback(done) : done\n  }\n\n  pushHistoryPatch(e, href, linkState, targetEl){\n    if(!this.isConnected() || !this.main.isMain()){ return Browser.redirect(href) }\n\n    this.withPageLoading({to: href, kind: \"patch\"}, done => {\n      this.main.pushLinkPatch(e, href, targetEl, linkRef => {\n        this.historyPatch(href, linkState, linkRef)\n        done()\n      })\n    })\n  }\n\n  historyPatch(href, linkState, linkRef = this.setPendingLink(href)){\n    if(!this.commitPendingLink(linkRef)){ return }\n\n    // Increment position for new state\n    this.currentHistoryPosition++\n    this.sessionStorage.setItem(PHX_LV_HISTORY_POSITION, this.currentHistoryPosition.toString())\n\n    // store the type for back navigation\n    Browser.updateCurrentState((state) => ({...state, backType: \"patch\"}))\n\n    Browser.pushState(linkState, {\n      type: \"patch\",\n      id: this.main.id,\n      position: this.currentHistoryPosition\n    }, href)\n\n    DOM.dispatchEvent(window, \"phx:navigate\", {detail: {patch: true, href, pop: false, direction: \"forward\"}})\n    this.registerNewLocation(window.location)\n  }\n\n  historyRedirect(e, href, linkState, flash, targetEl){\n    if(targetEl && e.isTrusted && e.type !== \"popstate\"){ targetEl.classList.add(\"phx-click-loading\") }\n    if(!this.isConnected() || !this.main.isMain()){ return Browser.redirect(href, flash) }\n\n    // convert to full href if only path prefix\n    if(/^\\/$|^\\/[^\\/]+.*$/.test(href)){\n      let {protocol, host} = window.location\n      href = `${protocol}//${host}${href}`\n    }\n    let scroll = window.scrollY\n    this.withPageLoading({to: href, kind: \"redirect\"}, done => {\n      this.replaceMain(href, flash, (linkRef) => {\n        if(linkRef === this.linkRef){\n          // Increment position for new state\n          this.currentHistoryPosition++\n          this.sessionStorage.setItem(PHX_LV_HISTORY_POSITION, this.currentHistoryPosition.toString())\n\n          // store the type for back navigation\n          Browser.updateCurrentState((state) => ({...state, backType: \"redirect\"}))\n\n          Browser.pushState(linkState, {\n            type: \"redirect\",\n            id: this.main.id,\n            scroll: scroll,\n            position: this.currentHistoryPosition\n          }, href)\n\n          DOM.dispatchEvent(window, \"phx:navigate\", {detail: {href, patch: false, pop: false, direction: \"forward\"}})\n          this.registerNewLocation(window.location)\n        }\n        done()\n      })\n    })\n  }\n\n  replaceRootHistory(){\n    Browser.pushState(\"replace\", {\n      root: true,\n      type: \"patch\",\n      id: this.main.id,\n      position: this.currentHistoryPosition // Preserve current position\n    })\n  }\n\n  registerNewLocation(newLocation){\n    let {pathname, search} = this.currentLocation\n    if(pathname + search === newLocation.pathname + newLocation.search){\n      return false\n    } else {\n      this.currentLocation = clone(newLocation)\n      return true\n    }\n  }\n\n  bindForms(){\n    let iterations = 0\n    let externalFormSubmitted = false\n\n    // disable forms on submit that track phx-change but perform external submit\n    this.on(\"submit\", e => {\n      let phxSubmit = e.target.getAttribute(this.binding(\"submit\"))\n      let phxChange = e.target.getAttribute(this.binding(\"change\"))\n      if(!externalFormSubmitted && phxChange && !phxSubmit){\n        externalFormSubmitted = true\n        e.preventDefault()\n        this.withinOwners(e.target, view => {\n          view.disableForm(e.target)\n          // safari needs next tick\n          window.requestAnimationFrame(() => {\n            if(DOM.isUnloadableFormSubmit(e)){ this.unload() }\n            e.target.submit()\n          })\n        })\n      }\n    })\n\n    this.on(\"submit\", e => {\n      let phxEvent = e.target.getAttribute(this.binding(\"submit\"))\n      if(!phxEvent){\n        if(DOM.isUnloadableFormSubmit(e)){ this.unload() }\n        return\n      }\n      e.preventDefault()\n      e.target.disabled = true\n      this.withinOwners(e.target, view => {\n        JS.exec(e, \"submit\", phxEvent, view, e.target, [\"push\", {submitter: e.submitter}])\n      })\n    })\n\n    for(let type of [\"change\", \"input\"]){\n      this.on(type, e => {\n        if(e instanceof CustomEvent && e.target.form === undefined){\n          // throw on invalid JS.dispatch target and noop if CustomEvent triggered outside JS.dispatch\n          if(e.detail && e.detail.dispatcher){\n            throw new Error(`dispatching a custom ${type} event is only supported on input elements inside a form`)\n          }\n          return\n        }\n        let phxChange = this.binding(\"change\")\n        let input = e.target\n        // do not fire phx-change if we are in the middle of a composition session\n        // https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/isComposing\n        // Safari has issues if the input is updated while composing\n        // see https://github.com/phoenixframework/phoenix_live_view/issues/3322\n        if(e.isComposing){\n          const key = `composition-listener-${type}`\n          if(!DOM.private(input, key)){\n            DOM.putPrivate(input, key, true)\n            input.addEventListener(\"compositionend\", () => {\n              // trigger a new input/change event\n              input.dispatchEvent(new Event(type, {bubbles: true}))\n              DOM.deletePrivate(input, key)\n            }, {once: true})\n          }\n          return\n        }\n        let inputEvent = input.getAttribute(phxChange)\n        let formEvent = input.form && input.form.getAttribute(phxChange)\n        let phxEvent = inputEvent || formEvent\n        if(!phxEvent){ return }\n        if(input.type === \"number\" && input.validity && input.validity.badInput){ return }\n\n        let dispatcher = inputEvent ? input : input.form\n        let currentIterations = iterations\n        iterations++\n        let {at: at, type: lastType} = DOM.private(input, \"prev-iteration\") || {}\n        // Browsers should always fire at least one \"input\" event before every \"change\"\n        // Ignore \"change\" events, unless there was no prior \"input\" event.\n        // This could happen if user code triggers a \"change\" event, or if the browser is non-conforming.\n        if(at === currentIterations - 1 && type === \"change\" && lastType === \"input\"){ return }\n\n        DOM.putPrivate(input, \"prev-iteration\", {at: currentIterations, type: type})\n\n        this.debounce(input, e, type, () => {\n          this.withinOwners(dispatcher, view => {\n            DOM.putPrivate(input, PHX_HAS_FOCUSED, true)\n            JS.exec(e, \"change\", phxEvent, view, input, [\"push\", {_target: e.target.name, dispatcher: dispatcher}])\n          })\n        })\n      })\n    }\n    this.on(\"reset\", (e) => {\n      let form = e.target\n      DOM.resetForm(form)\n      let input = Array.from(form.elements).find(el => el.type === \"reset\")\n      if(input){\n        // wait until next tick to get updated input value\n        window.requestAnimationFrame(() => {\n          input.dispatchEvent(new Event(\"input\", {bubbles: true, cancelable: false}))\n        })\n      }\n    })\n  }\n\n  debounce(el, event, eventType, callback){\n    if(eventType === \"blur\" || eventType === \"focusout\"){ return callback() }\n\n    let phxDebounce = this.binding(PHX_DEBOUNCE)\n    let phxThrottle = this.binding(PHX_THROTTLE)\n    let defaultDebounce = this.defaults.debounce.toString()\n    let defaultThrottle = this.defaults.throttle.toString()\n\n    this.withinOwners(el, view => {\n      let asyncFilter = () => !view.isDestroyed() && document.body.contains(el)\n      DOM.debounce(el, event, phxDebounce, defaultDebounce, phxThrottle, defaultThrottle, asyncFilter, () => {\n        callback()\n      })\n    })\n  }\n\n  silenceEvents(callback){\n    this.silenced = true\n    callback()\n    this.silenced = false\n  }\n\n  on(event, callback){\n    this.boundEventNames.add(event)\n    window.addEventListener(event, e => {\n      if(!this.silenced){ callback(e) }\n    })\n  }\n\n  jsQuerySelectorAll(sourceEl, query, defaultQuery){\n    let all = this.domCallbacks.jsQuerySelectorAll\n    return all ? all(sourceEl, query, defaultQuery) : defaultQuery()\n  }\n}\n\nclass TransitionSet {\n  constructor(){\n    this.transitions = new Set()\n    this.pendingOps = []\n  }\n\n  reset(){\n    this.transitions.forEach(timer => {\n      clearTimeout(timer)\n      this.transitions.delete(timer)\n    })\n    this.flushPendingOps()\n  }\n\n  after(callback){\n    if(this.size() === 0){\n      callback()\n    } else {\n      this.pushPendingOp(callback)\n    }\n  }\n\n  addTransition(time, onStart, onDone){\n    onStart()\n    let timer = setTimeout(() => {\n      this.transitions.delete(timer)\n      onDone()\n      this.flushPendingOps()\n    }, time)\n    this.transitions.add(timer)\n  }\n\n  pushPendingOp(op){ this.pendingOps.push(op) }\n\n  size(){ return this.transitions.size }\n\n  flushPendingOps(){\n    if(this.size() > 0){ return }\n    let op = this.pendingOps.shift()\n    if(op){\n      op()\n      this.flushPendingOps()\n    }\n  }\n}\n", "/*\n================================================================================\nPhoenix LiveView JavaScript Client\n================================================================================\n\nSee the hexdocs at `https://hexdocs.pm/phoenix_live_view` for documentation.\n\n*/\n\nimport LiveSocket, {isUsedInput} from \"./live_socket\"\nimport DOM from \"./dom\"\nimport ViewHook from \"./view_hook\"\nimport View from \"./view\"\n\n/** Creates a ViewHook instance for the given element and callbacks.\n *\n * @param {HTMLElement} el - The element to associate with the hook.\n * @param {Object} [callbacks] - The list of hook callbacks, such as mounted,\n *   updated, destroyed, etc.\n *\n * @example\n *\n * class MyComponent extends HTMLElement {\n *   connectedCallback(){\n *     let onLiveViewMounted = () => this.hook.pushEvent(...))\n *     this.hook = createHook(this, {mounted: onLiveViewMounted})\n *   }\n * }\n *\n * *Note*: `createHook` must be called from the `connectedCallback` lifecycle\n * which is triggered after the element has been added to the DOM. If you try\n * to call `createHook` from the constructor, an error will be logged.\n *\n * @returns {ViewHook} Returns the ViewHook instance for the custom element.\n */\nlet createHook = (el, callbacks = {}) => {\n  let existingHook = DOM.getCustomElHook(el)\n  if(existingHook){ return existingHook }\n\n  let hook = new ViewHook(View.closestView(el), el, callbacks)\n  DOM.putCustomElHook(el, hook)\n  return hook\n}\n\nexport {\n  LiveSocket,\n  isUsedInput,\n  createHook\n}\n", "// If you want to use Phoenix channels, run `mix help phx.gen.channel`\n// to get started and then uncomment the line below.\n// import \"./user_socket.js\"\n\n// You can include dependencies in two ways.\n//\n// The simplest option is to put them in assets/vendor and\n// import them using relative paths:\n//\n//     import \"../vendor/some-package.js\"\n//\n// Alternatively, you can `npm install some-package --prefix assets` and import\n// them using a path starting with the package name:\n//\n//     import \"some-package\"\n//\n\n// Include phoenix_html to handle method=PUT/DELETE in forms and buttons.\nimport \"phoenix_html\"\n// Establish Phoenix Socket and LiveView configuration.\nimport { Socket } from \"phoenix\"\nimport { LiveSocket } from \"phoenix_live_view\"\nimport topbar from \"../vendor/topbar\"\nimport sortable from \"./hooks/sortable\"\nimport markdown from \"./hooks/markdown\"\nimport S3Uploader from './uploaders/s3'\nimport LocalLocaleStorage from './hooks/local_locale_storage'\n\nconst Hooks = { Drag: sortable, Markdown: markdown, LocalLocaleStorage: LocalLocaleStorage }\n\nlet csrfToken = document.querySelector(\"meta[name='csrf-token']\").getAttribute(\"content\")\nlet liveSocket = new LiveSocket(\"/live\", Socket, {\n  longPollFallbackMs: 2500,\n  params: { _csrf_token: csrfToken },\n  uploaders: { S3: S3Uploader },\n  hooks: Hooks,\n})\n\n// Show progress bar on live navigation and form submits\ntopbar.config({ barColors: { 0: \"#29d\" }, shadowColor: \"rgba(0, 0, 0, .3)\" })\nwindow.addEventListener(\"phx:page-loading-start\", _info => topbar.show(300))\nwindow.addEventListener(\"phx:page-loading-stop\", _info => topbar.hide())\n\n// connect if there are any LiveViews on the page\nliveSocket.connect()\n\n// expose liveSocket on window for web console debug logs and latency simulation:\n// >> liveSocket.enableDebug()\n// >> liveSocket.enableLatencySim(1000)  // enabled for duration of browser session\n// >> liveSocket.disableLatencySim()\nwindow.liveSocket = liveSocket\n", "/**!\n * Sortable 1.15.4\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar version = \"1.15.4\";\n\nfunction userAgent(pattern) {\n  if (typeof window !== 'undefined' && window.navigator) {\n    return !! /*@__PURE__*/navigator.userAgent.match(pattern);\n  }\n}\nvar IE11OrLess = userAgent(/(?:Trident.*rv[ :]?11\\.|msie|iemobile|Windows Phone)/i);\nvar Edge = userAgent(/Edge/i);\nvar FireFox = userAgent(/firefox/i);\nvar Safari = userAgent(/safari/i) && !userAgent(/chrome/i) && !userAgent(/android/i);\nvar IOS = userAgent(/iP(ad|od|hone)/i);\nvar ChromeForAndroid = userAgent(/chrome/i) && userAgent(/android/i);\n\nvar captureMode = {\n  capture: false,\n  passive: false\n};\nfunction on(el, event, fn) {\n  el.addEventListener(event, fn, !IE11OrLess && captureMode);\n}\nfunction off(el, event, fn) {\n  el.removeEventListener(event, fn, !IE11OrLess && captureMode);\n}\nfunction matches( /**HTMLElement*/el, /**String*/selector) {\n  if (!selector) return;\n  selector[0] === '>' && (selector = selector.substring(1));\n  if (el) {\n    try {\n      if (el.matches) {\n        return el.matches(selector);\n      } else if (el.msMatchesSelector) {\n        return el.msMatchesSelector(selector);\n      } else if (el.webkitMatchesSelector) {\n        return el.webkitMatchesSelector(selector);\n      }\n    } catch (_) {\n      return false;\n    }\n  }\n  return false;\n}\nfunction getParentOrHost(el) {\n  return el.host && el !== document && el.host.nodeType ? el.host : el.parentNode;\n}\nfunction closest( /**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx, includeCTX) {\n  if (el) {\n    ctx = ctx || document;\n    do {\n      if (selector != null && (selector[0] === '>' ? el.parentNode === ctx && matches(el, selector) : matches(el, selector)) || includeCTX && el === ctx) {\n        return el;\n      }\n      if (el === ctx) break;\n      /* jshint boss:true */\n    } while (el = getParentOrHost(el));\n  }\n  return null;\n}\nvar R_SPACE = /\\s+/g;\nfunction toggleClass(el, name, state) {\n  if (el && name) {\n    if (el.classList) {\n      el.classList[state ? 'add' : 'remove'](name);\n    } else {\n      var className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n      el.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n    }\n  }\n}\nfunction css(el, prop, val) {\n  var style = el && el.style;\n  if (style) {\n    if (val === void 0) {\n      if (document.defaultView && document.defaultView.getComputedStyle) {\n        val = document.defaultView.getComputedStyle(el, '');\n      } else if (el.currentStyle) {\n        val = el.currentStyle;\n      }\n      return prop === void 0 ? val : val[prop];\n    } else {\n      if (!(prop in style) && prop.indexOf('webkit') === -1) {\n        prop = '-webkit-' + prop;\n      }\n      style[prop] = val + (typeof val === 'string' ? '' : 'px');\n    }\n  }\n}\nfunction matrix(el, selfOnly) {\n  var appliedTransforms = '';\n  if (typeof el === 'string') {\n    appliedTransforms = el;\n  } else {\n    do {\n      var transform = css(el, 'transform');\n      if (transform && transform !== 'none') {\n        appliedTransforms = transform + ' ' + appliedTransforms;\n      }\n      /* jshint boss:true */\n    } while (!selfOnly && (el = el.parentNode));\n  }\n  var matrixFn = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix || window.MSCSSMatrix;\n  /*jshint -W056 */\n  return matrixFn && new matrixFn(appliedTransforms);\n}\nfunction find(ctx, tagName, iterator) {\n  if (ctx) {\n    var list = ctx.getElementsByTagName(tagName),\n      i = 0,\n      n = list.length;\n    if (iterator) {\n      for (; i < n; i++) {\n        iterator(list[i], i);\n      }\n    }\n    return list;\n  }\n  return [];\n}\nfunction getWindowScrollingElement() {\n  var scrollingElement = document.scrollingElement;\n  if (scrollingElement) {\n    return scrollingElement;\n  } else {\n    return document.documentElement;\n  }\n}\n\n/**\r\n * Returns the \"bounding client rect\" of given element\r\n * @param  {HTMLElement} el                       The element whose boundingClientRect is wanted\r\n * @param  {[Boolean]} relativeToContainingBlock  Whether the rect should be relative to the containing block of (including) the container\r\n * @param  {[Boolean]} relativeToNonStaticParent  Whether the rect should be relative to the relative parent of (including) the contaienr\r\n * @param  {[Boolean]} undoScale                  Whether the container's scale() should be undone\r\n * @param  {[HTMLElement]} container              The parent the element will be placed in\r\n * @return {Object}                               The boundingClientRect of el, with specified adjustments\r\n */\nfunction getRect(el, relativeToContainingBlock, relativeToNonStaticParent, undoScale, container) {\n  if (!el.getBoundingClientRect && el !== window) return;\n  var elRect, top, left, bottom, right, height, width;\n  if (el !== window && el.parentNode && el !== getWindowScrollingElement()) {\n    elRect = el.getBoundingClientRect();\n    top = elRect.top;\n    left = elRect.left;\n    bottom = elRect.bottom;\n    right = elRect.right;\n    height = elRect.height;\n    width = elRect.width;\n  } else {\n    top = 0;\n    left = 0;\n    bottom = window.innerHeight;\n    right = window.innerWidth;\n    height = window.innerHeight;\n    width = window.innerWidth;\n  }\n  if ((relativeToContainingBlock || relativeToNonStaticParent) && el !== window) {\n    // Adjust for translate()\n    container = container || el.parentNode;\n\n    // solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n    // Not needed on <= IE11\n    if (!IE11OrLess) {\n      do {\n        if (container && container.getBoundingClientRect && (css(container, 'transform') !== 'none' || relativeToNonStaticParent && css(container, 'position') !== 'static')) {\n          var containerRect = container.getBoundingClientRect();\n\n          // Set relative to edges of padding box of container\n          top -= containerRect.top + parseInt(css(container, 'border-top-width'));\n          left -= containerRect.left + parseInt(css(container, 'border-left-width'));\n          bottom = top + elRect.height;\n          right = left + elRect.width;\n          break;\n        }\n        /* jshint boss:true */\n      } while (container = container.parentNode);\n    }\n  }\n  if (undoScale && el !== window) {\n    // Adjust for scale()\n    var elMatrix = matrix(container || el),\n      scaleX = elMatrix && elMatrix.a,\n      scaleY = elMatrix && elMatrix.d;\n    if (elMatrix) {\n      top /= scaleY;\n      left /= scaleX;\n      width /= scaleX;\n      height /= scaleY;\n      bottom = top + height;\n      right = left + width;\n    }\n  }\n  return {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n\n/**\r\n * Checks if a side of an element is scrolled past a side of its parents\r\n * @param  {HTMLElement}  el           The element who's side being scrolled out of view is in question\r\n * @param  {String}       elSide       Side of the element in question ('top', 'left', 'right', 'bottom')\r\n * @param  {String}       parentSide   Side of the parent in question ('top', 'left', 'right', 'bottom')\r\n * @return {HTMLElement}               The parent scroll element that the el's side is scrolled past, or null if there is no such element\r\n */\nfunction isScrolledPast(el, elSide, parentSide) {\n  var parent = getParentAutoScrollElement(el, true),\n    elSideVal = getRect(el)[elSide];\n\n  /* jshint boss:true */\n  while (parent) {\n    var parentSideVal = getRect(parent)[parentSide],\n      visible = void 0;\n    if (parentSide === 'top' || parentSide === 'left') {\n      visible = elSideVal >= parentSideVal;\n    } else {\n      visible = elSideVal <= parentSideVal;\n    }\n    if (!visible) return parent;\n    if (parent === getWindowScrollingElement()) break;\n    parent = getParentAutoScrollElement(parent, false);\n  }\n  return false;\n}\n\n/**\r\n * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\r\n * and non-draggable elements\r\n * @param  {HTMLElement} el       The parent element\r\n * @param  {Number} childNum      The index of the child\r\n * @param  {Object} options       Parent Sortable's options\r\n * @return {HTMLElement}          The child at index childNum, or null if not found\r\n */\nfunction getChild(el, childNum, options, includeDragEl) {\n  var currentChild = 0,\n    i = 0,\n    children = el.children;\n  while (i < children.length) {\n    if (children[i].style.display !== 'none' && children[i] !== Sortable.ghost && (includeDragEl || children[i] !== Sortable.dragged) && closest(children[i], options.draggable, el, false)) {\n      if (currentChild === childNum) {\n        return children[i];\n      }\n      currentChild++;\n    }\n    i++;\n  }\n  return null;\n}\n\n/**\r\n * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\r\n * @param  {HTMLElement} el       Parent element\r\n * @param  {selector} selector    Any other elements that should be ignored\r\n * @return {HTMLElement}          The last child, ignoring ghostEl\r\n */\nfunction lastChild(el, selector) {\n  var last = el.lastElementChild;\n  while (last && (last === Sortable.ghost || css(last, 'display') === 'none' || selector && !matches(last, selector))) {\n    last = last.previousElementSibling;\n  }\n  return last || null;\n}\n\n/**\r\n * Returns the index of an element within its parent for a selected set of\r\n * elements\r\n * @param  {HTMLElement} el\r\n * @param  {selector} selector\r\n * @return {number}\r\n */\nfunction index(el, selector) {\n  var index = 0;\n  if (!el || !el.parentNode) {\n    return -1;\n  }\n\n  /* jshint boss:true */\n  while (el = el.previousElementSibling) {\n    if (el.nodeName.toUpperCase() !== 'TEMPLATE' && el !== Sortable.clone && (!selector || matches(el, selector))) {\n      index++;\n    }\n  }\n  return index;\n}\n\n/**\r\n * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\r\n * The value is returned in real pixels.\r\n * @param  {HTMLElement} el\r\n * @return {Array}             Offsets in the format of [left, top]\r\n */\nfunction getRelativeScrollOffset(el) {\n  var offsetLeft = 0,\n    offsetTop = 0,\n    winScroller = getWindowScrollingElement();\n  if (el) {\n    do {\n      var elMatrix = matrix(el),\n        scaleX = elMatrix.a,\n        scaleY = elMatrix.d;\n      offsetLeft += el.scrollLeft * scaleX;\n      offsetTop += el.scrollTop * scaleY;\n    } while (el !== winScroller && (el = el.parentNode));\n  }\n  return [offsetLeft, offsetTop];\n}\n\n/**\r\n * Returns the index of the object within the given array\r\n * @param  {Array} arr   Array that may or may not hold the object\r\n * @param  {Object} obj  An object that has a key-value pair unique to and identical to a key-value pair in the object you want to find\r\n * @return {Number}      The index of the object in the array, or -1\r\n */\nfunction indexOfObject(arr, obj) {\n  for (var i in arr) {\n    if (!arr.hasOwnProperty(i)) continue;\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) && obj[key] === arr[i][key]) return Number(i);\n    }\n  }\n  return -1;\n}\nfunction getParentAutoScrollElement(el, includeSelf) {\n  // skip to window\n  if (!el || !el.getBoundingClientRect) return getWindowScrollingElement();\n  var elem = el;\n  var gotSelf = false;\n  do {\n    // we don't need to get elem css if it isn't even overflowing in the first place (performance)\n    if (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n      var elemCSS = css(elem);\n      if (elem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') || elem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')) {\n        if (!elem.getBoundingClientRect || elem === document.body) return getWindowScrollingElement();\n        if (gotSelf || includeSelf) return elem;\n        gotSelf = true;\n      }\n    }\n    /* jshint boss:true */\n  } while (elem = elem.parentNode);\n  return getWindowScrollingElement();\n}\nfunction extend(dst, src) {\n  if (dst && src) {\n    for (var key in src) {\n      if (src.hasOwnProperty(key)) {\n        dst[key] = src[key];\n      }\n    }\n  }\n  return dst;\n}\nfunction isRectEqual(rect1, rect2) {\n  return Math.round(rect1.top) === Math.round(rect2.top) && Math.round(rect1.left) === Math.round(rect2.left) && Math.round(rect1.height) === Math.round(rect2.height) && Math.round(rect1.width) === Math.round(rect2.width);\n}\nvar _throttleTimeout;\nfunction throttle(callback, ms) {\n  return function () {\n    if (!_throttleTimeout) {\n      var args = arguments,\n        _this = this;\n      if (args.length === 1) {\n        callback.call(_this, args[0]);\n      } else {\n        callback.apply(_this, args);\n      }\n      _throttleTimeout = setTimeout(function () {\n        _throttleTimeout = void 0;\n      }, ms);\n    }\n  };\n}\nfunction cancelThrottle() {\n  clearTimeout(_throttleTimeout);\n  _throttleTimeout = void 0;\n}\nfunction scrollBy(el, x, y) {\n  el.scrollLeft += x;\n  el.scrollTop += y;\n}\nfunction clone(el) {\n  var Polymer = window.Polymer;\n  var $ = window.jQuery || window.Zepto;\n  if (Polymer && Polymer.dom) {\n    return Polymer.dom(el).cloneNode(true);\n  } else if ($) {\n    return $(el).clone(true)[0];\n  } else {\n    return el.cloneNode(true);\n  }\n}\nfunction setRect(el, rect) {\n  css(el, 'position', 'absolute');\n  css(el, 'top', rect.top);\n  css(el, 'left', rect.left);\n  css(el, 'width', rect.width);\n  css(el, 'height', rect.height);\n}\nfunction unsetRect(el) {\n  css(el, 'position', '');\n  css(el, 'top', '');\n  css(el, 'left', '');\n  css(el, 'width', '');\n  css(el, 'height', '');\n}\nfunction getChildContainingRectFromElement(container, options, ghostEl) {\n  var rect = {};\n  Array.from(container.children).forEach(function (child) {\n    var _rect$left, _rect$top, _rect$right, _rect$bottom;\n    if (!closest(child, options.draggable, container, false) || child.animated || child === ghostEl) return;\n    var childRect = getRect(child);\n    rect.left = Math.min((_rect$left = rect.left) !== null && _rect$left !== void 0 ? _rect$left : Infinity, childRect.left);\n    rect.top = Math.min((_rect$top = rect.top) !== null && _rect$top !== void 0 ? _rect$top : Infinity, childRect.top);\n    rect.right = Math.max((_rect$right = rect.right) !== null && _rect$right !== void 0 ? _rect$right : -Infinity, childRect.right);\n    rect.bottom = Math.max((_rect$bottom = rect.bottom) !== null && _rect$bottom !== void 0 ? _rect$bottom : -Infinity, childRect.bottom);\n  });\n  rect.width = rect.right - rect.left;\n  rect.height = rect.bottom - rect.top;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\nvar expando = 'Sortable' + new Date().getTime();\n\nfunction AnimationStateManager() {\n  var animationStates = [],\n    animationCallbackId;\n  return {\n    captureAnimationState: function captureAnimationState() {\n      animationStates = [];\n      if (!this.options.animation) return;\n      var children = [].slice.call(this.el.children);\n      children.forEach(function (child) {\n        if (css(child, 'display') === 'none' || child === Sortable.ghost) return;\n        animationStates.push({\n          target: child,\n          rect: getRect(child)\n        });\n        var fromRect = _objectSpread2({}, animationStates[animationStates.length - 1].rect);\n\n        // If animating: compensate for current animation\n        if (child.thisAnimationDuration) {\n          var childMatrix = matrix(child, true);\n          if (childMatrix) {\n            fromRect.top -= childMatrix.f;\n            fromRect.left -= childMatrix.e;\n          }\n        }\n        child.fromRect = fromRect;\n      });\n    },\n    addAnimationState: function addAnimationState(state) {\n      animationStates.push(state);\n    },\n    removeAnimationState: function removeAnimationState(target) {\n      animationStates.splice(indexOfObject(animationStates, {\n        target: target\n      }), 1);\n    },\n    animateAll: function animateAll(callback) {\n      var _this = this;\n      if (!this.options.animation) {\n        clearTimeout(animationCallbackId);\n        if (typeof callback === 'function') callback();\n        return;\n      }\n      var animating = false,\n        animationTime = 0;\n      animationStates.forEach(function (state) {\n        var time = 0,\n          target = state.target,\n          fromRect = target.fromRect,\n          toRect = getRect(target),\n          prevFromRect = target.prevFromRect,\n          prevToRect = target.prevToRect,\n          animatingRect = state.rect,\n          targetMatrix = matrix(target, true);\n        if (targetMatrix) {\n          // Compensate for current animation\n          toRect.top -= targetMatrix.f;\n          toRect.left -= targetMatrix.e;\n        }\n        target.toRect = toRect;\n        if (target.thisAnimationDuration) {\n          // Could also check if animatingRect is between fromRect and toRect\n          if (isRectEqual(prevFromRect, toRect) && !isRectEqual(fromRect, toRect) &&\n          // Make sure animatingRect is on line between toRect & fromRect\n          (animatingRect.top - toRect.top) / (animatingRect.left - toRect.left) === (fromRect.top - toRect.top) / (fromRect.left - toRect.left)) {\n            // If returning to same place as started from animation and on same axis\n            time = calculateRealTime(animatingRect, prevFromRect, prevToRect, _this.options);\n          }\n        }\n\n        // if fromRect != toRect: animate\n        if (!isRectEqual(toRect, fromRect)) {\n          target.prevFromRect = fromRect;\n          target.prevToRect = toRect;\n          if (!time) {\n            time = _this.options.animation;\n          }\n          _this.animate(target, animatingRect, toRect, time);\n        }\n        if (time) {\n          animating = true;\n          animationTime = Math.max(animationTime, time);\n          clearTimeout(target.animationResetTimer);\n          target.animationResetTimer = setTimeout(function () {\n            target.animationTime = 0;\n            target.prevFromRect = null;\n            target.fromRect = null;\n            target.prevToRect = null;\n            target.thisAnimationDuration = null;\n          }, time);\n          target.thisAnimationDuration = time;\n        }\n      });\n      clearTimeout(animationCallbackId);\n      if (!animating) {\n        if (typeof callback === 'function') callback();\n      } else {\n        animationCallbackId = setTimeout(function () {\n          if (typeof callback === 'function') callback();\n        }, animationTime);\n      }\n      animationStates = [];\n    },\n    animate: function animate(target, currentRect, toRect, duration) {\n      if (duration) {\n        css(target, 'transition', '');\n        css(target, 'transform', '');\n        var elMatrix = matrix(this.el),\n          scaleX = elMatrix && elMatrix.a,\n          scaleY = elMatrix && elMatrix.d,\n          translateX = (currentRect.left - toRect.left) / (scaleX || 1),\n          translateY = (currentRect.top - toRect.top) / (scaleY || 1);\n        target.animatingX = !!translateX;\n        target.animatingY = !!translateY;\n        css(target, 'transform', 'translate3d(' + translateX + 'px,' + translateY + 'px,0)');\n        this.forRepaintDummy = repaint(target); // repaint\n\n        css(target, 'transition', 'transform ' + duration + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n        css(target, 'transform', 'translate3d(0,0,0)');\n        typeof target.animated === 'number' && clearTimeout(target.animated);\n        target.animated = setTimeout(function () {\n          css(target, 'transition', '');\n          css(target, 'transform', '');\n          target.animated = false;\n          target.animatingX = false;\n          target.animatingY = false;\n        }, duration);\n      }\n    }\n  };\n}\nfunction repaint(target) {\n  return target.offsetWidth;\n}\nfunction calculateRealTime(animatingRect, fromRect, toRect, options) {\n  return Math.sqrt(Math.pow(fromRect.top - animatingRect.top, 2) + Math.pow(fromRect.left - animatingRect.left, 2)) / Math.sqrt(Math.pow(fromRect.top - toRect.top, 2) + Math.pow(fromRect.left - toRect.left, 2)) * options.animation;\n}\n\nvar plugins = [];\nvar defaults = {\n  initializeByDefault: true\n};\nvar PluginManager = {\n  mount: function mount(plugin) {\n    // Set default static properties\n    for (var option in defaults) {\n      if (defaults.hasOwnProperty(option) && !(option in plugin)) {\n        plugin[option] = defaults[option];\n      }\n    }\n    plugins.forEach(function (p) {\n      if (p.pluginName === plugin.pluginName) {\n        throw \"Sortable: Cannot mount plugin \".concat(plugin.pluginName, \" more than once\");\n      }\n    });\n    plugins.push(plugin);\n  },\n  pluginEvent: function pluginEvent(eventName, sortable, evt) {\n    var _this = this;\n    this.eventCanceled = false;\n    evt.cancel = function () {\n      _this.eventCanceled = true;\n    };\n    var eventNameGlobal = eventName + 'Global';\n    plugins.forEach(function (plugin) {\n      if (!sortable[plugin.pluginName]) return;\n      // Fire global events if it exists in this sortable\n      if (sortable[plugin.pluginName][eventNameGlobal]) {\n        sortable[plugin.pluginName][eventNameGlobal](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n\n      // Only fire plugin event if plugin is enabled in this sortable,\n      // and plugin has event defined\n      if (sortable.options[plugin.pluginName] && sortable[plugin.pluginName][eventName]) {\n        sortable[plugin.pluginName][eventName](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n    });\n  },\n  initializePlugins: function initializePlugins(sortable, el, defaults, options) {\n    plugins.forEach(function (plugin) {\n      var pluginName = plugin.pluginName;\n      if (!sortable.options[pluginName] && !plugin.initializeByDefault) return;\n      var initialized = new plugin(sortable, el, sortable.options);\n      initialized.sortable = sortable;\n      initialized.options = sortable.options;\n      sortable[pluginName] = initialized;\n\n      // Add default options from plugin\n      _extends(defaults, initialized.defaults);\n    });\n    for (var option in sortable.options) {\n      if (!sortable.options.hasOwnProperty(option)) continue;\n      var modified = this.modifyOption(sortable, option, sortable.options[option]);\n      if (typeof modified !== 'undefined') {\n        sortable.options[option] = modified;\n      }\n    }\n  },\n  getEventProperties: function getEventProperties(name, sortable) {\n    var eventProperties = {};\n    plugins.forEach(function (plugin) {\n      if (typeof plugin.eventProperties !== 'function') return;\n      _extends(eventProperties, plugin.eventProperties.call(sortable[plugin.pluginName], name));\n    });\n    return eventProperties;\n  },\n  modifyOption: function modifyOption(sortable, name, value) {\n    var modifiedValue;\n    plugins.forEach(function (plugin) {\n      // Plugin must exist on the Sortable\n      if (!sortable[plugin.pluginName]) return;\n\n      // If static option listener exists for this option, call in the context of the Sortable's instance of this plugin\n      if (plugin.optionListeners && typeof plugin.optionListeners[name] === 'function') {\n        modifiedValue = plugin.optionListeners[name].call(sortable[plugin.pluginName], value);\n      }\n    });\n    return modifiedValue;\n  }\n};\n\nfunction dispatchEvent(_ref) {\n  var sortable = _ref.sortable,\n    rootEl = _ref.rootEl,\n    name = _ref.name,\n    targetEl = _ref.targetEl,\n    cloneEl = _ref.cloneEl,\n    toEl = _ref.toEl,\n    fromEl = _ref.fromEl,\n    oldIndex = _ref.oldIndex,\n    newIndex = _ref.newIndex,\n    oldDraggableIndex = _ref.oldDraggableIndex,\n    newDraggableIndex = _ref.newDraggableIndex,\n    originalEvent = _ref.originalEvent,\n    putSortable = _ref.putSortable,\n    extraEventProperties = _ref.extraEventProperties;\n  sortable = sortable || rootEl && rootEl[expando];\n  if (!sortable) return;\n  var evt,\n    options = sortable.options,\n    onName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n  // Support for new CustomEvent feature\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent(name, {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent(name, true, true);\n  }\n  evt.to = toEl || rootEl;\n  evt.from = fromEl || rootEl;\n  evt.item = targetEl || rootEl;\n  evt.clone = cloneEl;\n  evt.oldIndex = oldIndex;\n  evt.newIndex = newIndex;\n  evt.oldDraggableIndex = oldDraggableIndex;\n  evt.newDraggableIndex = newDraggableIndex;\n  evt.originalEvent = originalEvent;\n  evt.pullMode = putSortable ? putSortable.lastPutMode : undefined;\n  var allEventProperties = _objectSpread2(_objectSpread2({}, extraEventProperties), PluginManager.getEventProperties(name, sortable));\n  for (var option in allEventProperties) {\n    evt[option] = allEventProperties[option];\n  }\n  if (rootEl) {\n    rootEl.dispatchEvent(evt);\n  }\n  if (options[onName]) {\n    options[onName].call(sortable, evt);\n  }\n}\n\nvar _excluded = [\"evt\"];\nvar pluginEvent = function pluginEvent(eventName, sortable) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n    originalEvent = _ref.evt,\n    data = _objectWithoutProperties(_ref, _excluded);\n  PluginManager.pluginEvent.bind(Sortable)(eventName, sortable, _objectSpread2({\n    dragEl: dragEl,\n    parentEl: parentEl,\n    ghostEl: ghostEl,\n    rootEl: rootEl,\n    nextEl: nextEl,\n    lastDownEl: lastDownEl,\n    cloneEl: cloneEl,\n    cloneHidden: cloneHidden,\n    dragStarted: moved,\n    putSortable: putSortable,\n    activeSortable: Sortable.active,\n    originalEvent: originalEvent,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex,\n    hideGhostForTarget: _hideGhostForTarget,\n    unhideGhostForTarget: _unhideGhostForTarget,\n    cloneNowHidden: function cloneNowHidden() {\n      cloneHidden = true;\n    },\n    cloneNowShown: function cloneNowShown() {\n      cloneHidden = false;\n    },\n    dispatchSortableEvent: function dispatchSortableEvent(name) {\n      _dispatchEvent({\n        sortable: sortable,\n        name: name,\n        originalEvent: originalEvent\n      });\n    }\n  }, data));\n};\nfunction _dispatchEvent(info) {\n  dispatchEvent(_objectSpread2({\n    putSortable: putSortable,\n    cloneEl: cloneEl,\n    targetEl: dragEl,\n    rootEl: rootEl,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex\n  }, info));\n}\nvar dragEl,\n  parentEl,\n  ghostEl,\n  rootEl,\n  nextEl,\n  lastDownEl,\n  cloneEl,\n  cloneHidden,\n  oldIndex,\n  newIndex,\n  oldDraggableIndex,\n  newDraggableIndex,\n  activeGroup,\n  putSortable,\n  awaitingDragStarted = false,\n  ignoreNextClick = false,\n  sortables = [],\n  tapEvt,\n  touchEvt,\n  lastDx,\n  lastDy,\n  tapDistanceLeft,\n  tapDistanceTop,\n  moved,\n  lastTarget,\n  lastDirection,\n  pastFirstInvertThresh = false,\n  isCircumstantialInvert = false,\n  targetMoveDistance,\n  // For positioning ghost absolutely\n  ghostRelativeParent,\n  ghostRelativeParentInitialScroll = [],\n  // (left, top)\n\n  _silent = false,\n  savedInputChecked = [];\n\n/** @const */\nvar documentExists = typeof document !== 'undefined',\n  PositionGhostAbsolutely = IOS,\n  CSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n  // This will not pass for IE9, because IE9 DnD only works on anchors\n  supportDraggable = documentExists && !ChromeForAndroid && !IOS && 'draggable' in document.createElement('div'),\n  supportCssPointerEvents = function () {\n    if (!documentExists) return;\n    // false when <= IE11\n    if (IE11OrLess) {\n      return false;\n    }\n    var el = document.createElement('x');\n    el.style.cssText = 'pointer-events:auto';\n    return el.style.pointerEvents === 'auto';\n  }(),\n  _detectDirection = function _detectDirection(el, options) {\n    var elCSS = css(el),\n      elWidth = parseInt(elCSS.width) - parseInt(elCSS.paddingLeft) - parseInt(elCSS.paddingRight) - parseInt(elCSS.borderLeftWidth) - parseInt(elCSS.borderRightWidth),\n      child1 = getChild(el, 0, options),\n      child2 = getChild(el, 1, options),\n      firstChildCSS = child1 && css(child1),\n      secondChildCSS = child2 && css(child2),\n      firstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + getRect(child1).width,\n      secondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + getRect(child2).width;\n    if (elCSS.display === 'flex') {\n      return elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse' ? 'vertical' : 'horizontal';\n    }\n    if (elCSS.display === 'grid') {\n      return elCSS.gridTemplateColumns.split(' ').length <= 1 ? 'vertical' : 'horizontal';\n    }\n    if (child1 && firstChildCSS[\"float\"] && firstChildCSS[\"float\"] !== 'none') {\n      var touchingSideChild2 = firstChildCSS[\"float\"] === 'left' ? 'left' : 'right';\n      return child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ? 'vertical' : 'horizontal';\n    }\n    return child1 && (firstChildCSS.display === 'block' || firstChildCSS.display === 'flex' || firstChildCSS.display === 'table' || firstChildCSS.display === 'grid' || firstChildWidth >= elWidth && elCSS[CSSFloatProperty] === 'none' || child2 && elCSS[CSSFloatProperty] === 'none' && firstChildWidth + secondChildWidth > elWidth) ? 'vertical' : 'horizontal';\n  },\n  _dragElInRowColumn = function _dragElInRowColumn(dragRect, targetRect, vertical) {\n    var dragElS1Opp = vertical ? dragRect.left : dragRect.top,\n      dragElS2Opp = vertical ? dragRect.right : dragRect.bottom,\n      dragElOppLength = vertical ? dragRect.width : dragRect.height,\n      targetS1Opp = vertical ? targetRect.left : targetRect.top,\n      targetS2Opp = vertical ? targetRect.right : targetRect.bottom,\n      targetOppLength = vertical ? targetRect.width : targetRect.height;\n    return dragElS1Opp === targetS1Opp || dragElS2Opp === targetS2Opp || dragElS1Opp + dragElOppLength / 2 === targetS1Opp + targetOppLength / 2;\n  },\n  /**\r\n   * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\r\n   * @param  {Number} x      X position\r\n   * @param  {Number} y      Y position\r\n   * @return {HTMLElement}   Element of the first found nearest Sortable\r\n   */\n  _detectNearestEmptySortable = function _detectNearestEmptySortable(x, y) {\n    var ret;\n    sortables.some(function (sortable) {\n      var threshold = sortable[expando].options.emptyInsertThreshold;\n      if (!threshold || lastChild(sortable)) return;\n      var rect = getRect(sortable),\n        insideHorizontally = x >= rect.left - threshold && x <= rect.right + threshold,\n        insideVertically = y >= rect.top - threshold && y <= rect.bottom + threshold;\n      if (insideHorizontally && insideVertically) {\n        return ret = sortable;\n      }\n    });\n    return ret;\n  },\n  _prepareGroup = function _prepareGroup(options) {\n    function toFn(value, pull) {\n      return function (to, from, dragEl, evt) {\n        var sameGroup = to.options.group.name && from.options.group.name && to.options.group.name === from.options.group.name;\n        if (value == null && (pull || sameGroup)) {\n          // Default pull value\n          // Default pull and put value if same group\n          return true;\n        } else if (value == null || value === false) {\n          return false;\n        } else if (pull && value === 'clone') {\n          return value;\n        } else if (typeof value === 'function') {\n          return toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n        } else {\n          var otherGroup = (pull ? to : from).options.group.name;\n          return value === true || typeof value === 'string' && value === otherGroup || value.join && value.indexOf(otherGroup) > -1;\n        }\n      };\n    }\n    var group = {};\n    var originalGroup = options.group;\n    if (!originalGroup || _typeof(originalGroup) != 'object') {\n      originalGroup = {\n        name: originalGroup\n      };\n    }\n    group.name = originalGroup.name;\n    group.checkPull = toFn(originalGroup.pull, true);\n    group.checkPut = toFn(originalGroup.put);\n    group.revertClone = originalGroup.revertClone;\n    options.group = group;\n  },\n  _hideGhostForTarget = function _hideGhostForTarget() {\n    if (!supportCssPointerEvents && ghostEl) {\n      css(ghostEl, 'display', 'none');\n    }\n  },\n  _unhideGhostForTarget = function _unhideGhostForTarget() {\n    if (!supportCssPointerEvents && ghostEl) {\n      css(ghostEl, 'display', '');\n    }\n  };\n\n// #1184 fix - Prevent click event on fallback if dragged but item not changed position\nif (documentExists && !ChromeForAndroid) {\n  document.addEventListener('click', function (evt) {\n    if (ignoreNextClick) {\n      evt.preventDefault();\n      evt.stopPropagation && evt.stopPropagation();\n      evt.stopImmediatePropagation && evt.stopImmediatePropagation();\n      ignoreNextClick = false;\n      return false;\n    }\n  }, true);\n}\nvar nearestEmptyInsertDetectEvent = function nearestEmptyInsertDetectEvent(evt) {\n  if (dragEl) {\n    evt = evt.touches ? evt.touches[0] : evt;\n    var nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n    if (nearest) {\n      // Create imitation event\n      var event = {};\n      for (var i in evt) {\n        if (evt.hasOwnProperty(i)) {\n          event[i] = evt[i];\n        }\n      }\n      event.target = event.rootEl = nearest;\n      event.preventDefault = void 0;\n      event.stopPropagation = void 0;\n      nearest[expando]._onDragOver(event);\n    }\n  }\n};\nvar _checkOutsideTargetEl = function _checkOutsideTargetEl(evt) {\n  if (dragEl) {\n    dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n  }\n};\n\n/**\r\n * @class  Sortable\r\n * @param  {HTMLElement}  el\r\n * @param  {Object}       [options]\r\n */\nfunction Sortable(el, options) {\n  if (!(el && el.nodeType && el.nodeType === 1)) {\n    throw \"Sortable: `el` must be an HTMLElement, not \".concat({}.toString.call(el));\n  }\n  this.el = el; // root element\n  this.options = options = _extends({}, options);\n\n  // Export instance\n  el[expando] = this;\n  var defaults = {\n    group: null,\n    sort: true,\n    disabled: false,\n    store: null,\n    handle: null,\n    draggable: /^[uo]l$/i.test(el.nodeName) ? '>li' : '>*',\n    swapThreshold: 1,\n    // percentage; 0 <= x <= 1\n    invertSwap: false,\n    // invert always\n    invertedSwapThreshold: null,\n    // will be set to same as swapThreshold if default\n    removeCloneOnHide: true,\n    direction: function direction() {\n      return _detectDirection(el, this.options);\n    },\n    ghostClass: 'sortable-ghost',\n    chosenClass: 'sortable-chosen',\n    dragClass: 'sortable-drag',\n    ignore: 'a, img',\n    filter: null,\n    preventOnFilter: true,\n    animation: 0,\n    easing: null,\n    setData: function setData(dataTransfer, dragEl) {\n      dataTransfer.setData('Text', dragEl.textContent);\n    },\n    dropBubble: false,\n    dragoverBubble: false,\n    dataIdAttr: 'data-id',\n    delay: 0,\n    delayOnTouchOnly: false,\n    touchStartThreshold: (Number.parseInt ? Number : window).parseInt(window.devicePixelRatio, 10) || 1,\n    forceFallback: false,\n    fallbackClass: 'sortable-fallback',\n    fallbackOnBody: false,\n    fallbackTolerance: 0,\n    fallbackOffset: {\n      x: 0,\n      y: 0\n    },\n    supportPointer: Sortable.supportPointer !== false && 'PointerEvent' in window && !Safari,\n    emptyInsertThreshold: 5\n  };\n  PluginManager.initializePlugins(this, el, defaults);\n\n  // Set default options\n  for (var name in defaults) {\n    !(name in options) && (options[name] = defaults[name]);\n  }\n  _prepareGroup(options);\n\n  // Bind all private methods\n  for (var fn in this) {\n    if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n      this[fn] = this[fn].bind(this);\n    }\n  }\n\n  // Setup drag mode\n  this.nativeDraggable = options.forceFallback ? false : supportDraggable;\n  if (this.nativeDraggable) {\n    // Touch start threshold cannot be greater than the native dragstart threshold\n    this.options.touchStartThreshold = 1;\n  }\n\n  // Bind events\n  if (options.supportPointer) {\n    on(el, 'pointerdown', this._onTapStart);\n  } else {\n    on(el, 'mousedown', this._onTapStart);\n    on(el, 'touchstart', this._onTapStart);\n  }\n  if (this.nativeDraggable) {\n    on(el, 'dragover', this);\n    on(el, 'dragenter', this);\n  }\n  sortables.push(this.el);\n\n  // Restore sorting\n  options.store && options.store.get && this.sort(options.store.get(this) || []);\n\n  // Add animation state manager\n  _extends(this, AnimationStateManager());\n}\nSortable.prototype = /** @lends Sortable.prototype */{\n  constructor: Sortable,\n  _isOutsideThisEl: function _isOutsideThisEl(target) {\n    if (!this.el.contains(target) && target !== this.el) {\n      lastTarget = null;\n    }\n  },\n  _getDirection: function _getDirection(evt, target) {\n    return typeof this.options.direction === 'function' ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n  },\n  _onTapStart: function _onTapStart( /** Event|TouchEvent */evt) {\n    if (!evt.cancelable) return;\n    var _this = this,\n      el = this.el,\n      options = this.options,\n      preventOnFilter = options.preventOnFilter,\n      type = evt.type,\n      touch = evt.touches && evt.touches[0] || evt.pointerType && evt.pointerType === 'touch' && evt,\n      target = (touch || evt).target,\n      originalTarget = evt.target.shadowRoot && (evt.path && evt.path[0] || evt.composedPath && evt.composedPath()[0]) || target,\n      filter = options.filter;\n    _saveInputCheckedState(el);\n\n    // Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n    if (dragEl) {\n      return;\n    }\n    if (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n      return; // only left button and enabled\n    }\n\n    // cancel dnd if original target is content editable\n    if (originalTarget.isContentEditable) {\n      return;\n    }\n\n    // Safari ignores further event handling after mousedown\n    if (!this.nativeDraggable && Safari && target && target.tagName.toUpperCase() === 'SELECT') {\n      return;\n    }\n    target = closest(target, options.draggable, el, false);\n    if (target && target.animated) {\n      return;\n    }\n    if (lastDownEl === target) {\n      // Ignoring duplicate `down`\n      return;\n    }\n\n    // Get the index of the dragged element within its parent\n    oldIndex = index(target);\n    oldDraggableIndex = index(target, options.draggable);\n\n    // Check filter\n    if (typeof filter === 'function') {\n      if (filter.call(this, evt, target, this)) {\n        _dispatchEvent({\n          sortable: _this,\n          rootEl: originalTarget,\n          name: 'filter',\n          targetEl: target,\n          toEl: el,\n          fromEl: el\n        });\n        pluginEvent('filter', _this, {\n          evt: evt\n        });\n        preventOnFilter && evt.preventDefault();\n        return; // cancel dnd\n      }\n    } else if (filter) {\n      filter = filter.split(',').some(function (criteria) {\n        criteria = closest(originalTarget, criteria.trim(), el, false);\n        if (criteria) {\n          _dispatchEvent({\n            sortable: _this,\n            rootEl: criteria,\n            name: 'filter',\n            targetEl: target,\n            fromEl: el,\n            toEl: el\n          });\n          pluginEvent('filter', _this, {\n            evt: evt\n          });\n          return true;\n        }\n      });\n      if (filter) {\n        preventOnFilter && evt.preventDefault();\n        return; // cancel dnd\n      }\n    }\n    if (options.handle && !closest(originalTarget, options.handle, el, false)) {\n      return;\n    }\n\n    // Prepare `dragstart`\n    this._prepareDragStart(evt, touch, target);\n  },\n  _prepareDragStart: function _prepareDragStart( /** Event */evt, /** Touch */touch, /** HTMLElement */target) {\n    var _this = this,\n      el = _this.el,\n      options = _this.options,\n      ownerDocument = el.ownerDocument,\n      dragStartFn;\n    if (target && !dragEl && target.parentNode === el) {\n      var dragRect = getRect(target);\n      rootEl = el;\n      dragEl = target;\n      parentEl = dragEl.parentNode;\n      nextEl = dragEl.nextSibling;\n      lastDownEl = target;\n      activeGroup = options.group;\n      Sortable.dragged = dragEl;\n      tapEvt = {\n        target: dragEl,\n        clientX: (touch || evt).clientX,\n        clientY: (touch || evt).clientY\n      };\n      tapDistanceLeft = tapEvt.clientX - dragRect.left;\n      tapDistanceTop = tapEvt.clientY - dragRect.top;\n      this._lastX = (touch || evt).clientX;\n      this._lastY = (touch || evt).clientY;\n      dragEl.style['will-change'] = 'all';\n      dragStartFn = function dragStartFn() {\n        pluginEvent('delayEnded', _this, {\n          evt: evt\n        });\n        if (Sortable.eventCanceled) {\n          _this._onDrop();\n          return;\n        }\n        // Delayed drag has been triggered\n        // we can re-enable the events: touchmove/mousemove\n        _this._disableDelayedDragEvents();\n        if (!FireFox && _this.nativeDraggable) {\n          dragEl.draggable = true;\n        }\n\n        // Bind the events: dragstart/dragend\n        _this._triggerDragStart(evt, touch);\n\n        // Drag start event\n        _dispatchEvent({\n          sortable: _this,\n          name: 'choose',\n          originalEvent: evt\n        });\n\n        // Chosen item\n        toggleClass(dragEl, options.chosenClass, true);\n      };\n\n      // Disable \"draggable\"\n      options.ignore.split(',').forEach(function (criteria) {\n        find(dragEl, criteria.trim(), _disableDraggable);\n      });\n      on(ownerDocument, 'dragover', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mousemove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'touchmove', nearestEmptyInsertDetectEvent);\n      if (options.supportPointer) {\n        on(ownerDocument, 'pointerup', _this._onDrop);\n        // Native D&D triggers pointercancel\n        !this.nativeDraggable && on(ownerDocument, 'pointercancel', _this._onDrop);\n      } else {\n        on(ownerDocument, 'mouseup', _this._onDrop);\n        on(ownerDocument, 'touchend', _this._onDrop);\n        on(ownerDocument, 'touchcancel', _this._onDrop);\n      }\n\n      // Make dragEl draggable (must be before delay for FireFox)\n      if (FireFox && this.nativeDraggable) {\n        this.options.touchStartThreshold = 4;\n        dragEl.draggable = true;\n      }\n      pluginEvent('delayStart', this, {\n        evt: evt\n      });\n\n      // Delay is impossible for native DnD in Edge or IE\n      if (options.delay && (!options.delayOnTouchOnly || touch) && (!this.nativeDraggable || !(Edge || IE11OrLess))) {\n        if (Sortable.eventCanceled) {\n          this._onDrop();\n          return;\n        }\n        // If the user moves the pointer or let go the click or touch\n        // before the delay has been reached:\n        // disable the delayed drag\n        if (options.supportPointer) {\n          on(ownerDocument, 'pointerup', _this._disableDelayedDrag);\n          on(ownerDocument, 'pointercancel', _this._disableDelayedDrag);\n        } else {\n          on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n          on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n          on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n        }\n        on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n        on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n        options.supportPointer && on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n        _this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n      } else {\n        dragStartFn();\n      }\n    }\n  },\n  _delayedDragTouchMoveHandler: function _delayedDragTouchMoveHandler( /** TouchEvent|PointerEvent **/e) {\n    var touch = e.touches ? e.touches[0] : e;\n    if (Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) >= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1))) {\n      this._disableDelayedDrag();\n    }\n  },\n  _disableDelayedDrag: function _disableDelayedDrag() {\n    dragEl && _disableDraggable(dragEl);\n    clearTimeout(this._dragStartTimer);\n    this._disableDelayedDragEvents();\n  },\n  _disableDelayedDragEvents: function _disableDelayedDragEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n    off(ownerDocument, 'touchend', this._disableDelayedDrag);\n    off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n    off(ownerDocument, 'pointerup', this._disableDelayedDrag);\n    off(ownerDocument, 'pointercancel', this._disableDelayedDrag);\n    off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n  },\n  _triggerDragStart: function _triggerDragStart( /** Event */evt, /** Touch */touch) {\n    touch = touch || evt.pointerType == 'touch' && evt;\n    if (!this.nativeDraggable || touch) {\n      if (this.options.supportPointer) {\n        on(document, 'pointermove', this._onTouchMove);\n      } else if (touch) {\n        on(document, 'touchmove', this._onTouchMove);\n      } else {\n        on(document, 'mousemove', this._onTouchMove);\n      }\n    } else {\n      on(dragEl, 'dragend', this);\n      on(rootEl, 'dragstart', this._onDragStart);\n    }\n    try {\n      _nextTick(function () {\n        if (document.selection) {\n          document.selection.empty();\n        } else {\n          window.getSelection().removeAllRanges();\n        }\n      });\n    } catch (err) {}\n  },\n  _dragStarted: function _dragStarted(fallback, evt) {\n    awaitingDragStarted = false;\n    if (rootEl && dragEl) {\n      pluginEvent('dragStarted', this, {\n        evt: evt\n      });\n      if (this.nativeDraggable) {\n        on(document, 'dragover', _checkOutsideTargetEl);\n      }\n      var options = this.options;\n\n      // Apply effect\n      !fallback && toggleClass(dragEl, options.dragClass, false);\n      toggleClass(dragEl, options.ghostClass, true);\n      Sortable.active = this;\n      fallback && this._appendGhost();\n\n      // Drag start event\n      _dispatchEvent({\n        sortable: this,\n        name: 'start',\n        originalEvent: evt\n      });\n    } else {\n      this._nulling();\n    }\n  },\n  _emulateDragOver: function _emulateDragOver() {\n    if (touchEvt) {\n      this._lastX = touchEvt.clientX;\n      this._lastY = touchEvt.clientY;\n      _hideGhostForTarget();\n      var target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n      var parent = target;\n      while (target && target.shadowRoot) {\n        target = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n        if (target === parent) break;\n        parent = target;\n      }\n      dragEl.parentNode[expando]._isOutsideThisEl(target);\n      if (parent) {\n        do {\n          if (parent[expando]) {\n            var inserted = void 0;\n            inserted = parent[expando]._onDragOver({\n              clientX: touchEvt.clientX,\n              clientY: touchEvt.clientY,\n              target: target,\n              rootEl: parent\n            });\n            if (inserted && !this.options.dragoverBubble) {\n              break;\n            }\n          }\n          target = parent; // store last element\n        }\n        /* jshint boss:true */ while (parent = getParentOrHost(parent));\n      }\n      _unhideGhostForTarget();\n    }\n  },\n  _onTouchMove: function _onTouchMove( /**TouchEvent*/evt) {\n    if (tapEvt) {\n      var options = this.options,\n        fallbackTolerance = options.fallbackTolerance,\n        fallbackOffset = options.fallbackOffset,\n        touch = evt.touches ? evt.touches[0] : evt,\n        ghostMatrix = ghostEl && matrix(ghostEl, true),\n        scaleX = ghostEl && ghostMatrix && ghostMatrix.a,\n        scaleY = ghostEl && ghostMatrix && ghostMatrix.d,\n        relativeScrollOffset = PositionGhostAbsolutely && ghostRelativeParent && getRelativeScrollOffset(ghostRelativeParent),\n        dx = (touch.clientX - tapEvt.clientX + fallbackOffset.x) / (scaleX || 1) + (relativeScrollOffset ? relativeScrollOffset[0] - ghostRelativeParentInitialScroll[0] : 0) / (scaleX || 1),\n        dy = (touch.clientY - tapEvt.clientY + fallbackOffset.y) / (scaleY || 1) + (relativeScrollOffset ? relativeScrollOffset[1] - ghostRelativeParentInitialScroll[1] : 0) / (scaleY || 1);\n\n      // only set the status to dragging, when we are actually dragging\n      if (!Sortable.active && !awaitingDragStarted) {\n        if (fallbackTolerance && Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) < fallbackTolerance) {\n          return;\n        }\n        this._onDragStart(evt, true);\n      }\n      if (ghostEl) {\n        if (ghostMatrix) {\n          ghostMatrix.e += dx - (lastDx || 0);\n          ghostMatrix.f += dy - (lastDy || 0);\n        } else {\n          ghostMatrix = {\n            a: 1,\n            b: 0,\n            c: 0,\n            d: 1,\n            e: dx,\n            f: dy\n          };\n        }\n        var cssMatrix = \"matrix(\".concat(ghostMatrix.a, \",\").concat(ghostMatrix.b, \",\").concat(ghostMatrix.c, \",\").concat(ghostMatrix.d, \",\").concat(ghostMatrix.e, \",\").concat(ghostMatrix.f, \")\");\n        css(ghostEl, 'webkitTransform', cssMatrix);\n        css(ghostEl, 'mozTransform', cssMatrix);\n        css(ghostEl, 'msTransform', cssMatrix);\n        css(ghostEl, 'transform', cssMatrix);\n        lastDx = dx;\n        lastDy = dy;\n        touchEvt = touch;\n      }\n      evt.cancelable && evt.preventDefault();\n    }\n  },\n  _appendGhost: function _appendGhost() {\n    // Bug if using scale(): https://stackoverflow.com/questions/2637058\n    // Not being adjusted for\n    if (!ghostEl) {\n      var container = this.options.fallbackOnBody ? document.body : rootEl,\n        rect = getRect(dragEl, true, PositionGhostAbsolutely, true, container),\n        options = this.options;\n\n      // Position absolutely\n      if (PositionGhostAbsolutely) {\n        // Get relatively positioned parent\n        ghostRelativeParent = container;\n        while (css(ghostRelativeParent, 'position') === 'static' && css(ghostRelativeParent, 'transform') === 'none' && ghostRelativeParent !== document) {\n          ghostRelativeParent = ghostRelativeParent.parentNode;\n        }\n        if (ghostRelativeParent !== document.body && ghostRelativeParent !== document.documentElement) {\n          if (ghostRelativeParent === document) ghostRelativeParent = getWindowScrollingElement();\n          rect.top += ghostRelativeParent.scrollTop;\n          rect.left += ghostRelativeParent.scrollLeft;\n        } else {\n          ghostRelativeParent = getWindowScrollingElement();\n        }\n        ghostRelativeParentInitialScroll = getRelativeScrollOffset(ghostRelativeParent);\n      }\n      ghostEl = dragEl.cloneNode(true);\n      toggleClass(ghostEl, options.ghostClass, false);\n      toggleClass(ghostEl, options.fallbackClass, true);\n      toggleClass(ghostEl, options.dragClass, true);\n      css(ghostEl, 'transition', '');\n      css(ghostEl, 'transform', '');\n      css(ghostEl, 'box-sizing', 'border-box');\n      css(ghostEl, 'margin', 0);\n      css(ghostEl, 'top', rect.top);\n      css(ghostEl, 'left', rect.left);\n      css(ghostEl, 'width', rect.width);\n      css(ghostEl, 'height', rect.height);\n      css(ghostEl, 'opacity', '0.8');\n      css(ghostEl, 'position', PositionGhostAbsolutely ? 'absolute' : 'fixed');\n      css(ghostEl, 'zIndex', '100000');\n      css(ghostEl, 'pointerEvents', 'none');\n      Sortable.ghost = ghostEl;\n      container.appendChild(ghostEl);\n\n      // Set transform-origin\n      css(ghostEl, 'transform-origin', tapDistanceLeft / parseInt(ghostEl.style.width) * 100 + '% ' + tapDistanceTop / parseInt(ghostEl.style.height) * 100 + '%');\n    }\n  },\n  _onDragStart: function _onDragStart( /**Event*/evt, /**boolean*/fallback) {\n    var _this = this;\n    var dataTransfer = evt.dataTransfer;\n    var options = _this.options;\n    pluginEvent('dragStart', this, {\n      evt: evt\n    });\n    if (Sortable.eventCanceled) {\n      this._onDrop();\n      return;\n    }\n    pluginEvent('setupClone', this);\n    if (!Sortable.eventCanceled) {\n      cloneEl = clone(dragEl);\n      cloneEl.removeAttribute(\"id\");\n      cloneEl.draggable = false;\n      cloneEl.style['will-change'] = '';\n      this._hideClone();\n      toggleClass(cloneEl, this.options.chosenClass, false);\n      Sortable.clone = cloneEl;\n    }\n\n    // #1143: IFrame support workaround\n    _this.cloneId = _nextTick(function () {\n      pluginEvent('clone', _this);\n      if (Sortable.eventCanceled) return;\n      if (!_this.options.removeCloneOnHide) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      }\n      _this._hideClone();\n      _dispatchEvent({\n        sortable: _this,\n        name: 'clone'\n      });\n    });\n    !fallback && toggleClass(dragEl, options.dragClass, true);\n\n    // Set proper drop events\n    if (fallback) {\n      ignoreNextClick = true;\n      _this._loopId = setInterval(_this._emulateDragOver, 50);\n    } else {\n      // Undo what was set in _prepareDragStart before drag started\n      off(document, 'mouseup', _this._onDrop);\n      off(document, 'touchend', _this._onDrop);\n      off(document, 'touchcancel', _this._onDrop);\n      if (dataTransfer) {\n        dataTransfer.effectAllowed = 'move';\n        options.setData && options.setData.call(_this, dataTransfer, dragEl);\n      }\n      on(document, 'drop', _this);\n\n      // #1276 fix:\n      css(dragEl, 'transform', 'translateZ(0)');\n    }\n    awaitingDragStarted = true;\n    _this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback, evt));\n    on(document, 'selectstart', _this);\n    moved = true;\n    if (Safari) {\n      css(document.body, 'user-select', 'none');\n    }\n  },\n  // Returns true - if no further action is needed (either inserted or another condition)\n  _onDragOver: function _onDragOver( /**Event*/evt) {\n    var el = this.el,\n      target = evt.target,\n      dragRect,\n      targetRect,\n      revert,\n      options = this.options,\n      group = options.group,\n      activeSortable = Sortable.active,\n      isOwner = activeGroup === group,\n      canSort = options.sort,\n      fromSortable = putSortable || activeSortable,\n      vertical,\n      _this = this,\n      completedFired = false;\n    if (_silent) return;\n    function dragOverEvent(name, extra) {\n      pluginEvent(name, _this, _objectSpread2({\n        evt: evt,\n        isOwner: isOwner,\n        axis: vertical ? 'vertical' : 'horizontal',\n        revert: revert,\n        dragRect: dragRect,\n        targetRect: targetRect,\n        canSort: canSort,\n        fromSortable: fromSortable,\n        target: target,\n        completed: completed,\n        onMove: function onMove(target, after) {\n          return _onMove(rootEl, el, dragEl, dragRect, target, getRect(target), evt, after);\n        },\n        changed: changed\n      }, extra));\n    }\n\n    // Capture animation state\n    function capture() {\n      dragOverEvent('dragOverAnimationCapture');\n      _this.captureAnimationState();\n      if (_this !== fromSortable) {\n        fromSortable.captureAnimationState();\n      }\n    }\n\n    // Return invocation when dragEl is inserted (or completed)\n    function completed(insertion) {\n      dragOverEvent('dragOverCompleted', {\n        insertion: insertion\n      });\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        } else {\n          activeSortable._showClone(_this);\n        }\n        if (_this !== fromSortable) {\n          // Set ghost class to new sortable's ghost class\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n          toggleClass(dragEl, options.ghostClass, true);\n        }\n        if (putSortable !== _this && _this !== Sortable.active) {\n          putSortable = _this;\n        } else if (_this === Sortable.active && putSortable) {\n          putSortable = null;\n        }\n\n        // Animation\n        if (fromSortable === _this) {\n          _this._ignoreWhileAnimating = target;\n        }\n        _this.animateAll(function () {\n          dragOverEvent('dragOverAnimationComplete');\n          _this._ignoreWhileAnimating = null;\n        });\n        if (_this !== fromSortable) {\n          fromSortable.animateAll();\n          fromSortable._ignoreWhileAnimating = null;\n        }\n      }\n\n      // Null lastTarget if it is not inside a previously swapped element\n      if (target === dragEl && !dragEl.animated || target === el && !target.animated) {\n        lastTarget = null;\n      }\n\n      // no bubbling and not fallback\n      if (!options.dragoverBubble && !evt.rootEl && target !== document) {\n        dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n\n        // Do not detect for empty insert if already inserted\n        !insertion && nearestEmptyInsertDetectEvent(evt);\n      }\n      !options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n      return completedFired = true;\n    }\n\n    // Call when dragEl has been inserted\n    function changed() {\n      newIndex = index(dragEl);\n      newDraggableIndex = index(dragEl, options.draggable);\n      _dispatchEvent({\n        sortable: _this,\n        name: 'change',\n        toEl: el,\n        newIndex: newIndex,\n        newDraggableIndex: newDraggableIndex,\n        originalEvent: evt\n      });\n    }\n    if (evt.preventDefault !== void 0) {\n      evt.cancelable && evt.preventDefault();\n    }\n    target = closest(target, options.draggable, el, true);\n    dragOverEvent('dragOver');\n    if (Sortable.eventCanceled) return completedFired;\n    if (dragEl.contains(evt.target) || target.animated && target.animatingX && target.animatingY || _this._ignoreWhileAnimating === target) {\n      return completed(false);\n    }\n    ignoreNextClick = false;\n    if (activeSortable && !options.disabled && (isOwner ? canSort || (revert = parentEl !== rootEl) // Reverting item into the original list\n    : putSortable === this || (this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) && group.checkPut(this, activeSortable, dragEl, evt))) {\n      vertical = this._getDirection(evt, target) === 'vertical';\n      dragRect = getRect(dragEl);\n      dragOverEvent('dragOverValid');\n      if (Sortable.eventCanceled) return completedFired;\n      if (revert) {\n        parentEl = rootEl; // actualization\n        capture();\n        this._hideClone();\n        dragOverEvent('revert');\n        if (!Sortable.eventCanceled) {\n          if (nextEl) {\n            rootEl.insertBefore(dragEl, nextEl);\n          } else {\n            rootEl.appendChild(dragEl);\n          }\n        }\n        return completed(true);\n      }\n      var elLastChild = lastChild(el, options.draggable);\n      if (!elLastChild || _ghostIsLast(evt, vertical, this) && !elLastChild.animated) {\n        // Insert to end of list\n\n        // If already at end of list: Do not insert\n        if (elLastChild === dragEl) {\n          return completed(false);\n        }\n\n        // if there is a last element, it is the target\n        if (elLastChild && el === evt.target) {\n          target = elLastChild;\n        }\n        if (target) {\n          targetRect = getRect(target);\n        }\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n          capture();\n          if (elLastChild && elLastChild.nextSibling) {\n            // the last draggable element is not the last node\n            el.insertBefore(dragEl, elLastChild.nextSibling);\n          } else {\n            el.appendChild(dragEl);\n          }\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (elLastChild && _ghostIsFirst(evt, vertical, this)) {\n        // Insert to start of list\n        var firstChild = getChild(el, 0, options, true);\n        if (firstChild === dragEl) {\n          return completed(false);\n        }\n        target = firstChild;\n        targetRect = getRect(target);\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, false) !== false) {\n          capture();\n          el.insertBefore(dragEl, firstChild);\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (target.parentNode === el) {\n        targetRect = getRect(target);\n        var direction = 0,\n          targetBeforeFirstSwap,\n          differentLevel = dragEl.parentNode !== el,\n          differentRowCol = !_dragElInRowColumn(dragEl.animated && dragEl.toRect || dragRect, target.animated && target.toRect || targetRect, vertical),\n          side1 = vertical ? 'top' : 'left',\n          scrolledPastTop = isScrolledPast(target, 'top', 'top') || isScrolledPast(dragEl, 'top', 'top'),\n          scrollBefore = scrolledPastTop ? scrolledPastTop.scrollTop : void 0;\n        if (lastTarget !== target) {\n          targetBeforeFirstSwap = targetRect[side1];\n          pastFirstInvertThresh = false;\n          isCircumstantialInvert = !differentRowCol && options.invertSwap || differentLevel;\n        }\n        direction = _getSwapDirection(evt, target, targetRect, vertical, differentRowCol ? 1 : options.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold, isCircumstantialInvert, lastTarget === target);\n        var sibling;\n        if (direction !== 0) {\n          // Check if target is beside dragEl in respective direction (ignoring hidden elements)\n          var dragIndex = index(dragEl);\n          do {\n            dragIndex -= direction;\n            sibling = parentEl.children[dragIndex];\n          } while (sibling && (css(sibling, 'display') === 'none' || sibling === ghostEl));\n        }\n        // If dragEl is already beside target: Do not insert\n        if (direction === 0 || sibling === target) {\n          return completed(false);\n        }\n        lastTarget = target;\n        lastDirection = direction;\n        var nextSibling = target.nextElementSibling,\n          after = false;\n        after = direction === 1;\n        var moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n        if (moveVector !== false) {\n          if (moveVector === 1 || moveVector === -1) {\n            after = moveVector === 1;\n          }\n          _silent = true;\n          setTimeout(_unsilent, 30);\n          capture();\n          if (after && !nextSibling) {\n            el.appendChild(dragEl);\n          } else {\n            target.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n          }\n\n          // Undo chrome's scroll adjustment (has no effect on other browsers)\n          if (scrolledPastTop) {\n            scrollBy(scrolledPastTop, 0, scrollBefore - scrolledPastTop.scrollTop);\n          }\n          parentEl = dragEl.parentNode; // actualization\n\n          // must be done before animation\n          if (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n            targetMoveDistance = Math.abs(targetBeforeFirstSwap - getRect(target)[side1]);\n          }\n          changed();\n          return completed(true);\n        }\n      }\n      if (el.contains(dragEl)) {\n        return completed(false);\n      }\n    }\n    return false;\n  },\n  _ignoreWhileAnimating: null,\n  _offMoveEvents: function _offMoveEvents() {\n    off(document, 'mousemove', this._onTouchMove);\n    off(document, 'touchmove', this._onTouchMove);\n    off(document, 'pointermove', this._onTouchMove);\n    off(document, 'dragover', nearestEmptyInsertDetectEvent);\n    off(document, 'mousemove', nearestEmptyInsertDetectEvent);\n    off(document, 'touchmove', nearestEmptyInsertDetectEvent);\n  },\n  _offUpEvents: function _offUpEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._onDrop);\n    off(ownerDocument, 'touchend', this._onDrop);\n    off(ownerDocument, 'pointerup', this._onDrop);\n    off(ownerDocument, 'pointercancel', this._onDrop);\n    off(ownerDocument, 'touchcancel', this._onDrop);\n    off(document, 'selectstart', this);\n  },\n  _onDrop: function _onDrop( /**Event*/evt) {\n    var el = this.el,\n      options = this.options;\n\n    // Get the index of the dragged element within its parent\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    pluginEvent('drop', this, {\n      evt: evt\n    });\n    parentEl = dragEl && dragEl.parentNode;\n\n    // Get again after plugin event\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    if (Sortable.eventCanceled) {\n      this._nulling();\n      return;\n    }\n    awaitingDragStarted = false;\n    isCircumstantialInvert = false;\n    pastFirstInvertThresh = false;\n    clearInterval(this._loopId);\n    clearTimeout(this._dragStartTimer);\n    _cancelNextTick(this.cloneId);\n    _cancelNextTick(this._dragStartId);\n\n    // Unbind events\n    if (this.nativeDraggable) {\n      off(document, 'drop', this);\n      off(el, 'dragstart', this._onDragStart);\n    }\n    this._offMoveEvents();\n    this._offUpEvents();\n    if (Safari) {\n      css(document.body, 'user-select', '');\n    }\n    css(dragEl, 'transform', '');\n    if (evt) {\n      if (moved) {\n        evt.cancelable && evt.preventDefault();\n        !options.dropBubble && evt.stopPropagation();\n      }\n      ghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        // Remove clone(s)\n        cloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n      }\n      if (dragEl) {\n        if (this.nativeDraggable) {\n          off(dragEl, 'dragend', this);\n        }\n        _disableDraggable(dragEl);\n        dragEl.style['will-change'] = '';\n\n        // Remove classes\n        // ghostClass is added in dragStarted\n        if (moved && !awaitingDragStarted) {\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n        }\n        toggleClass(dragEl, this.options.chosenClass, false);\n\n        // Drag stop event\n        _dispatchEvent({\n          sortable: this,\n          name: 'unchoose',\n          toEl: parentEl,\n          newIndex: null,\n          newDraggableIndex: null,\n          originalEvent: evt\n        });\n        if (rootEl !== parentEl) {\n          if (newIndex >= 0) {\n            // Add event\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'add',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n\n            // Remove event\n            _dispatchEvent({\n              sortable: this,\n              name: 'remove',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n\n            // drag from one list and drop into another\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'sort',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n            _dispatchEvent({\n              sortable: this,\n              name: 'sort',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n          }\n          putSortable && putSortable.save();\n        } else {\n          if (newIndex !== oldIndex) {\n            if (newIndex >= 0) {\n              // drag & drop within the same list\n              _dispatchEvent({\n                sortable: this,\n                name: 'update',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n              _dispatchEvent({\n                sortable: this,\n                name: 'sort',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n            }\n          }\n        }\n        if (Sortable.active) {\n          /* jshint eqnull:true */\n          if (newIndex == null || newIndex === -1) {\n            newIndex = oldIndex;\n            newDraggableIndex = oldDraggableIndex;\n          }\n          _dispatchEvent({\n            sortable: this,\n            name: 'end',\n            toEl: parentEl,\n            originalEvent: evt\n          });\n\n          // Save sorting\n          this.save();\n        }\n      }\n    }\n    this._nulling();\n  },\n  _nulling: function _nulling() {\n    pluginEvent('nulling', this);\n    rootEl = dragEl = parentEl = ghostEl = nextEl = cloneEl = lastDownEl = cloneHidden = tapEvt = touchEvt = moved = newIndex = newDraggableIndex = oldIndex = oldDraggableIndex = lastTarget = lastDirection = putSortable = activeGroup = Sortable.dragged = Sortable.ghost = Sortable.clone = Sortable.active = null;\n    savedInputChecked.forEach(function (el) {\n      el.checked = true;\n    });\n    savedInputChecked.length = lastDx = lastDy = 0;\n  },\n  handleEvent: function handleEvent( /**Event*/evt) {\n    switch (evt.type) {\n      case 'drop':\n      case 'dragend':\n        this._onDrop(evt);\n        break;\n      case 'dragenter':\n      case 'dragover':\n        if (dragEl) {\n          this._onDragOver(evt);\n          _globalDragOver(evt);\n        }\n        break;\n      case 'selectstart':\n        evt.preventDefault();\n        break;\n    }\n  },\n  /**\r\n   * Serializes the item into an array of string.\r\n   * @returns {String[]}\r\n   */\n  toArray: function toArray() {\n    var order = [],\n      el,\n      children = this.el.children,\n      i = 0,\n      n = children.length,\n      options = this.options;\n    for (; i < n; i++) {\n      el = children[i];\n      if (closest(el, options.draggable, this.el, false)) {\n        order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n      }\n    }\n    return order;\n  },\n  /**\r\n   * Sorts the elements according to the array.\r\n   * @param  {String[]}  order  order of the items\r\n   */\n  sort: function sort(order, useAnimation) {\n    var items = {},\n      rootEl = this.el;\n    this.toArray().forEach(function (id, i) {\n      var el = rootEl.children[i];\n      if (closest(el, this.options.draggable, rootEl, false)) {\n        items[id] = el;\n      }\n    }, this);\n    useAnimation && this.captureAnimationState();\n    order.forEach(function (id) {\n      if (items[id]) {\n        rootEl.removeChild(items[id]);\n        rootEl.appendChild(items[id]);\n      }\n    });\n    useAnimation && this.animateAll();\n  },\n  /**\r\n   * Save the current sorting\r\n   */\n  save: function save() {\n    var store = this.options.store;\n    store && store.set && store.set(this);\n  },\n  /**\r\n   * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\r\n   * @param   {HTMLElement}  el\r\n   * @param   {String}       [selector]  default: `options.draggable`\r\n   * @returns {HTMLElement|null}\r\n   */\n  closest: function closest$1(el, selector) {\n    return closest(el, selector || this.options.draggable, this.el, false);\n  },\n  /**\r\n   * Set/get option\r\n   * @param   {string} name\r\n   * @param   {*}      [value]\r\n   * @returns {*}\r\n   */\n  option: function option(name, value) {\n    var options = this.options;\n    if (value === void 0) {\n      return options[name];\n    } else {\n      var modifiedValue = PluginManager.modifyOption(this, name, value);\n      if (typeof modifiedValue !== 'undefined') {\n        options[name] = modifiedValue;\n      } else {\n        options[name] = value;\n      }\n      if (name === 'group') {\n        _prepareGroup(options);\n      }\n    }\n  },\n  /**\r\n   * Destroy\r\n   */\n  destroy: function destroy() {\n    pluginEvent('destroy', this);\n    var el = this.el;\n    el[expando] = null;\n    off(el, 'mousedown', this._onTapStart);\n    off(el, 'touchstart', this._onTapStart);\n    off(el, 'pointerdown', this._onTapStart);\n    if (this.nativeDraggable) {\n      off(el, 'dragover', this);\n      off(el, 'dragenter', this);\n    }\n    // Remove draggable attributes\n    Array.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n      el.removeAttribute('draggable');\n    });\n    this._onDrop();\n    this._disableDelayedDragEvents();\n    sortables.splice(sortables.indexOf(this.el), 1);\n    this.el = el = null;\n  },\n  _hideClone: function _hideClone() {\n    if (!cloneHidden) {\n      pluginEvent('hideClone', this);\n      if (Sortable.eventCanceled) return;\n      css(cloneEl, 'display', 'none');\n      if (this.options.removeCloneOnHide && cloneEl.parentNode) {\n        cloneEl.parentNode.removeChild(cloneEl);\n      }\n      cloneHidden = true;\n    }\n  },\n  _showClone: function _showClone(putSortable) {\n    if (putSortable.lastPutMode !== 'clone') {\n      this._hideClone();\n      return;\n    }\n    if (cloneHidden) {\n      pluginEvent('showClone', this);\n      if (Sortable.eventCanceled) return;\n\n      // show clone at dragEl or original position\n      if (dragEl.parentNode == rootEl && !this.options.group.revertClone) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      } else if (nextEl) {\n        rootEl.insertBefore(cloneEl, nextEl);\n      } else {\n        rootEl.appendChild(cloneEl);\n      }\n      if (this.options.group.revertClone) {\n        this.animate(dragEl, cloneEl);\n      }\n      css(cloneEl, 'display', '');\n      cloneHidden = false;\n    }\n  }\n};\nfunction _globalDragOver( /**Event*/evt) {\n  if (evt.dataTransfer) {\n    evt.dataTransfer.dropEffect = 'move';\n  }\n  evt.cancelable && evt.preventDefault();\n}\nfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvent, willInsertAfter) {\n  var evt,\n    sortable = fromEl[expando],\n    onMoveFn = sortable.options.onMove,\n    retVal;\n  // Support for new CustomEvent feature\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent('move', {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent('move', true, true);\n  }\n  evt.to = toEl;\n  evt.from = fromEl;\n  evt.dragged = dragEl;\n  evt.draggedRect = dragRect;\n  evt.related = targetEl || toEl;\n  evt.relatedRect = targetRect || getRect(toEl);\n  evt.willInsertAfter = willInsertAfter;\n  evt.originalEvent = originalEvent;\n  fromEl.dispatchEvent(evt);\n  if (onMoveFn) {\n    retVal = onMoveFn.call(sortable, evt, originalEvent);\n  }\n  return retVal;\n}\nfunction _disableDraggable(el) {\n  el.draggable = false;\n}\nfunction _unsilent() {\n  _silent = false;\n}\nfunction _ghostIsFirst(evt, vertical, sortable) {\n  var firstElRect = getRect(getChild(sortable.el, 0, sortable.options, true));\n  var childContainingRect = getChildContainingRectFromElement(sortable.el, sortable.options, ghostEl);\n  var spacer = 10;\n  return vertical ? evt.clientX < childContainingRect.left - spacer || evt.clientY < firstElRect.top && evt.clientX < firstElRect.right : evt.clientY < childContainingRect.top - spacer || evt.clientY < firstElRect.bottom && evt.clientX < firstElRect.left;\n}\nfunction _ghostIsLast(evt, vertical, sortable) {\n  var lastElRect = getRect(lastChild(sortable.el, sortable.options.draggable));\n  var childContainingRect = getChildContainingRectFromElement(sortable.el, sortable.options, ghostEl);\n  var spacer = 10;\n  return vertical ? evt.clientX > childContainingRect.right + spacer || evt.clientY > lastElRect.bottom && evt.clientX > lastElRect.left : evt.clientY > childContainingRect.bottom + spacer || evt.clientX > lastElRect.right && evt.clientY > lastElRect.top;\n}\nfunction _getSwapDirection(evt, target, targetRect, vertical, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n  var mouseOnAxis = vertical ? evt.clientY : evt.clientX,\n    targetLength = vertical ? targetRect.height : targetRect.width,\n    targetS1 = vertical ? targetRect.top : targetRect.left,\n    targetS2 = vertical ? targetRect.bottom : targetRect.right,\n    invert = false;\n  if (!invertSwap) {\n    // Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n    if (isLastTarget && targetMoveDistance < targetLength * swapThreshold) {\n      // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n      // check if past first invert threshold on side opposite of lastDirection\n      if (!pastFirstInvertThresh && (lastDirection === 1 ? mouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2 : mouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2)) {\n        // past first invert threshold, do not restrict inverted threshold to dragEl shadow\n        pastFirstInvertThresh = true;\n      }\n      if (!pastFirstInvertThresh) {\n        // dragEl shadow (target move distance shadow)\n        if (lastDirection === 1 ? mouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n        : mouseOnAxis > targetS2 - targetMoveDistance) {\n          return -lastDirection;\n        }\n      } else {\n        invert = true;\n      }\n    } else {\n      // Regular\n      if (mouseOnAxis > targetS1 + targetLength * (1 - swapThreshold) / 2 && mouseOnAxis < targetS2 - targetLength * (1 - swapThreshold) / 2) {\n        return _getInsertDirection(target);\n      }\n    }\n  }\n  invert = invert || invertSwap;\n  if (invert) {\n    // Invert of regular\n    if (mouseOnAxis < targetS1 + targetLength * invertedSwapThreshold / 2 || mouseOnAxis > targetS2 - targetLength * invertedSwapThreshold / 2) {\n      return mouseOnAxis > targetS1 + targetLength / 2 ? 1 : -1;\n    }\n  }\n  return 0;\n}\n\n/**\r\n * Gets the direction dragEl must be swapped relative to target in order to make it\r\n * seem that dragEl has been \"inserted\" into that element's position\r\n * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\r\n * @return {Number}                   Direction dragEl must be swapped\r\n */\nfunction _getInsertDirection(target) {\n  if (index(dragEl) < index(target)) {\n    return 1;\n  } else {\n    return -1;\n  }\n}\n\n/**\r\n * Generate id\r\n * @param   {HTMLElement} el\r\n * @returns {String}\r\n * @private\r\n */\nfunction _generateId(el) {\n  var str = el.tagName + el.className + el.src + el.href + el.textContent,\n    i = str.length,\n    sum = 0;\n  while (i--) {\n    sum += str.charCodeAt(i);\n  }\n  return sum.toString(36);\n}\nfunction _saveInputCheckedState(root) {\n  savedInputChecked.length = 0;\n  var inputs = root.getElementsByTagName('input');\n  var idx = inputs.length;\n  while (idx--) {\n    var el = inputs[idx];\n    el.checked && savedInputChecked.push(el);\n  }\n}\nfunction _nextTick(fn) {\n  return setTimeout(fn, 0);\n}\nfunction _cancelNextTick(id) {\n  return clearTimeout(id);\n}\n\n// Fixed #973:\nif (documentExists) {\n  on(document, 'touchmove', function (evt) {\n    if ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n      evt.preventDefault();\n    }\n  });\n}\n\n// Export utils\nSortable.utils = {\n  on: on,\n  off: off,\n  css: css,\n  find: find,\n  is: function is(el, selector) {\n    return !!closest(el, selector, el, false);\n  },\n  extend: extend,\n  throttle: throttle,\n  closest: closest,\n  toggleClass: toggleClass,\n  clone: clone,\n  index: index,\n  nextTick: _nextTick,\n  cancelNextTick: _cancelNextTick,\n  detectDirection: _detectDirection,\n  getChild: getChild,\n  expando: expando\n};\n\n/**\r\n * Get the Sortable instance of an element\r\n * @param  {HTMLElement} element The element\r\n * @return {Sortable|undefined}         The instance of Sortable\r\n */\nSortable.get = function (element) {\n  return element[expando];\n};\n\n/**\r\n * Mount a plugin to Sortable\r\n * @param  {...SortablePlugin|SortablePlugin[]} plugins       Plugins being mounted\r\n */\nSortable.mount = function () {\n  for (var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++) {\n    plugins[_key] = arguments[_key];\n  }\n  if (plugins[0].constructor === Array) plugins = plugins[0];\n  plugins.forEach(function (plugin) {\n    if (!plugin.prototype || !plugin.prototype.constructor) {\n      throw \"Sortable: Mounted plugin must be a constructor function, not \".concat({}.toString.call(plugin));\n    }\n    if (plugin.utils) Sortable.utils = _objectSpread2(_objectSpread2({}, Sortable.utils), plugin.utils);\n    PluginManager.mount(plugin);\n  });\n};\n\n/**\r\n * Create sortable instance\r\n * @param {HTMLElement}  el\r\n * @param {Object}      [options]\r\n */\nSortable.create = function (el, options) {\n  return new Sortable(el, options);\n};\n\n// Export\nSortable.version = version;\n\nvar autoScrolls = [],\n  scrollEl,\n  scrollRootEl,\n  scrolling = false,\n  lastAutoScrollX,\n  lastAutoScrollY,\n  touchEvt$1,\n  pointerElemChangedInterval;\nfunction AutoScrollPlugin() {\n  function AutoScroll() {\n    this.defaults = {\n      scroll: true,\n      forceAutoScrollFallback: false,\n      scrollSensitivity: 30,\n      scrollSpeed: 10,\n      bubbleScroll: true\n    };\n\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n  }\n  AutoScroll.prototype = {\n    dragStarted: function dragStarted(_ref) {\n      var originalEvent = _ref.originalEvent;\n      if (this.sortable.nativeDraggable) {\n        on(document, 'dragover', this._handleAutoScroll);\n      } else {\n        if (this.options.supportPointer) {\n          on(document, 'pointermove', this._handleFallbackAutoScroll);\n        } else if (originalEvent.touches) {\n          on(document, 'touchmove', this._handleFallbackAutoScroll);\n        } else {\n          on(document, 'mousemove', this._handleFallbackAutoScroll);\n        }\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref2) {\n      var originalEvent = _ref2.originalEvent;\n      // For when bubbling is canceled and using fallback (fallback 'touchmove' always reached)\n      if (!this.options.dragOverBubble && !originalEvent.rootEl) {\n        this._handleAutoScroll(originalEvent);\n      }\n    },\n    drop: function drop() {\n      if (this.sortable.nativeDraggable) {\n        off(document, 'dragover', this._handleAutoScroll);\n      } else {\n        off(document, 'pointermove', this._handleFallbackAutoScroll);\n        off(document, 'touchmove', this._handleFallbackAutoScroll);\n        off(document, 'mousemove', this._handleFallbackAutoScroll);\n      }\n      clearPointerElemChangedInterval();\n      clearAutoScrolls();\n      cancelThrottle();\n    },\n    nulling: function nulling() {\n      touchEvt$1 = scrollRootEl = scrollEl = scrolling = pointerElemChangedInterval = lastAutoScrollX = lastAutoScrollY = null;\n      autoScrolls.length = 0;\n    },\n    _handleFallbackAutoScroll: function _handleFallbackAutoScroll(evt) {\n      this._handleAutoScroll(evt, true);\n    },\n    _handleAutoScroll: function _handleAutoScroll(evt, fallback) {\n      var _this = this;\n      var x = (evt.touches ? evt.touches[0] : evt).clientX,\n        y = (evt.touches ? evt.touches[0] : evt).clientY,\n        elem = document.elementFromPoint(x, y);\n      touchEvt$1 = evt;\n\n      // IE does not seem to have native autoscroll,\n      // Edge's autoscroll seems too conditional,\n      // MACOS Safari does not have autoscroll,\n      // Firefox and Chrome are good\n      if (fallback || this.options.forceAutoScrollFallback || Edge || IE11OrLess || Safari) {\n        autoScroll(evt, this.options, elem, fallback);\n\n        // Listener for pointer element change\n        var ogElemScroller = getParentAutoScrollElement(elem, true);\n        if (scrolling && (!pointerElemChangedInterval || x !== lastAutoScrollX || y !== lastAutoScrollY)) {\n          pointerElemChangedInterval && clearPointerElemChangedInterval();\n          // Detect for pointer elem change, emulating native DnD behaviour\n          pointerElemChangedInterval = setInterval(function () {\n            var newElem = getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n            if (newElem !== ogElemScroller) {\n              ogElemScroller = newElem;\n              clearAutoScrolls();\n            }\n            autoScroll(evt, _this.options, newElem, fallback);\n          }, 10);\n          lastAutoScrollX = x;\n          lastAutoScrollY = y;\n        }\n      } else {\n        // if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n        if (!this.options.bubbleScroll || getParentAutoScrollElement(elem, true) === getWindowScrollingElement()) {\n          clearAutoScrolls();\n          return;\n        }\n        autoScroll(evt, this.options, getParentAutoScrollElement(elem, false), false);\n      }\n    }\n  };\n  return _extends(AutoScroll, {\n    pluginName: 'scroll',\n    initializeByDefault: true\n  });\n}\nfunction clearAutoScrolls() {\n  autoScrolls.forEach(function (autoScroll) {\n    clearInterval(autoScroll.pid);\n  });\n  autoScrolls = [];\n}\nfunction clearPointerElemChangedInterval() {\n  clearInterval(pointerElemChangedInterval);\n}\nvar autoScroll = throttle(function (evt, options, rootEl, isFallback) {\n  // Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n  if (!options.scroll) return;\n  var x = (evt.touches ? evt.touches[0] : evt).clientX,\n    y = (evt.touches ? evt.touches[0] : evt).clientY,\n    sens = options.scrollSensitivity,\n    speed = options.scrollSpeed,\n    winScroller = getWindowScrollingElement();\n  var scrollThisInstance = false,\n    scrollCustomFn;\n\n  // New scroll root, set scrollEl\n  if (scrollRootEl !== rootEl) {\n    scrollRootEl = rootEl;\n    clearAutoScrolls();\n    scrollEl = options.scroll;\n    scrollCustomFn = options.scrollFn;\n    if (scrollEl === true) {\n      scrollEl = getParentAutoScrollElement(rootEl, true);\n    }\n  }\n  var layersOut = 0;\n  var currentParent = scrollEl;\n  do {\n    var el = currentParent,\n      rect = getRect(el),\n      top = rect.top,\n      bottom = rect.bottom,\n      left = rect.left,\n      right = rect.right,\n      width = rect.width,\n      height = rect.height,\n      canScrollX = void 0,\n      canScrollY = void 0,\n      scrollWidth = el.scrollWidth,\n      scrollHeight = el.scrollHeight,\n      elCSS = css(el),\n      scrollPosX = el.scrollLeft,\n      scrollPosY = el.scrollTop;\n    if (el === winScroller) {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll' || elCSS.overflowX === 'visible');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll' || elCSS.overflowY === 'visible');\n    } else {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll');\n    }\n    var vx = canScrollX && (Math.abs(right - x) <= sens && scrollPosX + width < scrollWidth) - (Math.abs(left - x) <= sens && !!scrollPosX);\n    var vy = canScrollY && (Math.abs(bottom - y) <= sens && scrollPosY + height < scrollHeight) - (Math.abs(top - y) <= sens && !!scrollPosY);\n    if (!autoScrolls[layersOut]) {\n      for (var i = 0; i <= layersOut; i++) {\n        if (!autoScrolls[i]) {\n          autoScrolls[i] = {};\n        }\n      }\n    }\n    if (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n      autoScrolls[layersOut].el = el;\n      autoScrolls[layersOut].vx = vx;\n      autoScrolls[layersOut].vy = vy;\n      clearInterval(autoScrolls[layersOut].pid);\n      if (vx != 0 || vy != 0) {\n        scrollThisInstance = true;\n        /* jshint loopfunc:true */\n        autoScrolls[layersOut].pid = setInterval(function () {\n          // emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n          if (isFallback && this.layer === 0) {\n            Sortable.active._onTouchMove(touchEvt$1); // To move ghost if it is positioned absolutely\n          }\n          var scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n          var scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n          if (typeof scrollCustomFn === 'function') {\n            if (scrollCustomFn.call(Sortable.dragged.parentNode[expando], scrollOffsetX, scrollOffsetY, evt, touchEvt$1, autoScrolls[this.layer].el) !== 'continue') {\n              return;\n            }\n          }\n          scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\n        }.bind({\n          layer: layersOut\n        }), 24);\n      }\n    }\n    layersOut++;\n  } while (options.bubbleScroll && currentParent !== winScroller && (currentParent = getParentAutoScrollElement(currentParent, false)));\n  scrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n}, 30);\n\nvar drop = function drop(_ref) {\n  var originalEvent = _ref.originalEvent,\n    putSortable = _ref.putSortable,\n    dragEl = _ref.dragEl,\n    activeSortable = _ref.activeSortable,\n    dispatchSortableEvent = _ref.dispatchSortableEvent,\n    hideGhostForTarget = _ref.hideGhostForTarget,\n    unhideGhostForTarget = _ref.unhideGhostForTarget;\n  if (!originalEvent) return;\n  var toSortable = putSortable || activeSortable;\n  hideGhostForTarget();\n  var touch = originalEvent.changedTouches && originalEvent.changedTouches.length ? originalEvent.changedTouches[0] : originalEvent;\n  var target = document.elementFromPoint(touch.clientX, touch.clientY);\n  unhideGhostForTarget();\n  if (toSortable && !toSortable.el.contains(target)) {\n    dispatchSortableEvent('spill');\n    this.onSpill({\n      dragEl: dragEl,\n      putSortable: putSortable\n    });\n  }\n};\nfunction Revert() {}\nRevert.prototype = {\n  startIndex: null,\n  dragStart: function dragStart(_ref2) {\n    var oldDraggableIndex = _ref2.oldDraggableIndex;\n    this.startIndex = oldDraggableIndex;\n  },\n  onSpill: function onSpill(_ref3) {\n    var dragEl = _ref3.dragEl,\n      putSortable = _ref3.putSortable;\n    this.sortable.captureAnimationState();\n    if (putSortable) {\n      putSortable.captureAnimationState();\n    }\n    var nextSibling = getChild(this.sortable.el, this.startIndex, this.options);\n    if (nextSibling) {\n      this.sortable.el.insertBefore(dragEl, nextSibling);\n    } else {\n      this.sortable.el.appendChild(dragEl);\n    }\n    this.sortable.animateAll();\n    if (putSortable) {\n      putSortable.animateAll();\n    }\n  },\n  drop: drop\n};\n_extends(Revert, {\n  pluginName: 'revertOnSpill'\n});\nfunction Remove() {}\nRemove.prototype = {\n  onSpill: function onSpill(_ref4) {\n    var dragEl = _ref4.dragEl,\n      putSortable = _ref4.putSortable;\n    var parentSortable = putSortable || this.sortable;\n    parentSortable.captureAnimationState();\n    dragEl.parentNode && dragEl.parentNode.removeChild(dragEl);\n    parentSortable.animateAll();\n  },\n  drop: drop\n};\n_extends(Remove, {\n  pluginName: 'removeOnSpill'\n});\n\nvar lastSwapEl;\nfunction SwapPlugin() {\n  function Swap() {\n    this.defaults = {\n      swapClass: 'sortable-swap-highlight'\n    };\n  }\n  Swap.prototype = {\n    dragStart: function dragStart(_ref) {\n      var dragEl = _ref.dragEl;\n      lastSwapEl = dragEl;\n    },\n    dragOverValid: function dragOverValid(_ref2) {\n      var completed = _ref2.completed,\n        target = _ref2.target,\n        onMove = _ref2.onMove,\n        activeSortable = _ref2.activeSortable,\n        changed = _ref2.changed,\n        cancel = _ref2.cancel;\n      if (!activeSortable.options.swap) return;\n      var el = this.sortable.el,\n        options = this.options;\n      if (target && target !== el) {\n        var prevSwapEl = lastSwapEl;\n        if (onMove(target) !== false) {\n          toggleClass(target, options.swapClass, true);\n          lastSwapEl = target;\n        } else {\n          lastSwapEl = null;\n        }\n        if (prevSwapEl && prevSwapEl !== lastSwapEl) {\n          toggleClass(prevSwapEl, options.swapClass, false);\n        }\n      }\n      changed();\n      completed(true);\n      cancel();\n    },\n    drop: function drop(_ref3) {\n      var activeSortable = _ref3.activeSortable,\n        putSortable = _ref3.putSortable,\n        dragEl = _ref3.dragEl;\n      var toSortable = putSortable || this.sortable;\n      var options = this.options;\n      lastSwapEl && toggleClass(lastSwapEl, options.swapClass, false);\n      if (lastSwapEl && (options.swap || putSortable && putSortable.options.swap)) {\n        if (dragEl !== lastSwapEl) {\n          toSortable.captureAnimationState();\n          if (toSortable !== activeSortable) activeSortable.captureAnimationState();\n          swapNodes(dragEl, lastSwapEl);\n          toSortable.animateAll();\n          if (toSortable !== activeSortable) activeSortable.animateAll();\n        }\n      }\n    },\n    nulling: function nulling() {\n      lastSwapEl = null;\n    }\n  };\n  return _extends(Swap, {\n    pluginName: 'swap',\n    eventProperties: function eventProperties() {\n      return {\n        swapItem: lastSwapEl\n      };\n    }\n  });\n}\nfunction swapNodes(n1, n2) {\n  var p1 = n1.parentNode,\n    p2 = n2.parentNode,\n    i1,\n    i2;\n  if (!p1 || !p2 || p1.isEqualNode(n2) || p2.isEqualNode(n1)) return;\n  i1 = index(n1);\n  i2 = index(n2);\n  if (p1.isEqualNode(p2) && i1 < i2) {\n    i2++;\n  }\n  p1.insertBefore(n2, p1.children[i1]);\n  p2.insertBefore(n1, p2.children[i2]);\n}\n\nvar multiDragElements = [],\n  multiDragClones = [],\n  lastMultiDragSelect,\n  // for selection with modifier key down (SHIFT)\n  multiDragSortable,\n  initialFolding = false,\n  // Initial multi-drag fold when drag started\n  folding = false,\n  // Folding any other time\n  dragStarted = false,\n  dragEl$1,\n  clonesFromRect,\n  clonesHidden;\nfunction MultiDragPlugin() {\n  function MultiDrag(sortable) {\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n    if (!sortable.options.avoidImplicitDeselect) {\n      if (sortable.options.supportPointer) {\n        on(document, 'pointerup', this._deselectMultiDrag);\n      } else {\n        on(document, 'mouseup', this._deselectMultiDrag);\n        on(document, 'touchend', this._deselectMultiDrag);\n      }\n    }\n    on(document, 'keydown', this._checkKeyDown);\n    on(document, 'keyup', this._checkKeyUp);\n    this.defaults = {\n      selectedClass: 'sortable-selected',\n      multiDragKey: null,\n      avoidImplicitDeselect: false,\n      setData: function setData(dataTransfer, dragEl) {\n        var data = '';\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          multiDragElements.forEach(function (multiDragElement, i) {\n            data += (!i ? '' : ', ') + multiDragElement.textContent;\n          });\n        } else {\n          data = dragEl.textContent;\n        }\n        dataTransfer.setData('Text', data);\n      }\n    };\n  }\n  MultiDrag.prototype = {\n    multiDragKeyDown: false,\n    isMultiDrag: false,\n    delayStartGlobal: function delayStartGlobal(_ref) {\n      var dragged = _ref.dragEl;\n      dragEl$1 = dragged;\n    },\n    delayEnded: function delayEnded() {\n      this.isMultiDrag = ~multiDragElements.indexOf(dragEl$1);\n    },\n    setupClone: function setupClone(_ref2) {\n      var sortable = _ref2.sortable,\n        cancel = _ref2.cancel;\n      if (!this.isMultiDrag) return;\n      for (var i = 0; i < multiDragElements.length; i++) {\n        multiDragClones.push(clone(multiDragElements[i]));\n        multiDragClones[i].sortableIndex = multiDragElements[i].sortableIndex;\n        multiDragClones[i].draggable = false;\n        multiDragClones[i].style['will-change'] = '';\n        toggleClass(multiDragClones[i], this.options.selectedClass, false);\n        multiDragElements[i] === dragEl$1 && toggleClass(multiDragClones[i], this.options.chosenClass, false);\n      }\n      sortable._hideClone();\n      cancel();\n    },\n    clone: function clone(_ref3) {\n      var sortable = _ref3.sortable,\n        rootEl = _ref3.rootEl,\n        dispatchSortableEvent = _ref3.dispatchSortableEvent,\n        cancel = _ref3.cancel;\n      if (!this.isMultiDrag) return;\n      if (!this.options.removeCloneOnHide) {\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          insertMultiDragClones(true, rootEl);\n          dispatchSortableEvent('clone');\n          cancel();\n        }\n      }\n    },\n    showClone: function showClone(_ref4) {\n      var cloneNowShown = _ref4.cloneNowShown,\n        rootEl = _ref4.rootEl,\n        cancel = _ref4.cancel;\n      if (!this.isMultiDrag) return;\n      insertMultiDragClones(false, rootEl);\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', '');\n      });\n      cloneNowShown();\n      clonesHidden = false;\n      cancel();\n    },\n    hideClone: function hideClone(_ref5) {\n      var _this = this;\n      var sortable = _ref5.sortable,\n        cloneNowHidden = _ref5.cloneNowHidden,\n        cancel = _ref5.cancel;\n      if (!this.isMultiDrag) return;\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', 'none');\n        if (_this.options.removeCloneOnHide && clone.parentNode) {\n          clone.parentNode.removeChild(clone);\n        }\n      });\n      cloneNowHidden();\n      clonesHidden = true;\n      cancel();\n    },\n    dragStartGlobal: function dragStartGlobal(_ref6) {\n      var sortable = _ref6.sortable;\n      if (!this.isMultiDrag && multiDragSortable) {\n        multiDragSortable.multiDrag._deselectMultiDrag();\n      }\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.sortableIndex = index(multiDragElement);\n      });\n\n      // Sort multi-drag elements\n      multiDragElements = multiDragElements.sort(function (a, b) {\n        return a.sortableIndex - b.sortableIndex;\n      });\n      dragStarted = true;\n    },\n    dragStarted: function dragStarted(_ref7) {\n      var _this2 = this;\n      var sortable = _ref7.sortable;\n      if (!this.isMultiDrag) return;\n      if (this.options.sort) {\n        // Capture rects,\n        // hide multi drag elements (by positioning them absolute),\n        // set multi drag elements rects to dragRect,\n        // show multi drag elements,\n        // animate to rects,\n        // unset rects & remove from DOM\n\n        sortable.captureAnimationState();\n        if (this.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            css(multiDragElement, 'position', 'absolute');\n          });\n          var dragRect = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRect);\n          });\n          folding = true;\n          initialFolding = true;\n        }\n      }\n      sortable.animateAll(function () {\n        folding = false;\n        initialFolding = false;\n        if (_this2.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n        }\n\n        // Remove all auxiliary multidrag items from el, if sorting enabled\n        if (_this2.options.sort) {\n          removeMultiDragElements();\n        }\n      });\n    },\n    dragOver: function dragOver(_ref8) {\n      var target = _ref8.target,\n        completed = _ref8.completed,\n        cancel = _ref8.cancel;\n      if (folding && ~multiDragElements.indexOf(target)) {\n        completed(false);\n        cancel();\n      }\n    },\n    revert: function revert(_ref9) {\n      var fromSortable = _ref9.fromSortable,\n        rootEl = _ref9.rootEl,\n        sortable = _ref9.sortable,\n        dragRect = _ref9.dragRect;\n      if (multiDragElements.length > 1) {\n        // Setup unfold animation\n        multiDragElements.forEach(function (multiDragElement) {\n          sortable.addAnimationState({\n            target: multiDragElement,\n            rect: folding ? getRect(multiDragElement) : dragRect\n          });\n          unsetRect(multiDragElement);\n          multiDragElement.fromRect = dragRect;\n          fromSortable.removeAnimationState(multiDragElement);\n        });\n        folding = false;\n        insertMultiDragElements(!this.options.removeCloneOnHide, rootEl);\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref10) {\n      var sortable = _ref10.sortable,\n        isOwner = _ref10.isOwner,\n        insertion = _ref10.insertion,\n        activeSortable = _ref10.activeSortable,\n        parentEl = _ref10.parentEl,\n        putSortable = _ref10.putSortable;\n      var options = this.options;\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        }\n        initialFolding = false;\n        // If leaving sort:false root, or already folding - Fold to new location\n        if (options.animation && multiDragElements.length > 1 && (folding || !isOwner && !activeSortable.options.sort && !putSortable)) {\n          // Fold: Set all multi drag elements's rects to dragEl's rect when multi-drag elements are invisible\n          var dragRectAbsolute = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRectAbsolute);\n\n            // Move element(s) to end of parentEl so that it does not interfere with multi-drag clones insertion if they are inserted\n            // while folding, and so that we can capture them again because old sortable will no longer be fromSortable\n            parentEl.appendChild(multiDragElement);\n          });\n          folding = true;\n        }\n\n        // Clones must be shown (and check to remove multi drags) after folding when interfering multiDragElements are moved out\n        if (!isOwner) {\n          // Only remove if not folding (folding will remove them anyways)\n          if (!folding) {\n            removeMultiDragElements();\n          }\n          if (multiDragElements.length > 1) {\n            var clonesHiddenBefore = clonesHidden;\n            activeSortable._showClone(sortable);\n\n            // Unfold animation for clones if showing from hidden\n            if (activeSortable.options.animation && !clonesHidden && clonesHiddenBefore) {\n              multiDragClones.forEach(function (clone) {\n                activeSortable.addAnimationState({\n                  target: clone,\n                  rect: clonesFromRect\n                });\n                clone.fromRect = clonesFromRect;\n                clone.thisAnimationDuration = null;\n              });\n            }\n          } else {\n            activeSortable._showClone(sortable);\n          }\n        }\n      }\n    },\n    dragOverAnimationCapture: function dragOverAnimationCapture(_ref11) {\n      var dragRect = _ref11.dragRect,\n        isOwner = _ref11.isOwner,\n        activeSortable = _ref11.activeSortable;\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.thisAnimationDuration = null;\n      });\n      if (activeSortable.options.animation && !isOwner && activeSortable.multiDrag.isMultiDrag) {\n        clonesFromRect = _extends({}, dragRect);\n        var dragMatrix = matrix(dragEl$1, true);\n        clonesFromRect.top -= dragMatrix.f;\n        clonesFromRect.left -= dragMatrix.e;\n      }\n    },\n    dragOverAnimationComplete: function dragOverAnimationComplete() {\n      if (folding) {\n        folding = false;\n        removeMultiDragElements();\n      }\n    },\n    drop: function drop(_ref12) {\n      var evt = _ref12.originalEvent,\n        rootEl = _ref12.rootEl,\n        parentEl = _ref12.parentEl,\n        sortable = _ref12.sortable,\n        dispatchSortableEvent = _ref12.dispatchSortableEvent,\n        oldIndex = _ref12.oldIndex,\n        putSortable = _ref12.putSortable;\n      var toSortable = putSortable || this.sortable;\n      if (!evt) return;\n      var options = this.options,\n        children = parentEl.children;\n\n      // Multi-drag selection\n      if (!dragStarted) {\n        if (options.multiDragKey && !this.multiDragKeyDown) {\n          this._deselectMultiDrag();\n        }\n        toggleClass(dragEl$1, options.selectedClass, !~multiDragElements.indexOf(dragEl$1));\n        if (!~multiDragElements.indexOf(dragEl$1)) {\n          multiDragElements.push(dragEl$1);\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'select',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          });\n\n          // Modifier activated, select from last to dragEl\n          if (evt.shiftKey && lastMultiDragSelect && sortable.el.contains(lastMultiDragSelect)) {\n            var lastIndex = index(lastMultiDragSelect),\n              currentIndex = index(dragEl$1);\n            if (~lastIndex && ~currentIndex && lastIndex !== currentIndex) {\n              (function () {\n                // Must include lastMultiDragSelect (select it), in case modified selection from no selection\n                // (but previous selection existed)\n                var n, i;\n                if (currentIndex > lastIndex) {\n                  i = lastIndex;\n                  n = currentIndex;\n                } else {\n                  i = currentIndex;\n                  n = lastIndex + 1;\n                }\n                var filter = options.filter;\n                for (; i < n; i++) {\n                  if (~multiDragElements.indexOf(children[i])) continue;\n                  // Check if element is draggable\n                  if (!closest(children[i], options.draggable, parentEl, false)) continue;\n                  // Check if element is filtered\n                  var filtered = filter && (typeof filter === 'function' ? filter.call(sortable, evt, children[i], sortable) : filter.split(',').some(function (criteria) {\n                    return closest(children[i], criteria.trim(), parentEl, false);\n                  }));\n                  if (filtered) continue;\n                  toggleClass(children[i], options.selectedClass, true);\n                  multiDragElements.push(children[i]);\n                  dispatchEvent({\n                    sortable: sortable,\n                    rootEl: rootEl,\n                    name: 'select',\n                    targetEl: children[i],\n                    originalEvent: evt\n                  });\n                }\n              })();\n            }\n          } else {\n            lastMultiDragSelect = dragEl$1;\n          }\n          multiDragSortable = toSortable;\n        } else {\n          multiDragElements.splice(multiDragElements.indexOf(dragEl$1), 1);\n          lastMultiDragSelect = null;\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'deselect',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          });\n        }\n      }\n\n      // Multi-drag drop\n      if (dragStarted && this.isMultiDrag) {\n        folding = false;\n        // Do not \"unfold\" after around dragEl if reverted\n        if ((parentEl[expando].options.sort || parentEl !== rootEl) && multiDragElements.length > 1) {\n          var dragRect = getRect(dragEl$1),\n            multiDragIndex = index(dragEl$1, ':not(.' + this.options.selectedClass + ')');\n          if (!initialFolding && options.animation) dragEl$1.thisAnimationDuration = null;\n          toSortable.captureAnimationState();\n          if (!initialFolding) {\n            if (options.animation) {\n              dragEl$1.fromRect = dragRect;\n              multiDragElements.forEach(function (multiDragElement) {\n                multiDragElement.thisAnimationDuration = null;\n                if (multiDragElement !== dragEl$1) {\n                  var rect = folding ? getRect(multiDragElement) : dragRect;\n                  multiDragElement.fromRect = rect;\n\n                  // Prepare unfold animation\n                  toSortable.addAnimationState({\n                    target: multiDragElement,\n                    rect: rect\n                  });\n                }\n              });\n            }\n\n            // Multi drag elements are not necessarily removed from the DOM on drop, so to reinsert\n            // properly they must all be removed\n            removeMultiDragElements();\n            multiDragElements.forEach(function (multiDragElement) {\n              if (children[multiDragIndex]) {\n                parentEl.insertBefore(multiDragElement, children[multiDragIndex]);\n              } else {\n                parentEl.appendChild(multiDragElement);\n              }\n              multiDragIndex++;\n            });\n\n            // If initial folding is done, the elements may have changed position because they are now\n            // unfolding around dragEl, even though dragEl may not have his index changed, so update event\n            // must be fired here as Sortable will not.\n            if (oldIndex === index(dragEl$1)) {\n              var update = false;\n              multiDragElements.forEach(function (multiDragElement) {\n                if (multiDragElement.sortableIndex !== index(multiDragElement)) {\n                  update = true;\n                  return;\n                }\n              });\n              if (update) {\n                dispatchSortableEvent('update');\n                dispatchSortableEvent('sort');\n              }\n            }\n          }\n\n          // Must be done after capturing individual rects (scroll bar)\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n          toSortable.animateAll();\n        }\n        multiDragSortable = toSortable;\n      }\n\n      // Remove clones if necessary\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        multiDragClones.forEach(function (clone) {\n          clone.parentNode && clone.parentNode.removeChild(clone);\n        });\n      }\n    },\n    nullingGlobal: function nullingGlobal() {\n      this.isMultiDrag = dragStarted = false;\n      multiDragClones.length = 0;\n    },\n    destroyGlobal: function destroyGlobal() {\n      this._deselectMultiDrag();\n      off(document, 'pointerup', this._deselectMultiDrag);\n      off(document, 'mouseup', this._deselectMultiDrag);\n      off(document, 'touchend', this._deselectMultiDrag);\n      off(document, 'keydown', this._checkKeyDown);\n      off(document, 'keyup', this._checkKeyUp);\n    },\n    _deselectMultiDrag: function _deselectMultiDrag(evt) {\n      if (typeof dragStarted !== \"undefined\" && dragStarted) return;\n\n      // Only deselect if selection is in this sortable\n      if (multiDragSortable !== this.sortable) return;\n\n      // Only deselect if target is not item in this sortable\n      if (evt && closest(evt.target, this.options.draggable, this.sortable.el, false)) return;\n\n      // Only deselect if left click\n      if (evt && evt.button !== 0) return;\n      while (multiDragElements.length) {\n        var el = multiDragElements[0];\n        toggleClass(el, this.options.selectedClass, false);\n        multiDragElements.shift();\n        dispatchEvent({\n          sortable: this.sortable,\n          rootEl: this.sortable.el,\n          name: 'deselect',\n          targetEl: el,\n          originalEvent: evt\n        });\n      }\n    },\n    _checkKeyDown: function _checkKeyDown(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = true;\n      }\n    },\n    _checkKeyUp: function _checkKeyUp(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = false;\n      }\n    }\n  };\n  return _extends(MultiDrag, {\n    // Static methods & properties\n    pluginName: 'multiDrag',\n    utils: {\n      /**\r\n       * Selects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be selected\r\n       */\n      select: function select(el) {\n        var sortable = el.parentNode[expando];\n        if (!sortable || !sortable.options.multiDrag || ~multiDragElements.indexOf(el)) return;\n        if (multiDragSortable && multiDragSortable !== sortable) {\n          multiDragSortable.multiDrag._deselectMultiDrag();\n          multiDragSortable = sortable;\n        }\n        toggleClass(el, sortable.options.selectedClass, true);\n        multiDragElements.push(el);\n      },\n      /**\r\n       * Deselects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be deselected\r\n       */\n      deselect: function deselect(el) {\n        var sortable = el.parentNode[expando],\n          index = multiDragElements.indexOf(el);\n        if (!sortable || !sortable.options.multiDrag || !~index) return;\n        toggleClass(el, sortable.options.selectedClass, false);\n        multiDragElements.splice(index, 1);\n      }\n    },\n    eventProperties: function eventProperties() {\n      var _this3 = this;\n      var oldIndicies = [],\n        newIndicies = [];\n      multiDragElements.forEach(function (multiDragElement) {\n        oldIndicies.push({\n          multiDragElement: multiDragElement,\n          index: multiDragElement.sortableIndex\n        });\n\n        // multiDragElements will already be sorted if folding\n        var newIndex;\n        if (folding && multiDragElement !== dragEl$1) {\n          newIndex = -1;\n        } else if (folding) {\n          newIndex = index(multiDragElement, ':not(.' + _this3.options.selectedClass + ')');\n        } else {\n          newIndex = index(multiDragElement);\n        }\n        newIndicies.push({\n          multiDragElement: multiDragElement,\n          index: newIndex\n        });\n      });\n      return {\n        items: _toConsumableArray(multiDragElements),\n        clones: [].concat(multiDragClones),\n        oldIndicies: oldIndicies,\n        newIndicies: newIndicies\n      };\n    },\n    optionListeners: {\n      multiDragKey: function multiDragKey(key) {\n        key = key.toLowerCase();\n        if (key === 'ctrl') {\n          key = 'Control';\n        } else if (key.length > 1) {\n          key = key.charAt(0).toUpperCase() + key.substr(1);\n        }\n        return key;\n      }\n    }\n  });\n}\nfunction insertMultiDragElements(clonesInserted, rootEl) {\n  multiDragElements.forEach(function (multiDragElement, i) {\n    var target = rootEl.children[multiDragElement.sortableIndex + (clonesInserted ? Number(i) : 0)];\n    if (target) {\n      rootEl.insertBefore(multiDragElement, target);\n    } else {\n      rootEl.appendChild(multiDragElement);\n    }\n  });\n}\n\n/**\r\n * Insert multi-drag clones\r\n * @param  {[Boolean]} elementsInserted  Whether the multi-drag elements are inserted\r\n * @param  {HTMLElement} rootEl\r\n */\nfunction insertMultiDragClones(elementsInserted, rootEl) {\n  multiDragClones.forEach(function (clone, i) {\n    var target = rootEl.children[clone.sortableIndex + (elementsInserted ? Number(i) : 0)];\n    if (target) {\n      rootEl.insertBefore(clone, target);\n    } else {\n      rootEl.appendChild(clone);\n    }\n  });\n}\nfunction removeMultiDragElements() {\n  multiDragElements.forEach(function (multiDragElement) {\n    if (multiDragElement === dragEl$1) return;\n    multiDragElement.parentNode && multiDragElement.parentNode.removeChild(multiDragElement);\n  });\n}\n\nSortable.mount(new AutoScrollPlugin());\nSortable.mount(Remove, Revert);\n\nexport default Sortable;\nexport { MultiDragPlugin as MultiDrag, Sortable, SwapPlugin as Swap };\n", "import Sortable from 'sortablejs'\n\nexport default {\n  mounted() {\n    const sortable = new Sortable(this.el, {\n      animation: 1,\n      delay: 4,\n      delayOnTouchOnly: true,\n      group: 'shared',\n      draggable: '.draggable',\n      ghostClass: '.sortable-ghost',\n      handle: \".drag-handle\",\n      onEnd: (evt) => {\n        // console.log(sortable.toArray())\n        evt.preventDefault()\n        console.log('onEnd');\n\n        this.pushEvent('dropped', {\n          draggedId: evt.item.id, // id of the dragged item\n          toDropzoneId: evt.to.id, // id of the drop zone where the drop occured\n          fromDropzoneId: evt.from.id, // id of the drop zone where the drop occured\n          newDraggableIndex: evt.newDraggableIndex, // index where the item was dropped (relative to other items in the drop zone)\n          oldDraggableIndex: evt.oldDraggableIndex, // index where the item was dropped (relative to other items in the drop zone)\n          newOrder: sortable.toArray()\n        })\n      },\n    });\n  }\n};\n", "/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n", "import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n", "import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n", "import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n", "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n", "import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n", "/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n", "/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n", "/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n", "/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n", "import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n", "import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n", "import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n", "/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n", "import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n", "/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n", "import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n", "import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nexport default WeakMap;\n", "import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n", "/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n", "/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n", "/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n", "/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n", "import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n", "import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n", "import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n", "/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEach;\n", "/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n", "import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n", "/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n", "import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n", "import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n", "import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n", "import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n", "/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n", "import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n", "import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n", "import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n", "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n", "/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n", "import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n", "import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n", "/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n", "import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n", "import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n", "/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n", "import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n", "import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n", "import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n", "/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n", "import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n", "import isPrototype from './_isPrototype.js';\nimport nativeKeys from './_nativeKeys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeys;\n", "import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeys from './_baseKeys.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nexport default keys;\n", "/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n", "import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n", "import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n", "import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n", "import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n", "/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n", "import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n", "import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n", "import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n", "import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n", "/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n", "import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n", "import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n", "import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n", "import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n", "import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n", "import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n", "import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n", "import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n", "/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n", "import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n", "import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n", "import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n", "import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n", "import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n", "import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n", "/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nexport default arrayPush;\n", "import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n", "import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n", "import ListCache from './_ListCache.js';\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nexport default stackClear;\n", "/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nexport default stackDelete;\n", "/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nexport default stackGet;\n", "/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nexport default stackHas;\n", "import ListCache from './_ListCache.js';\nimport Map from './_Map.js';\nimport MapCache from './_MapCache.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nexport default stackSet;\n", "import ListCache from './_ListCache.js';\nimport stackClear from './_stackClear.js';\nimport stackDelete from './_stackDelete.js';\nimport stackGet from './_stackGet.js';\nimport stackHas from './_stackHas.js';\nimport stackSet from './_stackSet.js';\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nexport default Stack;\n", "import copyObject from './_copyObject.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nexport default baseAssign;\n", "import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nexport default baseAssignIn;\n", "import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n", "/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nexport default arrayFilter;\n", "/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nexport default stubArray;\n", "import arrayFilter from './_arrayFilter.js';\nimport stubArray from './stubArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nexport default getSymbols;\n", "import copyObject from './_copyObject.js';\nimport getSymbols from './_getSymbols.js';\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nexport default copySymbols;\n", "import arrayPush from './_arrayPush.js';\nimport getPrototype from './_getPrototype.js';\nimport getSymbols from './_getSymbols.js';\nimport stubArray from './stubArray.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nexport default getSymbolsIn;\n", "import copyObject from './_copyObject.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nexport default copySymbolsIn;\n", "import arrayPush from './_arrayPush.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nexport default baseGetAllKeys;\n", "import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbols from './_getSymbols.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nexport default getAllKeys;\n", "import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nexport default getAllKeysIn;\n", "import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nexport default DataView;\n", "import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nexport default Promise;\n", "import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nexport default Set;\n", "import DataView from './_DataView.js';\nimport Map from './_Map.js';\nimport Promise from './_Promise.js';\nimport Set from './_Set.js';\nimport WeakMap from './_WeakMap.js';\nimport baseGetTag from './_baseGetTag.js';\nimport toSource from './_toSource.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nexport default getTag;\n", "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nexport default initCloneArray;\n", "import root from './_root.js';\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nexport default Uint8Array;\n", "import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n", "import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nexport default cloneDataView;\n", "/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nexport default cloneRegExp;\n", "import Symbol from './_Symbol.js';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nexport default cloneSymbol;\n", "import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n", "import cloneArrayBuffer from './_cloneArrayBuffer.js';\nimport cloneDataView from './_cloneDataView.js';\nimport cloneRegExp from './_cloneRegExp.js';\nimport cloneSymbol from './_cloneSymbol.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nexport default initCloneByTag;\n", "import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n", "import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nexport default baseIsMap;\n", "import baseIsMap from './_baseIsMap.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nexport default isMap;\n", "import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nexport default baseIsSet;\n", "import baseIsSet from './_baseIsSet.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nexport default isSet;\n", "import Stack from './_Stack.js';\nimport arrayEach from './_arrayEach.js';\nimport assignValue from './_assignValue.js';\nimport baseAssign from './_baseAssign.js';\nimport baseAssignIn from './_baseAssignIn.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport copyArray from './_copyArray.js';\nimport copySymbols from './_copySymbols.js';\nimport copySymbolsIn from './_copySymbolsIn.js';\nimport getAllKeys from './_getAllKeys.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\nimport getTag from './_getTag.js';\nimport initCloneArray from './_initCloneArray.js';\nimport initCloneByTag from './_initCloneByTag.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isMap from './isMap.js';\nimport isObject from './isObject.js';\nimport isSet from './isSet.js';\nimport keys from './keys.js';\nimport keysIn from './keysIn.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nexport default baseClone;\n", "import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nexport default cloneDeep;\n", "/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nexport default setCacheAdd;\n", "/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nexport default setCacheHas;\n", "import MapCache from './_MapCache.js';\nimport setCacheAdd from './_setCacheAdd.js';\nimport setCacheHas from './_setCacheHas.js';\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nexport default SetCache;\n", "/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arraySome;\n", "/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nexport default cacheHas;\n", "import SetCache from './_SetCache.js';\nimport arraySome from './_arraySome.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalArrays;\n", "/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nexport default mapToArray;\n", "/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nexport default setToArray;\n", "import Symbol from './_Symbol.js';\nimport Uint8Array from './_Uint8Array.js';\nimport eq from './eq.js';\nimport equalArrays from './_equalArrays.js';\nimport mapToArray from './_mapToArray.js';\nimport setToArray from './_setToArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nexport default equalByTag;\n", "import getAllKeys from './_getAllKeys.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalObjects;\n", "import Stack from './_Stack.js';\nimport equalArrays from './_equalArrays.js';\nimport equalByTag from './_equalByTag.js';\nimport equalObjects from './_equalObjects.js';\nimport getTag from './_getTag.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nexport default baseIsEqualDeep;\n", "import baseIsEqualDeep from './_baseIsEqualDeep.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nexport default baseIsEqual;\n", "/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nexport default createBaseFor;\n", "import createBaseFor from './_createBaseFor.js';\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nexport default baseFor;\n", "import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignMergeValue;\n", "import isArrayLike from './isArrayLike.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n", "/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nexport default safeGet;\n", "import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nexport default toPlainObject;\n", "import assignMergeValue from './_assignMergeValue.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\nimport copyArray from './_copyArray.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isPlainObject from './isPlainObject.js';\nimport isTypedArray from './isTypedArray.js';\nimport safeGet from './_safeGet.js';\nimport toPlainObject from './toPlainObject.js';\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nexport default baseMergeDeep;\n", "import Stack from './_Stack.js';\nimport assignMergeValue from './_assignMergeValue.js';\nimport baseFor from './_baseFor.js';\nimport baseMergeDeep from './_baseMergeDeep.js';\nimport isObject from './isObject.js';\nimport keysIn from './keysIn.js';\nimport safeGet from './_safeGet.js';\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nexport default baseMerge;\n", "import baseIsEqual from './_baseIsEqual.js';\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nexport default isEqual;\n", "import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nexport default merge;\n", "enum Scope {\n  TYPE = (1 << 2) - 1, // 0011 Lower two bits\n  LEVEL = ((1 << 2) - 1) << 2, // 1100 Higher two bits\n\n  ATTRIBUTE = (1 << 0) | LEVEL, // 1101\n  BLOT = (1 << 1) | LEVEL, // 1110\n  INLINE = (1 << 2) | TYPE, // 0111\n  BLOCK = (1 << 3) | TYPE, // 1011\n\n  BLOCK_BLOT = BLOCK & BLOT, // 1010\n  INLINE_BLOT = INLINE & BLOT, // 0110\n  BLOCK_ATTRIBUTE = BLOCK & ATTRIBUTE, // 1001\n  INLINE_ATTRIBUTE = INLINE & ATTRIBUTE, // 0101\n\n  ANY = TYPE | LEVEL,\n}\n\nexport default Scope;\n", "import Scope from '../scope.js';\n\nexport interface AttributorOptions {\n  scope?: Scope;\n  whitelist?: string[];\n}\n\nexport default class Attributor {\n  public static keys(node: HTMLElement): string[] {\n    return Array.from(node.attributes).map((item: Attr) => item.name);\n  }\n\n  public scope: Scope;\n  public whitelist: string[] | undefined;\n\n  constructor(\n    public readonly attrName: string,\n    public readonly keyName: string,\n    options: AttributorOptions = {},\n  ) {\n    const attributeBit = Scope.TYPE & Scope.ATTRIBUTE;\n    this.scope =\n      options.scope != null\n        ? // Ignore type bits, force attribute bit\n          (options.scope & Scope.LEVEL) | attributeBit\n        : Scope.ATTRIBUTE;\n    if (options.whitelist != null) {\n      this.whitelist = options.whitelist;\n    }\n  }\n\n  public add(node: HTMLElement, value: any): boolean {\n    if (!this.canAdd(node, value)) {\n      return false;\n    }\n    node.setAttribute(this.keyName, value);\n    return true;\n  }\n\n  public canAdd(_node: HTMLElement, value: any): boolean {\n    if (this.whitelist == null) {\n      return true;\n    }\n    if (typeof value === 'string') {\n      return this.whitelist.indexOf(value.replace(/[\"']/g, '')) > -1;\n    } else {\n      return this.whitelist.indexOf(value) > -1;\n    }\n  }\n\n  public remove(node: HTMLElement): void {\n    node.removeAttribute(this.keyName);\n  }\n\n  public value(node: HTMLElement): any {\n    const value = node.getAttribute(this.keyName);\n    if (this.canAdd(node, value) && value) {\n      return value;\n    }\n    return '';\n  }\n}\n", "export default class ParchmentError extends Error {\n  public message: string;\n  public name: string;\n  public stack!: string;\n\n  constructor(message: string) {\n    message = '[Parchment] ' + message;\n    super(message);\n    this.message = message;\n    this.name = this.constructor.name;\n  }\n}\n", "import Attributor from './attributor/attributor.js';\nimport {\n  type Blot,\n  type BlotConstructor,\n  type Root,\n} from './blot/abstract/blot.js';\nimport ParchmentError from './error.js';\nimport Scope from './scope.js';\n\nexport type RegistryDefinition = Attributor | BlotConstructor;\n\nexport interface RegistryInterface {\n  create(scroll: Root, input: Node | string | Scope, value?: any): Blot;\n  query(query: string | Node | Scope, scope: Scope): RegistryDefinition | null;\n  register(...definitions: any[]): any;\n}\n\nexport default class Registry implements RegistryInterface {\n  public static blots = new WeakMap<Node, Blot>();\n\n  public static find(node?: Node | null, bubble = false): Blot | null {\n    if (node == null) {\n      return null;\n    }\n    if (this.blots.has(node)) {\n      return this.blots.get(node) || null;\n    }\n    if (bubble) {\n      let parentNode: Node | null = null;\n      try {\n        parentNode = node.parentNode;\n      } catch (err) {\n        // Probably hit a permission denied error.\n        // A known case is in Firefox, event targets can be anonymous DIVs\n        // inside an input element.\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=208427\n        return null;\n      }\n      return this.find(parentNode, bubble);\n    }\n    return null;\n  }\n\n  private attributes: { [key: string]: Attributor } = {};\n  private classes: { [key: string]: BlotConstructor } = {};\n  private tags: { [key: string]: BlotConstructor } = {};\n  private types: { [key: string]: RegistryDefinition } = {};\n\n  public create(scroll: Root, input: Node | string | Scope, value?: any): Blot {\n    const match = this.query(input);\n    if (match == null) {\n      throw new ParchmentError(`Unable to create ${input} blot`);\n    }\n    const blotClass = match as BlotConstructor;\n    const node =\n      // @ts-expect-error Fix me later\n      input instanceof Node || input.nodeType === Node.TEXT_NODE\n        ? input\n        : blotClass.create(value);\n\n    const blot = new blotClass(scroll, node as Node, value);\n    Registry.blots.set(blot.domNode, blot);\n    return blot;\n  }\n\n  public find(node: Node | null, bubble = false): Blot | null {\n    return Registry.find(node, bubble);\n  }\n\n  public query(\n    query: string | Node | Scope,\n    scope: Scope = Scope.ANY,\n  ): RegistryDefinition | null {\n    let match;\n    if (typeof query === 'string') {\n      match = this.types[query] || this.attributes[query];\n      // @ts-expect-error Fix me later\n    } else if (query instanceof Text || query.nodeType === Node.TEXT_NODE) {\n      match = this.types.text;\n    } else if (typeof query === 'number') {\n      if (query & Scope.LEVEL & Scope.BLOCK) {\n        match = this.types.block;\n      } else if (query & Scope.LEVEL & Scope.INLINE) {\n        match = this.types.inline;\n      }\n    } else if (query instanceof Element) {\n      const names = (query.getAttribute('class') || '').split(/\\s+/);\n      names.some((name) => {\n        match = this.classes[name];\n        if (match) {\n          return true;\n        }\n        return false;\n      });\n      match = match || this.tags[query.tagName];\n    }\n    if (match == null) {\n      return null;\n    }\n    if (\n      'scope' in match &&\n      scope & Scope.LEVEL & match.scope &&\n      scope & Scope.TYPE & match.scope\n    ) {\n      return match;\n    }\n    return null;\n  }\n\n  public register(...definitions: RegistryDefinition[]): RegistryDefinition[] {\n    return definitions.map((definition) => {\n      const isBlot = 'blotName' in definition;\n      const isAttr = 'attrName' in definition;\n      if (!isBlot && !isAttr) {\n        throw new ParchmentError('Invalid definition');\n      } else if (isBlot && definition.blotName === 'abstract') {\n        throw new ParchmentError('Cannot register abstract class');\n      }\n      const key = isBlot\n        ? definition.blotName\n        : isAttr\n          ? definition.attrName\n          : (undefined as never); // already handled by above checks\n      this.types[key] = definition;\n\n      if (isAttr) {\n        if (typeof definition.keyName === 'string') {\n          this.attributes[definition.keyName] = definition;\n        }\n      } else if (isBlot) {\n        if (definition.className) {\n          this.classes[definition.className] = definition;\n        }\n        if (definition.tagName) {\n          if (Array.isArray(definition.tagName)) {\n            definition.tagName = definition.tagName.map((tagName: string) => {\n              return tagName.toUpperCase();\n            });\n          } else {\n            definition.tagName = definition.tagName.toUpperCase();\n          }\n          const tagNames = Array.isArray(definition.tagName)\n            ? definition.tagName\n            : [definition.tagName];\n          tagNames.forEach((tag: string) => {\n            if (this.tags[tag] == null || definition.className == null) {\n              this.tags[tag] = definition;\n            }\n          });\n        }\n      }\n      return definition;\n    });\n  }\n}\n", "import Attributor from './attributor.js';\n\nfunction match(node: HTMLElement, prefix: string): string[] {\n  const className = node.getAttribute('class') || '';\n  return className\n    .split(/\\s+/)\n    .filter((name) => name.indexOf(`${prefix}-`) === 0);\n}\n\nclass ClassAttributor extends Attributor {\n  public static keys(node: HTMLElement): string[] {\n    return (node.getAttribute('class') || '')\n      .split(/\\s+/)\n      .map((name) => name.split('-').slice(0, -1).join('-'));\n  }\n\n  public add(node: HTMLElement, value: any): boolean {\n    if (!this.canAdd(node, value)) {\n      return false;\n    }\n    this.remove(node);\n    node.classList.add(`${this.keyName}-${value}`);\n    return true;\n  }\n\n  public remove(node: HTMLElement): void {\n    const matches = match(node, this.keyName);\n    matches.forEach((name) => {\n      node.classList.remove(name);\n    });\n    if (node.classList.length === 0) {\n      node.removeAttribute('class');\n    }\n  }\n\n  public value(node: HTMLElement): any {\n    const result = match(node, this.keyName)[0] || '';\n    const value = result.slice(this.keyName.length + 1); // +1 for hyphen\n    return this.canAdd(node, value) ? value : '';\n  }\n}\n\nexport default ClassAttributor;\n", "import Attributor from './attributor.js';\n\nfunction camelize(name: string): string {\n  const parts = name.split('-');\n  const rest = parts\n    .slice(1)\n    .map((part: string) => part[0].toUpperCase() + part.slice(1))\n    .join('');\n  return parts[0] + rest;\n}\n\nclass StyleAttributor extends Attributor {\n  public static keys(node: HTMLElement): string[] {\n    return (node.getAttribute('style') || '').split(';').map((value) => {\n      const arr = value.split(':');\n      return arr[0].trim();\n    });\n  }\n\n  public add(node: HTMLElement, value: any): boolean {\n    if (!this.canAdd(node, value)) {\n      return false;\n    }\n    // @ts-expect-error Fix me later\n    node.style[camelize(this.keyName)] = value;\n    return true;\n  }\n\n  public remove(node: HTMLElement): void {\n    // @ts-expect-error Fix me later\n    node.style[camelize(this.keyName)] = '';\n    if (!node.getAttribute('style')) {\n      node.removeAttribute('style');\n    }\n  }\n\n  public value(node: HTMLElement): any {\n    // @ts-expect-error Fix me later\n    const value = node.style[camelize(this.keyName)];\n    return this.canAdd(node, value) ? value : '';\n  }\n}\n\nexport default StyleAttributor;\n", "import type { Formattable } from '../blot/abstract/blot.js';\nimport Registry from '../registry.js';\nimport Scope from '../scope.js';\nimport Attributor from './attributor.js';\nimport ClassAttributor from './class.js';\nimport StyleAttributor from './style.js';\n\nclass AttributorStore {\n  private attributes: { [key: string]: Attributor } = {};\n  private domNode: HTMLElement;\n\n  constructor(domNode: HTMLElement) {\n    this.domNode = domNode;\n    this.build();\n  }\n\n  public attribute(attribute: Attributor, value: any): void {\n    // verb\n    if (value) {\n      if (attribute.add(this.domNode, value)) {\n        if (attribute.value(this.domNode) != null) {\n          this.attributes[attribute.attrName] = attribute;\n        } else {\n          delete this.attributes[attribute.attrName];\n        }\n      }\n    } else {\n      attribute.remove(this.domNode);\n      delete this.attributes[attribute.attrName];\n    }\n  }\n\n  public build(): void {\n    this.attributes = {};\n    const blot = Registry.find(this.domNode);\n    if (blot == null) {\n      return;\n    }\n    const attributes = Attributor.keys(this.domNode);\n    const classes = ClassAttributor.keys(this.domNode);\n    const styles = StyleAttributor.keys(this.domNode);\n    attributes\n      .concat(classes)\n      .concat(styles)\n      .forEach((name) => {\n        const attr = blot.scroll.query(name, Scope.ATTRIBUTE);\n        if (attr instanceof Attributor) {\n          this.attributes[attr.attrName] = attr;\n        }\n      });\n  }\n\n  public copy(target: Formattable): void {\n    Object.keys(this.attributes).forEach((key) => {\n      const value = this.attributes[key].value(this.domNode);\n      target.format(key, value);\n    });\n  }\n\n  public move(target: Formattable): void {\n    this.copy(target);\n    Object.keys(this.attributes).forEach((key) => {\n      this.attributes[key].remove(this.domNode);\n    });\n    this.attributes = {};\n  }\n\n  public values(): { [key: string]: any } {\n    return Object.keys(this.attributes).reduce(\n      (attributes: { [key: string]: any }, name: string) => {\n        attributes[name] = this.attributes[name].value(this.domNode);\n        return attributes;\n      },\n      {},\n    );\n  }\n}\n\nexport default AttributorStore;\n", "import ParchmentError from '../../error.js';\nimport Registry from '../../registry.js';\nimport Scope from '../../scope.js';\nimport type {\n  Blot,\n  BlotConstructor,\n  Formattable,\n  Parent,\n  Root,\n} from './blot.js';\n\nclass ShadowBlot implements Blot {\n  public static blotName = 'abstract';\n  public static className: string;\n  public static requiredContainer: BlotConstructor;\n  public static scope: Scope;\n  public static tagName: string | string[];\n\n  public static create(rawValue?: unknown): Node {\n    if (this.tagName == null) {\n      throw new ParchmentError('Blot definition missing tagName');\n    }\n    let node: HTMLElement;\n    let value: string | number | undefined;\n    if (Array.isArray(this.tagName)) {\n      if (typeof rawValue === 'string') {\n        value = rawValue.toUpperCase();\n        if (parseInt(value, 10).toString() === value) {\n          value = parseInt(value, 10);\n        }\n      } else if (typeof rawValue === 'number') {\n        value = rawValue;\n      }\n      if (typeof value === 'number') {\n        node = document.createElement(this.tagName[value - 1]);\n      } else if (value && this.tagName.indexOf(value) > -1) {\n        node = document.createElement(value);\n      } else {\n        node = document.createElement(this.tagName[0]);\n      }\n    } else {\n      node = document.createElement(this.tagName);\n    }\n    if (this.className) {\n      node.classList.add(this.className);\n    }\n    return node;\n  }\n\n  public prev: Blot | null;\n  public next: Blot | null;\n  // @ts-expect-error Fix me later\n  public parent: Parent;\n\n  // Hack for accessing inherited static methods\n  get statics(): any {\n    return this.constructor;\n  }\n  constructor(\n    public scroll: Root,\n    public domNode: Node,\n  ) {\n    Registry.blots.set(domNode, this);\n    this.prev = null;\n    this.next = null;\n  }\n\n  public attach(): void {\n    // Nothing to do\n  }\n\n  public clone(): Blot {\n    const domNode = this.domNode.cloneNode(false);\n    return this.scroll.create(domNode);\n  }\n\n  public detach(): void {\n    if (this.parent != null) {\n      this.parent.removeChild(this);\n    }\n    Registry.blots.delete(this.domNode);\n  }\n\n  public deleteAt(index: number, length: number): void {\n    const blot = this.isolate(index, length);\n    blot.remove();\n  }\n\n  public formatAt(\n    index: number,\n    length: number,\n    name: string,\n    value: any,\n  ): void {\n    const blot = this.isolate(index, length);\n    if (this.scroll.query(name, Scope.BLOT) != null && value) {\n      blot.wrap(name, value);\n    } else if (this.scroll.query(name, Scope.ATTRIBUTE) != null) {\n      const parent = this.scroll.create(this.statics.scope) as Parent &\n        Formattable;\n      blot.wrap(parent);\n      parent.format(name, value);\n    }\n  }\n\n  public insertAt(index: number, value: string, def?: any): void {\n    const blot =\n      def == null\n        ? this.scroll.create('text', value)\n        : this.scroll.create(value, def);\n    const ref = this.split(index);\n    this.parent.insertBefore(blot, ref || undefined);\n  }\n\n  public isolate(index: number, length: number): Blot {\n    const target = this.split(index);\n    if (target == null) {\n      throw new Error('Attempt to isolate at end');\n    }\n    target.split(length);\n    return target;\n  }\n\n  public length(): number {\n    return 1;\n  }\n\n  public offset(root: Blot = this.parent): number {\n    if (this.parent == null || this === root) {\n      return 0;\n    }\n    return this.parent.children.offset(this) + this.parent.offset(root);\n  }\n\n  public optimize(_context?: { [key: string]: any }): void {\n    if (\n      this.statics.requiredContainer &&\n      !(this.parent instanceof this.statics.requiredContainer)\n    ) {\n      this.wrap(this.statics.requiredContainer.blotName);\n    }\n  }\n\n  public remove(): void {\n    if (this.domNode.parentNode != null) {\n      this.domNode.parentNode.removeChild(this.domNode);\n    }\n    this.detach();\n  }\n\n  public replaceWith(name: string | Blot, value?: any): Blot {\n    const replacement =\n      typeof name === 'string' ? this.scroll.create(name, value) : name;\n    if (this.parent != null) {\n      this.parent.insertBefore(replacement, this.next || undefined);\n      this.remove();\n    }\n    return replacement;\n  }\n\n  public split(index: number, _force?: boolean): Blot | null {\n    return index === 0 ? this : this.next;\n  }\n\n  public update(\n    _mutations: MutationRecord[],\n    _context: { [key: string]: any },\n  ): void {\n    // Nothing to do by default\n  }\n\n  public wrap(name: string | Parent, value?: any): Parent {\n    const wrapper =\n      typeof name === 'string'\n        ? (this.scroll.create(name, value) as Parent)\n        : name;\n    if (this.parent != null) {\n      this.parent.insertBefore(wrapper, this.next || undefined);\n    }\n    if (typeof wrapper.appendChild !== 'function') {\n      throw new ParchmentError(`Cannot wrap ${name}`);\n    }\n    wrapper.appendChild(this);\n    return wrapper;\n  }\n}\n\nexport default ShadowBlot;\n", "import Scope from '../../scope.js';\nimport type { Leaf } from './blot.js';\nimport ShadowBlot from './shadow.js';\n\nclass LeafBlot extends ShadowBlot implements Leaf {\n  public static scope = Scope.INLINE_BLOT;\n\n  /**\n   * Returns the value represented by domNode if it is this Blot's type\n   * No checking that domNode can represent this Blot type is required so\n   * applications needing it should check externally before calling.\n   */\n  public static value(_domNode: Node): any {\n    return true;\n  }\n\n  /**\n   * Given location represented by node and offset from DOM Selection Range,\n   * return index to that location.\n   */\n  public index(node: Node, offset: number): number {\n    if (\n      this.domNode === node ||\n      this.domNode.compareDocumentPosition(node) &\n        Node.DOCUMENT_POSITION_CONTAINED_BY\n    ) {\n      return Math.min(offset, 1);\n    }\n    return -1;\n  }\n\n  /**\n   * Given index to location within blot, return node and offset representing\n   * that location, consumable by DOM Selection Range\n   */\n  public position(index: number, _inclusive?: boolean): [Node, number] {\n    const childNodes: Node[] = Array.from(this.parent.domNode.childNodes);\n    let offset = childNodes.indexOf(this.domNode);\n    if (index > 0) {\n      offset += 1;\n    }\n    return [this.parent.domNode, offset];\n  }\n\n  /**\n   * Return value represented by this blot\n   * Should not change without interaction from API or\n   * user change detectable by update()\n   */\n  public value(): any {\n    return {\n      [this.statics.blotName]: this.statics.value(this.domNode) || true,\n    };\n  }\n}\n\nexport default LeafBlot;\n", "import type LinkedNode from './linked-node.js';\n\nclass LinkedList<T extends LinkedNode> {\n  public head: T | null;\n  public tail: T | null;\n  public length: number;\n\n  constructor() {\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  public append(...nodes: T[]): void {\n    this.insertBefore(nodes[0], null);\n    if (nodes.length > 1) {\n      const rest = nodes.slice(1);\n      this.append(...rest);\n    }\n  }\n\n  public at(index: number): T | null {\n    const next = this.iterator();\n    let cur = next();\n    while (cur && index > 0) {\n      index -= 1;\n      cur = next();\n    }\n    return cur;\n  }\n\n  public contains(node: T): boolean {\n    const next = this.iterator();\n    let cur = next();\n    while (cur) {\n      if (cur === node) {\n        return true;\n      }\n      cur = next();\n    }\n    return false;\n  }\n\n  public indexOf(node: T): number {\n    const next = this.iterator();\n    let cur = next();\n    let index = 0;\n    while (cur) {\n      if (cur === node) {\n        return index;\n      }\n      index += 1;\n      cur = next();\n    }\n    return -1;\n  }\n\n  public insertBefore(node: T | null, refNode: T | null): void {\n    if (node == null) {\n      return;\n    }\n    this.remove(node);\n    node.next = refNode;\n    if (refNode != null) {\n      node.prev = refNode.prev;\n      if (refNode.prev != null) {\n        refNode.prev.next = node;\n      }\n      refNode.prev = node;\n      if (refNode === this.head) {\n        this.head = node;\n      }\n    } else if (this.tail != null) {\n      this.tail.next = node;\n      node.prev = this.tail;\n      this.tail = node;\n    } else {\n      node.prev = null;\n      this.head = this.tail = node;\n    }\n    this.length += 1;\n  }\n\n  public offset(target: T): number {\n    let index = 0;\n    let cur = this.head;\n    while (cur != null) {\n      if (cur === target) {\n        return index;\n      }\n      index += cur.length();\n      cur = cur.next as T;\n    }\n    return -1;\n  }\n\n  public remove(node: T): void {\n    if (!this.contains(node)) {\n      return;\n    }\n    if (node.prev != null) {\n      node.prev.next = node.next;\n    }\n    if (node.next != null) {\n      node.next.prev = node.prev;\n    }\n    if (node === this.head) {\n      this.head = node.next as T;\n    }\n    if (node === this.tail) {\n      this.tail = node.prev as T;\n    }\n    this.length -= 1;\n  }\n\n  public iterator(curNode: T | null = this.head): () => T | null {\n    // TODO use yield when we can\n    return (): T | null => {\n      const ret = curNode;\n      if (curNode != null) {\n        curNode = curNode.next as T;\n      }\n      return ret;\n    };\n  }\n\n  public find(index: number, inclusive = false): [T | null, number] {\n    const next = this.iterator();\n    let cur = next();\n    while (cur) {\n      const length = cur.length();\n      if (\n        index < length ||\n        (inclusive &&\n          index === length &&\n          (cur.next == null || cur.next.length() !== 0))\n      ) {\n        return [cur, index];\n      }\n      index -= length;\n      cur = next();\n    }\n    return [null, 0];\n  }\n\n  public forEach(callback: (cur: T) => void): void {\n    const next = this.iterator();\n    let cur = next();\n    while (cur) {\n      callback(cur);\n      cur = next();\n    }\n  }\n\n  public forEachAt(\n    index: number,\n    length: number,\n    callback: (cur: T, offset: number, length: number) => void,\n  ): void {\n    if (length <= 0) {\n      return;\n    }\n    const [startNode, offset] = this.find(index);\n    let curIndex = index - offset;\n    const next = this.iterator(startNode);\n    let cur = next();\n    while (cur && curIndex < index + length) {\n      const curLength = cur.length();\n      if (index > curIndex) {\n        callback(\n          cur,\n          index - curIndex,\n          Math.min(length, curIndex + curLength - index),\n        );\n      } else {\n        callback(cur, 0, Math.min(curLength, index + length - curIndex));\n      }\n      curIndex += curLength;\n      cur = next();\n    }\n  }\n\n  public map(callback: (cur: T) => any): any[] {\n    return this.reduce((memo: T[], cur: T) => {\n      memo.push(callback(cur));\n      return memo;\n    }, []);\n  }\n\n  public reduce<M>(callback: (memo: M, cur: T) => M, memo: M): M {\n    const next = this.iterator();\n    let cur = next();\n    while (cur) {\n      memo = callback(memo, cur);\n      cur = next();\n    }\n    return memo;\n  }\n}\n\nexport default LinkedList;\n", "import LinkedList from '../../collection/linked-list.js';\nimport ParchmentError from '../../error.js';\nimport Scope from '../../scope.js';\nimport type { Blot, BlotConstructor, Parent, Root } from './blot.js';\nimport ShadowBlot from './shadow.js';\n\nfunction makeAttachedBlot(node: Node, scroll: Root): Blot {\n  const found = scroll.find(node);\n  if (found) return found;\n  try {\n    return scroll.create(node);\n  } catch (e) {\n    const blot = scroll.create(Scope.INLINE);\n    Array.from(node.childNodes).forEach((child: Node) => {\n      blot.domNode.appendChild(child);\n    });\n    if (node.parentNode) {\n      node.parentNode.replaceChild(blot.domNode, node);\n    }\n    blot.attach();\n    return blot;\n  }\n}\n\nclass ParentBlot extends ShadowBlot implements Parent {\n  /**\n   * Whitelist array of Blots that can be direct children.\n   */\n  public static allowedChildren?: BlotConstructor[];\n\n  /**\n   * Default child blot to be inserted if this blot becomes empty.\n   */\n  public static defaultChild?: BlotConstructor;\n  public static uiClass = '';\n\n  public children!: LinkedList<Blot>;\n  public domNode!: HTMLElement;\n  public uiNode: HTMLElement | null = null;\n\n  constructor(scroll: Root, domNode: Node) {\n    super(scroll, domNode);\n    this.build();\n  }\n\n  public appendChild(other: Blot): void {\n    this.insertBefore(other);\n  }\n\n  public attach(): void {\n    super.attach();\n    this.children.forEach((child) => {\n      child.attach();\n    });\n  }\n\n  public attachUI(node: HTMLElement): void {\n    if (this.uiNode != null) {\n      this.uiNode.remove();\n    }\n    this.uiNode = node;\n    if (ParentBlot.uiClass) {\n      this.uiNode.classList.add(ParentBlot.uiClass);\n    }\n    this.uiNode.setAttribute('contenteditable', 'false');\n    this.domNode.insertBefore(this.uiNode, this.domNode.firstChild);\n  }\n\n  /**\n   * Called during construction, should fill its own children LinkedList.\n   */\n  public build(): void {\n    this.children = new LinkedList<Blot>();\n    // Need to be reversed for if DOM nodes already in order\n    Array.from(this.domNode.childNodes)\n      .filter((node: Node) => node !== this.uiNode)\n      .reverse()\n      .forEach((node: Node) => {\n        try {\n          const child = makeAttachedBlot(node, this.scroll);\n          this.insertBefore(child, this.children.head || undefined);\n        } catch (err) {\n          if (err instanceof ParchmentError) {\n            return;\n          } else {\n            throw err;\n          }\n        }\n      });\n  }\n\n  public deleteAt(index: number, length: number): void {\n    if (index === 0 && length === this.length()) {\n      return this.remove();\n    }\n    this.children.forEachAt(index, length, (child, offset, childLength) => {\n      child.deleteAt(offset, childLength);\n    });\n  }\n\n  public descendant<T extends Blot>(\n    criteria: new (...args: any[]) => T,\n    index: number,\n  ): [T | null, number];\n  public descendant(\n    criteria: (blot: Blot) => boolean,\n    index: number,\n  ): [Blot | null, number];\n  public descendant(criteria: any, index = 0): [Blot | null, number] {\n    const [child, offset] = this.children.find(index);\n    if (\n      (criteria.blotName == null && criteria(child)) ||\n      (criteria.blotName != null && child instanceof criteria)\n    ) {\n      return [child as any, offset];\n    } else if (child instanceof ParentBlot) {\n      return child.descendant(criteria, offset);\n    } else {\n      return [null, -1];\n    }\n  }\n\n  public descendants<T extends Blot>(\n    criteria: new (...args: any[]) => T,\n    index?: number,\n    length?: number,\n  ): T[];\n  public descendants(\n    criteria: (blot: Blot) => boolean,\n    index?: number,\n    length?: number,\n  ): Blot[];\n  public descendants(\n    criteria: any,\n    index = 0,\n    length: number = Number.MAX_VALUE,\n  ): Blot[] {\n    let descendants: Blot[] = [];\n    let lengthLeft = length;\n    this.children.forEachAt(\n      index,\n      length,\n      (child: Blot, childIndex: number, childLength: number) => {\n        if (\n          (criteria.blotName == null && criteria(child)) ||\n          (criteria.blotName != null && child instanceof criteria)\n        ) {\n          descendants.push(child);\n        }\n        if (child instanceof ParentBlot) {\n          descendants = descendants.concat(\n            child.descendants(criteria, childIndex, lengthLeft),\n          );\n        }\n        lengthLeft -= childLength;\n      },\n    );\n    return descendants;\n  }\n\n  public detach(): void {\n    this.children.forEach((child) => {\n      child.detach();\n    });\n    super.detach();\n  }\n\n  public enforceAllowedChildren(): void {\n    let done = false;\n    this.children.forEach((child: Blot) => {\n      if (done) {\n        return;\n      }\n      const allowed = this.statics.allowedChildren.some(\n        (def: BlotConstructor) => child instanceof def,\n      );\n      if (allowed) {\n        return;\n      }\n      if (child.statics.scope === Scope.BLOCK_BLOT) {\n        if (child.next != null) {\n          this.splitAfter(child);\n        }\n        if (child.prev != null) {\n          this.splitAfter(child.prev);\n        }\n        child.parent.unwrap();\n        done = true;\n      } else if (child instanceof ParentBlot) {\n        child.unwrap();\n      } else {\n        child.remove();\n      }\n    });\n  }\n\n  public formatAt(\n    index: number,\n    length: number,\n    name: string,\n    value: any,\n  ): void {\n    this.children.forEachAt(index, length, (child, offset, childLength) => {\n      child.formatAt(offset, childLength, name, value);\n    });\n  }\n\n  public insertAt(index: number, value: string, def?: any): void {\n    const [child, offset] = this.children.find(index);\n    if (child) {\n      child.insertAt(offset, value, def);\n    } else {\n      const blot =\n        def == null\n          ? this.scroll.create('text', value)\n          : this.scroll.create(value, def);\n      this.appendChild(blot);\n    }\n  }\n\n  public insertBefore(childBlot: Blot, refBlot?: Blot | null): void {\n    if (childBlot.parent != null) {\n      childBlot.parent.children.remove(childBlot);\n    }\n    let refDomNode: Node | null = null;\n    this.children.insertBefore(childBlot, refBlot || null);\n    childBlot.parent = this;\n    if (refBlot != null) {\n      refDomNode = refBlot.domNode;\n    }\n    if (\n      this.domNode.parentNode !== childBlot.domNode ||\n      this.domNode.nextSibling !== refDomNode\n    ) {\n      this.domNode.insertBefore(childBlot.domNode, refDomNode);\n    }\n    childBlot.attach();\n  }\n\n  public length(): number {\n    return this.children.reduce((memo, child) => {\n      return memo + child.length();\n    }, 0);\n  }\n\n  public moveChildren(targetParent: Parent, refNode?: Blot | null): void {\n    this.children.forEach((child) => {\n      targetParent.insertBefore(child, refNode);\n    });\n  }\n\n  public optimize(context?: { [key: string]: any }): void {\n    super.optimize(context);\n    this.enforceAllowedChildren();\n    if (this.uiNode != null && this.uiNode !== this.domNode.firstChild) {\n      this.domNode.insertBefore(this.uiNode, this.domNode.firstChild);\n    }\n    if (this.children.length === 0) {\n      if (this.statics.defaultChild != null) {\n        const child = this.scroll.create(this.statics.defaultChild.blotName);\n        this.appendChild(child);\n        // TODO double check if necessary\n        // child.optimize(context);\n      } else {\n        this.remove();\n      }\n    }\n  }\n\n  public path(index: number, inclusive = false): [Blot, number][] {\n    const [child, offset] = this.children.find(index, inclusive);\n    const position: [Blot, number][] = [[this, index]];\n    if (child instanceof ParentBlot) {\n      return position.concat(child.path(offset, inclusive));\n    } else if (child != null) {\n      position.push([child, offset]);\n    }\n    return position;\n  }\n\n  public removeChild(child: Blot): void {\n    this.children.remove(child);\n  }\n\n  public replaceWith(name: string | Blot, value?: any): Blot {\n    const replacement =\n      typeof name === 'string' ? this.scroll.create(name, value) : name;\n    if (replacement instanceof ParentBlot) {\n      this.moveChildren(replacement);\n    }\n    return super.replaceWith(replacement);\n  }\n\n  public split(index: number, force = false): Blot | null {\n    if (!force) {\n      if (index === 0) {\n        return this;\n      }\n      if (index === this.length()) {\n        return this.next;\n      }\n    }\n    const after = this.clone() as ParentBlot;\n    if (this.parent) {\n      this.parent.insertBefore(after, this.next || undefined);\n    }\n    this.children.forEachAt(index, this.length(), (child, offset, _length) => {\n      const split = child.split(offset, force);\n      if (split != null) {\n        after.appendChild(split);\n      }\n    });\n    return after;\n  }\n\n  public splitAfter(child: Blot): Parent {\n    const after = this.clone() as ParentBlot;\n    while (child.next != null) {\n      after.appendChild(child.next);\n    }\n    if (this.parent) {\n      this.parent.insertBefore(after, this.next || undefined);\n    }\n    return after;\n  }\n\n  public unwrap(): void {\n    if (this.parent) {\n      this.moveChildren(this.parent, this.next || undefined);\n    }\n    this.remove();\n  }\n\n  public update(\n    mutations: MutationRecord[],\n    _context: { [key: string]: any },\n  ): void {\n    const addedNodes: Node[] = [];\n    const removedNodes: Node[] = [];\n    mutations.forEach((mutation) => {\n      if (mutation.target === this.domNode && mutation.type === 'childList') {\n        addedNodes.push(...mutation.addedNodes);\n        removedNodes.push(...mutation.removedNodes);\n      }\n    });\n    removedNodes.forEach((node: Node) => {\n      // Check node has actually been removed\n      // One exception is Chrome does not immediately remove IFRAMEs\n      // from DOM but MutationRecord is correct in its reported removal\n      if (\n        node.parentNode != null &&\n        // @ts-expect-error Fix me later\n        node.tagName !== 'IFRAME' &&\n        document.body.compareDocumentPosition(node) &\n          Node.DOCUMENT_POSITION_CONTAINED_BY\n      ) {\n        return;\n      }\n      const blot = this.scroll.find(node);\n      if (blot == null) {\n        return;\n      }\n      if (\n        blot.domNode.parentNode == null ||\n        blot.domNode.parentNode === this.domNode\n      ) {\n        blot.detach();\n      }\n    });\n    addedNodes\n      .filter((node) => {\n        return node.parentNode === this.domNode && node !== this.uiNode;\n      })\n      .sort((a, b) => {\n        if (a === b) {\n          return 0;\n        }\n        if (a.compareDocumentPosition(b) & Node.DOCUMENT_POSITION_FOLLOWING) {\n          return 1;\n        }\n        return -1;\n      })\n      .forEach((node) => {\n        let refBlot: Blot | null = null;\n        if (node.nextSibling != null) {\n          refBlot = this.scroll.find(node.nextSibling);\n        }\n        const blot = makeAttachedBlot(node, this.scroll);\n        if (blot.next !== refBlot || blot.next == null) {\n          if (blot.parent != null) {\n            blot.parent.removeChild(this);\n          }\n          this.insertBefore(blot, refBlot || undefined);\n        }\n      });\n    this.enforceAllowedChildren();\n  }\n}\n\nexport default ParentBlot;\n", "import Attributor from '../attributor/attributor.js';\nimport AttributorStore from '../attributor/store.js';\nimport Scope from '../scope.js';\nimport type {\n  Blot,\n  BlotConstructor,\n  Formattable,\n  Parent,\n  Root,\n} from './abstract/blot.js';\nimport LeafBlot from './abstract/leaf.js';\nimport ParentBlot from './abstract/parent.js';\n\n// Shallow object comparison\nfunction isEqual(\n  obj1: Record<string, unknown>,\n  obj2: Record<string, unknown>,\n): boolean {\n  if (Object.keys(obj1).length !== Object.keys(obj2).length) {\n    return false;\n  }\n  for (const prop in obj1) {\n    if (obj1[prop] !== obj2[prop]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nclass InlineBlot extends ParentBlot implements Formattable {\n  public static allowedChildren: BlotConstructor[] = [InlineBlot, LeafBlot];\n  public static blotName = 'inline';\n  public static scope = Scope.INLINE_BLOT;\n  public static tagName: string | string[] = 'SPAN';\n\n  static create(value?: unknown) {\n    return super.create(value) as HTMLElement;\n  }\n\n  public static formats(domNode: HTMLElement, scroll: Root): any {\n    const match = scroll.query(InlineBlot.blotName);\n    if (\n      match != null &&\n      domNode.tagName === (match as BlotConstructor).tagName\n    ) {\n      return undefined;\n    } else if (typeof this.tagName === 'string') {\n      return true;\n    } else if (Array.isArray(this.tagName)) {\n      return domNode.tagName.toLowerCase();\n    }\n    return undefined;\n  }\n\n  protected attributes: AttributorStore;\n\n  constructor(scroll: Root, domNode: Node) {\n    super(scroll, domNode);\n    this.attributes = new AttributorStore(this.domNode);\n  }\n\n  public format(name: string, value: any): void {\n    if (name === this.statics.blotName && !value) {\n      this.children.forEach((child) => {\n        if (!(child instanceof InlineBlot)) {\n          child = child.wrap(InlineBlot.blotName, true);\n        }\n        this.attributes.copy(child as InlineBlot);\n      });\n      this.unwrap();\n    } else {\n      const format = this.scroll.query(name, Scope.INLINE);\n      if (format == null) {\n        return;\n      }\n      if (format instanceof Attributor) {\n        this.attributes.attribute(format, value);\n      } else if (\n        value &&\n        (name !== this.statics.blotName || this.formats()[name] !== value)\n      ) {\n        this.replaceWith(name, value);\n      }\n    }\n  }\n\n  public formats(): { [index: string]: any } {\n    const formats = this.attributes.values();\n    const format = this.statics.formats(this.domNode, this.scroll);\n    if (format != null) {\n      formats[this.statics.blotName] = format;\n    }\n    return formats;\n  }\n\n  public formatAt(\n    index: number,\n    length: number,\n    name: string,\n    value: any,\n  ): void {\n    if (\n      this.formats()[name] != null ||\n      this.scroll.query(name, Scope.ATTRIBUTE)\n    ) {\n      const blot = this.isolate(index, length) as InlineBlot;\n      blot.format(name, value);\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  public optimize(context: { [key: string]: any }): void {\n    super.optimize(context);\n    const formats = this.formats();\n    if (Object.keys(formats).length === 0) {\n      return this.unwrap(); // unformatted span\n    }\n    const next = this.next;\n    if (\n      next instanceof InlineBlot &&\n      next.prev === this &&\n      isEqual(formats, next.formats())\n    ) {\n      next.moveChildren(this);\n      next.remove();\n    }\n  }\n\n  public replaceWith(name: string | Blot, value?: any): Blot {\n    const replacement = super.replaceWith(name, value) as InlineBlot;\n    this.attributes.copy(replacement);\n    return replacement;\n  }\n\n  public update(\n    mutations: MutationRecord[],\n    context: { [key: string]: any },\n  ): void {\n    super.update(mutations, context);\n    const attributeChanged = mutations.some(\n      (mutation) =>\n        mutation.target === this.domNode && mutation.type === 'attributes',\n    );\n    if (attributeChanged) {\n      this.attributes.build();\n    }\n  }\n\n  public wrap(name: string | Parent, value?: any): Parent {\n    const wrapper = super.wrap(name, value);\n    if (wrapper instanceof InlineBlot) {\n      this.attributes.move(wrapper);\n    }\n    return wrapper;\n  }\n}\n\nexport default InlineBlot;\n", "import Attributor from '../attributor/attributor.js';\nimport AttributorStore from '../attributor/store.js';\nimport Scope from '../scope.js';\nimport type {\n  Blot,\n  BlotConstructor,\n  Formattable,\n  Root,\n} from './abstract/blot.js';\nimport LeafBlot from './abstract/leaf.js';\nimport ParentBlot from './abstract/parent.js';\nimport InlineBlot from './inline.js';\n\nclass BlockBlot extends ParentBlot implements Formattable {\n  public static blotName = 'block';\n  public static scope = Scope.BLOCK_BLOT;\n  public static tagName: string | string[] = 'P';\n  public static allowedChildren: BlotConstructor[] = [\n    InlineBlot,\n    BlockBlot,\n    LeafBlot,\n  ];\n\n  static create(value?: unknown) {\n    return super.create(value) as HTMLElement;\n  }\n\n  public static formats(domNode: HTMLElement, scroll: Root): any {\n    const match = scroll.query(BlockBlot.blotName);\n    if (\n      match != null &&\n      domNode.tagName === (match as BlotConstructor).tagName\n    ) {\n      return undefined;\n    } else if (typeof this.tagName === 'string') {\n      return true;\n    } else if (Array.isArray(this.tagName)) {\n      return domNode.tagName.toLowerCase();\n    }\n  }\n\n  protected attributes: AttributorStore;\n\n  constructor(scroll: Root, domNode: Node) {\n    super(scroll, domNode);\n    this.attributes = new AttributorStore(this.domNode);\n  }\n\n  public format(name: string, value: any): void {\n    const format = this.scroll.query(name, Scope.BLOCK);\n    if (format == null) {\n      return;\n    } else if (format instanceof Attributor) {\n      this.attributes.attribute(format, value);\n    } else if (name === this.statics.blotName && !value) {\n      this.replaceWith(BlockBlot.blotName);\n    } else if (\n      value &&\n      (name !== this.statics.blotName || this.formats()[name] !== value)\n    ) {\n      this.replaceWith(name, value);\n    }\n  }\n\n  public formats(): { [index: string]: any } {\n    const formats = this.attributes.values();\n    const format = this.statics.formats(this.domNode, this.scroll);\n    if (format != null) {\n      formats[this.statics.blotName] = format;\n    }\n    return formats;\n  }\n\n  public formatAt(\n    index: number,\n    length: number,\n    name: string,\n    value: any,\n  ): void {\n    if (this.scroll.query(name, Scope.BLOCK) != null) {\n      this.format(name, value);\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  public insertAt(index: number, value: string, def?: any): void {\n    if (def == null || this.scroll.query(value, Scope.INLINE) != null) {\n      // Insert text or inline\n      super.insertAt(index, value, def);\n    } else {\n      const after = this.split(index);\n      if (after != null) {\n        const blot = this.scroll.create(value, def);\n        after.parent.insertBefore(blot, after);\n      } else {\n        throw new Error('Attempt to insertAt after block boundaries');\n      }\n    }\n  }\n\n  public replaceWith(name: string | Blot, value?: any): Blot {\n    const replacement = super.replaceWith(name, value) as BlockBlot;\n    this.attributes.copy(replacement);\n    return replacement;\n  }\n\n  public update(\n    mutations: MutationRecord[],\n    context: { [key: string]: any },\n  ): void {\n    super.update(mutations, context);\n    const attributeChanged = mutations.some(\n      (mutation) =>\n        mutation.target === this.domNode && mutation.type === 'attributes',\n    );\n    if (attributeChanged) {\n      this.attributes.build();\n    }\n  }\n}\n\nexport default BlockBlot;\n", "import Scope from '../../scope.js';\nimport BlockBlot from '../block.js';\nimport ParentBlot from './parent.js';\n\nclass ContainerBlot extends ParentBlot {\n  public static blotName = 'container';\n  public static scope = Scope.BLOCK_BLOT;\n  public static tagName: string | string[];\n\n  public prev!: BlockBlot | ContainerBlot | null;\n  public next!: BlockBlot | ContainerBlot | null;\n\n  public checkMerge(): boolean {\n    return (\n      this.next !== null && this.next.statics.blotName === this.statics.blotName\n    );\n  }\n\n  public deleteAt(index: number, length: number): void {\n    super.deleteAt(index, length);\n    this.enforceAllowedChildren();\n  }\n\n  public formatAt(\n    index: number,\n    length: number,\n    name: string,\n    value: any,\n  ): void {\n    super.formatAt(index, length, name, value);\n    this.enforceAllowedChildren();\n  }\n\n  public insertAt(index: number, value: string, def?: any): void {\n    super.insertAt(index, value, def);\n    this.enforceAllowedChildren();\n  }\n\n  public optimize(context: { [key: string]: any }): void {\n    super.optimize(context);\n    if (this.children.length > 0 && this.next != null && this.checkMerge()) {\n      this.next.moveChildren(this);\n      this.next.remove();\n    }\n  }\n}\n\nexport default ContainerBlot;\n", "import type { Formattable, Root } from './abstract/blot.js';\nimport LeafBlot from './abstract/leaf.js';\n\nclass EmbedBlot extends LeafBlot implements Formattable {\n  public static formats(_domNode: HTMLElement, _scroll: Root): any {\n    return undefined;\n  }\n\n  public format(name: string, value: any): void {\n    // super.formatAt wraps, which is what we want in general,\n    // but this allows subclasses to overwrite for formats\n    // that just apply to particular embeds\n    super.formatAt(0, this.length(), name, value);\n  }\n\n  public formatAt(\n    index: number,\n    length: number,\n    name: string,\n    value: any,\n  ): void {\n    if (index === 0 && length === this.length()) {\n      this.format(name, value);\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  public formats(): { [index: string]: any } {\n    return this.statics.formats(this.domNode, this.scroll);\n  }\n}\n\nexport default EmbedBlot;\n", "import Registry, { type RegistryDefinition } from '../registry.js';\nimport Scope from '../scope.js';\nimport type { Blot, BlotConstructor, Root } from './abstract/blot.js';\nimport ContainerBlot from './abstract/container.js';\nimport ParentBlot from './abstract/parent.js';\nimport BlockBlot from './block.js';\n\nconst OBSERVER_CONFIG = {\n  attributes: true,\n  characterData: true,\n  characterDataOldValue: true,\n  childList: true,\n  subtree: true,\n};\n\nconst MAX_OPTIMIZE_ITERATIONS = 100;\n\nclass ScrollBlot extends ParentBlot implements Root {\n  public static blotName = 'scroll';\n  public static defaultChild = BlockBlot;\n  public static allowedChildren: BlotConstructor[] = [BlockBlot, ContainerBlot];\n  public static scope = Scope.BLOCK_BLOT;\n  public static tagName = 'DIV';\n\n  public observer: MutationObserver;\n\n  constructor(\n    public registry: Registry,\n    node: HTMLDivElement,\n  ) {\n    // @ts-expect-error scroll is the root with no parent\n    super(null, node);\n    this.scroll = this;\n    this.build();\n    this.observer = new MutationObserver((mutations: MutationRecord[]) => {\n      this.update(mutations);\n    });\n    this.observer.observe(this.domNode, OBSERVER_CONFIG);\n    this.attach();\n  }\n\n  public create(input: Node | string | Scope, value?: any): Blot {\n    return this.registry.create(this, input, value);\n  }\n\n  public find(node: Node | null, bubble = false): Blot | null {\n    const blot = this.registry.find(node, bubble);\n    if (!blot) {\n      return null;\n    }\n    if (blot.scroll === this) {\n      return blot;\n    }\n    return bubble ? this.find(blot.scroll.domNode.parentNode, true) : null;\n  }\n\n  public query(\n    query: string | Node | Scope,\n    scope: Scope = Scope.ANY,\n  ): RegistryDefinition | null {\n    return this.registry.query(query, scope);\n  }\n\n  public register(...definitions: RegistryDefinition[]) {\n    return this.registry.register(...definitions);\n  }\n\n  public build(): void {\n    if (this.scroll == null) {\n      return;\n    }\n    super.build();\n  }\n\n  public detach(): void {\n    super.detach();\n    this.observer.disconnect();\n  }\n\n  public deleteAt(index: number, length: number): void {\n    this.update();\n    if (index === 0 && length === this.length()) {\n      this.children.forEach((child) => {\n        child.remove();\n      });\n    } else {\n      super.deleteAt(index, length);\n    }\n  }\n\n  public formatAt(\n    index: number,\n    length: number,\n    name: string,\n    value: any,\n  ): void {\n    this.update();\n    super.formatAt(index, length, name, value);\n  }\n\n  public insertAt(index: number, value: string, def?: any): void {\n    this.update();\n    super.insertAt(index, value, def);\n  }\n\n  public optimize(context?: { [key: string]: any }): void;\n  public optimize(\n    mutations: MutationRecord[],\n    context: { [key: string]: any },\n  ): void;\n  public optimize(mutations: any = [], context: any = {}): void {\n    super.optimize(context);\n    const mutationsMap = context.mutationsMap || new WeakMap();\n    // We must modify mutations directly, cannot make copy and then modify\n    let records = Array.from(this.observer.takeRecords());\n    // Array.push currently seems to be implemented by a non-tail recursive function\n    // so we cannot just mutations.push.apply(mutations, this.observer.takeRecords());\n    while (records.length > 0) {\n      mutations.push(records.pop());\n    }\n    const mark = (blot: Blot | null, markParent = true): void => {\n      if (blot == null || blot === this) {\n        return;\n      }\n      if (blot.domNode.parentNode == null) {\n        return;\n      }\n      if (!mutationsMap.has(blot.domNode)) {\n        mutationsMap.set(blot.domNode, []);\n      }\n      if (markParent) {\n        mark(blot.parent);\n      }\n    };\n    const optimize = (blot: Blot): void => {\n      // Post-order traversal\n      if (!mutationsMap.has(blot.domNode)) {\n        return;\n      }\n      if (blot instanceof ParentBlot) {\n        blot.children.forEach(optimize);\n      }\n      mutationsMap.delete(blot.domNode);\n      blot.optimize(context);\n    };\n    let remaining = mutations;\n    for (let i = 0; remaining.length > 0; i += 1) {\n      if (i >= MAX_OPTIMIZE_ITERATIONS) {\n        throw new Error('[Parchment] Maximum optimize iterations reached');\n      }\n      remaining.forEach((mutation: MutationRecord) => {\n        const blot = this.find(mutation.target, true);\n        if (blot == null) {\n          return;\n        }\n        if (blot.domNode === mutation.target) {\n          if (mutation.type === 'childList') {\n            mark(this.find(mutation.previousSibling, false));\n            Array.from(mutation.addedNodes).forEach((node: Node) => {\n              const child = this.find(node, false);\n              mark(child, false);\n              if (child instanceof ParentBlot) {\n                child.children.forEach((grandChild: Blot) => {\n                  mark(grandChild, false);\n                });\n              }\n            });\n          } else if (mutation.type === 'attributes') {\n            mark(blot.prev);\n          }\n        }\n        mark(blot);\n      });\n      this.children.forEach(optimize);\n      remaining = Array.from(this.observer.takeRecords());\n      records = remaining.slice();\n      while (records.length > 0) {\n        mutations.push(records.pop());\n      }\n    }\n  }\n\n  public update(\n    mutations?: MutationRecord[],\n    context: { [key: string]: any } = {},\n  ): void {\n    mutations = mutations || this.observer.takeRecords();\n    const mutationsMap = new WeakMap();\n    mutations\n      .map((mutation: MutationRecord) => {\n        const blot = this.find(mutation.target, true);\n        if (blot == null) {\n          return null;\n        }\n        if (mutationsMap.has(blot.domNode)) {\n          mutationsMap.get(blot.domNode).push(mutation);\n          return null;\n        } else {\n          mutationsMap.set(blot.domNode, [mutation]);\n          return blot;\n        }\n      })\n      .forEach((blot: Blot | null) => {\n        if (blot != null && blot !== this && mutationsMap.has(blot.domNode)) {\n          blot.update(mutationsMap.get(blot.domNode) || [], context);\n        }\n      });\n    context.mutationsMap = mutationsMap;\n    if (mutationsMap.has(this.domNode)) {\n      super.update(mutationsMap.get(this.domNode), context);\n    }\n    this.optimize(mutations, context);\n  }\n}\n\nexport default ScrollBlot;\n", "import Scope from '../scope.js';\nimport type { Blot, Leaf, Root } from './abstract/blot.js';\nimport LeafBlot from './abstract/leaf.js';\n\nclass TextBlot extends LeafBlot implements Leaf {\n  public static readonly blotName = 'text';\n  public static scope = Scope.INLINE_BLOT;\n\n  public static create(value: string): Text {\n    return document.createTextNode(value);\n  }\n\n  public static value(domNode: Text): string {\n    return domNode.data;\n  }\n\n  public domNode!: Text;\n  protected text: string;\n\n  constructor(scroll: Root, node: Node) {\n    super(scroll, node);\n    this.text = this.statics.value(this.domNode);\n  }\n\n  public deleteAt(index: number, length: number): void {\n    this.domNode.data = this.text =\n      this.text.slice(0, index) + this.text.slice(index + length);\n  }\n\n  public index(node: Node, offset: number): number {\n    if (this.domNode === node) {\n      return offset;\n    }\n    return -1;\n  }\n\n  public insertAt(index: number, value: string, def?: any): void {\n    if (def == null) {\n      this.text = this.text.slice(0, index) + value + this.text.slice(index);\n      this.domNode.data = this.text;\n    } else {\n      super.insertAt(index, value, def);\n    }\n  }\n\n  public length(): number {\n    return this.text.length;\n  }\n\n  public optimize(context: { [key: string]: any }): void {\n    super.optimize(context);\n    this.text = this.statics.value(this.domNode);\n    if (this.text.length === 0) {\n      this.remove();\n    } else if (this.next instanceof TextBlot && this.next.prev === this) {\n      this.insertAt(this.length(), (this.next as TextBlot).value());\n      this.next.remove();\n    }\n  }\n\n  public position(index: number, _inclusive = false): [Node, number] {\n    return [this.domNode, index];\n  }\n\n  public split(index: number, force = false): Blot | null {\n    if (!force) {\n      if (index === 0) {\n        return this;\n      }\n      if (index === this.length()) {\n        return this.next;\n      }\n    }\n    const after = this.scroll.create(this.domNode.splitText(index));\n    this.parent.insertBefore(after, this.next || undefined);\n    this.text = this.statics.value(this.domNode);\n    return after;\n  }\n\n  public update(\n    mutations: MutationRecord[],\n    _context: { [key: string]: any },\n  ): void {\n    if (\n      mutations.some((mutation) => {\n        return (\n          mutation.type === 'characterData' && mutation.target === this.domNode\n        );\n      })\n    ) {\n      this.text = this.statics.value(this.domNode);\n    }\n  }\n\n  public value(): string {\n    return this.text;\n  }\n}\n\nexport default TextBlot;\n", "import { merge } from 'lodash-es';\nimport * as Parchment from 'parchment';\nimport type { Op } from 'quill-delta';\nimport Delta from 'quill-delta';\nimport type { BlockEmbed } from '../blots/block.js';\nimport type Block from '../blots/block.js';\nimport type Scroll from '../blots/scroll.js';\nimport type Clipboard from '../modules/clipboard.js';\nimport type History from '../modules/history.js';\nimport type Keyboard from '../modules/keyboard.js';\nimport type Uploader from '../modules/uploader.js';\nimport Editor from './editor.js';\nimport Emitter from './emitter.js';\nimport type { EmitterSource } from './emitter.js';\nimport instances from './instances.js';\nimport logger from './logger.js';\nimport type { DebugLevel } from './logger.js';\nimport Module from './module.js';\nimport Selection, { Range } from './selection.js';\nimport type { Bounds } from './selection.js';\nimport Composition from './composition.js';\nimport Theme from './theme.js';\nimport type { ThemeConstructor } from './theme.js';\nimport scrollRectIntoView from './utils/scrollRectIntoView.js';\nimport type { Rect } from './utils/scrollRectIntoView.js';\nimport createRegistryWithFormats from './utils/createRegistryWithFormats.js';\n\nconst debug = logger('quill');\n\nconst globalRegistry = new Parchment.Registry();\nParchment.ParentBlot.uiClass = 'ql-ui';\n\n/**\n * Options for initializing a Quill instance\n */\nexport interface QuillOptions {\n  theme?: string;\n  debug?: DebugLevel | boolean;\n  registry?: Parchment.Registry;\n  /**\n   * Whether to disable the editing\n   * @default false\n   */\n  readOnly?: boolean;\n\n  /**\n   * Placeholder text to display when the editor is empty\n   * @default \"\"\n   */\n  placeholder?: string;\n  bounds?: HTMLElement | string | null;\n  modules?: Record<string, unknown>;\n\n  /**\n   * A list of formats that are recognized and can exist within the editor contents.\n   * `null` means all formats are allowed.\n   * @default null\n   */\n  formats?: string[] | null;\n}\n\n/**\n * Similar to QuillOptions, but with all properties expanded to their default values,\n * and all selectors resolved to HTMLElements.\n */\nexport interface ExpandedQuillOptions\n  extends Omit<QuillOptions, 'theme' | 'formats'> {\n  theme: ThemeConstructor;\n  registry: Parchment.Registry;\n  container: HTMLElement;\n  modules: Record<string, unknown>;\n  bounds?: HTMLElement | null;\n  readOnly: boolean;\n}\n\nclass Quill {\n  static DEFAULTS = {\n    bounds: null,\n    modules: {\n      clipboard: true,\n      keyboard: true,\n      history: true,\n      uploader: true,\n    },\n    placeholder: '',\n    readOnly: false,\n    registry: globalRegistry,\n    theme: 'default',\n  } satisfies Partial<QuillOptions>;\n  static events = Emitter.events;\n  static sources = Emitter.sources;\n  static version = typeof QUILL_VERSION === 'undefined' ? 'dev' : QUILL_VERSION;\n\n  static imports: Record<string, unknown> = {\n    delta: Delta,\n    parchment: Parchment,\n    'core/module': Module,\n    'core/theme': Theme,\n  };\n\n  static debug(limit: DebugLevel | boolean) {\n    if (limit === true) {\n      limit = 'log';\n    }\n    logger.level(limit);\n  }\n\n  static find(node: Node, bubble = false) {\n    return instances.get(node) || globalRegistry.find(node, bubble);\n  }\n\n  static import(name: 'core/module'): typeof Module;\n  static import(name: `themes/${string}`): typeof Theme;\n  static import(name: 'parchment'): typeof Parchment;\n  static import(name: 'delta'): typeof Delta;\n  static import(name: string): unknown;\n  static import(name: string) {\n    if (this.imports[name] == null) {\n      debug.error(`Cannot import ${name}. Are you sure it was registered?`);\n    }\n    return this.imports[name];\n  }\n\n  static register(\n    targets: Record<\n      string,\n      | Parchment.RegistryDefinition\n      | Record<string, unknown> // any objects\n      | Theme\n      | Module\n      | Function // ES5 constructors\n    >,\n    overwrite?: boolean,\n  ): void;\n  static register(\n    target: Parchment.RegistryDefinition,\n    overwrite?: boolean,\n  ): void;\n  static register(path: string, target: any, overwrite?: boolean): void;\n  static register(...args: any[]): void {\n    if (typeof args[0] !== 'string') {\n      const target = args[0];\n      const overwrite = !!args[1];\n\n      const name = 'attrName' in target ? target.attrName : target.blotName;\n      if (typeof name === 'string') {\n        // Shortcut for formats:\n        // register(Blot | Attributor, overwrite)\n        this.register(`formats/${name}`, target, overwrite);\n      } else {\n        Object.keys(target).forEach((key) => {\n          this.register(key, target[key], overwrite);\n        });\n      }\n    } else {\n      const path = args[0];\n      const target = args[1];\n      const overwrite = !!args[2];\n\n      if (this.imports[path] != null && !overwrite) {\n        debug.warn(`Overwriting ${path} with`, target);\n      }\n      this.imports[path] = target;\n      if (\n        (path.startsWith('blots/') || path.startsWith('formats/')) &&\n        target &&\n        typeof target !== 'boolean' &&\n        target.blotName !== 'abstract'\n      ) {\n        globalRegistry.register(target);\n      }\n      if (typeof target.register === 'function') {\n        target.register(globalRegistry);\n      }\n    }\n  }\n\n  container: HTMLElement;\n  root: HTMLDivElement;\n  scroll: Scroll;\n  emitter: Emitter;\n  protected allowReadOnlyEdits: boolean;\n  editor: Editor;\n  composition: Composition;\n  selection: Selection;\n\n  theme: Theme;\n  keyboard: Keyboard;\n  clipboard: Clipboard;\n  history: History;\n  uploader: Uploader;\n\n  options: ExpandedQuillOptions;\n\n  constructor(container: HTMLElement | string, options: QuillOptions = {}) {\n    this.options = expandConfig(container, options);\n    this.container = this.options.container;\n    if (this.container == null) {\n      debug.error('Invalid Quill container', container);\n      return;\n    }\n    if (this.options.debug) {\n      Quill.debug(this.options.debug);\n    }\n    const html = this.container.innerHTML.trim();\n    this.container.classList.add('ql-container');\n    this.container.innerHTML = '';\n    instances.set(this.container, this);\n    this.root = this.addContainer('ql-editor');\n    this.root.classList.add('ql-blank');\n    this.emitter = new Emitter();\n    const scrollBlotName = Parchment.ScrollBlot.blotName;\n    const ScrollBlot = this.options.registry.query(scrollBlotName);\n    if (!ScrollBlot || !('blotName' in ScrollBlot)) {\n      throw new Error(\n        `Cannot initialize Quill without \"${scrollBlotName}\" blot`,\n      );\n    }\n    this.scroll = new ScrollBlot(this.options.registry, this.root, {\n      emitter: this.emitter,\n    }) as Scroll;\n    this.editor = new Editor(this.scroll);\n    this.selection = new Selection(this.scroll, this.emitter);\n    this.composition = new Composition(this.scroll, this.emitter);\n    this.theme = new this.options.theme(this, this.options); // eslint-disable-line new-cap\n    this.keyboard = this.theme.addModule('keyboard');\n    this.clipboard = this.theme.addModule('clipboard');\n    this.history = this.theme.addModule('history');\n    this.uploader = this.theme.addModule('uploader');\n    this.theme.addModule('input');\n    this.theme.addModule('uiNode');\n    this.theme.init();\n    this.emitter.on(Emitter.events.EDITOR_CHANGE, (type) => {\n      if (type === Emitter.events.TEXT_CHANGE) {\n        this.root.classList.toggle('ql-blank', this.editor.isBlank());\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_UPDATE, (source, mutations) => {\n      const oldRange = this.selection.lastRange;\n      const [newRange] = this.selection.getRange();\n      const selectionInfo =\n        oldRange && newRange ? { oldRange, newRange } : undefined;\n      modify.call(\n        this,\n        () => this.editor.update(null, mutations, selectionInfo),\n        source,\n      );\n    });\n    this.emitter.on(Emitter.events.SCROLL_EMBED_UPDATE, (blot, delta) => {\n      const oldRange = this.selection.lastRange;\n      const [newRange] = this.selection.getRange();\n      const selectionInfo =\n        oldRange && newRange ? { oldRange, newRange } : undefined;\n      modify.call(\n        this,\n        () => {\n          const change = new Delta()\n            .retain(blot.offset(this))\n            .retain({ [blot.statics.blotName]: delta });\n          return this.editor.update(change, [], selectionInfo);\n        },\n        Quill.sources.USER,\n      );\n    });\n    if (html) {\n      const contents = this.clipboard.convert({\n        html: `${html}<p><br></p>`,\n        text: '\\n',\n      });\n      this.setContents(contents);\n    }\n    this.history.clear();\n    if (this.options.placeholder) {\n      this.root.setAttribute('data-placeholder', this.options.placeholder);\n    }\n    if (this.options.readOnly) {\n      this.disable();\n    }\n    this.allowReadOnlyEdits = false;\n  }\n\n  addContainer(container: string, refNode?: Node | null): HTMLDivElement;\n  addContainer(container: HTMLElement, refNode?: Node | null): HTMLElement;\n  addContainer(\n    container: string | HTMLElement,\n    refNode: Node | null = null,\n  ): HTMLDivElement | HTMLElement {\n    if (typeof container === 'string') {\n      const className = container;\n      container = document.createElement('div');\n      container.classList.add(className);\n    }\n    this.container.insertBefore(container, refNode);\n    return container;\n  }\n\n  blur() {\n    this.selection.setRange(null);\n  }\n\n  deleteText(range: Range, source?: EmitterSource): Delta;\n  deleteText(index: number, length: number, source?: EmitterSource): Delta;\n  deleteText(\n    index: number | Range,\n    length?: number | EmitterSource,\n    source?: EmitterSource,\n  ): Delta {\n    // @ts-expect-error\n    [index, length, , source] = overload(index, length, source);\n    return modify.call(\n      this,\n      () => {\n        return this.editor.deleteText(index, length);\n      },\n      source,\n      index,\n      -1 * length,\n    );\n  }\n\n  disable() {\n    this.enable(false);\n  }\n\n  editReadOnly<T>(modifier: () => T): T {\n    this.allowReadOnlyEdits = true;\n    const value = modifier();\n    this.allowReadOnlyEdits = false;\n    return value;\n  }\n\n  enable(enabled = true) {\n    this.scroll.enable(enabled);\n    this.container.classList.toggle('ql-disabled', !enabled);\n  }\n\n  focus(options: { preventScroll?: boolean } = {}) {\n    this.selection.focus();\n    if (!options.preventScroll) {\n      this.scrollSelectionIntoView();\n    }\n  }\n\n  format(\n    name: string,\n    value: unknown,\n    source: EmitterSource = Emitter.sources.API,\n  ): Delta {\n    return modify.call(\n      this,\n      () => {\n        const range = this.getSelection(true);\n        let change = new Delta();\n        if (range == null) return change;\n        if (this.scroll.query(name, Parchment.Scope.BLOCK)) {\n          change = this.editor.formatLine(range.index, range.length, {\n            [name]: value,\n          });\n        } else if (range.length === 0) {\n          this.selection.format(name, value);\n          return change;\n        } else {\n          change = this.editor.formatText(range.index, range.length, {\n            [name]: value,\n          });\n        }\n        this.setSelection(range, Emitter.sources.SILENT);\n        return change;\n      },\n      source,\n    );\n  }\n\n  formatLine(\n    index: number,\n    length: number,\n    formats: Record<string, unknown>,\n    source?: EmitterSource,\n  ): Delta;\n  formatLine(\n    index: number,\n    length: number,\n    name: string,\n    value?: unknown,\n    source?: EmitterSource,\n  ): Delta;\n  formatLine(\n    index: number,\n    length: number,\n    name: string | Record<string, unknown>,\n    value?: unknown | EmitterSource,\n    source?: EmitterSource,\n  ): Delta {\n    let formats: Record<string, unknown>;\n    // eslint-disable-next-line prefer-const\n    [index, length, formats, source] = overload(\n      index,\n      length,\n      // @ts-expect-error\n      name,\n      value,\n      source,\n    );\n    return modify.call(\n      this,\n      () => {\n        return this.editor.formatLine(index, length, formats);\n      },\n      source,\n      index,\n      0,\n    );\n  }\n\n  formatText(\n    range: Range,\n    name: string,\n    value: unknown,\n    source?: EmitterSource,\n  ): Delta;\n  formatText(\n    index: number,\n    length: number,\n    name: string,\n    value: unknown,\n    source?: EmitterSource,\n  ): Delta;\n  formatText(\n    index: number,\n    length: number,\n    formats: Record<string, unknown>,\n    source?: EmitterSource,\n  ): Delta;\n  formatText(\n    index: number | Range,\n    length: number | string,\n    name: string | unknown,\n    value?: unknown | EmitterSource,\n    source?: EmitterSource,\n  ): Delta {\n    let formats: Record<string, unknown>;\n    // eslint-disable-next-line prefer-const\n    [index, length, formats, source] = overload(\n      // @ts-expect-error\n      index,\n      length,\n      name,\n      value,\n      source,\n    );\n    return modify.call(\n      this,\n      () => {\n        return this.editor.formatText(index, length, formats);\n      },\n      source,\n      index,\n      0,\n    );\n  }\n\n  getBounds(index: number | Range, length = 0): Bounds | null {\n    let bounds: Bounds | null = null;\n    if (typeof index === 'number') {\n      bounds = this.selection.getBounds(index, length);\n    } else {\n      bounds = this.selection.getBounds(index.index, index.length);\n    }\n    if (!bounds) return null;\n    const containerBounds = this.container.getBoundingClientRect();\n    return {\n      bottom: bounds.bottom - containerBounds.top,\n      height: bounds.height,\n      left: bounds.left - containerBounds.left,\n      right: bounds.right - containerBounds.left,\n      top: bounds.top - containerBounds.top,\n      width: bounds.width,\n    };\n  }\n\n  getContents(index = 0, length = this.getLength() - index) {\n    [index, length] = overload(index, length);\n    return this.editor.getContents(index, length);\n  }\n\n  getFormat(index?: number, length?: number): { [format: string]: unknown };\n  getFormat(range?: Range): {\n    [format: string]: unknown;\n  };\n  getFormat(\n    index: Range | number = this.getSelection(true),\n    length = 0,\n  ): { [format: string]: unknown } {\n    if (typeof index === 'number') {\n      return this.editor.getFormat(index, length);\n    }\n    return this.editor.getFormat(index.index, index.length);\n  }\n\n  getIndex(blot: Parchment.Blot) {\n    return blot.offset(this.scroll);\n  }\n\n  getLength() {\n    return this.scroll.length();\n  }\n\n  getLeaf(index: number) {\n    return this.scroll.leaf(index);\n  }\n\n  getLine(index: number) {\n    return this.scroll.line(index);\n  }\n\n  getLines(range: Range): (Block | BlockEmbed)[];\n  getLines(index?: number, length?: number): (Block | BlockEmbed)[];\n  getLines(\n    index: Range | number = 0,\n    length = Number.MAX_VALUE,\n  ): (Block | BlockEmbed)[] {\n    if (typeof index !== 'number') {\n      return this.scroll.lines(index.index, index.length);\n    }\n    return this.scroll.lines(index, length);\n  }\n\n  getModule(name: string) {\n    return this.theme.modules[name];\n  }\n\n  getSelection(focus: true): Range;\n  getSelection(focus?: boolean): Range | null;\n  getSelection(focus = false): Range | null {\n    if (focus) this.focus();\n    this.update(); // Make sure we access getRange with editor in consistent state\n    return this.selection.getRange()[0];\n  }\n\n  getSemanticHTML(range: Range): string;\n  getSemanticHTML(index?: number, length?: number): string;\n  getSemanticHTML(index: Range | number = 0, length?: number) {\n    if (typeof index === 'number') {\n      length = length ?? this.getLength() - index;\n    }\n    // @ts-expect-error\n    [index, length] = overload(index, length);\n    return this.editor.getHTML(index, length);\n  }\n\n  getText(range?: Range): string;\n  getText(index?: number, length?: number): string;\n  getText(index: Range | number = 0, length?: number): string {\n    if (typeof index === 'number') {\n      length = length ?? this.getLength() - index;\n    }\n    // @ts-expect-error\n    [index, length] = overload(index, length);\n    return this.editor.getText(index, length);\n  }\n\n  hasFocus() {\n    return this.selection.hasFocus();\n  }\n\n  insertEmbed(\n    index: number,\n    embed: string,\n    value: unknown,\n    source: EmitterSource = Quill.sources.API,\n  ): Delta {\n    return modify.call(\n      this,\n      () => {\n        return this.editor.insertEmbed(index, embed, value);\n      },\n      source,\n      index,\n    );\n  }\n\n  insertText(index: number, text: string, source?: EmitterSource): Delta;\n  insertText(\n    index: number,\n    text: string,\n    formats: Record<string, unknown>,\n    source?: EmitterSource,\n  ): Delta;\n  insertText(\n    index: number,\n    text: string,\n    name: string,\n    value: unknown,\n    source?: EmitterSource,\n  ): Delta;\n  insertText(\n    index: number,\n    text: string,\n    name?: string | Record<string, unknown> | EmitterSource,\n    value?: unknown,\n    source?: EmitterSource,\n  ): Delta {\n    let formats: Record<string, unknown>;\n    // eslint-disable-next-line prefer-const\n    // @ts-expect-error\n    [index, , formats, source] = overload(index, 0, name, value, source);\n    return modify.call(\n      this,\n      () => {\n        return this.editor.insertText(index, text, formats);\n      },\n      source,\n      index,\n      text.length,\n    );\n  }\n\n  isEnabled() {\n    return this.scroll.isEnabled();\n  }\n\n  off(...args: Parameters<(typeof Emitter)['prototype']['off']>) {\n    return this.emitter.off(...args);\n  }\n\n  on(\n    event: (typeof Emitter)['events']['TEXT_CHANGE'],\n    handler: (delta: Delta, oldContent: Delta, source: EmitterSource) => void,\n  ): Emitter;\n  on(\n    event: (typeof Emitter)['events']['SELECTION_CHANGE'],\n    handler: (range: Range, oldRange: Range, source: EmitterSource) => void,\n  ): Emitter;\n  on(\n    event: (typeof Emitter)['events']['EDITOR_CHANGE'],\n    handler: (\n      ...args:\n        | [\n            (typeof Emitter)['events']['TEXT_CHANGE'],\n            Delta,\n            Delta,\n            EmitterSource,\n          ]\n        | [\n            (typeof Emitter)['events']['SELECTION_CHANGE'],\n            Range,\n            Range,\n            EmitterSource,\n          ]\n    ) => void,\n  ): Emitter;\n  on(event: string, ...args: unknown[]): Emitter;\n  on(...args: Parameters<(typeof Emitter)['prototype']['on']>): Emitter {\n    return this.emitter.on(...args);\n  }\n\n  once(...args: Parameters<(typeof Emitter)['prototype']['once']>) {\n    return this.emitter.once(...args);\n  }\n\n  removeFormat(index: number, length: number, source?: EmitterSource): Delta {\n    [index, length, , source] = overload(index, length, source);\n    return modify.call(\n      this,\n      () => {\n        return this.editor.removeFormat(index, length);\n      },\n      source,\n      index,\n    );\n  }\n\n  scrollRectIntoView(rect: Rect) {\n    scrollRectIntoView(this.root, rect);\n  }\n\n  /**\n   * @deprecated Use Quill#scrollSelectionIntoView() instead.\n   */\n  scrollIntoView() {\n    console.warn(\n      'Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead.',\n    );\n    this.scrollSelectionIntoView();\n  }\n\n  /**\n   * Scroll the current selection into the visible area.\n   * If the selection is already visible, no scrolling will occur.\n   */\n  scrollSelectionIntoView() {\n    const range = this.selection.lastRange;\n    const bounds = range && this.selection.getBounds(range.index, range.length);\n    if (bounds) {\n      this.scrollRectIntoView(bounds);\n    }\n  }\n\n  setContents(\n    delta: Delta | Op[],\n    source: EmitterSource = Emitter.sources.API,\n  ): Delta {\n    return modify.call(\n      this,\n      () => {\n        delta = new Delta(delta);\n        const length = this.getLength();\n        // Quill will set empty editor to \\n\n        const delete1 = this.editor.deleteText(0, length);\n        const applied = this.editor.insertContents(0, delta);\n        // Remove extra \\n from empty editor initialization\n        const delete2 = this.editor.deleteText(this.getLength() - 1, 1);\n        return delete1.compose(applied).compose(delete2);\n      },\n      source,\n    );\n  }\n  setSelection(range: Range | null, source?: EmitterSource): void;\n  setSelection(index: number, source?: EmitterSource): void;\n  setSelection(index: number, length?: number, source?: EmitterSource): void;\n  setSelection(index: number, source?: EmitterSource): void;\n  setSelection(\n    index: Range | null | number,\n    length?: EmitterSource | number,\n    source?: EmitterSource,\n  ): void {\n    if (index == null) {\n      // @ts-expect-error https://github.com/microsoft/TypeScript/issues/22609\n      this.selection.setRange(null, length || Quill.sources.API);\n    } else {\n      // @ts-expect-error\n      [index, length, , source] = overload(index, length, source);\n      this.selection.setRange(new Range(Math.max(0, index), length), source);\n      if (source !== Emitter.sources.SILENT) {\n        this.scrollSelectionIntoView();\n      }\n    }\n  }\n\n  setText(text: string, source: EmitterSource = Emitter.sources.API) {\n    const delta = new Delta().insert(text);\n    return this.setContents(delta, source);\n  }\n\n  update(source: EmitterSource = Emitter.sources.USER) {\n    const change = this.scroll.update(source); // Will update selection before selection.update() does if text changes\n    this.selection.update(source);\n    // TODO this is usually undefined\n    return change;\n  }\n\n  updateContents(\n    delta: Delta | Op[],\n    source: EmitterSource = Emitter.sources.API,\n  ): Delta {\n    return modify.call(\n      this,\n      () => {\n        delta = new Delta(delta);\n        return this.editor.applyDelta(delta);\n      },\n      source,\n      true,\n    );\n  }\n}\n\nfunction resolveSelector(selector: string | HTMLElement | null | undefined) {\n  return typeof selector === 'string'\n    ? document.querySelector<HTMLElement>(selector)\n    : selector;\n}\n\nfunction expandModuleConfig(config: Record<string, unknown> | undefined) {\n  return Object.entries(config ?? {}).reduce(\n    (expanded, [key, value]) => ({\n      ...expanded,\n      [key]: value === true ? {} : value,\n    }),\n    {} as Record<string, unknown>,\n  );\n}\n\nfunction omitUndefinedValuesFromOptions(obj: QuillOptions) {\n  return Object.fromEntries(\n    Object.entries(obj).filter((entry) => entry[1] !== undefined),\n  );\n}\n\nfunction expandConfig(\n  containerOrSelector: HTMLElement | string,\n  options: QuillOptions,\n): ExpandedQuillOptions {\n  const container = resolveSelector(containerOrSelector);\n  if (!container) {\n    throw new Error('Invalid Quill container');\n  }\n\n  const shouldUseDefaultTheme =\n    !options.theme || options.theme === Quill.DEFAULTS.theme;\n  const theme = shouldUseDefaultTheme\n    ? Theme\n    : Quill.import(`themes/${options.theme}`);\n  if (!theme) {\n    throw new Error(`Invalid theme ${options.theme}. Did you register it?`);\n  }\n\n  const { modules: quillModuleDefaults, ...quillDefaults } = Quill.DEFAULTS;\n  const { modules: themeModuleDefaults, ...themeDefaults } = theme.DEFAULTS;\n\n  let userModuleOptions = expandModuleConfig(options.modules);\n  // Special case toolbar shorthand\n  if (\n    userModuleOptions != null &&\n    userModuleOptions.toolbar &&\n    userModuleOptions.toolbar.constructor !== Object\n  ) {\n    userModuleOptions = {\n      ...userModuleOptions,\n      toolbar: { container: userModuleOptions.toolbar },\n    };\n  }\n\n  const modules: ExpandedQuillOptions['modules'] = merge(\n    {},\n    expandModuleConfig(quillModuleDefaults),\n    expandModuleConfig(themeModuleDefaults),\n    userModuleOptions,\n  );\n\n  const config = {\n    ...quillDefaults,\n    ...omitUndefinedValuesFromOptions(themeDefaults),\n    ...omitUndefinedValuesFromOptions(options),\n  };\n\n  let registry = options.registry;\n  if (registry) {\n    if (options.formats) {\n      debug.warn('Ignoring \"formats\" option because \"registry\" is specified');\n    }\n  } else {\n    registry = options.formats\n      ? createRegistryWithFormats(options.formats, config.registry, debug)\n      : config.registry;\n  }\n\n  return {\n    ...config,\n    registry,\n    container,\n    theme,\n    modules: Object.entries(modules).reduce(\n      (modulesWithDefaults, [name, value]) => {\n        if (!value) return modulesWithDefaults;\n\n        const moduleClass = Quill.import(`modules/${name}`);\n        if (moduleClass == null) {\n          debug.error(\n            `Cannot load ${name} module. Are you sure you registered it?`,\n          );\n          return modulesWithDefaults;\n        }\n        return {\n          ...modulesWithDefaults,\n          // @ts-expect-error\n          [name]: merge({}, moduleClass.DEFAULTS || {}, value),\n        };\n      },\n      {},\n    ),\n    bounds: resolveSelector(config.bounds),\n  };\n}\n\n// Handle selection preservation and TEXT_CHANGE emission\n// common to modification APIs\nfunction modify(\n  modifier: () => Delta,\n  source: EmitterSource,\n  index: number | boolean,\n  shift: number | null,\n) {\n  if (\n    !this.isEnabled() &&\n    source === Emitter.sources.USER &&\n    !this.allowReadOnlyEdits\n  ) {\n    return new Delta();\n  }\n  let range = index == null ? null : this.getSelection();\n  const oldDelta = this.editor.delta;\n  const change = modifier();\n  if (range != null) {\n    if (index === true) {\n      index = range.index; // eslint-disable-line prefer-destructuring\n    }\n    if (shift == null) {\n      range = shiftRange(range, change, source);\n    } else if (shift !== 0) {\n      // @ts-expect-error index should always be number\n      range = shiftRange(range, index, shift, source);\n    }\n    this.setSelection(range, Emitter.sources.SILENT);\n  }\n  if (change.length() > 0) {\n    const args = [Emitter.events.TEXT_CHANGE, change, oldDelta, source];\n    this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n    if (source !== Emitter.sources.SILENT) {\n      this.emitter.emit(...args);\n    }\n  }\n  return change;\n}\n\ntype NormalizedIndexLength = [\n  number,\n  number,\n  Record<string, unknown>,\n  EmitterSource,\n];\nfunction overload(index: number, source?: EmitterSource): NormalizedIndexLength;\nfunction overload(\n  index: number,\n  length: number,\n  source?: EmitterSource,\n): NormalizedIndexLength;\nfunction overload(\n  index: number,\n  length: number,\n  format: string,\n  value: unknown,\n  source?: EmitterSource,\n): NormalizedIndexLength;\nfunction overload(\n  index: number,\n  length: number,\n  format: Record<string, unknown>,\n  source?: EmitterSource,\n): NormalizedIndexLength;\nfunction overload(range: Range, source?: EmitterSource): NormalizedIndexLength;\nfunction overload(\n  range: Range,\n  format: string,\n  value: unknown,\n  source?: EmitterSource,\n): NormalizedIndexLength;\nfunction overload(\n  range: Range,\n  format: Record<string, unknown>,\n  source?: EmitterSource,\n): NormalizedIndexLength;\nfunction overload(\n  index: Range | number,\n  length?: number | string | Record<string, unknown> | EmitterSource,\n  name?: string | unknown | Record<string, unknown> | EmitterSource,\n  value?: unknown | EmitterSource,\n  source?: EmitterSource,\n): NormalizedIndexLength {\n  let formats: Record<string, unknown> = {};\n  // @ts-expect-error\n  if (typeof index.index === 'number' && typeof index.length === 'number') {\n    // Allow for throwaway end (used by insertText/insertEmbed)\n    if (typeof length !== 'number') {\n      // @ts-expect-error\n      source = value;\n      value = name;\n      name = length;\n      // @ts-expect-error\n      length = index.length; // eslint-disable-line prefer-destructuring\n      // @ts-expect-error\n      index = index.index; // eslint-disable-line prefer-destructuring\n    } else {\n      // @ts-expect-error\n      length = index.length; // eslint-disable-line prefer-destructuring\n      // @ts-expect-error\n      index = index.index; // eslint-disable-line prefer-destructuring\n    }\n  } else if (typeof length !== 'number') {\n    // @ts-expect-error\n    source = value;\n    value = name;\n    name = length;\n    length = 0;\n  }\n  // Handle format being object, two format name/value strings or excluded\n  if (typeof name === 'object') {\n    // @ts-expect-error Fix me later\n    formats = name;\n    // @ts-expect-error\n    source = value;\n  } else if (typeof name === 'string') {\n    if (value != null) {\n      formats[name] = value;\n    } else {\n      // @ts-expect-error\n      source = name;\n    }\n  }\n  // Handle optional source\n  source = source || Emitter.sources.API;\n  // @ts-expect-error\n  return [index, length, formats, source];\n}\n\nfunction shiftRange(range: Range, change: Delta, source?: EmitterSource): Range;\nfunction shiftRange(\n  range: Range,\n  index: number,\n  length?: number,\n  source?: EmitterSource,\n): Range;\nfunction shiftRange(\n  range: Range,\n  index: number | Delta,\n  lengthOrSource?: number | EmitterSource,\n  source?: EmitterSource,\n) {\n  const length = typeof lengthOrSource === 'number' ? lengthOrSource : 0;\n  if (range == null) return null;\n  let start;\n  let end;\n  // @ts-expect-error -- TODO: add a better type guard around `index`\n  if (index && typeof index.transformPosition === 'function') {\n    [start, end] = [range.index, range.index + range.length].map((pos) =>\n      // @ts-expect-error -- TODO: add a better type guard around `index`\n      index.transformPosition(pos, source !== Emitter.sources.USER),\n    );\n  } else {\n    [start, end] = [range.index, range.index + range.length].map((pos) => {\n      // @ts-expect-error -- TODO: add a better type guard around `index`\n      if (pos < index || (pos === index && source === Emitter.sources.USER))\n        return pos;\n      if (length >= 0) {\n        return pos + length;\n      }\n      // @ts-expect-error -- TODO: add a better type guard around `index`\n      return Math.max(index, pos + length);\n    });\n  }\n  return new Range(start, end - start);\n}\n\nexport type { Bounds, DebugLevel, EmitterSource };\nexport { Parchment, Range };\n\nexport { globalRegistry, expandConfig, overload, Quill as default };\n", "import { cloneDeep, isEqual, merge } from 'lodash-es';\nimport { LeafBlot, EmbedBlot, Scope, ParentBlot } from 'parchment';\nimport type { Blot } from 'parchment';\nimport Delta, { AttributeMap, Op } from 'quill-delta';\nimport Block, { BlockEmbed, bubbleFormats } from '../blots/block.js';\nimport Break from '../blots/break.js';\nimport CursorBlot from '../blots/cursor.js';\nimport type Scroll from '../blots/scroll.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport { Range } from './selection.js';\n\nconst ASCII = /^[ -~]*$/;\n\ntype SelectionInfo = {\n  newRange: Range;\n  oldRange: Range;\n};\n\nclass Editor {\n  scroll: Scroll;\n  delta: Delta;\n\n  constructor(scroll: Scroll) {\n    this.scroll = scroll;\n    this.delta = this.getDelta();\n  }\n\n  applyDelta(delta: Delta): Delta {\n    this.scroll.update();\n    let scrollLength = this.scroll.length();\n    this.scroll.batchStart();\n    const normalizedDelta = normalizeDelta(delta);\n    const deleteDelta = new Delta();\n    const normalizedOps = splitOpLines(normalizedDelta.ops.slice());\n    normalizedOps.reduce((index, op) => {\n      const length = Op.length(op);\n      let attributes = op.attributes || {};\n      let isImplicitNewlinePrepended = false;\n      let isImplicitNewlineAppended = false;\n      if (op.insert != null) {\n        deleteDelta.retain(length);\n        if (typeof op.insert === 'string') {\n          const text = op.insert;\n          isImplicitNewlineAppended =\n            !text.endsWith('\\n') &&\n            (scrollLength <= index ||\n              !!this.scroll.descendant(BlockEmbed, index)[0]);\n          this.scroll.insertAt(index, text);\n          const [line, offset] = this.scroll.line(index);\n          let formats = merge({}, bubbleFormats(line));\n          if (line instanceof Block) {\n            const [leaf] = line.descendant(LeafBlot, offset);\n            if (leaf) {\n              formats = merge(formats, bubbleFormats(leaf));\n            }\n          }\n          attributes = AttributeMap.diff(formats, attributes) || {};\n        } else if (typeof op.insert === 'object') {\n          const key = Object.keys(op.insert)[0]; // There should only be one key\n          if (key == null) return index;\n          const isInlineEmbed = this.scroll.query(key, Scope.INLINE) != null;\n          if (isInlineEmbed) {\n            if (\n              scrollLength <= index ||\n              !!this.scroll.descendant(BlockEmbed, index)[0]\n            ) {\n              isImplicitNewlineAppended = true;\n            }\n          } else if (index > 0) {\n            const [leaf, offset] = this.scroll.descendant(LeafBlot, index - 1);\n            if (leaf instanceof TextBlot) {\n              const text = leaf.value();\n              if (text[offset] !== '\\n') {\n                isImplicitNewlinePrepended = true;\n              }\n            } else if (\n              leaf instanceof EmbedBlot &&\n              leaf.statics.scope === Scope.INLINE_BLOT\n            ) {\n              isImplicitNewlinePrepended = true;\n            }\n          }\n          this.scroll.insertAt(index, key, op.insert[key]);\n\n          if (isInlineEmbed) {\n            const [leaf] = this.scroll.descendant(LeafBlot, index);\n            if (leaf) {\n              const formats = merge({}, bubbleFormats(leaf));\n              attributes = AttributeMap.diff(formats, attributes) || {};\n            }\n          }\n        }\n        scrollLength += length;\n      } else {\n        deleteDelta.push(op);\n\n        if (op.retain !== null && typeof op.retain === 'object') {\n          const key = Object.keys(op.retain)[0];\n          if (key == null) return index;\n          this.scroll.updateEmbedAt(index, key, op.retain[key]);\n        }\n      }\n      Object.keys(attributes).forEach((name) => {\n        this.scroll.formatAt(index, length, name, attributes[name]);\n      });\n      const prependedLength = isImplicitNewlinePrepended ? 1 : 0;\n      const addedLength = isImplicitNewlineAppended ? 1 : 0;\n      scrollLength += prependedLength + addedLength;\n      deleteDelta.retain(prependedLength);\n      deleteDelta.delete(addedLength);\n      return index + length + prependedLength + addedLength;\n    }, 0);\n    deleteDelta.reduce((index, op) => {\n      if (typeof op.delete === 'number') {\n        this.scroll.deleteAt(index, op.delete);\n        return index;\n      }\n      return index + Op.length(op);\n    }, 0);\n    this.scroll.batchEnd();\n    this.scroll.optimize();\n    return this.update(normalizedDelta);\n  }\n\n  deleteText(index: number, length: number): Delta {\n    this.scroll.deleteAt(index, length);\n    return this.update(new Delta().retain(index).delete(length));\n  }\n\n  formatLine(\n    index: number,\n    length: number,\n    formats: Record<string, unknown> = {},\n  ): Delta {\n    this.scroll.update();\n    Object.keys(formats).forEach((format) => {\n      this.scroll.lines(index, Math.max(length, 1)).forEach((line) => {\n        line.format(format, formats[format]);\n      });\n    });\n    this.scroll.optimize();\n    const delta = new Delta().retain(index).retain(length, cloneDeep(formats));\n    return this.update(delta);\n  }\n\n  formatText(\n    index: number,\n    length: number,\n    formats: Record<string, unknown> = {},\n  ): Delta {\n    Object.keys(formats).forEach((format) => {\n      this.scroll.formatAt(index, length, format, formats[format]);\n    });\n    const delta = new Delta().retain(index).retain(length, cloneDeep(formats));\n    return this.update(delta);\n  }\n\n  getContents(index: number, length: number): Delta {\n    return this.delta.slice(index, index + length);\n  }\n\n  getDelta(): Delta {\n    return this.scroll.lines().reduce((delta, line) => {\n      return delta.concat(line.delta());\n    }, new Delta());\n  }\n\n  getFormat(index: number, length = 0): Record<string, unknown> {\n    let lines: (Block | BlockEmbed)[] = [];\n    let leaves: LeafBlot[] = [];\n    if (length === 0) {\n      this.scroll.path(index).forEach((path) => {\n        const [blot] = path;\n        if (blot instanceof Block) {\n          lines.push(blot);\n        } else if (blot instanceof LeafBlot) {\n          leaves.push(blot);\n        }\n      });\n    } else {\n      lines = this.scroll.lines(index, length);\n      leaves = this.scroll.descendants(LeafBlot, index, length);\n    }\n    const [lineFormats, leafFormats] = [lines, leaves].map((blots) => {\n      const blot = blots.shift();\n      if (blot == null) return {};\n      let formats = bubbleFormats(blot);\n      while (Object.keys(formats).length > 0) {\n        const blot = blots.shift();\n        if (blot == null) return formats;\n        formats = combineFormats(bubbleFormats(blot), formats);\n      }\n      return formats;\n    });\n    return { ...lineFormats, ...leafFormats };\n  }\n\n  getHTML(index: number, length: number): string {\n    const [line, lineOffset] = this.scroll.line(index);\n    if (line) {\n      const lineLength = line.length();\n      const isWithinLine = line.length() >= lineOffset + length;\n      if (isWithinLine && !(lineOffset === 0 && length === lineLength)) {\n        return convertHTML(line, lineOffset, length, true);\n      }\n      return convertHTML(this.scroll, index, length, true);\n    }\n    return '';\n  }\n\n  getText(index: number, length: number): string {\n    return this.getContents(index, length)\n      .filter((op) => typeof op.insert === 'string')\n      .map((op) => op.insert)\n      .join('');\n  }\n\n  insertContents(index: number, contents: Delta): Delta {\n    const normalizedDelta = normalizeDelta(contents);\n    const change = new Delta().retain(index).concat(normalizedDelta);\n    this.scroll.insertContents(index, normalizedDelta);\n    return this.update(change);\n  }\n\n  insertEmbed(index: number, embed: string, value: unknown): Delta {\n    this.scroll.insertAt(index, embed, value);\n    return this.update(new Delta().retain(index).insert({ [embed]: value }));\n  }\n\n  insertText(\n    index: number,\n    text: string,\n    formats: Record<string, unknown> = {},\n  ): Delta {\n    text = text.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n    this.scroll.insertAt(index, text);\n    Object.keys(formats).forEach((format) => {\n      this.scroll.formatAt(index, text.length, format, formats[format]);\n    });\n    return this.update(\n      new Delta().retain(index).insert(text, cloneDeep(formats)),\n    );\n  }\n\n  isBlank(): boolean {\n    if (this.scroll.children.length === 0) return true;\n    if (this.scroll.children.length > 1) return false;\n    const blot = this.scroll.children.head;\n    if (blot?.statics.blotName !== Block.blotName) return false;\n    const block = blot as Block;\n    if (block.children.length > 1) return false;\n    return block.children.head instanceof Break;\n  }\n\n  removeFormat(index: number, length: number): Delta {\n    const text = this.getText(index, length);\n    const [line, offset] = this.scroll.line(index + length);\n    let suffixLength = 0;\n    let suffix = new Delta();\n    if (line != null) {\n      suffixLength = line.length() - offset;\n      suffix = line\n        .delta()\n        .slice(offset, offset + suffixLength - 1)\n        .insert('\\n');\n    }\n    const contents = this.getContents(index, length + suffixLength);\n    const diff = contents.diff(new Delta().insert(text).concat(suffix));\n    const delta = new Delta().retain(index).concat(diff);\n    return this.applyDelta(delta);\n  }\n\n  update(\n    change: Delta | null,\n    mutations: MutationRecord[] = [],\n    selectionInfo: SelectionInfo | undefined = undefined,\n  ): Delta {\n    const oldDelta = this.delta;\n    if (\n      mutations.length === 1 &&\n      mutations[0].type === 'characterData' &&\n      // @ts-expect-error Fix me later\n      mutations[0].target.data.match(ASCII) &&\n      this.scroll.find(mutations[0].target)\n    ) {\n      // Optimization for character changes\n      const textBlot = this.scroll.find(mutations[0].target) as Blot;\n      const formats = bubbleFormats(textBlot);\n      const index = textBlot.offset(this.scroll);\n      // @ts-expect-error Fix me later\n      const oldValue = mutations[0].oldValue.replace(CursorBlot.CONTENTS, '');\n      const oldText = new Delta().insert(oldValue);\n      // @ts-expect-error\n      const newText = new Delta().insert(textBlot.value());\n      const relativeSelectionInfo = selectionInfo && {\n        oldRange: shiftRange(selectionInfo.oldRange, -index),\n        newRange: shiftRange(selectionInfo.newRange, -index),\n      };\n      const diffDelta = new Delta()\n        .retain(index)\n        .concat(oldText.diff(newText, relativeSelectionInfo));\n      change = diffDelta.reduce((delta, op) => {\n        if (op.insert) {\n          return delta.insert(op.insert, formats);\n        }\n        return delta.push(op);\n      }, new Delta());\n      this.delta = oldDelta.compose(change);\n    } else {\n      this.delta = this.getDelta();\n      if (!change || !isEqual(oldDelta.compose(change), this.delta)) {\n        change = oldDelta.diff(this.delta, selectionInfo);\n      }\n    }\n    return change;\n  }\n}\n\ninterface ListItem {\n  child: Blot;\n  offset: number;\n  length: number;\n  indent: number;\n  type: string;\n}\nfunction convertListHTML(\n  items: ListItem[],\n  lastIndent: number,\n  types: string[],\n): string {\n  if (items.length === 0) {\n    const [endTag] = getListType(types.pop());\n    if (lastIndent <= 0) {\n      return `</li></${endTag}>`;\n    }\n    return `</li></${endTag}>${convertListHTML([], lastIndent - 1, types)}`;\n  }\n  const [{ child, offset, length, indent, type }, ...rest] = items;\n  const [tag, attribute] = getListType(type);\n  if (indent > lastIndent) {\n    types.push(type);\n    if (indent === lastIndent + 1) {\n      return `<${tag}><li${attribute}>${convertHTML(\n        child,\n        offset,\n        length,\n      )}${convertListHTML(rest, indent, types)}`;\n    }\n    return `<${tag}><li>${convertListHTML(items, lastIndent + 1, types)}`;\n  }\n  const previousType = types[types.length - 1];\n  if (indent === lastIndent && type === previousType) {\n    return `</li><li${attribute}>${convertHTML(\n      child,\n      offset,\n      length,\n    )}${convertListHTML(rest, indent, types)}`;\n  }\n  const [endTag] = getListType(types.pop());\n  return `</li></${endTag}>${convertListHTML(items, lastIndent - 1, types)}`;\n}\n\nfunction convertHTML(\n  blot: Blot,\n  index: number,\n  length: number,\n  isRoot = false,\n): string {\n  if ('html' in blot && typeof blot.html === 'function') {\n    return blot.html(index, length);\n  }\n  if (blot instanceof TextBlot) {\n    return escapeText(blot.value().slice(index, index + length));\n  }\n  if (blot instanceof ParentBlot) {\n    // TODO fix API\n    if (blot.statics.blotName === 'list-container') {\n      const items: any[] = [];\n      blot.children.forEachAt(index, length, (child, offset, childLength) => {\n        const formats =\n          'formats' in child && typeof child.formats === 'function'\n            ? child.formats()\n            : {};\n        items.push({\n          child,\n          offset,\n          length: childLength,\n          indent: formats.indent || 0,\n          type: formats.list,\n        });\n      });\n      return convertListHTML(items, -1, []);\n    }\n    const parts: string[] = [];\n    blot.children.forEachAt(index, length, (child, offset, childLength) => {\n      parts.push(convertHTML(child, offset, childLength));\n    });\n    if (isRoot || blot.statics.blotName === 'list') {\n      return parts.join('');\n    }\n    const { outerHTML, innerHTML } = blot.domNode as Element;\n    const [start, end] = outerHTML.split(`>${innerHTML}<`);\n    // TODO cleanup\n    if (start === '<table') {\n      return `<table style=\"border: 1px solid #000;\">${parts.join('')}<${end}`;\n    }\n    return `${start}>${parts.join('')}<${end}`;\n  }\n  return blot.domNode instanceof Element ? blot.domNode.outerHTML : '';\n}\n\nfunction combineFormats(\n  formats: Record<string, unknown>,\n  combined: Record<string, unknown>,\n): Record<string, unknown> {\n  return Object.keys(combined).reduce(\n    (merged, name) => {\n      if (formats[name] == null) return merged;\n      const combinedValue = combined[name];\n      if (combinedValue === formats[name]) {\n        merged[name] = combinedValue;\n      } else if (Array.isArray(combinedValue)) {\n        if (combinedValue.indexOf(formats[name]) < 0) {\n          merged[name] = combinedValue.concat([formats[name]]);\n        } else {\n          // If style already exists, don't add to an array, but don't lose other styles\n          merged[name] = combinedValue;\n        }\n      } else {\n        merged[name] = [combinedValue, formats[name]];\n      }\n      return merged;\n    },\n    {} as Record<string, unknown>,\n  );\n}\n\nfunction getListType(type: string | undefined) {\n  const tag = type === 'ordered' ? 'ol' : 'ul';\n  switch (type) {\n    case 'checked':\n      return [tag, ' data-list=\"checked\"'];\n    case 'unchecked':\n      return [tag, ' data-list=\"unchecked\"'];\n    default:\n      return [tag, ''];\n  }\n}\n\nfunction normalizeDelta(delta: Delta) {\n  return delta.reduce((normalizedDelta, op) => {\n    if (typeof op.insert === 'string') {\n      const text = op.insert.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n      return normalizedDelta.insert(text, op.attributes);\n    }\n    return normalizedDelta.push(op);\n  }, new Delta());\n}\n\nfunction shiftRange({ index, length }: Range, amount: number) {\n  return new Range(index + amount, length);\n}\n\nfunction splitOpLines(ops: Op[]) {\n  const split: Op[] = [];\n  ops.forEach((op) => {\n    if (typeof op.insert === 'string') {\n      const lines = op.insert.split('\\n');\n      lines.forEach((line, index) => {\n        if (index) split.push({ insert: '\\n', attributes: op.attributes });\n        if (line) split.push({ insert: line, attributes: op.attributes });\n      });\n    } else {\n      split.push(op);\n    }\n  });\n\n  return split;\n}\n\nexport default Editor;\n", "import {\n  AttributorStore,\n  BlockBlot,\n  EmbedBlot,\n  LeafBlot,\n  Scope,\n} from 'parchment';\nimport type { Blot, Parent } from 'parchment';\nimport Delta from 'quill-delta';\nimport Break from './break.js';\nimport Inline from './inline.js';\nimport TextBlot from './text.js';\n\nconst NEWLINE_LENGTH = 1;\n\nclass Block extends BlockBlot {\n  cache: { delta?: Delta | null; length?: number } = {};\n\n  delta(): Delta {\n    if (this.cache.delta == null) {\n      this.cache.delta = blockDelta(this);\n    }\n    return this.cache.delta;\n  }\n\n  deleteAt(index: number, length: number) {\n    super.deleteAt(index, length);\n    this.cache = {};\n  }\n\n  formatAt(index: number, length: number, name: string, value: unknown) {\n    if (length <= 0) return;\n    if (this.scroll.query(name, Scope.BLOCK)) {\n      if (index + length === this.length()) {\n        this.format(name, value);\n      }\n    } else {\n      super.formatAt(\n        index,\n        Math.min(length, this.length() - index - 1),\n        name,\n        value,\n      );\n    }\n    this.cache = {};\n  }\n\n  insertAt(index: number, value: string, def?: unknown) {\n    if (def != null) {\n      super.insertAt(index, value, def);\n      this.cache = {};\n      return;\n    }\n    if (value.length === 0) return;\n    const lines = value.split('\\n');\n    const text = lines.shift() as string;\n    if (text.length > 0) {\n      if (index < this.length() - 1 || this.children.tail == null) {\n        super.insertAt(Math.min(index, this.length() - 1), text);\n      } else {\n        this.children.tail.insertAt(this.children.tail.length(), text);\n      }\n      this.cache = {};\n    }\n    // TODO: Fix this next time the file is edited.\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let block: Blot | this = this;\n    lines.reduce((lineIndex, line) => {\n      // @ts-expect-error Fix me later\n      block = block.split(lineIndex, true);\n      block.insertAt(0, line);\n      return line.length;\n    }, index + text.length);\n  }\n\n  insertBefore(blot: Blot, ref?: Blot | null) {\n    const { head } = this.children;\n    super.insertBefore(blot, ref);\n    if (head instanceof Break) {\n      head.remove();\n    }\n    this.cache = {};\n  }\n\n  length() {\n    if (this.cache.length == null) {\n      this.cache.length = super.length() + NEWLINE_LENGTH;\n    }\n    return this.cache.length;\n  }\n\n  moveChildren(target: Parent, ref?: Blot | null) {\n    super.moveChildren(target, ref);\n    this.cache = {};\n  }\n\n  optimize(context: { [key: string]: any }) {\n    super.optimize(context);\n    this.cache = {};\n  }\n\n  path(index: number) {\n    return super.path(index, true);\n  }\n\n  removeChild(child: Blot) {\n    super.removeChild(child);\n    this.cache = {};\n  }\n\n  split(index: number, force: boolean | undefined = false): Blot | null {\n    if (force && (index === 0 || index >= this.length() - NEWLINE_LENGTH)) {\n      const clone = this.clone();\n      if (index === 0) {\n        this.parent.insertBefore(clone, this);\n        return this;\n      }\n      this.parent.insertBefore(clone, this.next);\n      return clone;\n    }\n    const next = super.split(index, force);\n    this.cache = {};\n    return next;\n  }\n}\nBlock.blotName = 'block';\nBlock.tagName = 'P';\nBlock.defaultChild = Break;\nBlock.allowedChildren = [Break, Inline, EmbedBlot, TextBlot];\n\nclass BlockEmbed extends EmbedBlot {\n  attributes: AttributorStore;\n  domNode: HTMLElement;\n\n  attach() {\n    super.attach();\n    this.attributes = new AttributorStore(this.domNode);\n  }\n\n  delta() {\n    return new Delta().insert(this.value(), {\n      ...this.formats(),\n      ...this.attributes.values(),\n    });\n  }\n\n  format(name: string, value: unknown) {\n    const attribute = this.scroll.query(name, Scope.BLOCK_ATTRIBUTE);\n    if (attribute != null) {\n      // @ts-expect-error TODO: Scroll#query() should return Attributor when scope is attribute\n      this.attributes.attribute(attribute, value);\n    }\n  }\n\n  formatAt(index: number, length: number, name: string, value: unknown) {\n    this.format(name, value);\n  }\n\n  insertAt(index: number, value: string, def?: unknown) {\n    if (def != null) {\n      super.insertAt(index, value, def);\n      return;\n    }\n    const lines = value.split('\\n');\n    const text = lines.pop();\n    const blocks = lines.map((line) => {\n      const block = this.scroll.create(Block.blotName);\n      block.insertAt(0, line);\n      return block;\n    });\n    const ref = this.split(index);\n    blocks.forEach((block) => {\n      this.parent.insertBefore(block, ref);\n    });\n    if (text) {\n      this.parent.insertBefore(this.scroll.create('text', text), ref);\n    }\n  }\n}\nBlockEmbed.scope = Scope.BLOCK_BLOT;\n// It is important for cursor behavior BlockEmbeds use tags that are block level elements\n\nfunction blockDelta(blot: BlockBlot, filter = true) {\n  return blot\n    .descendants(LeafBlot)\n    .reduce((delta, leaf) => {\n      if (leaf.length() === 0) {\n        return delta;\n      }\n      return delta.insert(leaf.value(), bubbleFormats(leaf, {}, filter));\n    }, new Delta())\n    .insert('\\n', bubbleFormats(blot));\n}\n\nfunction bubbleFormats(\n  blot: Blot | null,\n  formats: Record<string, unknown> = {},\n  filter = true,\n): Record<string, unknown> {\n  if (blot == null) return formats;\n  if ('formats' in blot && typeof blot.formats === 'function') {\n    formats = {\n      ...formats,\n      ...blot.formats(),\n    };\n    if (filter) {\n      // exclude syntax highlighting from deltas and getFormat()\n      delete formats['code-token'];\n    }\n  }\n  if (\n    blot.parent == null ||\n    blot.parent.statics.blotName === 'scroll' ||\n    blot.parent.statics.scope !== blot.statics.scope\n  ) {\n    return formats;\n  }\n  return bubbleFormats(blot.parent, formats, filter);\n}\n\nexport { blockDelta, bubbleFormats, BlockEmbed, Block as default };\n", "import { EmbedBlot } from 'parchment';\n\nclass Break extends EmbedBlot {\n  static value() {\n    return undefined;\n  }\n\n  optimize() {\n    if (this.prev || this.next) {\n      this.remove();\n    }\n  }\n\n  length() {\n    return 0;\n  }\n\n  value() {\n    return '';\n  }\n}\nBreak.blotName = 'break';\nBreak.tagName = 'BR';\n\nexport default Break;\n", "import { TextBlot } from 'parchment';\n\nclass Text extends TextBlot {}\n\nfunction escapeText(text: string) {\n  return text.replace(/[&<>\"']/g, (s) => {\n    // https://lodash.com/docs#escape\n    const entityMap: Record<string, string> = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#39;',\n    };\n    return entityMap[s];\n  });\n}\n\nexport { Text as default, escapeText };\n", "import { EmbedBlot, InlineBlot, Scope } from 'parchment';\nimport type { BlotConstructor } from 'parchment';\nimport Break from './break.js';\nimport Text from './text.js';\n\nclass Inline extends InlineBlot {\n  static allowedChildren: BlotConstructor[] = [Inline, Break, EmbedBlot, Text];\n  // Lower index means deeper in the DOM tree, since not found (-1) is for embeds\n  static order = [\n    'cursor',\n    'inline', // Must be lower\n    'link', // Chrome wants <a> to be lower\n    'underline',\n    'strike',\n    'italic',\n    'bold',\n    'script',\n    'code', // Must be higher\n  ];\n\n  static compare(self: string, other: string) {\n    const selfIndex = Inline.order.indexOf(self);\n    const otherIndex = Inline.order.indexOf(other);\n    if (selfIndex >= 0 || otherIndex >= 0) {\n      return selfIndex - otherIndex;\n    }\n    if (self === other) {\n      return 0;\n    }\n    if (self < other) {\n      return -1;\n    }\n    return 1;\n  }\n\n  formatAt(index: number, length: number, name: string, value: unknown) {\n    if (\n      Inline.compare(this.statics.blotName, name) < 0 &&\n      this.scroll.query(name, Scope.BLOT)\n    ) {\n      const blot = this.isolate(index, length);\n      if (value) {\n        blot.wrap(name, value);\n      }\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  optimize(context: { [key: string]: any }) {\n    super.optimize(context);\n    if (\n      this.parent instanceof Inline &&\n      Inline.compare(this.statics.blotName, this.parent.statics.blotName) > 0\n    ) {\n      const parent = this.parent.isolate(this.offset(), this.length());\n      // @ts-expect-error TODO: make isolate generic\n      this.moveChildren(parent);\n      parent.wrap(this);\n    }\n  }\n}\n\nexport default Inline;\n", "import { EmbedBlot, Scope } from 'parchment';\nimport type { Parent, ScrollBlot } from 'parchment';\nimport type Selection from '../core/selection.js';\nimport TextBlot from './text.js';\nimport type { EmbedContextRange } from './embed.js';\n\nclass Cursor extends EmbedBlot {\n  static blotName = 'cursor';\n  static className = 'ql-cursor';\n  static tagName = 'span';\n  static CONTENTS = '\\uFEFF'; // Zero width no break space\n\n  static value() {\n    return undefined;\n  }\n\n  selection: Selection;\n  textNode: Text;\n  savedLength: number;\n\n  constructor(scroll: ScrollBlot, domNode: HTMLElement, selection: Selection) {\n    super(scroll, domNode);\n    this.selection = selection;\n    this.textNode = document.createTextNode(Cursor.CONTENTS);\n    this.domNode.appendChild(this.textNode);\n    this.savedLength = 0;\n  }\n\n  detach() {\n    // super.detach() will also clear domNode.__blot\n    if (this.parent != null) this.parent.removeChild(this);\n  }\n\n  format(name: string, value: unknown) {\n    if (this.savedLength !== 0) {\n      super.format(name, value);\n      return;\n    }\n    // TODO: Fix this next time the file is edited.\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let target: Parent | this = this;\n    let index = 0;\n    while (target != null && target.statics.scope !== Scope.BLOCK_BLOT) {\n      index += target.offset(target.parent);\n      target = target.parent;\n    }\n    if (target != null) {\n      this.savedLength = Cursor.CONTENTS.length;\n      // @ts-expect-error TODO: allow empty context in Parchment\n      target.optimize();\n      target.formatAt(index, Cursor.CONTENTS.length, name, value);\n      this.savedLength = 0;\n    }\n  }\n\n  index(node: Node, offset: number) {\n    if (node === this.textNode) return 0;\n    return super.index(node, offset);\n  }\n\n  length() {\n    return this.savedLength;\n  }\n\n  position(): [Text, number] {\n    return [this.textNode, this.textNode.data.length];\n  }\n\n  remove() {\n    super.remove();\n    // @ts-expect-error Fix me later\n    this.parent = null;\n  }\n\n  restore(): EmbedContextRange | null {\n    if (this.selection.composing || this.parent == null) return null;\n    const range = this.selection.getNativeRange();\n    // Browser may push down styles/nodes inside the cursor blot.\n    // https://dvcs.w3.org/hg/editing/raw-file/tip/editing.html#push-down-values\n    while (\n      this.domNode.lastChild != null &&\n      this.domNode.lastChild !== this.textNode\n    ) {\n      // @ts-expect-error Fix me later\n      this.domNode.parentNode.insertBefore(\n        this.domNode.lastChild,\n        this.domNode,\n      );\n    }\n\n    const prevTextBlot = this.prev instanceof TextBlot ? this.prev : null;\n    const prevTextLength = prevTextBlot ? prevTextBlot.length() : 0;\n    const nextTextBlot = this.next instanceof TextBlot ? this.next : null;\n    // @ts-expect-error TODO: make TextBlot.text public\n    const nextText = nextTextBlot ? nextTextBlot.text : '';\n    const { textNode } = this;\n    // take text from inside this blot and reset it\n    const newText = textNode.data.split(Cursor.CONTENTS).join('');\n    textNode.data = Cursor.CONTENTS;\n\n    // proactively merge TextBlots around cursor so that optimization\n    // doesn't lose the cursor.  the reason we are here in cursor.restore\n    // could be that the user clicked in prevTextBlot or nextTextBlot, or\n    // the user typed something.\n    let mergedTextBlot;\n    if (prevTextBlot) {\n      mergedTextBlot = prevTextBlot;\n      if (newText || nextTextBlot) {\n        prevTextBlot.insertAt(prevTextBlot.length(), newText + nextText);\n        if (nextTextBlot) {\n          nextTextBlot.remove();\n        }\n      }\n    } else if (nextTextBlot) {\n      mergedTextBlot = nextTextBlot;\n      nextTextBlot.insertAt(0, newText);\n    } else {\n      const newTextNode = document.createTextNode(newText);\n      mergedTextBlot = this.scroll.create(newTextNode);\n      this.parent.insertBefore(mergedTextBlot, this);\n    }\n\n    this.remove();\n    if (range) {\n      // calculate selection to restore\n      const remapOffset = (node: Node, offset: number) => {\n        if (prevTextBlot && node === prevTextBlot.domNode) {\n          return offset;\n        }\n        if (node === textNode) {\n          return prevTextLength + offset - 1;\n        }\n        if (nextTextBlot && node === nextTextBlot.domNode) {\n          return prevTextLength + newText.length + offset;\n        }\n        return null;\n      };\n\n      const start = remapOffset(range.start.node, range.start.offset);\n      const end = remapOffset(range.end.node, range.end.offset);\n      if (start !== null && end !== null) {\n        return {\n          startNode: mergedTextBlot.domNode,\n          startOffset: start,\n          endNode: mergedTextBlot.domNode,\n          endOffset: end,\n        };\n      }\n    }\n    return null;\n  }\n\n  update(mutations: MutationRecord[], context: Record<string, unknown>) {\n    if (\n      mutations.some((mutation) => {\n        return (\n          mutation.type === 'characterData' && mutation.target === this.textNode\n        );\n      })\n    ) {\n      const range = this.restore();\n      if (range) context.range = range;\n    }\n  }\n\n  // Avoid .ql-cursor being a descendant of `<a/>`.\n  // The reason is Safari pushes down `<a/>` on text insertion.\n  // That will cause DOM nodes not sync with the model.\n  //\n  // For example ({I} is the caret), given the markup:\n  //    <a><span class=\"ql-cursor\">\\uFEFF{I}</span></a>\n  // When typing a char \"x\", `<a/>` will be pushed down inside the `<span>` first:\n  //    <span class=\"ql-cursor\"><a>\\uFEFF{I}</a></span>\n  // And then \"x\" will be inserted after `<a/>`:\n  //    <span class=\"ql-cursor\"><a>\\uFEFF</a>d{I}</span>\n  optimize(context?: unknown) {\n    // @ts-expect-error Fix me later\n    super.optimize(context);\n\n    let { parent } = this;\n    while (parent) {\n      if (parent.domNode.tagName === 'A') {\n        this.savedLength = Cursor.CONTENTS.length;\n        // @ts-expect-error TODO: make isolate generic\n        parent.isolate(this.offset(parent), this.length()).unwrap();\n        this.savedLength = 0;\n        break;\n      }\n      parent = parent.parent;\n    }\n  }\n\n  value() {\n    return '';\n  }\n}\n\nexport default Cursor;\n", "import EventEmitter from './index.js'\n\nexport { EventEmitter }\nexport default EventEmitter\n", "import type Quill from '../core.js';\n\nexport default new WeakMap<Node, Quill>();\n", "const levels = ['error', 'warn', 'log', 'info'] as const;\nexport type DebugLevel = (typeof levels)[number];\nlet level: DebugLevel | false = 'warn';\n\nfunction debug(method: DebugLevel, ...args: unknown[]) {\n  if (level) {\n    if (levels.indexOf(method) <= levels.indexOf(level)) {\n      console[method](...args); // eslint-disable-line no-console\n    }\n  }\n}\n\nfunction namespace(\n  ns: string,\n): Record<DebugLevel, (...args: unknown[]) => void> {\n  return levels.reduce(\n    (logger, method) => {\n      logger[method] = debug.bind(console, method, ns);\n      return logger;\n    },\n    {} as Record<DebugLevel, (...args: unknown[]) => void>,\n  );\n}\n\nnamespace.level = (newLevel: DebugLevel | false) => {\n  level = newLevel;\n};\ndebug.level = namespace.level;\n\nexport default namespace;\n", "import { EventEmitter } from 'eventemitter3';\nimport instances from './instances.js';\nimport logger from './logger.js';\n\nconst debug = logger('quill:events');\nconst EVENTS = ['selectionchange', 'mousedown', 'mouseup', 'click'];\n\nEVENTS.forEach((eventName) => {\n  document.addEventListener(eventName, (...args) => {\n    Array.from(document.querySelectorAll('.ql-container')).forEach((node) => {\n      const quill = instances.get(node);\n      if (quill && quill.emitter) {\n        quill.emitter.handleDOM(...args);\n      }\n    });\n  });\n});\n\nclass Emitter extends EventEmitter<string> {\n  static events = {\n    EDITOR_CHANGE: 'editor-change',\n    SCROLL_BEFORE_UPDATE: 'scroll-before-update',\n    SCROLL_BLOT_MOUNT: 'scroll-blot-mount',\n    SCROLL_BLOT_UNMOUNT: 'scroll-blot-unmount',\n    SCROLL_OPTIMIZE: 'scroll-optimize',\n    SCROLL_UPDATE: 'scroll-update',\n    SCROLL_EMBED_UPDATE: 'scroll-embed-update',\n    SELECTION_CHANGE: 'selection-change',\n    TEXT_CHANGE: 'text-change',\n    COMPOSITION_BEFORE_START: 'composition-before-start',\n    COMPOSITION_START: 'composition-start',\n    COMPOSITION_BEFORE_END: 'composition-before-end',\n    COMPOSITION_END: 'composition-end',\n  } as const;\n\n  static sources = {\n    API: 'api',\n    SILENT: 'silent',\n    USER: 'user',\n  } as const;\n\n  protected domListeners: Record<string, { node: Node; handler: Function }[]>;\n\n  constructor() {\n    super();\n    this.domListeners = {};\n    this.on('error', debug.error);\n  }\n\n  emit(...args: unknown[]): boolean {\n    debug.log.call(debug, ...args);\n    // @ts-expect-error\n    return super.emit(...args);\n  }\n\n  handleDOM(event: Event, ...args: unknown[]) {\n    (this.domListeners[event.type] || []).forEach(({ node, handler }) => {\n      if (event.target === node || node.contains(event.target as Node)) {\n        handler(event, ...args);\n      }\n    });\n  }\n\n  listenDOM(eventName: string, node: Node, handler: EventListener) {\n    if (!this.domListeners[eventName]) {\n      this.domListeners[eventName] = [];\n    }\n    this.domListeners[eventName].push({ node, handler });\n  }\n}\n\nexport type EmitterSource =\n  (typeof Emitter.sources)[keyof typeof Emitter.sources];\n\nexport default Emitter;\n", "import { LeafBlot, Scope } from 'parchment';\nimport { cloneDeep, isEqual } from 'lodash-es';\nimport Emitter from './emitter.js';\nimport type { EmitterSource } from './emitter.js';\nimport logger from './logger.js';\nimport type Cursor from '../blots/cursor.js';\nimport type Scroll from '../blots/scroll.js';\n\nconst debug = logger('quill:selection');\n\ntype NativeRange = AbstractRange;\n\ninterface NormalizedRange {\n  start: {\n    node: NativeRange['startContainer'];\n    offset: NativeRange['startOffset'];\n  };\n  end: { node: NativeRange['endContainer']; offset: NativeRange['endOffset'] };\n  native: NativeRange;\n}\n\nexport interface Bounds {\n  bottom: number;\n  height: number;\n  left: number;\n  right: number;\n  top: number;\n  width: number;\n}\n\nexport class Range {\n  constructor(\n    public index: number,\n    public length = 0,\n  ) {}\n}\n\nclass Selection {\n  scroll: Scroll;\n  emitter: Emitter;\n  composing: boolean;\n  mouseDown: boolean;\n\n  root: HTMLElement;\n  cursor: Cursor;\n  savedRange: Range;\n  lastRange: Range | null;\n  lastNative: NormalizedRange | null;\n\n  constructor(scroll: Scroll, emitter: Emitter) {\n    this.emitter = emitter;\n    this.scroll = scroll;\n    this.composing = false;\n    this.mouseDown = false;\n    this.root = this.scroll.domNode;\n    // @ts-expect-error\n    this.cursor = this.scroll.create('cursor', this);\n    // savedRange is last non-null range\n    this.savedRange = new Range(0, 0);\n    this.lastRange = this.savedRange;\n    this.lastNative = null;\n    this.handleComposition();\n    this.handleDragging();\n    this.emitter.listenDOM('selectionchange', document, () => {\n      if (!this.mouseDown && !this.composing) {\n        setTimeout(this.update.bind(this, Emitter.sources.USER), 1);\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_BEFORE_UPDATE, () => {\n      if (!this.hasFocus()) return;\n      const native = this.getNativeRange();\n      if (native == null) return;\n      if (native.start.node === this.cursor.textNode) return; // cursor.restore() will handle\n      this.emitter.once(\n        Emitter.events.SCROLL_UPDATE,\n        (source, mutations: MutationRecord[]) => {\n          try {\n            if (\n              this.root.contains(native.start.node) &&\n              this.root.contains(native.end.node)\n            ) {\n              this.setNativeRange(\n                native.start.node,\n                native.start.offset,\n                native.end.node,\n                native.end.offset,\n              );\n            }\n            const triggeredByTyping = mutations.some(\n              (mutation) =>\n                mutation.type === 'characterData' ||\n                mutation.type === 'childList' ||\n                (mutation.type === 'attributes' &&\n                  mutation.target === this.root),\n            );\n            this.update(triggeredByTyping ? Emitter.sources.SILENT : source);\n          } catch (ignored) {\n            // ignore\n          }\n        },\n      );\n    });\n    this.emitter.on(Emitter.events.SCROLL_OPTIMIZE, (mutations, context) => {\n      if (context.range) {\n        const { startNode, startOffset, endNode, endOffset } = context.range;\n        this.setNativeRange(startNode, startOffset, endNode, endOffset);\n        this.update(Emitter.sources.SILENT);\n      }\n    });\n    this.update(Emitter.sources.SILENT);\n  }\n\n  handleComposition() {\n    this.emitter.on(Emitter.events.COMPOSITION_BEFORE_START, () => {\n      this.composing = true;\n    });\n    this.emitter.on(Emitter.events.COMPOSITION_END, () => {\n      this.composing = false;\n      if (this.cursor.parent) {\n        const range = this.cursor.restore();\n        if (!range) return;\n        setTimeout(() => {\n          this.setNativeRange(\n            range.startNode,\n            range.startOffset,\n            range.endNode,\n            range.endOffset,\n          );\n        }, 1);\n      }\n    });\n  }\n\n  handleDragging() {\n    this.emitter.listenDOM('mousedown', document.body, () => {\n      this.mouseDown = true;\n    });\n    this.emitter.listenDOM('mouseup', document.body, () => {\n      this.mouseDown = false;\n      this.update(Emitter.sources.USER);\n    });\n  }\n\n  focus() {\n    if (this.hasFocus()) return;\n    this.root.focus({ preventScroll: true });\n    this.setRange(this.savedRange);\n  }\n\n  format(format: string, value: unknown) {\n    this.scroll.update();\n    const nativeRange = this.getNativeRange();\n    if (\n      nativeRange == null ||\n      !nativeRange.native.collapsed ||\n      this.scroll.query(format, Scope.BLOCK)\n    )\n      return;\n    if (nativeRange.start.node !== this.cursor.textNode) {\n      const blot = this.scroll.find(nativeRange.start.node, false);\n      if (blot == null) return;\n      // TODO Give blot ability to not split\n      if (blot instanceof LeafBlot) {\n        const after = blot.split(nativeRange.start.offset);\n        blot.parent.insertBefore(this.cursor, after);\n      } else {\n        // @ts-expect-error TODO: nativeRange.start.node doesn't seem to match function signature\n        blot.insertBefore(this.cursor, nativeRange.start.node); // Should never happen\n      }\n      this.cursor.attach();\n    }\n    this.cursor.format(format, value);\n    this.scroll.optimize();\n    this.setNativeRange(this.cursor.textNode, this.cursor.textNode.data.length);\n    this.update();\n  }\n\n  getBounds(index: number, length = 0) {\n    const scrollLength = this.scroll.length();\n    index = Math.min(index, scrollLength - 1);\n    length = Math.min(index + length, scrollLength - 1) - index;\n    let node: Node;\n    let [leaf, offset] = this.scroll.leaf(index);\n    if (leaf == null) return null;\n    if (length > 0 && offset === leaf.length()) {\n      const [next] = this.scroll.leaf(index + 1);\n      if (next) {\n        const [line] = this.scroll.line(index);\n        const [nextLine] = this.scroll.line(index + 1);\n        if (line === nextLine) {\n          leaf = next;\n          offset = 0;\n        }\n      }\n    }\n    [node, offset] = leaf.position(offset, true);\n    const range = document.createRange();\n    if (length > 0) {\n      range.setStart(node, offset);\n      [leaf, offset] = this.scroll.leaf(index + length);\n      if (leaf == null) return null;\n      [node, offset] = leaf.position(offset, true);\n      range.setEnd(node, offset);\n      return range.getBoundingClientRect();\n    }\n    let side: 'left' | 'right' = 'left';\n    let rect: DOMRect;\n    if (node instanceof Text) {\n      // Return null if the text node is empty because it is\n      // not able to get a useful client rect:\n      // https://github.com/w3c/csswg-drafts/issues/2514.\n      // Empty text nodes are most likely caused by TextBlot#optimize()\n      // not getting called when editor content changes.\n      if (!node.data.length) {\n        return null;\n      }\n      if (offset < node.data.length) {\n        range.setStart(node, offset);\n        range.setEnd(node, offset + 1);\n      } else {\n        range.setStart(node, offset - 1);\n        range.setEnd(node, offset);\n        side = 'right';\n      }\n      rect = range.getBoundingClientRect();\n    } else {\n      if (!(leaf.domNode instanceof Element)) return null;\n      rect = leaf.domNode.getBoundingClientRect();\n      if (offset > 0) side = 'right';\n    }\n    return {\n      bottom: rect.top + rect.height,\n      height: rect.height,\n      left: rect[side],\n      right: rect[side],\n      top: rect.top,\n      width: 0,\n    };\n  }\n\n  getNativeRange(): NormalizedRange | null {\n    const selection = document.getSelection();\n    if (selection == null || selection.rangeCount <= 0) return null;\n    const nativeRange = selection.getRangeAt(0);\n    if (nativeRange == null) return null;\n    const range = this.normalizeNative(nativeRange);\n    debug.info('getNativeRange', range);\n    return range;\n  }\n\n  getRange(): [Range, NormalizedRange] | [null, null] {\n    const root = this.scroll.domNode;\n    if ('isConnected' in root && !root.isConnected) {\n      // document.getSelection() forces layout on Blink, so we trend to\n      // not calling it.\n      return [null, null];\n    }\n    const normalized = this.getNativeRange();\n    if (normalized == null) return [null, null];\n    const range = this.normalizedToRange(normalized);\n    return [range, normalized];\n  }\n\n  hasFocus(): boolean {\n    return (\n      document.activeElement === this.root ||\n      (document.activeElement != null &&\n        contains(this.root, document.activeElement))\n    );\n  }\n\n  normalizedToRange(range: NormalizedRange) {\n    const positions: [Node, number][] = [\n      [range.start.node, range.start.offset],\n    ];\n    if (!range.native.collapsed) {\n      positions.push([range.end.node, range.end.offset]);\n    }\n    const indexes = positions.map((position) => {\n      const [node, offset] = position;\n      const blot = this.scroll.find(node, true);\n      // @ts-expect-error Fix me later\n      const index = blot.offset(this.scroll);\n      if (offset === 0) {\n        return index;\n      }\n      if (blot instanceof LeafBlot) {\n        return index + blot.index(node, offset);\n      }\n      // @ts-expect-error Fix me later\n      return index + blot.length();\n    });\n    const end = Math.min(Math.max(...indexes), this.scroll.length() - 1);\n    const start = Math.min(end, ...indexes);\n    return new Range(start, end - start);\n  }\n\n  normalizeNative(nativeRange: NativeRange) {\n    if (\n      !contains(this.root, nativeRange.startContainer) ||\n      (!nativeRange.collapsed && !contains(this.root, nativeRange.endContainer))\n    ) {\n      return null;\n    }\n    const range = {\n      start: {\n        node: nativeRange.startContainer,\n        offset: nativeRange.startOffset,\n      },\n      end: { node: nativeRange.endContainer, offset: nativeRange.endOffset },\n      native: nativeRange,\n    };\n    [range.start, range.end].forEach((position) => {\n      let { node, offset } = position;\n      while (!(node instanceof Text) && node.childNodes.length > 0) {\n        if (node.childNodes.length > offset) {\n          node = node.childNodes[offset];\n          offset = 0;\n        } else if (node.childNodes.length === offset) {\n          // @ts-expect-error Fix me later\n          node = node.lastChild;\n          if (node instanceof Text) {\n            offset = node.data.length;\n          } else if (node.childNodes.length > 0) {\n            // Container case\n            offset = node.childNodes.length;\n          } else {\n            // Embed case\n            offset = node.childNodes.length + 1;\n          }\n        } else {\n          break;\n        }\n      }\n      position.node = node;\n      position.offset = offset;\n    });\n    return range;\n  }\n\n  rangeToNative(range: Range): [Node | null, number, Node | null, number] {\n    const scrollLength = this.scroll.length();\n\n    const getPosition = (\n      index: number,\n      inclusive: boolean,\n    ): [Node | null, number] => {\n      index = Math.min(scrollLength - 1, index);\n      const [leaf, leafOffset] = this.scroll.leaf(index);\n      return leaf ? leaf.position(leafOffset, inclusive) : [null, -1];\n    };\n    return [\n      ...getPosition(range.index, false),\n      ...getPosition(range.index + range.length, true),\n    ];\n  }\n\n  setNativeRange(\n    startNode: Node | null,\n    startOffset?: number,\n    endNode = startNode,\n    endOffset = startOffset,\n    force = false,\n  ) {\n    debug.info('setNativeRange', startNode, startOffset, endNode, endOffset);\n    if (\n      startNode != null &&\n      (this.root.parentNode == null ||\n        startNode.parentNode == null ||\n        // @ts-expect-error Fix me later\n        endNode.parentNode == null)\n    ) {\n      return;\n    }\n    const selection = document.getSelection();\n    if (selection == null) return;\n    if (startNode != null) {\n      if (!this.hasFocus()) this.root.focus({ preventScroll: true });\n      const { native } = this.getNativeRange() || {};\n      if (\n        native == null ||\n        force ||\n        startNode !== native.startContainer ||\n        startOffset !== native.startOffset ||\n        endNode !== native.endContainer ||\n        endOffset !== native.endOffset\n      ) {\n        if (startNode instanceof Element && startNode.tagName === 'BR') {\n          // @ts-expect-error Fix me later\n          startOffset = Array.from(startNode.parentNode.childNodes).indexOf(\n            startNode,\n          );\n          startNode = startNode.parentNode;\n        }\n        if (endNode instanceof Element && endNode.tagName === 'BR') {\n          // @ts-expect-error Fix me later\n          endOffset = Array.from(endNode.parentNode.childNodes).indexOf(\n            endNode,\n          );\n          endNode = endNode.parentNode;\n        }\n        const range = document.createRange();\n        // @ts-expect-error Fix me later\n        range.setStart(startNode, startOffset);\n        // @ts-expect-error Fix me later\n        range.setEnd(endNode, endOffset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n    } else {\n      selection.removeAllRanges();\n      this.root.blur();\n    }\n  }\n\n  setRange(range: Range | null, force: boolean, source?: EmitterSource): void;\n  setRange(range: Range | null, source?: EmitterSource): void;\n  setRange(\n    range: Range | null,\n    force: boolean | EmitterSource = false,\n    source: EmitterSource = Emitter.sources.API,\n  ): void {\n    if (typeof force === 'string') {\n      source = force;\n      force = false;\n    }\n    debug.info('setRange', range);\n    if (range != null) {\n      const args = this.rangeToNative(range);\n      this.setNativeRange(...args, force);\n    } else {\n      this.setNativeRange(null);\n    }\n    this.update(source);\n  }\n\n  update(source: EmitterSource = Emitter.sources.USER) {\n    const oldRange = this.lastRange;\n    const [lastRange, nativeRange] = this.getRange();\n    this.lastRange = lastRange;\n    this.lastNative = nativeRange;\n    if (this.lastRange != null) {\n      this.savedRange = this.lastRange;\n    }\n    if (!isEqual(oldRange, this.lastRange)) {\n      if (\n        !this.composing &&\n        nativeRange != null &&\n        nativeRange.native.collapsed &&\n        nativeRange.start.node !== this.cursor.textNode\n      ) {\n        const range = this.cursor.restore();\n        if (range) {\n          this.setNativeRange(\n            range.startNode,\n            range.startOffset,\n            range.endNode,\n            range.endOffset,\n          );\n        }\n      }\n      const args = [\n        Emitter.events.SELECTION_CHANGE,\n        cloneDeep(this.lastRange),\n        cloneDeep(oldRange),\n        source,\n      ];\n      this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n      if (source !== Emitter.sources.SILENT) {\n        this.emitter.emit(...args);\n      }\n    }\n  }\n}\n\nfunction contains(parent: Node, descendant: Node) {\n  try {\n    // Firefox inserts inaccessible nodes around video elements\n    descendant.parentNode; // eslint-disable-line @typescript-eslint/no-unused-expressions\n  } catch (e) {\n    return false;\n  }\n  return parent.contains(descendant);\n}\n\nexport default Selection;\n", "import type Quill from './quill.js';\n\nabstract class Module<T extends {} = {}> {\n  static DEFAULTS = {};\n\n  constructor(\n    public quill: Quill,\n    protected options: Partial<T> = {},\n  ) {}\n}\n\nexport default Module;\n", "import type { ScrollBlot } from 'parchment';\nimport { EmbedBlot } from 'parchment';\nimport TextBlot from './text.js';\n\nconst GUARD_TEXT = '\\uFEFF';\n\nexport interface EmbedContextRange {\n  startNode: Node | Text;\n  startOffset: number;\n  endNode?: Node | Text;\n  endOffset?: number;\n}\n\nclass Embed extends EmbedBlot {\n  contentNode: HTMLSpanElement;\n  leftGuard: Text;\n  rightGuard: Text;\n\n  constructor(scroll: ScrollBlot, node: Node) {\n    super(scroll, node);\n    this.contentNode = document.createElement('span');\n    this.contentNode.setAttribute('contenteditable', 'false');\n    Array.from(this.domNode.childNodes).forEach((childNode) => {\n      this.contentNode.appendChild(childNode);\n    });\n    this.leftGuard = document.createTextNode(GUARD_TEXT);\n    this.rightGuard = document.createTextNode(GUARD_TEXT);\n    this.domNode.appendChild(this.leftGuard);\n    this.domNode.appendChild(this.contentNode);\n    this.domNode.appendChild(this.rightGuard);\n  }\n\n  index(node: Node, offset: number) {\n    if (node === this.leftGuard) return 0;\n    if (node === this.rightGuard) return 1;\n    return super.index(node, offset);\n  }\n\n  restore(node: Text): EmbedContextRange | null {\n    let range: EmbedContextRange | null = null;\n    let textNode: Text;\n    const text = node.data.split(GUARD_TEXT).join('');\n    if (node === this.leftGuard) {\n      if (this.prev instanceof TextBlot) {\n        const prevLength = this.prev.length();\n        this.prev.insertAt(prevLength, text);\n        range = {\n          startNode: this.prev.domNode,\n          startOffset: prevLength + text.length,\n        };\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(this.scroll.create(textNode), this);\n        range = {\n          startNode: textNode,\n          startOffset: text.length,\n        };\n      }\n    } else if (node === this.rightGuard) {\n      if (this.next instanceof TextBlot) {\n        this.next.insertAt(0, text);\n        range = {\n          startNode: this.next.domNode,\n          startOffset: text.length,\n        };\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(this.scroll.create(textNode), this.next);\n        range = {\n          startNode: textNode,\n          startOffset: text.length,\n        };\n      }\n    }\n    node.data = GUARD_TEXT;\n    return range;\n  }\n\n  update(mutations: MutationRecord[], context: Record<string, unknown>) {\n    mutations.forEach((mutation) => {\n      if (\n        mutation.type === 'characterData' &&\n        (mutation.target === this.leftGuard ||\n          mutation.target === this.rightGuard)\n      ) {\n        const range = this.restore(mutation.target as Text);\n        if (range) context.range = range;\n      }\n    });\n  }\n}\n\nexport default Embed;\n", "import Embed from '../blots/embed.js';\nimport type Scroll from '../blots/scroll.js';\nimport Emitter from './emitter.js';\n\nclass Composition {\n  isComposing = false;\n\n  constructor(\n    private scroll: Scroll,\n    private emitter: Emitter,\n  ) {\n    this.setupListeners();\n  }\n\n  private setupListeners() {\n    this.scroll.domNode.addEventListener('compositionstart', (event) => {\n      if (!this.isComposing) {\n        this.handleCompositionStart(event);\n      }\n    });\n\n    this.scroll.domNode.addEventListener('compositionend', (event) => {\n      if (this.isComposing) {\n        // Webkit makes DOM changes after compositionend, so we use microtask to\n        // ensure the order.\n        // https://bugs.webkit.org/show_bug.cgi?id=31902\n        queueMicrotask(() => {\n          this.handleCompositionEnd(event);\n        });\n      }\n    });\n  }\n\n  private handleCompositionStart(event: CompositionEvent) {\n    const blot =\n      event.target instanceof Node\n        ? this.scroll.find(event.target, true)\n        : null;\n\n    if (blot && !(blot instanceof Embed)) {\n      this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_START, event);\n      this.scroll.batchStart();\n      this.emitter.emit(Emitter.events.COMPOSITION_START, event);\n      this.isComposing = true;\n    }\n  }\n\n  private handleCompositionEnd(event: CompositionEvent) {\n    this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_END, event);\n    this.scroll.batchEnd();\n    this.emitter.emit(Emitter.events.COMPOSITION_END, event);\n    this.isComposing = false;\n  }\n}\n\nexport default Composition;\n", "import type Quill from '../core.js';\nimport type Clipboard from '../modules/clipboard.js';\nimport type History from '../modules/history.js';\nimport type Keyboard from '../modules/keyboard.js';\nimport type { ToolbarProps } from '../modules/toolbar.js';\nimport type Uploader from '../modules/uploader.js';\n\nexport interface ThemeOptions {\n  modules: Record<string, unknown> & {\n    toolbar?: null | ToolbarProps;\n  };\n}\n\nclass Theme {\n  static DEFAULTS: ThemeOptions = {\n    modules: {},\n  };\n\n  static themes = {\n    default: Theme,\n  };\n\n  modules: ThemeOptions['modules'] = {};\n\n  constructor(\n    protected quill: Quill,\n    protected options: ThemeOptions,\n  ) {}\n\n  init() {\n    Object.keys(this.options.modules).forEach((name) => {\n      if (this.modules[name] == null) {\n        this.addModule(name);\n      }\n    });\n  }\n\n  addModule(name: 'clipboard'): Clipboard;\n  addModule(name: 'keyboard'): Keyboard;\n  addModule(name: 'uploader'): Uploader;\n  addModule(name: 'history'): History;\n  addModule(name: string): unknown;\n  addModule(name: string) {\n    // @ts-expect-error\n    const ModuleClass = this.quill.constructor.import(`modules/${name}`);\n    this.modules[name] = new ModuleClass(\n      this.quill,\n      this.options.modules[name] || {},\n    );\n    return this.modules[name];\n  }\n}\n\nexport interface ThemeConstructor {\n  new (quill: Quill, options: unknown): Theme;\n  DEFAULTS: ThemeOptions;\n}\n\nexport default Theme;\n", "export type Rect = {\n  top: number;\n  right: number;\n  bottom: number;\n  left: number;\n};\n\nconst getParentElement = (element: Node): Element | null =>\n  element.parentElement || (element.getRootNode() as ShadowRoot).host || null;\n\nconst getElementRect = (element: Element): Rect => {\n  const rect = element.getBoundingClientRect();\n  const scaleX =\n    ('offsetWidth' in element &&\n      Math.abs(rect.width) / (element as HTMLElement).offsetWidth) ||\n    1;\n  const scaleY =\n    ('offsetHeight' in element &&\n      Math.abs(rect.height) / (element as HTMLElement).offsetHeight) ||\n    1;\n  return {\n    top: rect.top,\n    right: rect.left + element.clientWidth * scaleX,\n    bottom: rect.top + element.clientHeight * scaleY,\n    left: rect.left,\n  };\n};\n\nconst paddingValueToInt = (value: string) => {\n  const number = parseInt(value, 10);\n  return Number.isNaN(number) ? 0 : number;\n};\n\n// Follow the steps described in https://www.w3.org/TR/cssom-view-1/#element-scrolling-members,\n// assuming that the scroll option is set to 'nearest'.\nconst getScrollDistance = (\n  targetStart: number,\n  targetEnd: number,\n  scrollStart: number,\n  scrollEnd: number,\n  scrollPaddingStart: number,\n  scrollPaddingEnd: number,\n) => {\n  if (targetStart < scrollStart && targetEnd > scrollEnd) {\n    return 0;\n  }\n\n  if (targetStart < scrollStart) {\n    return -(scrollStart - targetStart + scrollPaddingStart);\n  }\n\n  if (targetEnd > scrollEnd) {\n    return targetEnd - targetStart > scrollEnd - scrollStart\n      ? targetStart + scrollPaddingStart - scrollStart\n      : targetEnd - scrollEnd + scrollPaddingEnd;\n  }\n  return 0;\n};\n\nconst scrollRectIntoView = (root: HTMLElement, targetRect: Rect) => {\n  const document = root.ownerDocument;\n\n  let rect = targetRect;\n\n  let current: Element | null = root;\n  while (current) {\n    const isDocumentBody: boolean = current === document.body;\n    const bounding = isDocumentBody\n      ? {\n          top: 0,\n          right:\n            window.visualViewport?.width ??\n            document.documentElement.clientWidth,\n          bottom:\n            window.visualViewport?.height ??\n            document.documentElement.clientHeight,\n          left: 0,\n        }\n      : getElementRect(current);\n\n    const style = getComputedStyle(current);\n    const scrollDistanceX = getScrollDistance(\n      rect.left,\n      rect.right,\n      bounding.left,\n      bounding.right,\n      paddingValueToInt(style.scrollPaddingLeft),\n      paddingValueToInt(style.scrollPaddingRight),\n    );\n    const scrollDistanceY = getScrollDistance(\n      rect.top,\n      rect.bottom,\n      bounding.top,\n      bounding.bottom,\n      paddingValueToInt(style.scrollPaddingTop),\n      paddingValueToInt(style.scrollPaddingBottom),\n    );\n    if (scrollDistanceX || scrollDistanceY) {\n      if (isDocumentBody) {\n        document.defaultView?.scrollBy(scrollDistanceX, scrollDistanceY);\n      } else {\n        const { scrollLeft, scrollTop } = current;\n        if (scrollDistanceY) {\n          current.scrollTop += scrollDistanceY;\n        }\n        if (scrollDistanceX) {\n          current.scrollLeft += scrollDistanceX;\n        }\n        const scrolledLeft = current.scrollLeft - scrollLeft;\n        const scrolledTop = current.scrollTop - scrollTop;\n        rect = {\n          left: rect.left - scrolledLeft,\n          top: rect.top - scrolledTop,\n          right: rect.right - scrolledLeft,\n          bottom: rect.bottom - scrolledTop,\n        };\n      }\n    }\n\n    current =\n      isDocumentBody || style.position === 'fixed'\n        ? null\n        : getParentElement(current);\n  }\n};\n\nexport default scrollRectIntoView;\n", "import { Registry } from 'parchment';\n\nconst MAX_REGISTER_ITERATIONS = 100;\nconst CORE_FORMATS = ['block', 'break', 'cursor', 'inline', 'scroll', 'text'];\n\nconst createRegistryWithFormats = (\n  formats: string[],\n  sourceRegistry: Registry,\n  debug: { error: (errorMessage: string) => void },\n) => {\n  const registry = new Registry();\n  CORE_FORMATS.forEach((name) => {\n    const coreBlot = sourceRegistry.query(name);\n    if (coreBlot) registry.register(coreBlot);\n  });\n\n  formats.forEach((name) => {\n    let format = sourceRegistry.query(name);\n    if (!format) {\n      debug.error(\n        `Cannot register \"${name}\" specified in \"formats\" config. Are you sure it was registered?`,\n      );\n    }\n    let iterations = 0;\n    while (format) {\n      registry.register(format);\n      format = 'blotName' in format ? format.requiredContainer ?? null : null;\n\n      iterations += 1;\n      if (iterations > MAX_REGISTER_ITERATIONS) {\n        debug.error(\n          `Cycle detected in registering blot requiredContainer: \"${name}\"`,\n        );\n        break;\n      }\n    }\n  });\n\n  return registry;\n};\n\nexport default createRegistryWithFormats;\n", "import { ContainerBlot } from 'parchment';\n\nclass Container extends ContainerBlot {}\n\nexport default Container;\n", "import { ContainerBlot, LeafBlot, Scope, ScrollBlot } from 'parchment';\nimport type { Blot, Parent, EmbedBlot, ParentBlot, Registry } from 'parchment';\nimport Delta, { AttributeMap, Op } from 'quill-delta';\nimport Emitter from '../core/emitter.js';\nimport type { EmitterSource } from '../core/emitter.js';\nimport Block, { BlockEmbed, bubbleFormats } from './block.js';\nimport Break from './break.js';\nimport Container from './container.js';\n\ntype RenderBlock =\n  | {\n      type: 'blockEmbed';\n      attributes: AttributeMap;\n      key: string;\n      value: unknown;\n    }\n  | { type: 'block'; attributes: AttributeMap; delta: Delta };\n\nfunction isLine(blot: unknown): blot is Block | BlockEmbed {\n  return blot instanceof Block || blot instanceof BlockEmbed;\n}\n\ninterface UpdatableEmbed {\n  updateContent(change: unknown): void;\n}\n\nfunction isUpdatable(blot: Blot): blot is Blot & UpdatableEmbed {\n  return typeof (blot as unknown as any).updateContent === 'function';\n}\n\nclass Scroll extends ScrollBlot {\n  static blotName = 'scroll';\n  static className = 'ql-editor';\n  static tagName = 'DIV';\n  static defaultChild = Block;\n  static allowedChildren = [Block, BlockEmbed, Container];\n\n  emitter: Emitter;\n  batch: false | MutationRecord[];\n\n  constructor(\n    registry: Registry,\n    domNode: HTMLDivElement,\n    { emitter }: { emitter: Emitter },\n  ) {\n    super(registry, domNode);\n    this.emitter = emitter;\n    this.batch = false;\n    this.optimize();\n    this.enable();\n    this.domNode.addEventListener('dragstart', (e) => this.handleDragStart(e));\n  }\n\n  batchStart() {\n    if (!Array.isArray(this.batch)) {\n      this.batch = [];\n    }\n  }\n\n  batchEnd() {\n    if (!this.batch) return;\n    const mutations = this.batch;\n    this.batch = false;\n    this.update(mutations);\n  }\n\n  emitMount(blot: Blot) {\n    this.emitter.emit(Emitter.events.SCROLL_BLOT_MOUNT, blot);\n  }\n\n  emitUnmount(blot: Blot) {\n    this.emitter.emit(Emitter.events.SCROLL_BLOT_UNMOUNT, blot);\n  }\n\n  emitEmbedUpdate(blot: Blot, change: unknown) {\n    this.emitter.emit(Emitter.events.SCROLL_EMBED_UPDATE, blot, change);\n  }\n\n  deleteAt(index: number, length: number) {\n    const [first, offset] = this.line(index);\n    const [last] = this.line(index + length);\n    super.deleteAt(index, length);\n    if (last != null && first !== last && offset > 0) {\n      if (first instanceof BlockEmbed || last instanceof BlockEmbed) {\n        this.optimize();\n        return;\n      }\n      const ref =\n        last.children.head instanceof Break ? null : last.children.head;\n      // @ts-expect-error\n      first.moveChildren(last, ref);\n      // @ts-expect-error\n      first.remove();\n    }\n    this.optimize();\n  }\n\n  enable(enabled = true) {\n    this.domNode.setAttribute('contenteditable', enabled ? 'true' : 'false');\n  }\n\n  formatAt(index: number, length: number, format: string, value: unknown) {\n    super.formatAt(index, length, format, value);\n    this.optimize();\n  }\n\n  insertAt(index: number, value: string, def?: unknown) {\n    if (index >= this.length()) {\n      if (def == null || this.scroll.query(value, Scope.BLOCK) == null) {\n        const blot = this.scroll.create(this.statics.defaultChild.blotName);\n        this.appendChild(blot);\n        if (def == null && value.endsWith('\\n')) {\n          blot.insertAt(0, value.slice(0, -1), def);\n        } else {\n          blot.insertAt(0, value, def);\n        }\n      } else {\n        const embed = this.scroll.create(value, def);\n        this.appendChild(embed);\n      }\n    } else {\n      super.insertAt(index, value, def);\n    }\n    this.optimize();\n  }\n\n  insertBefore(blot: Blot, ref?: Blot | null) {\n    if (blot.statics.scope === Scope.INLINE_BLOT) {\n      const wrapper = this.scroll.create(\n        this.statics.defaultChild.blotName,\n      ) as Parent;\n      wrapper.appendChild(blot);\n      super.insertBefore(wrapper, ref);\n    } else {\n      super.insertBefore(blot, ref);\n    }\n  }\n\n  insertContents(index: number, delta: Delta) {\n    const renderBlocks = this.deltaToRenderBlocks(\n      delta.concat(new Delta().insert('\\n')),\n    );\n    const last = renderBlocks.pop();\n    if (last == null) return;\n\n    this.batchStart();\n\n    const first = renderBlocks.shift();\n    if (first) {\n      const shouldInsertNewlineChar =\n        first.type === 'block' &&\n        (first.delta.length() === 0 ||\n          (!this.descendant(BlockEmbed, index)[0] && index < this.length()));\n      const delta =\n        first.type === 'block'\n          ? first.delta\n          : new Delta().insert({ [first.key]: first.value });\n      insertInlineContents(this, index, delta);\n      const newlineCharLength = first.type === 'block' ? 1 : 0;\n      const lineEndIndex = index + delta.length() + newlineCharLength;\n      if (shouldInsertNewlineChar) {\n        this.insertAt(lineEndIndex - 1, '\\n');\n      }\n\n      const formats = bubbleFormats(this.line(index)[0]);\n      const attributes = AttributeMap.diff(formats, first.attributes) || {};\n      Object.keys(attributes).forEach((name) => {\n        this.formatAt(lineEndIndex - 1, 1, name, attributes[name]);\n      });\n\n      index = lineEndIndex;\n    }\n\n    let [refBlot, refBlotOffset] = this.children.find(index);\n    if (renderBlocks.length) {\n      if (refBlot) {\n        refBlot = refBlot.split(refBlotOffset);\n        refBlotOffset = 0;\n      }\n\n      renderBlocks.forEach((renderBlock) => {\n        if (renderBlock.type === 'block') {\n          const block = this.createBlock(\n            renderBlock.attributes,\n            refBlot || undefined,\n          );\n          insertInlineContents(block, 0, renderBlock.delta);\n        } else {\n          const blockEmbed = this.create(\n            renderBlock.key,\n            renderBlock.value,\n          ) as EmbedBlot;\n          this.insertBefore(blockEmbed, refBlot || undefined);\n          Object.keys(renderBlock.attributes).forEach((name) => {\n            blockEmbed.format(name, renderBlock.attributes[name]);\n          });\n        }\n      });\n    }\n\n    if (last.type === 'block' && last.delta.length()) {\n      const offset = refBlot\n        ? refBlot.offset(refBlot.scroll) + refBlotOffset\n        : this.length();\n      insertInlineContents(this, offset, last.delta);\n    }\n\n    this.batchEnd();\n    this.optimize();\n  }\n\n  isEnabled() {\n    return this.domNode.getAttribute('contenteditable') === 'true';\n  }\n\n  leaf(index: number): [LeafBlot | null, number] {\n    const last = this.path(index).pop();\n    if (!last) {\n      return [null, -1];\n    }\n\n    const [blot, offset] = last;\n    return blot instanceof LeafBlot ? [blot, offset] : [null, -1];\n  }\n\n  line(index: number): [Block | BlockEmbed | null, number] {\n    if (index === this.length()) {\n      return this.line(index - 1);\n    }\n    // @ts-expect-error TODO: make descendant() generic\n    return this.descendant(isLine, index);\n  }\n\n  lines(index = 0, length = Number.MAX_VALUE): (Block | BlockEmbed)[] {\n    const getLines = (\n      blot: ParentBlot,\n      blotIndex: number,\n      blotLength: number,\n    ) => {\n      let lines: (Block | BlockEmbed)[] = [];\n      let lengthLeft = blotLength;\n      blot.children.forEachAt(\n        blotIndex,\n        blotLength,\n        (child, childIndex, childLength) => {\n          if (isLine(child)) {\n            lines.push(child);\n          } else if (child instanceof ContainerBlot) {\n            lines = lines.concat(getLines(child, childIndex, lengthLeft));\n          }\n          lengthLeft -= childLength;\n        },\n      );\n      return lines;\n    };\n    return getLines(this, index, length);\n  }\n\n  optimize(context?: { [key: string]: any }): void;\n  optimize(\n    mutations?: MutationRecord[],\n    context?: { [key: string]: any },\n  ): void;\n  optimize(mutations = [], context = {}) {\n    if (this.batch) return;\n    super.optimize(mutations, context);\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_OPTIMIZE, mutations, context);\n    }\n  }\n\n  path(index: number) {\n    return super.path(index).slice(1); // Exclude self\n  }\n\n  remove() {\n    // Never remove self\n  }\n\n  update(source?: EmitterSource): void;\n  update(mutations?: MutationRecord[]): void;\n  update(mutations?: MutationRecord[] | EmitterSource): void {\n    if (this.batch) {\n      if (Array.isArray(mutations)) {\n        this.batch = this.batch.concat(mutations);\n      }\n      return;\n    }\n    let source: EmitterSource = Emitter.sources.USER;\n    if (typeof mutations === 'string') {\n      source = mutations;\n    }\n    if (!Array.isArray(mutations)) {\n      mutations = this.observer.takeRecords();\n    }\n    mutations = mutations.filter(({ target }) => {\n      const blot = this.find(target, true);\n      return blot && !isUpdatable(blot);\n    });\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_BEFORE_UPDATE, source, mutations);\n    }\n    super.update(mutations.concat([])); // pass copy\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_UPDATE, source, mutations);\n    }\n  }\n\n  updateEmbedAt(index: number, key: string, change: unknown) {\n    // Currently it only supports top-level embeds (BlockEmbed).\n    // We can update `ParentBlot` in parchment to support inline embeds.\n    const [blot] = this.descendant((b: Blot) => b instanceof BlockEmbed, index);\n    if (blot && blot.statics.blotName === key && isUpdatable(blot)) {\n      blot.updateContent(change);\n    }\n  }\n\n  protected handleDragStart(event: DragEvent) {\n    event.preventDefault();\n  }\n\n  private deltaToRenderBlocks(delta: Delta) {\n    const renderBlocks: RenderBlock[] = [];\n\n    let currentBlockDelta = new Delta();\n    delta.forEach((op) => {\n      const insert = op?.insert;\n      if (!insert) return;\n      if (typeof insert === 'string') {\n        const splitted = insert.split('\\n');\n        splitted.slice(0, -1).forEach((text) => {\n          currentBlockDelta.insert(text, op.attributes);\n          renderBlocks.push({\n            type: 'block',\n            delta: currentBlockDelta,\n            attributes: op.attributes ?? {},\n          });\n          currentBlockDelta = new Delta();\n        });\n        const last = splitted[splitted.length - 1];\n        if (last) {\n          currentBlockDelta.insert(last, op.attributes);\n        }\n      } else {\n        const key = Object.keys(insert)[0];\n        if (!key) return;\n        if (this.query(key, Scope.INLINE)) {\n          currentBlockDelta.push(op);\n        } else {\n          if (currentBlockDelta.length()) {\n            renderBlocks.push({\n              type: 'block',\n              delta: currentBlockDelta,\n              attributes: {},\n            });\n          }\n          currentBlockDelta = new Delta();\n          renderBlocks.push({\n            type: 'blockEmbed',\n            key,\n            value: insert[key],\n            attributes: op.attributes ?? {},\n          });\n        }\n      }\n    });\n\n    if (currentBlockDelta.length()) {\n      renderBlocks.push({\n        type: 'block',\n        delta: currentBlockDelta,\n        attributes: {},\n      });\n    }\n\n    return renderBlocks;\n  }\n\n  private createBlock(attributes: AttributeMap, refBlot?: Blot) {\n    let blotName: string | undefined;\n    const formats: AttributeMap = {};\n\n    Object.entries(attributes).forEach(([key, value]) => {\n      const isBlockBlot = this.query(key, Scope.BLOCK & Scope.BLOT) != null;\n      if (isBlockBlot) {\n        blotName = key;\n      } else {\n        formats[key] = value;\n      }\n    });\n\n    const block = this.create(\n      blotName || this.statics.defaultChild.blotName,\n      blotName ? attributes[blotName] : undefined,\n    ) as ParentBlot;\n\n    this.insertBefore(block, refBlot || undefined);\n\n    const length = block.length();\n    Object.entries(formats).forEach(([key, value]) => {\n      block.formatAt(0, length, key, value);\n    });\n\n    return block;\n  }\n}\n\nfunction insertInlineContents(\n  parent: ParentBlot,\n  index: number,\n  inlineContents: Delta,\n) {\n  inlineContents.reduce((index, op) => {\n    const length = Op.length(op);\n    let attributes = op.attributes || {};\n    if (op.insert != null) {\n      if (typeof op.insert === 'string') {\n        const text = op.insert;\n        parent.insertAt(index, text);\n        const [leaf] = parent.descendant(LeafBlot, index);\n        const formats = bubbleFormats(leaf);\n        attributes = AttributeMap.diff(formats, attributes) || {};\n      } else if (typeof op.insert === 'object') {\n        const key = Object.keys(op.insert)[0]; // There should only be one key\n        if (key == null) return index;\n        parent.insertAt(index, key, op.insert[key]);\n        const isInlineEmbed = parent.scroll.query(key, Scope.INLINE) != null;\n        if (isInlineEmbed) {\n          const [leaf] = parent.descendant(LeafBlot, index);\n          const formats = bubbleFormats(leaf);\n          attributes = AttributeMap.diff(formats, attributes) || {};\n        }\n      }\n    }\n    Object.keys(attributes).forEach((key) => {\n      parent.formatAt(index, length, key, attributes[key]);\n    });\n    return index + length;\n  }, index);\n}\n\nexport default Scroll;\n", "import type { ScrollBlot } from 'parchment';\nimport {\n  Attributor,\n  BlockBlot,\n  ClassAttributor,\n  EmbedBlot,\n  Scope,\n  StyleAttributor,\n} from 'parchment';\nimport Delta from 'quill-delta';\nimport { BlockEmbed } from '../blots/block.js';\nimport type { EmitterSource } from '../core/emitter.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nimport type { Range } from '../core/selection.js';\nimport { AlignAttribute, AlignStyle } from '../formats/align.js';\nimport { BackgroundStyle } from '../formats/background.js';\nimport CodeBlock from '../formats/code.js';\nimport { ColorStyle } from '../formats/color.js';\nimport { DirectionAttribute, DirectionStyle } from '../formats/direction.js';\nimport { FontStyle } from '../formats/font.js';\nimport { SizeStyle } from '../formats/size.js';\nimport { deleteRange } from './keyboard.js';\nimport normalizeExternalHTML from './normalizeExternalHTML/index.js';\n\nconst debug = logger('quill:clipboard');\n\ntype Selector = string | Node['TEXT_NODE'] | Node['ELEMENT_NODE'];\ntype Matcher = (node: Node, delta: Delta, scroll: ScrollBlot) => Delta;\n\nconst CLIPBOARD_CONFIG: [Selector, Matcher][] = [\n  [Node.TEXT_NODE, matchText],\n  [Node.TEXT_NODE, matchNewline],\n  ['br', matchBreak],\n  [Node.ELEMENT_NODE, matchNewline],\n  [Node.ELEMENT_NODE, matchBlot],\n  [Node.ELEMENT_NODE, matchAttributor],\n  [Node.ELEMENT_NODE, matchStyles],\n  ['li', matchIndent],\n  ['ol, ul', matchList],\n  ['pre', matchCodeBlock],\n  ['tr', matchTable],\n  ['b', createMatchAlias('bold')],\n  ['i', createMatchAlias('italic')],\n  ['strike', createMatchAlias('strike')],\n  ['style', matchIgnore],\n];\n\nconst ATTRIBUTE_ATTRIBUTORS = [AlignAttribute, DirectionAttribute].reduce(\n  (memo: Record<string, Attributor>, attr) => {\n    memo[attr.keyName] = attr;\n    return memo;\n  },\n  {},\n);\n\nconst STYLE_ATTRIBUTORS = [\n  AlignStyle,\n  BackgroundStyle,\n  ColorStyle,\n  DirectionStyle,\n  FontStyle,\n  SizeStyle,\n].reduce((memo: Record<string, Attributor>, attr) => {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\n\ninterface ClipboardOptions {\n  matchers: [Selector, Matcher][];\n}\n\nclass Clipboard extends Module<ClipboardOptions> {\n  static DEFAULTS: ClipboardOptions = {\n    matchers: [],\n  };\n\n  matchers: [Selector, Matcher][];\n\n  constructor(quill: Quill, options: Partial<ClipboardOptions>) {\n    super(quill, options);\n    this.quill.root.addEventListener('copy', (e) =>\n      this.onCaptureCopy(e, false),\n    );\n    this.quill.root.addEventListener('cut', (e) => this.onCaptureCopy(e, true));\n    this.quill.root.addEventListener('paste', this.onCapturePaste.bind(this));\n    this.matchers = [];\n    CLIPBOARD_CONFIG.concat(this.options.matchers ?? []).forEach(\n      ([selector, matcher]) => {\n        this.addMatcher(selector, matcher);\n      },\n    );\n  }\n\n  addMatcher(selector: Selector, matcher: Matcher) {\n    this.matchers.push([selector, matcher]);\n  }\n\n  convert(\n    { html, text }: { html?: string; text?: string },\n    formats: Record<string, unknown> = {},\n  ) {\n    if (formats[CodeBlock.blotName]) {\n      return new Delta().insert(text || '', {\n        [CodeBlock.blotName]: formats[CodeBlock.blotName],\n      });\n    }\n    if (!html) {\n      return new Delta().insert(text || '', formats);\n    }\n    const delta = this.convertHTML(html);\n    // Remove trailing newline\n    if (\n      deltaEndsWith(delta, '\\n') &&\n      (delta.ops[delta.ops.length - 1].attributes == null || formats.table)\n    ) {\n      return delta.compose(new Delta().retain(delta.length() - 1).delete(1));\n    }\n    return delta;\n  }\n\n  protected normalizeHTML(doc: Document) {\n    normalizeExternalHTML(doc);\n  }\n\n  protected convertHTML(html: string) {\n    const doc = new DOMParser().parseFromString(html, 'text/html');\n    this.normalizeHTML(doc);\n    const container = doc.body;\n    const nodeMatches = new WeakMap();\n    const [elementMatchers, textMatchers] = this.prepareMatching(\n      container,\n      nodeMatches,\n    );\n    return traverse(\n      this.quill.scroll,\n      container,\n      elementMatchers,\n      textMatchers,\n      nodeMatches,\n    );\n  }\n\n  dangerouslyPasteHTML(html: string, source?: EmitterSource): void;\n  dangerouslyPasteHTML(\n    index: number,\n    html: string,\n    source?: EmitterSource,\n  ): void;\n  dangerouslyPasteHTML(\n    index: number | string,\n    html?: string,\n    source: EmitterSource = Quill.sources.API,\n  ) {\n    if (typeof index === 'string') {\n      const delta = this.convert({ html: index, text: '' });\n      // @ts-expect-error\n      this.quill.setContents(delta, html);\n      this.quill.setSelection(0, Quill.sources.SILENT);\n    } else {\n      const paste = this.convert({ html, text: '' });\n      this.quill.updateContents(\n        new Delta().retain(index).concat(paste),\n        source,\n      );\n      this.quill.setSelection(index + paste.length(), Quill.sources.SILENT);\n    }\n  }\n\n  onCaptureCopy(e: ClipboardEvent, isCut = false) {\n    if (e.defaultPrevented) return;\n    e.preventDefault();\n    const [range] = this.quill.selection.getRange();\n    if (range == null) return;\n    const { html, text } = this.onCopy(range, isCut);\n    e.clipboardData?.setData('text/plain', text);\n    e.clipboardData?.setData('text/html', html);\n    if (isCut) {\n      deleteRange({ range, quill: this.quill });\n    }\n  }\n\n  /*\n   * https://www.iana.org/assignments/media-types/text/uri-list\n   */\n  private normalizeURIList(urlList: string) {\n    return (\n      urlList\n        .split(/\\r?\\n/)\n        // Ignore all comments\n        .filter((url) => url[0] !== '#')\n        .join('\\n')\n    );\n  }\n\n  onCapturePaste(e: ClipboardEvent) {\n    if (e.defaultPrevented || !this.quill.isEnabled()) return;\n    e.preventDefault();\n    const range = this.quill.getSelection(true);\n    if (range == null) return;\n    const html = e.clipboardData?.getData('text/html');\n    let text = e.clipboardData?.getData('text/plain');\n    if (!html && !text) {\n      const urlList = e.clipboardData?.getData('text/uri-list');\n      if (urlList) {\n        text = this.normalizeURIList(urlList);\n      }\n    }\n    const files = Array.from(e.clipboardData?.files || []);\n    if (!html && files.length > 0) {\n      this.quill.uploader.upload(range, files);\n      return;\n    }\n    if (html && files.length > 0) {\n      const doc = new DOMParser().parseFromString(html, 'text/html');\n      if (\n        doc.body.childElementCount === 1 &&\n        doc.body.firstElementChild?.tagName === 'IMG'\n      ) {\n        this.quill.uploader.upload(range, files);\n        return;\n      }\n    }\n    this.onPaste(range, { html, text });\n  }\n\n  onCopy(range: Range, isCut: boolean): { html: string; text: string };\n  onCopy(range: Range) {\n    const text = this.quill.getText(range);\n    const html = this.quill.getSemanticHTML(range);\n    return { html, text };\n  }\n\n  onPaste(range: Range, { text, html }: { text?: string; html?: string }) {\n    const formats = this.quill.getFormat(range.index);\n    const pastedDelta = this.convert({ text, html }, formats);\n    debug.log('onPaste', pastedDelta, { text, html });\n    const delta = new Delta()\n      .retain(range.index)\n      .delete(range.length)\n      .concat(pastedDelta);\n    this.quill.updateContents(delta, Quill.sources.USER);\n    // range.length contributes to delta.length()\n    this.quill.setSelection(\n      delta.length() - range.length,\n      Quill.sources.SILENT,\n    );\n    this.quill.scrollSelectionIntoView();\n  }\n\n  prepareMatching(container: Element, nodeMatches: WeakMap<Node, Matcher[]>) {\n    const elementMatchers: Matcher[] = [];\n    const textMatchers: Matcher[] = [];\n    this.matchers.forEach((pair) => {\n      const [selector, matcher] = pair;\n      switch (selector) {\n        case Node.TEXT_NODE:\n          textMatchers.push(matcher);\n          break;\n        case Node.ELEMENT_NODE:\n          elementMatchers.push(matcher);\n          break;\n        default:\n          Array.from(container.querySelectorAll(selector)).forEach((node) => {\n            if (nodeMatches.has(node)) {\n              const matches = nodeMatches.get(node);\n              matches?.push(matcher);\n            } else {\n              nodeMatches.set(node, [matcher]);\n            }\n          });\n          break;\n      }\n    });\n    return [elementMatchers, textMatchers];\n  }\n}\n\nfunction applyFormat(\n  delta: Delta,\n  format: string,\n  value: unknown,\n  scroll: ScrollBlot,\n): Delta {\n  if (!scroll.query(format)) {\n    return delta;\n  }\n\n  return delta.reduce((newDelta, op) => {\n    if (!op.insert) return newDelta;\n    if (op.attributes && op.attributes[format]) {\n      return newDelta.push(op);\n    }\n    const formats = value ? { [format]: value } : {};\n    return newDelta.insert(op.insert, { ...formats, ...op.attributes });\n  }, new Delta());\n}\n\nfunction deltaEndsWith(delta: Delta, text: string) {\n  let endText = '';\n  for (\n    let i = delta.ops.length - 1;\n    i >= 0 && endText.length < text.length;\n    --i // eslint-disable-line no-plusplus\n  ) {\n    const op = delta.ops[i];\n    if (typeof op.insert !== 'string') break;\n    endText = op.insert + endText;\n  }\n  return endText.slice(-1 * text.length) === text;\n}\n\nfunction isLine(node: Node, scroll: ScrollBlot) {\n  if (!(node instanceof Element)) return false;\n  const match = scroll.query(node);\n  // @ts-expect-error\n  if (match && match.prototype instanceof EmbedBlot) return false;\n\n  return [\n    'address',\n    'article',\n    'blockquote',\n    'canvas',\n    'dd',\n    'div',\n    'dl',\n    'dt',\n    'fieldset',\n    'figcaption',\n    'figure',\n    'footer',\n    'form',\n    'h1',\n    'h2',\n    'h3',\n    'h4',\n    'h5',\n    'h6',\n    'header',\n    'iframe',\n    'li',\n    'main',\n    'nav',\n    'ol',\n    'output',\n    'p',\n    'pre',\n    'section',\n    'table',\n    'td',\n    'tr',\n    'ul',\n    'video',\n  ].includes(node.tagName.toLowerCase());\n}\n\nfunction isBetweenInlineElements(node: HTMLElement, scroll: ScrollBlot) {\n  return (\n    node.previousElementSibling &&\n    node.nextElementSibling &&\n    !isLine(node.previousElementSibling, scroll) &&\n    !isLine(node.nextElementSibling, scroll)\n  );\n}\n\nconst preNodes = new WeakMap();\nfunction isPre(node: Node | null) {\n  if (node == null) return false;\n  if (!preNodes.has(node)) {\n    // @ts-expect-error\n    if (node.tagName === 'PRE') {\n      preNodes.set(node, true);\n    } else {\n      preNodes.set(node, isPre(node.parentNode));\n    }\n  }\n  return preNodes.get(node);\n}\n\nfunction traverse(\n  scroll: ScrollBlot,\n  node: ChildNode,\n  elementMatchers: Matcher[],\n  textMatchers: Matcher[],\n  nodeMatches: WeakMap<Node, Matcher[]>,\n): Delta {\n  // Post-order\n  if (node.nodeType === node.TEXT_NODE) {\n    return textMatchers.reduce((delta: Delta, matcher) => {\n      return matcher(node, delta, scroll);\n    }, new Delta());\n  }\n  if (node.nodeType === node.ELEMENT_NODE) {\n    return Array.from(node.childNodes || []).reduce((delta, childNode) => {\n      let childrenDelta = traverse(\n        scroll,\n        childNode,\n        elementMatchers,\n        textMatchers,\n        nodeMatches,\n      );\n      if (childNode.nodeType === node.ELEMENT_NODE) {\n        childrenDelta = elementMatchers.reduce((reducedDelta, matcher) => {\n          return matcher(childNode as HTMLElement, reducedDelta, scroll);\n        }, childrenDelta);\n        childrenDelta = (nodeMatches.get(childNode) || []).reduce(\n          (reducedDelta, matcher) => {\n            return matcher(childNode, reducedDelta, scroll);\n          },\n          childrenDelta,\n        );\n      }\n      return delta.concat(childrenDelta);\n    }, new Delta());\n  }\n  return new Delta();\n}\n\nfunction createMatchAlias(format: string) {\n  return (_node: Element, delta: Delta, scroll: ScrollBlot) => {\n    return applyFormat(delta, format, true, scroll);\n  };\n}\n\nfunction matchAttributor(node: HTMLElement, delta: Delta, scroll: ScrollBlot) {\n  const attributes = Attributor.keys(node);\n  const classes = ClassAttributor.keys(node);\n  const styles = StyleAttributor.keys(node);\n  const formats: Record<string, string | undefined> = {};\n  attributes\n    .concat(classes)\n    .concat(styles)\n    .forEach((name) => {\n      let attr = scroll.query(name, Scope.ATTRIBUTE) as Attributor;\n      if (attr != null) {\n        formats[attr.attrName] = attr.value(node);\n        if (formats[attr.attrName]) return;\n      }\n      attr = ATTRIBUTE_ATTRIBUTORS[name];\n      if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n        formats[attr.attrName] = attr.value(node) || undefined;\n      }\n      attr = STYLE_ATTRIBUTORS[name];\n      if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n        attr = STYLE_ATTRIBUTORS[name];\n        formats[attr.attrName] = attr.value(node) || undefined;\n      }\n    });\n\n  return Object.entries(formats).reduce(\n    (newDelta, [name, value]) => applyFormat(newDelta, name, value, scroll),\n    delta,\n  );\n}\n\nfunction matchBlot(node: Node, delta: Delta, scroll: ScrollBlot) {\n  const match = scroll.query(node);\n  if (match == null) return delta;\n  // @ts-expect-error\n  if (match.prototype instanceof EmbedBlot) {\n    const embed = {};\n    // @ts-expect-error\n    const value = match.value(node);\n    if (value != null) {\n      // @ts-expect-error\n      embed[match.blotName] = value;\n      // @ts-expect-error\n      return new Delta().insert(embed, match.formats(node, scroll));\n    }\n  } else {\n    // @ts-expect-error\n    if (match.prototype instanceof BlockBlot && !deltaEndsWith(delta, '\\n')) {\n      delta.insert('\\n');\n    }\n    if (\n      'blotName' in match &&\n      'formats' in match &&\n      typeof match.formats === 'function'\n    ) {\n      return applyFormat(\n        delta,\n        match.blotName,\n        match.formats(node, scroll),\n        scroll,\n      );\n    }\n  }\n  return delta;\n}\n\nfunction matchBreak(node: Node, delta: Delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    delta.insert('\\n');\n  }\n  return delta;\n}\n\nfunction matchCodeBlock(node: Node, delta: Delta, scroll: ScrollBlot) {\n  const match = scroll.query('code-block');\n  const language =\n    match && 'formats' in match && typeof match.formats === 'function'\n      ? match.formats(node, scroll)\n      : true;\n  return applyFormat(delta, 'code-block', language, scroll);\n}\n\nfunction matchIgnore() {\n  return new Delta();\n}\n\nfunction matchIndent(node: Node, delta: Delta, scroll: ScrollBlot) {\n  const match = scroll.query(node);\n  if (\n    match == null ||\n    // @ts-expect-error\n    match.blotName !== 'list' ||\n    !deltaEndsWith(delta, '\\n')\n  ) {\n    return delta;\n  }\n  let indent = -1;\n  let parent = node.parentNode;\n  while (parent != null) {\n    // @ts-expect-error\n    if (['OL', 'UL'].includes(parent.tagName)) {\n      indent += 1;\n    }\n    parent = parent.parentNode;\n  }\n  if (indent <= 0) return delta;\n  return delta.reduce((composed, op) => {\n    if (!op.insert) return composed;\n    if (op.attributes && typeof op.attributes.indent === 'number') {\n      return composed.push(op);\n    }\n    return composed.insert(op.insert, { indent, ...(op.attributes || {}) });\n  }, new Delta());\n}\n\nfunction matchList(node: Node, delta: Delta, scroll: ScrollBlot) {\n  const element = node as Element;\n  let list = element.tagName === 'OL' ? 'ordered' : 'bullet';\n\n  const checkedAttr = element.getAttribute('data-checked');\n  if (checkedAttr) {\n    list = checkedAttr === 'true' ? 'checked' : 'unchecked';\n  }\n\n  return applyFormat(delta, 'list', list, scroll);\n}\n\nfunction matchNewline(node: Node, delta: Delta, scroll: ScrollBlot) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    if (\n      isLine(node, scroll) &&\n      (node.childNodes.length > 0 || node instanceof HTMLParagraphElement)\n    ) {\n      return delta.insert('\\n');\n    }\n    if (delta.length() > 0 && node.nextSibling) {\n      let nextSibling: Node | null = node.nextSibling;\n      while (nextSibling != null) {\n        if (isLine(nextSibling, scroll)) {\n          return delta.insert('\\n');\n        }\n        const match = scroll.query(nextSibling);\n        // @ts-expect-error\n        if (match && match.prototype instanceof BlockEmbed) {\n          return delta.insert('\\n');\n        }\n        nextSibling = nextSibling.firstChild;\n      }\n    }\n  }\n  return delta;\n}\n\nfunction matchStyles(node: HTMLElement, delta: Delta, scroll: ScrollBlot) {\n  const formats: Record<string, unknown> = {};\n  const style: Partial<CSSStyleDeclaration> = node.style || {};\n  if (style.fontStyle === 'italic') {\n    formats.italic = true;\n  }\n  if (style.textDecoration === 'underline') {\n    formats.underline = true;\n  }\n  if (style.textDecoration === 'line-through') {\n    formats.strike = true;\n  }\n  if (\n    style.fontWeight?.startsWith('bold') ||\n    // @ts-expect-error Fix me later\n    parseInt(style.fontWeight, 10) >= 700\n  ) {\n    formats.bold = true;\n  }\n  delta = Object.entries(formats).reduce(\n    (newDelta, [name, value]) => applyFormat(newDelta, name, value, scroll),\n    delta,\n  );\n  // @ts-expect-error\n  if (parseFloat(style.textIndent || 0) > 0) {\n    // Could be 0.5in\n    return new Delta().insert('\\t').concat(delta);\n  }\n  return delta;\n}\n\nfunction matchTable(\n  node: HTMLTableRowElement,\n  delta: Delta,\n  scroll: ScrollBlot,\n) {\n  const table =\n    node.parentElement?.tagName === 'TABLE'\n      ? node.parentElement\n      : node.parentElement?.parentElement;\n  if (table != null) {\n    const rows = Array.from(table.querySelectorAll('tr'));\n    const row = rows.indexOf(node) + 1;\n    return applyFormat(delta, 'table', row, scroll);\n  }\n  return delta;\n}\n\nfunction matchText(node: HTMLElement, delta: Delta, scroll: ScrollBlot) {\n  // @ts-expect-error\n  let text = node.data;\n  // Word represents empty line with <o:p>&nbsp;</o:p>\n  if (node.parentElement?.tagName === 'O:P') {\n    return delta.insert(text.trim());\n  }\n  if (!isPre(node)) {\n    if (\n      text.trim().length === 0 &&\n      text.includes('\\n') &&\n      !isBetweenInlineElements(node, scroll)\n    ) {\n      return delta;\n    }\n    const replacer = (collapse: unknown, match: string) => {\n      const replaced = match.replace(/[^\\u00a0]/g, ''); // \\u00a0 is nbsp;\n      return replaced.length < 1 && collapse ? ' ' : replaced;\n    };\n    text = text.replace(/\\r\\n/g, ' ').replace(/\\n/g, ' ');\n    text = text.replace(/\\s\\s+/g, replacer.bind(replacer, true)); // collapse whitespace\n    if (\n      (node.previousSibling == null &&\n        node.parentElement != null &&\n        isLine(node.parentElement, scroll)) ||\n      (node.previousSibling instanceof Element &&\n        isLine(node.previousSibling, scroll))\n    ) {\n      text = text.replace(/^\\s+/, replacer.bind(replacer, false));\n    }\n    if (\n      (node.nextSibling == null &&\n        node.parentElement != null &&\n        isLine(node.parentElement, scroll)) ||\n      (node.nextSibling instanceof Element && isLine(node.nextSibling, scroll))\n    ) {\n      text = text.replace(/\\s+$/, replacer.bind(replacer, false));\n    }\n  }\n  return delta.insert(text);\n}\n\nexport {\n  Clipboard as default,\n  matchAttributor,\n  matchBlot,\n  matchNewline,\n  matchText,\n  traverse,\n};\n", "import { Attributor, ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nconst config = {\n  scope: Scope.BLOCK,\n  whitelist: ['right', 'center', 'justify'],\n};\n\nconst AlignAttribute = new Attributor('align', 'align', config);\nconst AlignClass = new ClassAttributor('align', 'ql-align', config);\nconst AlignStyle = new StyleAttributor('align', 'text-align', config);\n\nexport { AlignAttribute, AlignClass, AlignStyle };\n", "import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nclass ColorAttributor extends StyleAttributor {\n  value(domNode: HTMLElement) {\n    let value = super.value(domNode) as string;\n    if (!value.startsWith('rgb(')) return value;\n    value = value.replace(/^[^\\d]+/, '').replace(/[^\\d]+$/, '');\n    const hex = value\n      .split(',')\n      .map((component) => `00${parseInt(component, 10).toString(16)}`.slice(-2))\n      .join('');\n    return `#${hex}`;\n  }\n}\n\nconst ColorClass = new ClassAttributor('color', 'ql-color', {\n  scope: Scope.INLINE,\n});\nconst ColorStyle = new ColorAttributor('color', 'color', {\n  scope: Scope.INLINE,\n});\n\nexport { ColorAttributor, ColorClass, ColorStyle };\n", "import { ClassAttributor, Scope } from 'parchment';\nimport { ColorAttributor } from './color.js';\n\nconst BackgroundClass = new ClassAttributor('background', 'ql-bg', {\n  scope: Scope.INLINE,\n});\nconst BackgroundStyle = new ColorAttributor('background', 'background-color', {\n  scope: Scope.INLINE,\n});\n\nexport { BackgroundClass, BackgroundStyle };\n", "import Block from '../blots/block.js';\nimport Break from '../blots/break.js';\nimport Cursor from '../blots/cursor.js';\nimport Inline from '../blots/inline.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport Container from '../blots/container.js';\nimport Quill from '../core/quill.js';\n\nclass CodeBlockContainer extends Container {\n  static create(value: string) {\n    const domNode = super.create(value) as Element;\n    domNode.setAttribute('spellcheck', 'false');\n    return domNode;\n  }\n\n  code(index: number, length: number) {\n    return (\n      this.children\n        // @ts-expect-error\n        .map((child) => (child.length() <= 1 ? '' : child.domNode.innerText))\n        .join('\\n')\n        .slice(index, index + length)\n    );\n  }\n\n  html(index: number, length: number) {\n    // `\\n`s are needed in order to support empty lines at the beginning and the end.\n    // https://html.spec.whatwg.org/multipage/syntax.html#element-restrictions\n    return `<pre>\\n${escapeText(this.code(index, length))}\\n</pre>`;\n  }\n}\n\nclass CodeBlock extends Block {\n  static TAB = '  ';\n\n  static register() {\n    Quill.register(CodeBlockContainer);\n  }\n}\n\nclass Code extends Inline {}\nCode.blotName = 'code';\nCode.tagName = 'CODE';\n\nCodeBlock.blotName = 'code-block';\nCodeBlock.className = 'ql-code-block';\nCodeBlock.tagName = 'DIV';\nCodeBlockContainer.blotName = 'code-block-container';\nCodeBlockContainer.className = 'ql-code-block-container';\nCodeBlockContainer.tagName = 'DIV';\n\nCodeBlockContainer.allowedChildren = [CodeBlock];\n\nCodeBlock.allowedChildren = [TextBlot, Break, Cursor];\nCodeBlock.requiredContainer = CodeBlockContainer;\n\nexport { Code, CodeBlockContainer, CodeBlock as default };\n", "import { Attributor, ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nconst config = {\n  scope: Scope.BLOCK,\n  whitelist: ['rtl'],\n};\n\nconst DirectionAttribute = new Attributor('direction', 'dir', config);\nconst DirectionClass = new ClassAttributor('direction', 'ql-direction', config);\nconst DirectionStyle = new StyleAttributor('direction', 'direction', config);\n\nexport { DirectionAttribute, DirectionClass, DirectionStyle };\n", "import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nconst config = {\n  scope: Scope.INLINE,\n  whitelist: ['serif', 'monospace'],\n};\n\nconst FontClass = new ClassAttributor('font', 'ql-font', config);\n\nclass FontStyleAttributor extends StyleAttributor {\n  value(node: HTMLElement) {\n    return super.value(node).replace(/[\"']/g, '');\n  }\n}\n\nconst FontStyle = new FontStyleAttributor('font', 'font-family', config);\n\nexport { FontStyle, FontClass };\n", "import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nconst SizeClass = new ClassAttributor('size', 'ql-size', {\n  scope: Scope.INLINE,\n  whitelist: ['small', 'large', 'huge'],\n});\nconst SizeStyle = new StyleAttributor('size', 'font-size', {\n  scope: Scope.INLINE,\n  whitelist: ['10px', '18px', '32px'],\n});\n\nexport { SizeClass, SizeStyle };\n", "import { cloneDeep, isEqual } from 'lodash-es';\nimport Delta, { AttributeMap } from 'quill-delta';\nimport { EmbedBlot, Scope, TextBlot } from 'parchment';\nimport type { Blot, BlockBlot } from 'parchment';\nimport Quill from '../core/quill.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nimport type { BlockEmbed } from '../blots/block.js';\nimport type { Range } from '../core/selection.js';\n\nconst debug = logger('quill:keyboard');\n\nconst SHORTKEY = /Mac/i.test(navigator.platform) ? 'metaKey' : 'ctrlKey';\n\nexport interface Context {\n  collapsed: boolean;\n  empty: boolean;\n  offset: number;\n  prefix: string;\n  suffix: string;\n  format: Record<string, unknown>;\n  event: KeyboardEvent;\n  line: BlockEmbed | BlockBlot;\n}\n\ninterface BindingObject\n  extends Partial<Omit<Context, 'prefix' | 'suffix' | 'format'>> {\n  key: number | string | string[];\n  shortKey?: boolean | null;\n  shiftKey?: boolean | null;\n  altKey?: boolean | null;\n  metaKey?: boolean | null;\n  ctrlKey?: boolean | null;\n  prefix?: RegExp;\n  suffix?: RegExp;\n  format?: Record<string, unknown> | string[];\n  handler?: (\n    this: { quill: Quill },\n    range: Range,\n    curContext: Context,\n    // eslint-disable-next-line no-use-before-define\n    binding: NormalizedBinding,\n  ) => boolean | void;\n}\n\ntype Binding = BindingObject | string | number;\n\ninterface NormalizedBinding extends Omit<BindingObject, 'key' | 'shortKey'> {\n  key: string | number;\n}\n\ninterface KeyboardOptions {\n  bindings: Record<string, Binding>;\n}\n\ninterface KeyboardOptions {\n  bindings: Record<string, Binding>;\n}\n\nclass Keyboard extends Module<KeyboardOptions> {\n  static DEFAULTS: KeyboardOptions;\n\n  static match(evt: KeyboardEvent, binding: BindingObject) {\n    if (\n      (['altKey', 'ctrlKey', 'metaKey', 'shiftKey'] as const).some((key) => {\n        return !!binding[key] !== evt[key] && binding[key] !== null;\n      })\n    ) {\n      return false;\n    }\n    return binding.key === evt.key || binding.key === evt.which;\n  }\n\n  bindings: Record<string, NormalizedBinding[]>;\n\n  constructor(quill: Quill, options: Partial<KeyboardOptions>) {\n    super(quill, options);\n    this.bindings = {};\n    // @ts-expect-error Fix me later\n    Object.keys(this.options.bindings).forEach((name) => {\n      // @ts-expect-error Fix me later\n      if (this.options.bindings[name]) {\n        // @ts-expect-error Fix me later\n        this.addBinding(this.options.bindings[name]);\n      }\n    });\n    this.addBinding({ key: 'Enter', shiftKey: null }, this.handleEnter);\n    this.addBinding(\n      { key: 'Enter', metaKey: null, ctrlKey: null, altKey: null },\n      () => {},\n    );\n    if (/Firefox/i.test(navigator.userAgent)) {\n      // Need to handle delete and backspace for Firefox in the general case #1171\n      this.addBinding(\n        { key: 'Backspace' },\n        { collapsed: true },\n        this.handleBackspace,\n      );\n      this.addBinding(\n        { key: 'Delete' },\n        { collapsed: true },\n        this.handleDelete,\n      );\n    } else {\n      this.addBinding(\n        { key: 'Backspace' },\n        { collapsed: true, prefix: /^.?$/ },\n        this.handleBackspace,\n      );\n      this.addBinding(\n        { key: 'Delete' },\n        { collapsed: true, suffix: /^.?$/ },\n        this.handleDelete,\n      );\n    }\n    this.addBinding(\n      { key: 'Backspace' },\n      { collapsed: false },\n      this.handleDeleteRange,\n    );\n    this.addBinding(\n      { key: 'Delete' },\n      { collapsed: false },\n      this.handleDeleteRange,\n    );\n    this.addBinding(\n      {\n        key: 'Backspace',\n        altKey: null,\n        ctrlKey: null,\n        metaKey: null,\n        shiftKey: null,\n      },\n      { collapsed: true, offset: 0 },\n      this.handleBackspace,\n    );\n    this.listen();\n  }\n\n  addBinding(\n    keyBinding: Binding,\n    context:\n      | Required<BindingObject['handler']>\n      | Partial<Omit<BindingObject, 'key' | 'handler'>> = {},\n    handler:\n      | Required<BindingObject['handler']>\n      | Partial<Omit<BindingObject, 'key' | 'handler'>> = {},\n  ) {\n    const binding = normalize(keyBinding);\n    if (binding == null) {\n      debug.warn('Attempted to add invalid keyboard binding', binding);\n      return;\n    }\n    if (typeof context === 'function') {\n      context = { handler: context };\n    }\n    if (typeof handler === 'function') {\n      handler = { handler };\n    }\n    const keys = Array.isArray(binding.key) ? binding.key : [binding.key];\n    keys.forEach((key) => {\n      const singleBinding = {\n        ...binding,\n        key,\n        ...context,\n        ...handler,\n      };\n      this.bindings[singleBinding.key] = this.bindings[singleBinding.key] || [];\n      this.bindings[singleBinding.key].push(singleBinding);\n    });\n  }\n\n  listen() {\n    this.quill.root.addEventListener('keydown', (evt) => {\n      if (evt.defaultPrevented || evt.isComposing) return;\n\n      // evt.isComposing is false when pressing Enter/Backspace when composing in Safari\n      // https://bugs.webkit.org/show_bug.cgi?id=165004\n      const isComposing =\n        evt.keyCode === 229 && (evt.key === 'Enter' || evt.key === 'Backspace');\n      if (isComposing) return;\n\n      const bindings = (this.bindings[evt.key] || []).concat(\n        this.bindings[evt.which] || [],\n      );\n      const matches = bindings.filter((binding) =>\n        Keyboard.match(evt, binding),\n      );\n      if (matches.length === 0) return;\n      // @ts-expect-error\n      const blot = Quill.find(evt.target, true);\n      if (blot && blot.scroll !== this.quill.scroll) return;\n      const range = this.quill.getSelection();\n      if (range == null || !this.quill.hasFocus()) return;\n      const [line, offset] = this.quill.getLine(range.index);\n      const [leafStart, offsetStart] = this.quill.getLeaf(range.index);\n      const [leafEnd, offsetEnd] =\n        range.length === 0\n          ? [leafStart, offsetStart]\n          : this.quill.getLeaf(range.index + range.length);\n      const prefixText =\n        leafStart instanceof TextBlot\n          ? leafStart.value().slice(0, offsetStart)\n          : '';\n      const suffixText =\n        leafEnd instanceof TextBlot ? leafEnd.value().slice(offsetEnd) : '';\n      const curContext = {\n        collapsed: range.length === 0,\n        // @ts-expect-error Fix me later\n        empty: range.length === 0 && line.length() <= 1,\n        format: this.quill.getFormat(range),\n        line,\n        offset,\n        prefix: prefixText,\n        suffix: suffixText,\n        event: evt,\n      };\n      const prevented = matches.some((binding) => {\n        if (\n          binding.collapsed != null &&\n          binding.collapsed !== curContext.collapsed\n        ) {\n          return false;\n        }\n        if (binding.empty != null && binding.empty !== curContext.empty) {\n          return false;\n        }\n        if (binding.offset != null && binding.offset !== curContext.offset) {\n          return false;\n        }\n        if (Array.isArray(binding.format)) {\n          // any format is present\n          if (binding.format.every((name) => curContext.format[name] == null)) {\n            return false;\n          }\n        } else if (typeof binding.format === 'object') {\n          // all formats must match\n          if (\n            !Object.keys(binding.format).every((name) => {\n              // @ts-expect-error Fix me later\n              if (binding.format[name] === true)\n                return curContext.format[name] != null;\n              // @ts-expect-error Fix me later\n              if (binding.format[name] === false)\n                return curContext.format[name] == null;\n              // @ts-expect-error Fix me later\n              return isEqual(binding.format[name], curContext.format[name]);\n            })\n          ) {\n            return false;\n          }\n        }\n        if (binding.prefix != null && !binding.prefix.test(curContext.prefix)) {\n          return false;\n        }\n        if (binding.suffix != null && !binding.suffix.test(curContext.suffix)) {\n          return false;\n        }\n        // @ts-expect-error Fix me later\n        return binding.handler.call(this, range, curContext, binding) !== true;\n      });\n      if (prevented) {\n        evt.preventDefault();\n      }\n    });\n  }\n\n  handleBackspace(range: Range, context: Context) {\n    // Check for astral symbols\n    const length = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]$/.test(context.prefix)\n      ? 2\n      : 1;\n    if (range.index === 0 || this.quill.getLength() <= 1) return;\n    let formats = {};\n    const [line] = this.quill.getLine(range.index);\n    let delta = new Delta().retain(range.index - length).delete(length);\n    if (context.offset === 0) {\n      // Always deleting newline here, length always 1\n      const [prev] = this.quill.getLine(range.index - 1);\n      if (prev) {\n        const isPrevLineEmpty =\n          prev.statics.blotName === 'block' && prev.length() <= 1;\n        if (!isPrevLineEmpty) {\n          // @ts-expect-error Fix me later\n          const curFormats = line.formats();\n          const prevFormats = this.quill.getFormat(range.index - 1, 1);\n          formats = AttributeMap.diff(curFormats, prevFormats) || {};\n          if (Object.keys(formats).length > 0) {\n            // line.length() - 1 targets \\n in line, another -1 for newline being deleted\n            const formatDelta = new Delta()\n              // @ts-expect-error Fix me later\n              .retain(range.index + line.length() - 2)\n              .retain(1, formats);\n            delta = delta.compose(formatDelta);\n          }\n        }\n      }\n    }\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.focus();\n  }\n\n  handleDelete(range: Range, context: Context) {\n    // Check for astral symbols\n    const length = /^[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/.test(context.suffix)\n      ? 2\n      : 1;\n    if (range.index >= this.quill.getLength() - length) return;\n    let formats = {};\n    const [line] = this.quill.getLine(range.index);\n    let delta = new Delta().retain(range.index).delete(length);\n    // @ts-expect-error Fix me later\n    if (context.offset >= line.length() - 1) {\n      const [next] = this.quill.getLine(range.index + 1);\n      if (next) {\n        // @ts-expect-error Fix me later\n        const curFormats = line.formats();\n        const nextFormats = this.quill.getFormat(range.index, 1);\n        formats = AttributeMap.diff(curFormats, nextFormats) || {};\n        if (Object.keys(formats).length > 0) {\n          delta = delta.retain(next.length() - 1).retain(1, formats);\n        }\n      }\n    }\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.focus();\n  }\n\n  handleDeleteRange(range: Range) {\n    deleteRange({ range, quill: this.quill });\n    this.quill.focus();\n  }\n\n  handleEnter(range: Range, context: Context) {\n    const lineFormats = Object.keys(context.format).reduce(\n      (formats: Record<string, unknown>, format) => {\n        if (\n          this.quill.scroll.query(format, Scope.BLOCK) &&\n          !Array.isArray(context.format[format])\n        ) {\n          formats[format] = context.format[format];\n        }\n        return formats;\n      },\n      {},\n    );\n    const delta = new Delta()\n      .retain(range.index)\n      .delete(range.length)\n      .insert('\\n', lineFormats);\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n    this.quill.focus();\n  }\n}\n\nconst defaultOptions: KeyboardOptions = {\n  bindings: {\n    bold: makeFormatHandler('bold'),\n    italic: makeFormatHandler('italic'),\n    underline: makeFormatHandler('underline'),\n    indent: {\n      // highlight tab or tab at beginning of list, indent or blockquote\n      key: 'Tab',\n      format: ['blockquote', 'indent', 'list'],\n      handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '+1', Quill.sources.USER);\n        return false;\n      },\n    },\n    outdent: {\n      key: 'Tab',\n      shiftKey: true,\n      format: ['blockquote', 'indent', 'list'],\n      // highlight tab or tab at beginning of list, indent or blockquote\n      handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '-1', Quill.sources.USER);\n        return false;\n      },\n    },\n    'outdent backspace': {\n      key: 'Backspace',\n      collapsed: true,\n      shiftKey: null,\n      metaKey: null,\n      ctrlKey: null,\n      altKey: null,\n      format: ['indent', 'list'],\n      offset: 0,\n      handler(range, context) {\n        if (context.format.indent != null) {\n          this.quill.format('indent', '-1', Quill.sources.USER);\n        } else if (context.format.list != null) {\n          this.quill.format('list', false, Quill.sources.USER);\n        }\n      },\n    },\n    'indent code-block': makeCodeBlockHandler(true),\n    'outdent code-block': makeCodeBlockHandler(false),\n    'remove tab': {\n      key: 'Tab',\n      shiftKey: true,\n      collapsed: true,\n      prefix: /\\t$/,\n      handler(range) {\n        this.quill.deleteText(range.index - 1, 1, Quill.sources.USER);\n      },\n    },\n    tab: {\n      key: 'Tab',\n      handler(range, context) {\n        if (context.format.table) return true;\n        this.quill.history.cutoff();\n        const delta = new Delta()\n          .retain(range.index)\n          .delete(range.length)\n          .insert('\\t');\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        return false;\n      },\n    },\n    'blockquote empty enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['blockquote'],\n      empty: true,\n      handler() {\n        this.quill.format('blockquote', false, Quill.sources.USER);\n      },\n    },\n    'list empty enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['list'],\n      empty: true,\n      handler(range, context) {\n        const formats: Record<string, unknown> = { list: false };\n        if (context.format.indent) {\n          formats.indent = false;\n        }\n        this.quill.formatLine(\n          range.index,\n          range.length,\n          formats,\n          Quill.sources.USER,\n        );\n      },\n    },\n    'checklist enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: { list: 'checked' },\n      handler(range) {\n        const [line, offset] = this.quill.getLine(range.index);\n        const formats = {\n          // @ts-expect-error Fix me later\n          ...line.formats(),\n          list: 'checked',\n        };\n        const delta = new Delta()\n          .retain(range.index)\n          .insert('\\n', formats)\n          // @ts-expect-error Fix me later\n          .retain(line.length() - offset - 1)\n          .retain(1, { list: 'unchecked' });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollSelectionIntoView();\n      },\n    },\n    'header enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['header'],\n      suffix: /^$/,\n      handler(range, context) {\n        const [line, offset] = this.quill.getLine(range.index);\n        const delta = new Delta()\n          .retain(range.index)\n          .insert('\\n', context.format)\n          // @ts-expect-error Fix me later\n          .retain(line.length() - offset - 1)\n          .retain(1, { header: null });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollSelectionIntoView();\n      },\n    },\n    'table backspace': {\n      key: 'Backspace',\n      format: ['table'],\n      collapsed: true,\n      offset: 0,\n      handler() {},\n    },\n    'table delete': {\n      key: 'Delete',\n      format: ['table'],\n      collapsed: true,\n      suffix: /^$/,\n      handler() {},\n    },\n    'table enter': {\n      key: 'Enter',\n      shiftKey: null,\n      format: ['table'],\n      handler(range) {\n        const module = this.quill.getModule('table');\n        if (module) {\n          // @ts-expect-error\n          const [table, row, cell, offset] = module.getTable(range);\n          const shift = tableSide(table, row, cell, offset);\n          if (shift == null) return;\n          let index = table.offset();\n          if (shift < 0) {\n            const delta = new Delta().retain(index).insert('\\n');\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(\n              range.index + 1,\n              range.length,\n              Quill.sources.SILENT,\n            );\n          } else if (shift > 0) {\n            index += table.length();\n            const delta = new Delta().retain(index).insert('\\n');\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(index, Quill.sources.USER);\n          }\n        }\n      },\n    },\n    'table tab': {\n      key: 'Tab',\n      shiftKey: null,\n      format: ['table'],\n      handler(range, context) {\n        const { event, line: cell } = context;\n        const offset = cell.offset(this.quill.scroll);\n        if (event.shiftKey) {\n          this.quill.setSelection(offset - 1, Quill.sources.USER);\n        } else {\n          this.quill.setSelection(offset + cell.length(), Quill.sources.USER);\n        }\n      },\n    },\n    'list autofill': {\n      key: ' ',\n      shiftKey: null,\n      collapsed: true,\n      format: {\n        'code-block': false,\n        blockquote: false,\n        table: false,\n      },\n      prefix: /^\\s*?(\\d+\\.|-|\\*|\\[ ?\\]|\\[x\\])$/,\n      handler(range, context) {\n        if (this.quill.scroll.query('list') == null) return true;\n        const { length } = context.prefix;\n        const [line, offset] = this.quill.getLine(range.index);\n        if (offset > length) return true;\n        let value;\n        switch (context.prefix.trim()) {\n          case '[]':\n          case '[ ]':\n            value = 'unchecked';\n            break;\n          case '[x]':\n            value = 'checked';\n            break;\n          case '-':\n          case '*':\n            value = 'bullet';\n            break;\n          default:\n            value = 'ordered';\n        }\n        this.quill.insertText(range.index, ' ', Quill.sources.USER);\n        this.quill.history.cutoff();\n        const delta = new Delta()\n          .retain(range.index - offset)\n          .delete(length + 1)\n          // @ts-expect-error Fix me later\n          .retain(line.length() - 2 - offset)\n          .retain(1, { list: value });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index - length, Quill.sources.SILENT);\n        return false;\n      },\n    },\n    'code exit': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['code-block'],\n      prefix: /^$/,\n      suffix: /^\\s*$/,\n      handler(range) {\n        const [line, offset] = this.quill.getLine(range.index);\n        let numLines = 2;\n        let cur = line;\n        while (\n          cur != null &&\n          cur.length() <= 1 &&\n          cur.formats()['code-block']\n        ) {\n          // @ts-expect-error\n          cur = cur.prev;\n          numLines -= 1;\n          // Requisite prev lines are empty\n          if (numLines <= 0) {\n            const delta = new Delta()\n              // @ts-expect-error Fix me later\n              .retain(range.index + line.length() - offset - 2)\n              .retain(1, { 'code-block': null })\n              .delete(1);\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(range.index - 1, Quill.sources.SILENT);\n            return false;\n          }\n        }\n        return true;\n      },\n    },\n    'embed left': makeEmbedArrowHandler('ArrowLeft', false),\n    'embed left shift': makeEmbedArrowHandler('ArrowLeft', true),\n    'embed right': makeEmbedArrowHandler('ArrowRight', false),\n    'embed right shift': makeEmbedArrowHandler('ArrowRight', true),\n    'table down': makeTableArrowHandler(false),\n    'table up': makeTableArrowHandler(true),\n  },\n};\n\nKeyboard.DEFAULTS = defaultOptions;\n\nfunction makeCodeBlockHandler(indent: boolean): BindingObject {\n  return {\n    key: 'Tab',\n    shiftKey: !indent,\n    format: { 'code-block': true },\n    handler(range, { event }) {\n      const CodeBlock = this.quill.scroll.query('code-block');\n      // @ts-expect-error\n      const { TAB } = CodeBlock;\n      if (range.length === 0 && !event.shiftKey) {\n        this.quill.insertText(range.index, TAB, Quill.sources.USER);\n        this.quill.setSelection(range.index + TAB.length, Quill.sources.SILENT);\n        return;\n      }\n\n      const lines =\n        range.length === 0\n          ? this.quill.getLines(range.index, 1)\n          : this.quill.getLines(range);\n      let { index, length } = range;\n      lines.forEach((line, i) => {\n        if (indent) {\n          line.insertAt(0, TAB);\n          if (i === 0) {\n            index += TAB.length;\n          } else {\n            length += TAB.length;\n          }\n          // @ts-expect-error Fix me later\n        } else if (line.domNode.textContent.startsWith(TAB)) {\n          line.deleteAt(0, TAB.length);\n          if (i === 0) {\n            index -= TAB.length;\n          } else {\n            length -= TAB.length;\n          }\n        }\n      });\n      this.quill.update(Quill.sources.USER);\n      this.quill.setSelection(index, length, Quill.sources.SILENT);\n    },\n  };\n}\n\nfunction makeEmbedArrowHandler(\n  key: string,\n  shiftKey: boolean | null,\n): BindingObject {\n  const where = key === 'ArrowLeft' ? 'prefix' : 'suffix';\n  return {\n    key,\n    shiftKey,\n    altKey: null,\n    [where]: /^$/,\n    handler(range) {\n      let { index } = range;\n      if (key === 'ArrowRight') {\n        index += range.length + 1;\n      }\n      const [leaf] = this.quill.getLeaf(index);\n      if (!(leaf instanceof EmbedBlot)) return true;\n      if (key === 'ArrowLeft') {\n        if (shiftKey) {\n          this.quill.setSelection(\n            range.index - 1,\n            range.length + 1,\n            Quill.sources.USER,\n          );\n        } else {\n          this.quill.setSelection(range.index - 1, Quill.sources.USER);\n        }\n      } else if (shiftKey) {\n        this.quill.setSelection(\n          range.index,\n          range.length + 1,\n          Quill.sources.USER,\n        );\n      } else {\n        this.quill.setSelection(\n          range.index + range.length + 1,\n          Quill.sources.USER,\n        );\n      }\n      return false;\n    },\n  };\n}\n\nfunction makeFormatHandler(format: string): BindingObject {\n  return {\n    key: format[0],\n    shortKey: true,\n    handler(range, context) {\n      this.quill.format(format, !context.format[format], Quill.sources.USER);\n    },\n  };\n}\n\nfunction makeTableArrowHandler(up: boolean): BindingObject {\n  return {\n    key: up ? 'ArrowUp' : 'ArrowDown',\n    collapsed: true,\n    format: ['table'],\n    handler(range, context) {\n      // TODO move to table module\n      const key = up ? 'prev' : 'next';\n      const cell = context.line;\n      const targetRow = cell.parent[key];\n      if (targetRow != null) {\n        if (targetRow.statics.blotName === 'table-row') {\n          // @ts-expect-error\n          let targetCell = targetRow.children.head;\n          let cur = cell;\n          while (cur.prev != null) {\n            // @ts-expect-error\n            cur = cur.prev;\n            targetCell = targetCell.next;\n          }\n          const index =\n            targetCell.offset(this.quill.scroll) +\n            Math.min(context.offset, targetCell.length() - 1);\n          this.quill.setSelection(index, 0, Quill.sources.USER);\n        }\n      } else {\n        // @ts-expect-error\n        const targetLine = cell.table()[key];\n        if (targetLine != null) {\n          if (up) {\n            this.quill.setSelection(\n              targetLine.offset(this.quill.scroll) + targetLine.length() - 1,\n              0,\n              Quill.sources.USER,\n            );\n          } else {\n            this.quill.setSelection(\n              targetLine.offset(this.quill.scroll),\n              0,\n              Quill.sources.USER,\n            );\n          }\n        }\n      }\n      return false;\n    },\n  };\n}\n\nfunction normalize(binding: Binding): BindingObject | null {\n  if (typeof binding === 'string' || typeof binding === 'number') {\n    binding = { key: binding };\n  } else if (typeof binding === 'object') {\n    binding = cloneDeep(binding);\n  } else {\n    return null;\n  }\n  if (binding.shortKey) {\n    binding[SHORTKEY] = binding.shortKey;\n    delete binding.shortKey;\n  }\n  return binding;\n}\n\n// TODO: Move into quill.ts or editor.ts\nfunction deleteRange({ quill, range }: { quill: Quill; range: Range }) {\n  const lines = quill.getLines(range);\n  let formats = {};\n  if (lines.length > 1) {\n    const firstFormats = lines[0].formats();\n    const lastFormats = lines[lines.length - 1].formats();\n    formats = AttributeMap.diff(lastFormats, firstFormats) || {};\n  }\n  quill.deleteText(range, Quill.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    quill.formatLine(range.index, 1, formats, Quill.sources.USER);\n  }\n  quill.setSelection(range.index, Quill.sources.SILENT);\n}\n\nfunction tableSide(_table: unknown, row: Blot, cell: Blot, offset: number) {\n  if (row.prev == null && row.next == null) {\n    if (cell.prev == null && cell.next == null) {\n      return offset === 0 ? -1 : 1;\n    }\n    return cell.prev == null ? -1 : 1;\n  }\n  if (row.prev == null) {\n    return -1;\n  }\n  if (row.next == null) {\n    return 1;\n  }\n  return null;\n}\n\nexport { Keyboard as default, SHORTKEY, normalize, deleteRange };\n", "const normalWeightRegexp = /font-weight:\\s*normal/;\nconst blockTagNames = ['P', 'OL', 'UL'];\n\nconst isBlockElement = (element: Element | null) => {\n  return element && blockTagNames.includes(element.tagName);\n};\n\nconst normalizeEmptyLines = (doc: Document) => {\n  Array.from(doc.querySelectorAll('br'))\n    .filter(\n      (br) =>\n        isBlockElement(br.previousElementSibling) &&\n        isBlockElement(br.nextElementSibling),\n    )\n    .forEach((br) => {\n      br.parentNode?.removeChild(br);\n    });\n};\n\nconst normalizeFontWeight = (doc: Document) => {\n  Array.from(doc.querySelectorAll('b[style*=\"font-weight\"]'))\n    .filter((node) => node.getAttribute('style')?.match(normalWeightRegexp))\n    .forEach((node) => {\n      const fragment = doc.createDocumentFragment();\n      fragment.append(...node.childNodes);\n      node.parentNode?.replaceChild(fragment, node);\n    });\n};\n\nexport default function normalize(doc: Document) {\n  if (doc.querySelector('[id^=\"docs-internal-guid-\"]')) {\n    normalizeFontWeight(doc);\n    normalizeEmptyLines(doc);\n  }\n}\n", "const ignoreRegexp = /\\bmso-list:[^;]*ignore/i;\nconst idRegexp = /\\bmso-list:[^;]*\\bl(\\d+)/i;\nconst indentRegexp = /\\bmso-list:[^;]*\\blevel(\\d+)/i;\n\nconst parseListItem = (element: Element, html: string) => {\n  const style = element.getAttribute('style');\n  const idMatch = style?.match(idRegexp);\n  if (!idMatch) {\n    return null;\n  }\n  const id = Number(idMatch[1]);\n\n  const indentMatch = style?.match(indentRegexp);\n  const indent = indentMatch ? Number(indentMatch[1]) : 1;\n\n  const typeRegexp = new RegExp(\n    `@list l${id}:level${indent}\\\\s*\\\\{[^\\\\}]*mso-level-number-format:\\\\s*([\\\\w-]+)`,\n    'i',\n  );\n  const typeMatch = html.match(typeRegexp);\n  const type = typeMatch && typeMatch[1] === 'bullet' ? 'bullet' : 'ordered';\n\n  return { id, indent, type, element };\n};\n\n// list items are represented as `p` tags with styles like `mso-list: l0 level1` where:\n// 1. \"0\" in \"l0\" means the list item id;\n// 2. \"1\" in \"level1\" means the indent level, starting from 1.\nconst normalizeListItem = (doc: Document) => {\n  const msoList = Array.from(doc.querySelectorAll('[style*=mso-list]'));\n  const ignored: Element[] = [];\n  const others: Element[] = [];\n  msoList.forEach((node) => {\n    const shouldIgnore = (node.getAttribute('style') || '').match(ignoreRegexp);\n    if (shouldIgnore) {\n      ignored.push(node);\n    } else {\n      others.push(node);\n    }\n  });\n\n  // Each list item contains a marker wrapped with \"mso-list: Ignore\".\n  ignored.forEach((node) => node.parentNode?.removeChild(node));\n\n  // The list stype is not defined inline with the tag, instead, it's in the\n  // style tag so we need to pass the html as a string.\n  const html = doc.documentElement.innerHTML;\n  const listItems = others\n    .map((element) => parseListItem(element, html))\n    .filter((parsed) => parsed);\n\n  while (listItems.length) {\n    const childListItems = [];\n\n    let current = listItems.shift();\n    // Group continuous items into the same group (aka \"ul\")\n    while (current) {\n      childListItems.push(current);\n      current =\n        listItems.length &&\n        listItems[0]?.element === current.element.nextElementSibling &&\n        // Different id means the next item doesn't belong to this group.\n        listItems[0].id === current.id\n          ? listItems.shift()\n          : null;\n    }\n\n    const ul = document.createElement('ul');\n    childListItems.forEach((listItem) => {\n      const li = document.createElement('li');\n      li.setAttribute('data-list', listItem.type);\n      if (listItem.indent > 1) {\n        li.setAttribute('class', `ql-indent-${listItem.indent - 1}`);\n      }\n      li.innerHTML = listItem.element.innerHTML;\n      ul.appendChild(li);\n    });\n\n    const element = childListItems[0]?.element;\n    const { parentNode } = element ?? {};\n    if (element) {\n      parentNode?.replaceChild(ul, element);\n    }\n    childListItems.slice(1).forEach(({ element: e }) => {\n      parentNode?.removeChild(e);\n    });\n  }\n};\n\nexport default function normalize(doc: Document) {\n  if (\n    doc.documentElement.getAttribute('xmlns:w') ===\n    'urn:schemas-microsoft-com:office:word'\n  ) {\n    normalizeListItem(doc);\n  }\n}\n", "import googleDocs from './normalizers/googleDocs.js';\nimport msWord from './normalizers/msWord.js';\n\nconst NORMALIZERS = [msWord, googleDocs];\n\nconst normalizeExternalHTML = (doc: Document) => {\n  if (doc.documentElement) {\n    NORMALIZERS.forEach((normalize) => {\n      normalize(doc);\n    });\n  }\n};\n\nexport default normalizeExternalHTML;\n", "import { Scope } from 'parchment';\nimport type Delta from 'quill-delta';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nimport type Scroll from '../blots/scroll.js';\nimport type { Range } from '../core/selection.js';\n\nexport interface HistoryOptions {\n  userOnly: boolean;\n  delay: number;\n  maxStack: number;\n}\n\nexport interface StackItem {\n  delta: Delta;\n  range: Range | null;\n}\n\ninterface Stack {\n  undo: StackItem[];\n  redo: StackItem[];\n}\n\nclass History extends Module<HistoryOptions> {\n  static DEFAULTS: HistoryOptions = {\n    delay: 1000,\n    maxStack: 100,\n    userOnly: false,\n  };\n\n  lastRecorded = 0;\n  ignoreChange = false;\n  stack: Stack = { undo: [], redo: [] };\n  currentRange: Range | null = null;\n\n  constructor(quill: Quill, options: Partial<HistoryOptions>) {\n    super(quill, options);\n    this.quill.on(\n      Quill.events.EDITOR_CHANGE,\n      (eventName, value, oldValue, source) => {\n        if (eventName === Quill.events.SELECTION_CHANGE) {\n          if (value && source !== Quill.sources.SILENT) {\n            this.currentRange = value;\n          }\n        } else if (eventName === Quill.events.TEXT_CHANGE) {\n          if (!this.ignoreChange) {\n            if (!this.options.userOnly || source === Quill.sources.USER) {\n              this.record(value, oldValue);\n            } else {\n              this.transform(value);\n            }\n          }\n\n          this.currentRange = transformRange(this.currentRange, value);\n        }\n      },\n    );\n\n    this.quill.keyboard.addBinding(\n      { key: 'z', shortKey: true },\n      this.undo.bind(this),\n    );\n    this.quill.keyboard.addBinding(\n      { key: ['z', 'Z'], shortKey: true, shiftKey: true },\n      this.redo.bind(this),\n    );\n    if (/Win/i.test(navigator.platform)) {\n      this.quill.keyboard.addBinding(\n        { key: 'y', shortKey: true },\n        this.redo.bind(this),\n      );\n    }\n\n    this.quill.root.addEventListener('beforeinput', (event) => {\n      if (event.inputType === 'historyUndo') {\n        this.undo();\n        event.preventDefault();\n      } else if (event.inputType === 'historyRedo') {\n        this.redo();\n        event.preventDefault();\n      }\n    });\n  }\n\n  change(source: 'undo' | 'redo', dest: 'redo' | 'undo') {\n    if (this.stack[source].length === 0) return;\n    const item = this.stack[source].pop();\n    if (!item) return;\n    const base = this.quill.getContents();\n    const inverseDelta = item.delta.invert(base);\n    this.stack[dest].push({\n      delta: inverseDelta,\n      range: transformRange(item.range, inverseDelta),\n    });\n    this.lastRecorded = 0;\n    this.ignoreChange = true;\n    this.quill.updateContents(item.delta, Quill.sources.USER);\n    this.ignoreChange = false;\n\n    this.restoreSelection(item);\n  }\n\n  clear() {\n    this.stack = { undo: [], redo: [] };\n  }\n\n  cutoff() {\n    this.lastRecorded = 0;\n  }\n\n  record(changeDelta: Delta, oldDelta: Delta) {\n    if (changeDelta.ops.length === 0) return;\n    this.stack.redo = [];\n    let undoDelta = changeDelta.invert(oldDelta);\n    let undoRange = this.currentRange;\n    const timestamp = Date.now();\n    if (\n      // @ts-expect-error Fix me later\n      this.lastRecorded + this.options.delay > timestamp &&\n      this.stack.undo.length > 0\n    ) {\n      const item = this.stack.undo.pop();\n      if (item) {\n        undoDelta = undoDelta.compose(item.delta);\n        undoRange = item.range;\n      }\n    } else {\n      this.lastRecorded = timestamp;\n    }\n    if (undoDelta.length() === 0) return;\n    this.stack.undo.push({ delta: undoDelta, range: undoRange });\n    // @ts-expect-error Fix me later\n    if (this.stack.undo.length > this.options.maxStack) {\n      this.stack.undo.shift();\n    }\n  }\n\n  redo() {\n    this.change('redo', 'undo');\n  }\n\n  transform(delta: Delta) {\n    transformStack(this.stack.undo, delta);\n    transformStack(this.stack.redo, delta);\n  }\n\n  undo() {\n    this.change('undo', 'redo');\n  }\n\n  protected restoreSelection(stackItem: StackItem) {\n    if (stackItem.range) {\n      this.quill.setSelection(stackItem.range, Quill.sources.USER);\n    } else {\n      const index = getLastChangeIndex(this.quill.scroll, stackItem.delta);\n      this.quill.setSelection(index, Quill.sources.USER);\n    }\n  }\n}\n\nfunction transformStack(stack: StackItem[], delta: Delta) {\n  let remoteDelta = delta;\n  for (let i = stack.length - 1; i >= 0; i -= 1) {\n    const oldItem = stack[i];\n    stack[i] = {\n      delta: remoteDelta.transform(oldItem.delta, true),\n      range: oldItem.range && transformRange(oldItem.range, remoteDelta),\n    };\n    remoteDelta = oldItem.delta.transform(remoteDelta);\n    if (stack[i].delta.length() === 0) {\n      stack.splice(i, 1);\n    }\n  }\n}\n\nfunction endsWithNewlineChange(scroll: Scroll, delta: Delta) {\n  const lastOp = delta.ops[delta.ops.length - 1];\n  if (lastOp == null) return false;\n  if (lastOp.insert != null) {\n    return typeof lastOp.insert === 'string' && lastOp.insert.endsWith('\\n');\n  }\n  if (lastOp.attributes != null) {\n    return Object.keys(lastOp.attributes).some((attr) => {\n      return scroll.query(attr, Scope.BLOCK) != null;\n    });\n  }\n  return false;\n}\n\nfunction getLastChangeIndex(scroll: Scroll, delta: Delta) {\n  const deleteLength = delta.reduce((length, op) => {\n    return length + (op.delete || 0);\n  }, 0);\n  let changeIndex = delta.length() - deleteLength;\n  if (endsWithNewlineChange(scroll, delta)) {\n    changeIndex -= 1;\n  }\n  return changeIndex;\n}\n\nfunction transformRange(range: Range | null, delta: Delta) {\n  if (!range) return range;\n  const start = delta.transformPosition(range.index);\n  const end = delta.transformPosition(range.index + range.length);\n  return { index: start, length: end - start };\n}\n\nexport { History as default, getLastChangeIndex };\n", "import Delta from 'quill-delta';\nimport type Quill from '../core/quill.js';\nimport Emitter from '../core/emitter.js';\nimport Module from '../core/module.js';\nimport type { Range } from '../core/selection.js';\n\ninterface UploaderOptions {\n  mimetypes: string[];\n  handler: (this: { quill: Quill }, range: Range, files: File[]) => void;\n}\n\nclass Uploader extends Module<UploaderOptions> {\n  static DEFAULTS: UploaderOptions;\n\n  constructor(quill: Quill, options: Partial<UploaderOptions>) {\n    super(quill, options);\n    quill.root.addEventListener('drop', (e) => {\n      e.preventDefault();\n      let native: ReturnType<typeof document.createRange> | null = null;\n      if (document.caretRangeFromPoint) {\n        native = document.caretRangeFromPoint(e.clientX, e.clientY);\n        // @ts-expect-error\n      } else if (document.caretPositionFromPoint) {\n        // @ts-expect-error\n        const position = document.caretPositionFromPoint(e.clientX, e.clientY);\n        native = document.createRange();\n        native.setStart(position.offsetNode, position.offset);\n        native.setEnd(position.offsetNode, position.offset);\n      }\n\n      const normalized = native && quill.selection.normalizeNative(native);\n      if (normalized) {\n        const range = quill.selection.normalizedToRange(normalized);\n        if (e.dataTransfer?.files) {\n          this.upload(range, e.dataTransfer.files);\n        }\n      }\n    });\n  }\n\n  upload(range: Range, files: FileList | File[]) {\n    const uploads: File[] = [];\n    Array.from(files).forEach((file) => {\n      if (file && this.options.mimetypes?.includes(file.type)) {\n        uploads.push(file);\n      }\n    });\n    if (uploads.length > 0) {\n      // @ts-expect-error Fix me later\n      this.options.handler.call(this, range, uploads);\n    }\n  }\n}\n\nUploader.DEFAULTS = {\n  mimetypes: ['image/png', 'image/jpeg'],\n  handler(range: Range, files: File[]) {\n    if (!this.quill.scroll.query('image')) {\n      return;\n    }\n    const promises = files.map<Promise<string>>((file) => {\n      return new Promise((resolve) => {\n        const reader = new FileReader();\n        reader.onload = () => {\n          resolve(reader.result as string);\n        };\n        reader.readAsDataURL(file);\n      });\n    });\n    Promise.all(promises).then((images) => {\n      const update = images.reduce((delta: Delta, image) => {\n        return delta.insert({ image });\n      }, new Delta().retain(range.index).delete(range.length)) as Delta;\n      this.quill.updateContents(update, Emitter.sources.USER);\n      this.quill.setSelection(\n        range.index + images.length,\n        Emitter.sources.SILENT,\n      );\n    });\n  },\n};\n\nexport default Uploader;\n", "import Quill, { Parchment, Range } from './core/quill.js';\nimport type {\n  Bounds,\n  DebugLevel,\n  EmitterSource,\n  ExpandedQuillOptions,\n  QuillOptions,\n} from './core/quill.js';\n\nimport Block, { BlockEmbed } from './blots/block.js';\nimport Break from './blots/break.js';\nimport Container from './blots/container.js';\nimport Cursor from './blots/cursor.js';\nimport Embed from './blots/embed.js';\nimport Inline from './blots/inline.js';\nimport Scroll from './blots/scroll.js';\nimport TextBlot from './blots/text.js';\n\nimport Clipboard from './modules/clipboard.js';\nimport History from './modules/history.js';\nimport Keyboard from './modules/keyboard.js';\nimport Uploader from './modules/uploader.js';\nimport Delta, { Op, OpIterator, AttributeMap } from 'quill-delta';\nimport Input from './modules/input.js';\nimport UINode from './modules/uiNode.js';\n\nexport { default as Module } from './core/module.js';\nexport { Delta, Op, OpIterator, AttributeMap, Parchment, Range };\nexport type {\n  Bounds,\n  DebugLevel,\n  EmitterSource,\n  ExpandedQuillOptions,\n  QuillOptions,\n};\n\nQuill.register({\n  'blots/block': Block,\n  'blots/block/embed': BlockEmbed,\n  'blots/break': Break,\n  'blots/container': Container,\n  'blots/cursor': Cursor,\n  'blots/embed': Embed,\n  'blots/inline': Inline,\n  'blots/scroll': Scroll,\n  'blots/text': TextBlot,\n\n  'modules/clipboard': Clipboard,\n  'modules/history': History,\n  'modules/keyboard': Keyboard,\n  'modules/uploader': Uploader,\n  'modules/input': Input,\n  'modules/uiNode': UINode,\n});\n\nexport default Quill;\n", "import Delta from 'quill-delta';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nimport type { Range } from '../core/selection.js';\nimport { deleteRange } from './keyboard.js';\n\nconst INSERT_TYPES = ['insertText', 'insertReplacementText'];\n\nclass Input extends Module {\n  constructor(quill: Quill, options: Record<string, never>) {\n    super(quill, options);\n\n    quill.root.addEventListener('beforeinput', (event) => {\n      this.handleBeforeInput(event);\n    });\n\n    // Gboard with English input on Android triggers `compositionstart` sometimes even\n    // users are not going to type anything.\n    if (!/Android/i.test(navigator.userAgent)) {\n      quill.on(Quill.events.COMPOSITION_BEFORE_START, () => {\n        this.handleCompositionStart();\n      });\n    }\n  }\n\n  private deleteRange(range: Range) {\n    deleteRange({ range, quill: this.quill });\n  }\n\n  private replaceText(range: Range, text = '') {\n    if (range.length === 0) return false;\n\n    if (text) {\n      // Follow the native behavior that inherits the formats of the first character\n      const formats = this.quill.getFormat(range.index, 1);\n      this.deleteRange(range);\n      this.quill.updateContents(\n        new Delta().retain(range.index).insert(text, formats),\n        Quill.sources.USER,\n      );\n    } else {\n      this.deleteRange(range);\n    }\n\n    this.quill.setSelection(range.index + text.length, 0, Quill.sources.SILENT);\n    return true;\n  }\n\n  private handleBeforeInput(event: InputEvent) {\n    if (\n      this.quill.composition.isComposing ||\n      event.defaultPrevented ||\n      !INSERT_TYPES.includes(event.inputType)\n    ) {\n      return;\n    }\n\n    const staticRange = event.getTargetRanges\n      ? event.getTargetRanges()[0]\n      : null;\n    if (!staticRange || staticRange.collapsed === true) {\n      return;\n    }\n\n    const text = getPlainTextFromInputEvent(event);\n    if (text == null) {\n      return;\n    }\n    const normalized = this.quill.selection.normalizeNative(staticRange);\n    const range = normalized\n      ? this.quill.selection.normalizedToRange(normalized)\n      : null;\n    if (range && this.replaceText(range, text)) {\n      event.preventDefault();\n    }\n  }\n\n  private handleCompositionStart() {\n    const range = this.quill.getSelection();\n    if (range) {\n      this.replaceText(range);\n    }\n  }\n}\n\nfunction getPlainTextFromInputEvent(event: InputEvent) {\n  // When `inputType` is \"insertText\":\n  // - `event.data` should be string (Safari uses `event.dataTransfer`).\n  // - `event.dataTransfer` should be null.\n  // When `inputType` is \"insertReplacementText\":\n  // - `event.data` should be null.\n  // - `event.dataTransfer` should contain \"text/plain\" data.\n\n  if (typeof event.data === 'string') {\n    return event.data;\n  }\n  if (event.dataTransfer?.types.includes('text/plain')) {\n    return event.dataTransfer.getData('text/plain');\n  }\n  return null;\n}\n\nexport default Input;\n", "import { ParentBlot } from 'parchment';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\n\nconst isMac = /Mac/i.test(navigator.platform);\n\n// Export for testing\nexport const TTL_FOR_VALID_SELECTION_CHANGE = 100;\n\n// A loose check to determine if the shortcut can move the caret before a UI node:\n// <ANY_PARENT>[CARET]<div class=\"ql-ui\"></div>[CONTENT]</ANY_PARENT>\nconst canMoveCaretBeforeUINode = (event: KeyboardEvent) => {\n  if (\n    event.key === 'ArrowLeft' ||\n    event.key === 'ArrowRight' || // RTL scripts or moving from the end of the previous line\n    event.key === 'ArrowUp' ||\n    event.key === 'ArrowDown' ||\n    event.key === 'Home'\n  ) {\n    return true;\n  }\n\n  if (isMac && event.key === 'a' && event.ctrlKey === true) {\n    return true;\n  }\n\n  return false;\n};\n\nclass UINode extends Module {\n  isListening = false;\n  selectionChangeDeadline = 0;\n\n  constructor(quill: Quill, options: Record<string, never>) {\n    super(quill, options);\n\n    this.handleArrowKeys();\n    this.handleNavigationShortcuts();\n  }\n\n  private handleArrowKeys() {\n    this.quill.keyboard.addBinding({\n      key: ['ArrowLeft', 'ArrowRight'],\n      offset: 0,\n      shiftKey: null,\n      handler(range, { line, event }) {\n        if (!(line instanceof ParentBlot) || !line.uiNode) {\n          return true;\n        }\n\n        const isRTL = getComputedStyle(line.domNode)['direction'] === 'rtl';\n        if (\n          (isRTL && event.key !== 'ArrowRight') ||\n          (!isRTL && event.key !== 'ArrowLeft')\n        ) {\n          return true;\n        }\n\n        this.quill.setSelection(\n          range.index - 1,\n          range.length + (event.shiftKey ? 1 : 0),\n          Quill.sources.USER,\n        );\n        return false;\n      },\n    });\n  }\n\n  private handleNavigationShortcuts() {\n    this.quill.root.addEventListener('keydown', (event) => {\n      if (!event.defaultPrevented && canMoveCaretBeforeUINode(event)) {\n        this.ensureListeningToSelectionChange();\n      }\n    });\n  }\n\n  /**\n   * We only listen to the `selectionchange` event when\n   * there is an intention of moving the caret to the beginning using shortcuts.\n   * This is primarily implemented to prevent infinite loops, as we are changing\n   * the selection within the handler of a `selectionchange` event.\n   */\n  private ensureListeningToSelectionChange() {\n    this.selectionChangeDeadline = Date.now() + TTL_FOR_VALID_SELECTION_CHANGE;\n\n    if (this.isListening) return;\n    this.isListening = true;\n\n    const listener = () => {\n      this.isListening = false;\n\n      if (Date.now() <= this.selectionChangeDeadline) {\n        this.handleSelectionChange();\n      }\n    };\n\n    document.addEventListener('selectionchange', listener, {\n      once: true,\n    });\n  }\n\n  private handleSelectionChange() {\n    const selection = document.getSelection();\n    if (!selection) return;\n    const range = selection.getRangeAt(0);\n    if (range.collapsed !== true || range.startOffset !== 0) return;\n\n    const line = this.quill.scroll.find(range.startContainer);\n    if (!(line instanceof ParentBlot) || !line.uiNode) return;\n\n    const newRange = document.createRange();\n    newRange.setStartAfter(line.uiNode);\n    newRange.setEndAfter(line.uiNode);\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n}\n\nexport default UINode;\n", "import { ClassAttributor, Scope } from 'parchment';\n\nclass IndentAttributor extends ClassAttributor {\n  add(node: HTMLElement, value: string | number) {\n    let normalizedValue = 0;\n    if (value === '+1' || value === '-1') {\n      const indent = this.value(node) || 0;\n      normalizedValue = value === '+1' ? indent + 1 : indent - 1;\n    } else if (typeof value === 'number') {\n      normalizedValue = value;\n    }\n    if (normalizedValue === 0) {\n      this.remove(node);\n      return true;\n    }\n    return super.add(node, normalizedValue.toString());\n  }\n\n  canAdd(node: HTMLElement, value: string) {\n    return super.canAdd(node, value) || super.canAdd(node, parseInt(value, 10));\n  }\n\n  value(node: HTMLElement) {\n    return parseInt(super.value(node), 10) || undefined; // Don't return NaN\n  }\n}\n\nconst IndentClass = new IndentAttributor('indent', 'ql-indent', {\n  scope: Scope.BLOCK,\n  // @ts-expect-error\n  whitelist: [1, 2, 3, 4, 5, 6, 7, 8],\n});\n\nexport default IndentClass;\n", "import Block from '../blots/block.js';\n\nclass Blockquote extends Block {\n  static blotName = 'blockquote';\n  static tagName = 'blockquote';\n}\n\nexport default Blockquote;\n", "import Block from '../blots/block.js';\n\nclass Header extends Block {\n  static blotName = 'header';\n  static tagName = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\n\n  static formats(domNode: Element) {\n    return this.tagName.indexOf(domNode.tagName) + 1;\n  }\n}\n\nexport default Header;\n", "import Block from '../blots/block.js';\nimport Container from '../blots/container.js';\nimport type Scroll from '../blots/scroll.js';\nimport Quill from '../core/quill.js';\n\nclass ListContainer extends Container {}\nListContainer.blotName = 'list-container';\nListContainer.tagName = 'OL';\n\nclass ListItem extends Block {\n  static create(value: string) {\n    const node = super.create() as HTMLElement;\n    node.setAttribute('data-list', value);\n    return node;\n  }\n\n  static formats(domNode: HTMLElement) {\n    return domNode.getAttribute('data-list') || undefined;\n  }\n\n  static register() {\n    Quill.register(ListContainer);\n  }\n\n  constructor(scroll: Scroll, domNode: HTMLElement) {\n    super(scroll, domNode);\n    const ui = domNode.ownerDocument.createElement('span');\n    const listEventHandler = (e: Event) => {\n      if (!scroll.isEnabled()) return;\n      const format = this.statics.formats(domNode, scroll);\n      if (format === 'checked') {\n        this.format('list', 'unchecked');\n        e.preventDefault();\n      } else if (format === 'unchecked') {\n        this.format('list', 'checked');\n        e.preventDefault();\n      }\n    };\n    ui.addEventListener('mousedown', listEventHandler);\n    ui.addEventListener('touchstart', listEventHandler);\n    this.attachUI(ui);\n  }\n\n  format(name: string, value: string) {\n    if (name === this.statics.blotName && value) {\n      this.domNode.setAttribute('data-list', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n}\nListItem.blotName = 'list';\nListItem.tagName = 'LI';\n\nListContainer.allowedChildren = [ListItem];\nListItem.requiredContainer = ListContainer;\n\nexport { ListContainer, ListItem as default };\n", "import Inline from '../blots/inline.js';\n\nclass Bold extends Inline {\n  static blotName = 'bold';\n  static tagName = ['STRONG', 'B'];\n\n  static create() {\n    return super.create();\n  }\n\n  static formats() {\n    return true;\n  }\n\n  optimize(context: { [key: string]: any }) {\n    super.optimize(context);\n    if (this.domNode.tagName !== this.statics.tagName[0]) {\n      this.replaceWith(this.statics.blotName);\n    }\n  }\n}\n\nexport default Bold;\n", "import Bold from './bold.js';\n\nclass Italic extends Bold {\n  static blotName = 'italic';\n  static tagName = ['EM', 'I'];\n}\n\nexport default Italic;\n", "import Inline from '../blots/inline.js';\n\nclass Link extends Inline {\n  static blotName = 'link';\n  static tagName = 'A';\n  static SANITIZED_URL = 'about:blank';\n  static PROTOCOL_WHITELIST = ['http', 'https', 'mailto', 'tel', 'sms'];\n\n  static create(value: string) {\n    const node = super.create(value) as HTMLElement;\n    node.setAttribute('href', this.sanitize(value));\n    node.setAttribute('rel', 'noopener noreferrer');\n    node.setAttribute('target', '_blank');\n    return node;\n  }\n\n  static formats(domNode: HTMLElement) {\n    return domNode.getAttribute('href');\n  }\n\n  static sanitize(url: string) {\n    return sanitize(url, this.PROTOCOL_WHITELIST) ? url : this.SANITIZED_URL;\n  }\n\n  format(name: string, value: unknown) {\n    if (name !== this.statics.blotName || !value) {\n      super.format(name, value);\n    } else {\n      // @ts-expect-error\n      this.domNode.setAttribute('href', this.constructor.sanitize(value));\n    }\n  }\n}\n\nfunction sanitize(url: string, protocols: string[]) {\n  const anchor = document.createElement('a');\n  anchor.href = url;\n  const protocol = anchor.href.slice(0, anchor.href.indexOf(':'));\n  return protocols.indexOf(protocol) > -1;\n}\n\nexport { Link as default, sanitize };\n", "import Inline from '../blots/inline.js';\n\nclass Script extends Inline {\n  static blotName = 'script';\n  static tagName = ['SUB', 'SUP'];\n\n  static create(value: 'super' | 'sub' | (string & {})) {\n    if (value === 'super') {\n      return document.createElement('sup');\n    }\n    if (value === 'sub') {\n      return document.createElement('sub');\n    }\n    return super.create(value);\n  }\n\n  static formats(domNode: HTMLElement) {\n    if (domNode.tagName === 'SUB') return 'sub';\n    if (domNode.tagName === 'SUP') return 'super';\n    return undefined;\n  }\n}\n\nexport default Script;\n", "import Bold from './bold.js';\n\nclass Strike extends Bold {\n  static blotName = 'strike';\n  static tagName = ['S', 'STRIKE'];\n}\n\nexport default Strike;\n", "import Inline from '../blots/inline.js';\n\nclass Underline extends Inline {\n  static blotName = 'underline';\n  static tagName = 'U';\n}\n\nexport default Underline;\n", "import Embed from '../blots/embed.js';\n\nclass Formula extends Embed {\n  static blotName = 'formula';\n  static className = 'ql-formula';\n  static tagName = 'SPAN';\n\n  static create(value: string) {\n    // @ts-expect-error\n    if (window.katex == null) {\n      throw new Error('Formula module requires KaTeX.');\n    }\n    const node = super.create(value) as Element;\n    if (typeof value === 'string') {\n      // @ts-expect-error\n      window.katex.render(value, node, {\n        throwOnError: false,\n        errorColor: '#f00',\n      });\n      node.setAttribute('data-value', value);\n    }\n    return node;\n  }\n\n  static value(domNode: Element) {\n    return domNode.getAttribute('data-value');\n  }\n\n  html() {\n    const { formula } = this.value();\n    return `<span>${formula}</span>`;\n  }\n}\n\nexport default Formula;\n", "import { EmbedBlot } from 'parchment';\nimport { sanitize } from './link.js';\n\nconst ATTRIBUTES = ['alt', 'height', 'width'];\n\nclass Image extends EmbedBlot {\n  static blotName = 'image';\n  static tagName = 'IMG';\n\n  static create(value: string) {\n    const node = super.create(value) as Element;\n    if (typeof value === 'string') {\n      node.setAttribute('src', this.sanitize(value));\n    }\n    return node;\n  }\n\n  static formats(domNode: Element) {\n    return ATTRIBUTES.reduce(\n      (formats: Record<string, string | null>, attribute) => {\n        if (domNode.hasAttribute(attribute)) {\n          formats[attribute] = domNode.getAttribute(attribute);\n        }\n        return formats;\n      },\n      {},\n    );\n  }\n\n  static match(url: string) {\n    return /\\.(jpe?g|gif|png)$/.test(url) || /^data:image\\/.+;base64/.test(url);\n  }\n\n  static sanitize(url: string) {\n    return sanitize(url, ['http', 'https', 'data']) ? url : '//:0';\n  }\n\n  static value(domNode: Element) {\n    return domNode.getAttribute('src');\n  }\n\n  domNode: HTMLImageElement;\n\n  format(name: string, value: string) {\n    if (ATTRIBUTES.indexOf(name) > -1) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n}\n\nexport default Image;\n", "import { BlockEmbed } from '../blots/block.js';\nimport Link from './link.js';\n\nconst ATTRIBUTES = ['height', 'width'];\n\nclass Video extends BlockEmbed {\n  static blotName = 'video';\n  static className = 'ql-video';\n  static tagName = 'IFRAME';\n\n  static create(value: string) {\n    const node = super.create(value) as Element;\n    node.setAttribute('frameborder', '0');\n    node.setAttribute('allowfullscreen', 'true');\n    node.setAttribute('src', this.sanitize(value));\n    return node;\n  }\n\n  static formats(domNode: Element) {\n    return ATTRIBUTES.reduce(\n      (formats: Record<string, string | null>, attribute) => {\n        if (domNode.hasAttribute(attribute)) {\n          formats[attribute] = domNode.getAttribute(attribute);\n        }\n        return formats;\n      },\n      {},\n    );\n  }\n\n  static sanitize(url: string) {\n    return Link.sanitize(url);\n  }\n\n  static value(domNode: Element) {\n    return domNode.getAttribute('src');\n  }\n\n  domNode: HTMLVideoElement;\n\n  format(name: string, value: string) {\n    if (ATTRIBUTES.indexOf(name) > -1) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  html() {\n    const { video } = this.value();\n    return `<a href=\"${video}\">${video}</a>`;\n  }\n}\n\nexport default Video;\n", "import Delta from 'quill-delta';\nimport { ClassAttributor, Scope } from 'parchment';\nimport type { Blot, ScrollBlot } from 'parchment';\nimport Inline from '../blots/inline.js';\nimport Quill from '../core/quill.js';\nimport Module from '../core/module.js';\nimport { blockDelta } from '../blots/block.js';\nimport BreakBlot from '../blots/break.js';\nimport CursorBlot from '../blots/cursor.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport CodeBlock, { CodeBlockContainer } from '../formats/code.js';\nimport { traverse } from './clipboard.js';\n\nconst TokenAttributor = new ClassAttributor('code-token', 'hljs', {\n  scope: Scope.INLINE,\n});\nclass CodeToken extends Inline {\n  static formats(node: Element, scroll: ScrollBlot) {\n    while (node != null && node !== scroll.domNode) {\n      if (node.classList && node.classList.contains(CodeBlock.className)) {\n        // @ts-expect-error\n        return super.formats(node, scroll);\n      }\n      // @ts-expect-error\n      node = node.parentNode;\n    }\n    return undefined;\n  }\n\n  constructor(scroll: ScrollBlot, domNode: Node, value: unknown) {\n    // @ts-expect-error\n    super(scroll, domNode, value);\n    TokenAttributor.add(this.domNode, value);\n  }\n\n  format(format: string, value: unknown) {\n    if (format !== CodeToken.blotName) {\n      super.format(format, value);\n    } else if (value) {\n      TokenAttributor.add(this.domNode, value);\n    } else {\n      TokenAttributor.remove(this.domNode);\n      this.domNode.classList.remove(this.statics.className);\n    }\n  }\n\n  optimize(...args: unknown[]) {\n    // @ts-expect-error\n    super.optimize(...args);\n    if (!TokenAttributor.value(this.domNode)) {\n      this.unwrap();\n    }\n  }\n}\nCodeToken.blotName = 'code-token';\nCodeToken.className = 'ql-token';\n\nclass SyntaxCodeBlock extends CodeBlock {\n  static create(value: unknown) {\n    const domNode = super.create(value);\n    if (typeof value === 'string') {\n      domNode.setAttribute('data-language', value);\n    }\n    return domNode;\n  }\n\n  static formats(domNode: Node) {\n    // @ts-expect-error\n    return domNode.getAttribute('data-language') || 'plain';\n  }\n\n  static register() {} // Syntax module will register\n\n  format(name: string, value: unknown) {\n    if (name === this.statics.blotName && value) {\n      // @ts-expect-error\n      this.domNode.setAttribute('data-language', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  replaceWith(name: string | Blot, value?: any) {\n    this.formatAt(0, this.length(), CodeToken.blotName, false);\n    return super.replaceWith(name, value);\n  }\n}\n\nclass SyntaxCodeBlockContainer extends CodeBlockContainer {\n  forceNext?: boolean;\n  cachedText?: string | null;\n\n  attach() {\n    super.attach();\n    this.forceNext = false;\n    // @ts-expect-error\n    this.scroll.emitMount(this);\n  }\n\n  format(name: string, value: unknown) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n      this.children.forEach((child) => {\n        // @ts-expect-error\n        child.format(name, value);\n      });\n    }\n  }\n\n  formatAt(index: number, length: number, name: string, value: unknown) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n    }\n    super.formatAt(index, length, name, value);\n  }\n\n  highlight(\n    highlight: (text: string, language: string) => Delta,\n    forced = false,\n  ) {\n    if (this.children.head == null) return;\n    const nodes = Array.from(this.domNode.childNodes).filter(\n      (node) => node !== this.uiNode,\n    );\n    const text = `${nodes.map((node) => node.textContent).join('\\n')}\\n`;\n    const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n    if (forced || this.forceNext || this.cachedText !== text) {\n      if (text.trim().length > 0 || this.cachedText == null) {\n        const oldDelta = this.children.reduce((delta, child) => {\n          // @ts-expect-error\n          return delta.concat(blockDelta(child, false));\n        }, new Delta());\n        const delta = highlight(text, language);\n        oldDelta.diff(delta).reduce((index, { retain, attributes }) => {\n          // Should be all retains\n          if (!retain) return index;\n          if (attributes) {\n            Object.keys(attributes).forEach((format) => {\n              if (\n                [SyntaxCodeBlock.blotName, CodeToken.blotName].includes(format)\n              ) {\n                // @ts-expect-error\n                this.formatAt(index, retain, format, attributes[format]);\n              }\n            });\n          }\n          // @ts-expect-error\n          return index + retain;\n        }, 0);\n      }\n      this.cachedText = text;\n      this.forceNext = false;\n    }\n  }\n\n  html(index: number, length: number) {\n    const [codeBlock] = this.children.find(index);\n    const language = codeBlock\n      ? SyntaxCodeBlock.formats(codeBlock.domNode)\n      : 'plain';\n\n    return `<pre data-language=\"${language}\">\\n${escapeText(\n      this.code(index, length),\n    )}\\n</pre>`;\n  }\n\n  optimize(context: Record<string, any>) {\n    super.optimize(context);\n    if (\n      this.parent != null &&\n      this.children.head != null &&\n      this.uiNode != null\n    ) {\n      const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n      // @ts-expect-error\n      if (language !== this.uiNode.value) {\n        // @ts-expect-error\n        this.uiNode.value = language;\n      }\n    }\n  }\n}\n\nSyntaxCodeBlockContainer.allowedChildren = [SyntaxCodeBlock];\nSyntaxCodeBlock.requiredContainer = SyntaxCodeBlockContainer;\nSyntaxCodeBlock.allowedChildren = [CodeToken, CursorBlot, TextBlot, BreakBlot];\n\ninterface SyntaxOptions {\n  interval: number;\n  languages: { key: string; label: string }[];\n  hljs: any;\n}\n\nconst highlight = (lib: any, language: string, text: string) => {\n  if (typeof lib.versionString === 'string') {\n    const majorVersion = lib.versionString.split('.')[0];\n    if (parseInt(majorVersion, 10) >= 11) {\n      return lib.highlight(text, { language }).value;\n    }\n  }\n  return lib.highlight(language, text).value;\n};\n\nclass Syntax extends Module<SyntaxOptions> {\n  static DEFAULTS: SyntaxOptions & { hljs: any };\n\n  static register() {\n    Quill.register(CodeToken, true);\n    Quill.register(SyntaxCodeBlock, true);\n    Quill.register(SyntaxCodeBlockContainer, true);\n  }\n\n  languages: Record<string, true>;\n\n  constructor(quill: Quill, options: Partial<SyntaxOptions>) {\n    super(quill, options);\n    if (this.options.hljs == null) {\n      throw new Error(\n        'Syntax module requires highlight.js. Please include the library on the page before Quill.',\n      );\n    }\n    // @ts-expect-error Fix me later\n    this.languages = this.options.languages.reduce(\n      (memo: Record<string, unknown>, { key }) => {\n        memo[key] = true;\n        return memo;\n      },\n      {},\n    );\n    this.highlightBlot = this.highlightBlot.bind(this);\n    this.initListener();\n    this.initTimer();\n  }\n\n  initListener() {\n    this.quill.on(Quill.events.SCROLL_BLOT_MOUNT, (blot: Blot) => {\n      if (!(blot instanceof SyntaxCodeBlockContainer)) return;\n      const select = this.quill.root.ownerDocument.createElement('select');\n      // @ts-expect-error Fix me later\n      this.options.languages.forEach(({ key, label }) => {\n        const option = select.ownerDocument.createElement('option');\n        option.textContent = label;\n        option.setAttribute('value', key);\n        select.appendChild(option);\n      });\n      select.addEventListener('change', () => {\n        blot.format(SyntaxCodeBlock.blotName, select.value);\n        this.quill.root.focus(); // Prevent scrolling\n        this.highlight(blot, true);\n      });\n      if (blot.uiNode == null) {\n        blot.attachUI(select);\n        if (blot.children.head) {\n          select.value = SyntaxCodeBlock.formats(blot.children.head.domNode);\n        }\n      }\n    });\n  }\n\n  initTimer() {\n    let timer: ReturnType<typeof setTimeout> | null = null;\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, () => {\n      if (timer) {\n        clearTimeout(timer);\n      }\n      timer = setTimeout(() => {\n        this.highlight();\n        timer = null;\n      }, this.options.interval);\n    });\n  }\n\n  highlight(blot: SyntaxCodeBlockContainer | null = null, force = false) {\n    if (this.quill.selection.composing) return;\n    this.quill.update(Quill.sources.USER);\n    const range = this.quill.getSelection();\n    const blots =\n      blot == null\n        ? this.quill.scroll.descendants(SyntaxCodeBlockContainer)\n        : [blot];\n    blots.forEach((container) => {\n      container.highlight(this.highlightBlot, force);\n    });\n    this.quill.update(Quill.sources.SILENT);\n    if (range != null) {\n      this.quill.setSelection(range, Quill.sources.SILENT);\n    }\n  }\n\n  highlightBlot(text: string, language = 'plain') {\n    language = this.languages[language] ? language : 'plain';\n    if (language === 'plain') {\n      return escapeText(text)\n        .split('\\n')\n        .reduce((delta, line, i) => {\n          if (i !== 0) {\n            delta.insert('\\n', { [CodeBlock.blotName]: language });\n          }\n          return delta.insert(line);\n        }, new Delta());\n    }\n    const container = this.quill.root.ownerDocument.createElement('div');\n    container.classList.add(CodeBlock.className);\n    container.innerHTML = highlight(this.options.hljs, language, text);\n    return traverse(\n      this.quill.scroll,\n      container,\n      [\n        (node, delta) => {\n          // @ts-expect-error\n          const value = TokenAttributor.value(node);\n          if (value) {\n            return delta.compose(\n              new Delta().retain(delta.length(), {\n                [CodeToken.blotName]: value,\n              }),\n            );\n          }\n          return delta;\n        },\n      ],\n      [\n        (node, delta) => {\n          // @ts-expect-error\n          return node.data.split('\\n').reduce((memo, nodeText, i) => {\n            if (i !== 0) memo.insert('\\n', { [CodeBlock.blotName]: language });\n            return memo.insert(nodeText);\n          }, delta);\n        },\n      ],\n      new WeakMap(),\n    );\n  }\n}\nSyntax.DEFAULTS = {\n  hljs: (() => {\n    return window.hljs;\n  })(),\n  interval: 1000,\n  languages: [\n    { key: 'plain', label: 'Plain' },\n    { key: 'bash', label: 'Bash' },\n    { key: 'cpp', label: 'C++' },\n    { key: 'cs', label: 'C#' },\n    { key: 'css', label: 'CSS' },\n    { key: 'diff', label: 'Diff' },\n    { key: 'xml', label: 'HTML/XML' },\n    { key: 'java', label: 'Java' },\n    { key: 'javascript', label: 'JavaScript' },\n    { key: 'markdown', label: 'Markdown' },\n    { key: 'php', label: 'PHP' },\n    { key: 'python', label: 'Python' },\n    { key: 'ruby', label: 'Ruby' },\n    { key: 'sql', label: 'SQL' },\n  ],\n};\n\nexport { SyntaxCodeBlock as CodeBlock, CodeToken, Syntax as default };\n", "import Delta from 'quill-delta';\nimport Quill from '../core/quill.js';\nimport Module from '../core/module.js';\nimport {\n  TableCell,\n  TableRow,\n  TableBody,\n  TableContainer,\n  tableId,\n} from '../formats/table.js';\n\nclass Table extends Module {\n  static register() {\n    Quill.register(TableCell);\n    Quill.register(TableRow);\n    Quill.register(TableBody);\n    Quill.register(TableContainer);\n  }\n\n  constructor(...args: ConstructorParameters<typeof Module>) {\n    super(...args);\n    this.listenBalanceCells();\n  }\n\n  balanceTables() {\n    this.quill.scroll.descendants(TableContainer).forEach((table) => {\n      table.balanceCells();\n    });\n  }\n\n  deleteColumn() {\n    const [table, , cell] = this.getTable();\n    if (cell == null) return;\n    // @ts-expect-error\n    table.deleteColumn(cell.cellOffset());\n    this.quill.update(Quill.sources.USER);\n  }\n\n  deleteRow() {\n    const [, row] = this.getTable();\n    if (row == null) return;\n    row.remove();\n    this.quill.update(Quill.sources.USER);\n  }\n\n  deleteTable() {\n    const [table] = this.getTable();\n    if (table == null) return;\n    // @ts-expect-error\n    const offset = table.offset();\n    // @ts-expect-error\n    table.remove();\n    this.quill.update(Quill.sources.USER);\n    this.quill.setSelection(offset, Quill.sources.SILENT);\n  }\n\n  getTable(\n    range = this.quill.getSelection(),\n  ): [null, null, null, -1] | [Table, TableRow, TableCell, number] {\n    if (range == null) return [null, null, null, -1];\n    const [cell, offset] = this.quill.getLine(range.index);\n    if (cell == null || cell.statics.blotName !== TableCell.blotName) {\n      return [null, null, null, -1];\n    }\n    const row = cell.parent;\n    const table = row.parent.parent;\n    // @ts-expect-error\n    return [table, row, cell, offset];\n  }\n\n  insertColumn(offset: number) {\n    const range = this.quill.getSelection();\n    if (!range) return;\n    const [table, row, cell] = this.getTable(range);\n    if (cell == null) return;\n    const column = cell.cellOffset();\n    table.insertColumn(column + offset);\n    this.quill.update(Quill.sources.USER);\n    let shift = row.rowOffset();\n    if (offset === 0) {\n      shift += 1;\n    }\n    this.quill.setSelection(\n      range.index + shift,\n      range.length,\n      Quill.sources.SILENT,\n    );\n  }\n\n  insertColumnLeft() {\n    this.insertColumn(0);\n  }\n\n  insertColumnRight() {\n    this.insertColumn(1);\n  }\n\n  insertRow(offset: number) {\n    const range = this.quill.getSelection();\n    if (!range) return;\n    const [table, row, cell] = this.getTable(range);\n    if (cell == null) return;\n    const index = row.rowOffset();\n    table.insertRow(index + offset);\n    this.quill.update(Quill.sources.USER);\n    if (offset > 0) {\n      this.quill.setSelection(range, Quill.sources.SILENT);\n    } else {\n      this.quill.setSelection(\n        range.index + row.children.length,\n        range.length,\n        Quill.sources.SILENT,\n      );\n    }\n  }\n\n  insertRowAbove() {\n    this.insertRow(0);\n  }\n\n  insertRowBelow() {\n    this.insertRow(1);\n  }\n\n  insertTable(rows: number, columns: number) {\n    const range = this.quill.getSelection();\n    if (range == null) return;\n    const delta = new Array(rows).fill(0).reduce((memo) => {\n      const text = new Array(columns).fill('\\n').join('');\n      return memo.insert(text, { table: tableId() });\n    }, new Delta().retain(range.index));\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.setSelection(range.index, Quill.sources.SILENT);\n    this.balanceTables();\n  }\n\n  listenBalanceCells() {\n    this.quill.on(\n      Quill.events.SCROLL_OPTIMIZE,\n      (mutations: MutationRecord[]) => {\n        mutations.some((mutation) => {\n          if (\n            ['TD', 'TR', 'TBODY', 'TABLE'].includes(\n              (mutation.target as HTMLElement).tagName,\n            )\n          ) {\n            this.quill.once(Quill.events.TEXT_CHANGE, (delta, old, source) => {\n              if (source !== Quill.sources.USER) return;\n              this.balanceTables();\n            });\n            return true;\n          }\n          return false;\n        });\n      },\n    );\n  }\n}\n\nexport default Table;\n", "import type { LinkedList } from 'parchment';\nimport Block from '../blots/block.js';\nimport Container from '../blots/container.js';\n\nclass TableCell extends Block {\n  static blotName = 'table';\n  static tagName = 'TD';\n\n  static create(value: string) {\n    const node = super.create() as HTMLElement;\n    if (value) {\n      node.setAttribute('data-row', value);\n    } else {\n      node.setAttribute('data-row', tableId());\n    }\n    return node;\n  }\n\n  static formats(domNode: HTMLElement) {\n    if (domNode.hasAttribute('data-row')) {\n      return domNode.getAttribute('data-row');\n    }\n    return undefined;\n  }\n\n  next: this | null;\n\n  cellOffset() {\n    if (this.parent) {\n      return this.parent.children.indexOf(this);\n    }\n    return -1;\n  }\n\n  format(name: string, value: string) {\n    if (name === TableCell.blotName && value) {\n      this.domNode.setAttribute('data-row', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  row(): TableRow {\n    return this.parent as TableRow;\n  }\n\n  rowOffset() {\n    if (this.row()) {\n      return this.row().rowOffset();\n    }\n    return -1;\n  }\n\n  table() {\n    return this.row() && this.row().table();\n  }\n}\n\nclass TableRow extends Container {\n  static blotName = 'table-row';\n  static tagName = 'TR';\n\n  children: LinkedList<TableCell>;\n  next: this | null;\n\n  checkMerge() {\n    // @ts-expect-error\n    if (super.checkMerge() && this.next.children.head != null) {\n      // @ts-expect-error\n      const thisHead = this.children.head.formats();\n      // @ts-expect-error\n      const thisTail = this.children.tail.formats();\n      // @ts-expect-error\n      const nextHead = this.next.children.head.formats();\n      // @ts-expect-error\n      const nextTail = this.next.children.tail.formats();\n      return (\n        thisHead.table === thisTail.table &&\n        thisHead.table === nextHead.table &&\n        thisHead.table === nextTail.table\n      );\n    }\n    return false;\n  }\n\n  optimize(context: { [key: string]: any }) {\n    super.optimize(context);\n    this.children.forEach((child) => {\n      if (child.next == null) return;\n      const childFormats = child.formats();\n      const nextFormats = child.next.formats();\n      if (childFormats.table !== nextFormats.table) {\n        const next = this.splitAfter(child);\n        if (next) {\n          // @ts-expect-error TODO: parameters of optimize() should be a optional\n          next.optimize();\n        }\n        // We might be able to merge with prev now\n        if (this.prev) {\n          // @ts-expect-error TODO: parameters of optimize() should be a optional\n          this.prev.optimize();\n        }\n      }\n    });\n  }\n\n  rowOffset() {\n    if (this.parent) {\n      return this.parent.children.indexOf(this);\n    }\n    return -1;\n  }\n\n  table() {\n    return this.parent && this.parent.parent;\n  }\n}\n\nclass TableBody extends Container {\n  static blotName = 'table-body';\n  static tagName = 'TBODY';\n\n  children: LinkedList<TableRow>;\n}\n\nclass TableContainer extends Container {\n  static blotName = 'table-container';\n  static tagName = 'TABLE';\n\n  children: LinkedList<TableBody>;\n\n  balanceCells() {\n    const rows = this.descendants(TableRow);\n    const maxColumns = rows.reduce((max, row) => {\n      return Math.max(row.children.length, max);\n    }, 0);\n    rows.forEach((row) => {\n      new Array(maxColumns - row.children.length).fill(0).forEach(() => {\n        let value;\n        if (row.children.head != null) {\n          value = TableCell.formats(row.children.head.domNode);\n        }\n        const blot = this.scroll.create(TableCell.blotName, value);\n        row.appendChild(blot);\n        // @ts-expect-error TODO: parameters of optimize() should be a optional\n        blot.optimize(); // Add break blot\n      });\n    });\n  }\n\n  cells(column: number) {\n    return this.rows().map((row) => row.children.at(column));\n  }\n\n  deleteColumn(index: number) {\n    // @ts-expect-error\n    const [body] = this.descendant(TableBody) as TableBody[];\n    if (body == null || body.children.head == null) return;\n    body.children.forEach((row) => {\n      const cell = row.children.at(index);\n      if (cell != null) {\n        cell.remove();\n      }\n    });\n  }\n\n  insertColumn(index: number) {\n    // @ts-expect-error\n    const [body] = this.descendant(TableBody) as TableBody[];\n    if (body == null || body.children.head == null) return;\n    body.children.forEach((row) => {\n      const ref = row.children.at(index);\n      // @ts-expect-error\n      const value = TableCell.formats(row.children.head.domNode);\n      const cell = this.scroll.create(TableCell.blotName, value);\n      row.insertBefore(cell, ref);\n    });\n  }\n\n  insertRow(index: number) {\n    // @ts-expect-error\n    const [body] = this.descendant(TableBody) as TableBody[];\n    if (body == null || body.children.head == null) return;\n    const id = tableId();\n    const row = this.scroll.create(TableRow.blotName) as TableRow;\n    body.children.head.children.forEach(() => {\n      const cell = this.scroll.create(TableCell.blotName, id);\n      row.appendChild(cell);\n    });\n    const ref = body.children.at(index);\n    body.insertBefore(row, ref);\n  }\n\n  rows() {\n    const body = this.children.head;\n    if (body == null) return [];\n    return body.children.map((row) => row);\n  }\n}\n\nTableContainer.allowedChildren = [TableBody];\nTableBody.requiredContainer = TableContainer;\n\nTableBody.allowedChildren = [TableRow];\nTableRow.requiredContainer = TableBody;\n\nTableRow.allowedChildren = [TableCell];\nTableCell.requiredContainer = TableRow;\n\nfunction tableId() {\n  const id = Math.random().toString(36).slice(2, 6);\n  return `row-${id}`;\n}\n\nexport { TableCell, TableRow, TableBody, TableContainer, tableId };\n", "import Delta from 'quill-delta';\nimport { EmbedBlot, Scope } from 'parchment';\nimport Quill from '../core/quill.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nimport type { Range } from '../core/selection.js';\n\nconst debug = logger('quill:toolbar');\n\ntype Handler = (this: Toolbar, value: any) => void;\n\nexport type ToolbarConfig = Array<\n  string[] | Array<string | Record<string, unknown>>\n>;\nexport interface ToolbarProps {\n  container?: HTMLElement | ToolbarConfig | null;\n  handlers?: Record<string, Handler>;\n  option?: number;\n  module?: boolean;\n  theme?: boolean;\n}\n\nclass Toolbar extends Module<ToolbarProps> {\n  static DEFAULTS: ToolbarProps;\n\n  container?: HTMLElement | null;\n  controls: [string, HTMLElement][];\n  handlers: Record<string, Handler>;\n\n  constructor(quill: Quill, options: Partial<ToolbarProps>) {\n    super(quill, options);\n    if (Array.isArray(this.options.container)) {\n      const container = document.createElement('div');\n      container.setAttribute('role', 'toolbar');\n      addControls(container, this.options.container);\n      quill.container?.parentNode?.insertBefore(container, quill.container);\n      this.container = container;\n    } else if (typeof this.options.container === 'string') {\n      this.container = document.querySelector(this.options.container);\n    } else {\n      this.container = this.options.container;\n    }\n    if (!(this.container instanceof HTMLElement)) {\n      debug.error('Container required for toolbar', this.options);\n      return;\n    }\n    this.container.classList.add('ql-toolbar');\n    this.controls = [];\n    this.handlers = {};\n    if (this.options.handlers) {\n      Object.keys(this.options.handlers).forEach((format) => {\n        const handler = this.options.handlers?.[format];\n        if (handler) {\n          this.addHandler(format, handler);\n        }\n      });\n    }\n    Array.from(this.container.querySelectorAll('button, select')).forEach(\n      (input) => {\n        // @ts-expect-error\n        this.attach(input);\n      },\n    );\n    this.quill.on(Quill.events.EDITOR_CHANGE, () => {\n      const [range] = this.quill.selection.getRange(); // quill.getSelection triggers update\n      this.update(range);\n    });\n  }\n\n  addHandler(format: string, handler: Handler) {\n    this.handlers[format] = handler;\n  }\n\n  attach(input: HTMLElement) {\n    let format = Array.from(input.classList).find((className) => {\n      return className.indexOf('ql-') === 0;\n    });\n    if (!format) return;\n    format = format.slice('ql-'.length);\n    if (input.tagName === 'BUTTON') {\n      input.setAttribute('type', 'button');\n    }\n    if (\n      this.handlers[format] == null &&\n      this.quill.scroll.query(format) == null\n    ) {\n      debug.warn('ignoring attaching to nonexistent format', format, input);\n      return;\n    }\n    const eventName = input.tagName === 'SELECT' ? 'change' : 'click';\n    input.addEventListener(eventName, (e) => {\n      let value;\n      if (input.tagName === 'SELECT') {\n        // @ts-expect-error\n        if (input.selectedIndex < 0) return;\n        // @ts-expect-error\n        const selected = input.options[input.selectedIndex];\n        if (selected.hasAttribute('selected')) {\n          value = false;\n        } else {\n          value = selected.value || false;\n        }\n      } else {\n        if (input.classList.contains('ql-active')) {\n          value = false;\n        } else {\n          // @ts-expect-error\n          value = input.value || !input.hasAttribute('value');\n        }\n        e.preventDefault();\n      }\n      this.quill.focus();\n      const [range] = this.quill.selection.getRange();\n      if (this.handlers[format] != null) {\n        this.handlers[format].call(this, value);\n      } else if (\n        // @ts-expect-error\n        this.quill.scroll.query(format).prototype instanceof EmbedBlot\n      ) {\n        value = prompt(`Enter ${format}`); // eslint-disable-line no-alert\n        if (!value) return;\n        this.quill.updateContents(\n          new Delta()\n            // @ts-expect-error Fix me later\n            .retain(range.index)\n            // @ts-expect-error Fix me later\n            .delete(range.length)\n            .insert({ [format]: value }),\n          Quill.sources.USER,\n        );\n      } else {\n        this.quill.format(format, value, Quill.sources.USER);\n      }\n      this.update(range);\n    });\n    this.controls.push([format, input]);\n  }\n\n  update(range: Range | null) {\n    const formats = range == null ? {} : this.quill.getFormat(range);\n    this.controls.forEach((pair) => {\n      const [format, input] = pair;\n      if (input.tagName === 'SELECT') {\n        let option: HTMLOptionElement | null = null;\n        if (range == null) {\n          option = null;\n        } else if (formats[format] == null) {\n          option = input.querySelector('option[selected]');\n        } else if (!Array.isArray(formats[format])) {\n          let value = formats[format];\n          if (typeof value === 'string') {\n            value = value.replace(/\"/g, '\\\\\"');\n          }\n          option = input.querySelector(`option[value=\"${value}\"]`);\n        }\n        if (option == null) {\n          // @ts-expect-error TODO fix me later\n          input.value = ''; // TODO make configurable?\n          // @ts-expect-error TODO fix me later\n          input.selectedIndex = -1;\n        } else {\n          option.selected = true;\n        }\n      } else if (range == null) {\n        input.classList.remove('ql-active');\n        input.setAttribute('aria-pressed', 'false');\n      } else if (input.hasAttribute('value')) {\n        // both being null should match (default values)\n        // '1' should match with 1 (headers)\n        const value = formats[format] as boolean | number | string | object;\n        const isActive =\n          value === input.getAttribute('value') ||\n          (value != null && value.toString() === input.getAttribute('value')) ||\n          (value == null && !input.getAttribute('value'));\n        input.classList.toggle('ql-active', isActive);\n        input.setAttribute('aria-pressed', isActive.toString());\n      } else {\n        const isActive = formats[format] != null;\n        input.classList.toggle('ql-active', isActive);\n        input.setAttribute('aria-pressed', isActive.toString());\n      }\n    });\n  }\n}\nToolbar.DEFAULTS = {};\n\nfunction addButton(container: HTMLElement, format: string, value?: string) {\n  const input = document.createElement('button');\n  input.setAttribute('type', 'button');\n  input.classList.add(`ql-${format}`);\n  input.setAttribute('aria-pressed', 'false');\n  if (value != null) {\n    input.value = value;\n    input.setAttribute('aria-label', `${format}: ${value}`);\n  } else {\n    input.setAttribute('aria-label', format);\n  }\n  container.appendChild(input);\n}\n\nfunction addControls(\n  container: HTMLElement,\n  groups:\n    | (string | Record<string, unknown>)[][]\n    | (string | Record<string, unknown>)[],\n) {\n  if (!Array.isArray(groups[0])) {\n    // @ts-expect-error\n    groups = [groups];\n  }\n  groups.forEach((controls: any) => {\n    const group = document.createElement('span');\n    group.classList.add('ql-formats');\n    controls.forEach((control: any) => {\n      if (typeof control === 'string') {\n        addButton(group, control);\n      } else {\n        const format = Object.keys(control)[0];\n        const value = control[format];\n        if (Array.isArray(value)) {\n          addSelect(group, format, value);\n        } else {\n          addButton(group, format, value);\n        }\n      }\n    });\n    container.appendChild(group);\n  });\n}\n\nfunction addSelect(\n  container: HTMLElement,\n  format: string,\n  values: Array<string | boolean>,\n) {\n  const input = document.createElement('select');\n  input.classList.add(`ql-${format}`);\n  values.forEach((value) => {\n    const option = document.createElement('option');\n    if (value !== false) {\n      option.setAttribute('value', String(value));\n    } else {\n      option.setAttribute('selected', 'selected');\n    }\n    input.appendChild(option);\n  });\n  container.appendChild(input);\n}\n\nToolbar.DEFAULTS = {\n  container: null,\n  handlers: {\n    clean() {\n      const range = this.quill.getSelection();\n      if (range == null) return;\n      if (range.length === 0) {\n        const formats = this.quill.getFormat();\n        Object.keys(formats).forEach((name) => {\n          // Clean functionality in existing apps only clean inline formats\n          if (this.quill.scroll.query(name, Scope.INLINE) != null) {\n            this.quill.format(name, false, Quill.sources.USER);\n          }\n        });\n      } else {\n        this.quill.removeFormat(range.index, range.length, Quill.sources.USER);\n      }\n    },\n    direction(value) {\n      const { align } = this.quill.getFormat();\n      if (value === 'rtl' && align == null) {\n        this.quill.format('align', 'right', Quill.sources.USER);\n      } else if (!value && align === 'right') {\n        this.quill.format('align', false, Quill.sources.USER);\n      }\n      this.quill.format('direction', value, Quill.sources.USER);\n    },\n    indent(value) {\n      const range = this.quill.getSelection();\n      // @ts-expect-error\n      const formats = this.quill.getFormat(range);\n      // @ts-expect-error\n      const indent = parseInt(formats.indent || 0, 10);\n      if (value === '+1' || value === '-1') {\n        let modifier = value === '+1' ? 1 : -1;\n        if (formats.direction === 'rtl') modifier *= -1;\n        this.quill.format('indent', indent + modifier, Quill.sources.USER);\n      }\n    },\n    link(value) {\n      if (value === true) {\n        value = prompt('Enter link URL:'); // eslint-disable-line no-alert\n      }\n      this.quill.format('link', value, Quill.sources.USER);\n    },\n    list(value) {\n      const range = this.quill.getSelection();\n      // @ts-expect-error\n      const formats = this.quill.getFormat(range);\n      if (value === 'check') {\n        if (formats.list === 'checked' || formats.list === 'unchecked') {\n          this.quill.format('list', false, Quill.sources.USER);\n        } else {\n          this.quill.format('list', 'unchecked', Quill.sources.USER);\n        }\n      } else {\n        this.quill.format('list', value, Quill.sources.USER);\n      }\n    },\n  },\n};\n\nexport { Toolbar as default, addControls };\n", "import alignLeftIcon from '../assets/icons/align-left.svg';\nimport alignCenterIcon from '../assets/icons/align-center.svg';\nimport alignRightIcon from '../assets/icons/align-right.svg';\nimport alignJustifyIcon from '../assets/icons/align-justify.svg';\nimport backgroundIcon from '../assets/icons/background.svg';\nimport blockquoteIcon from '../assets/icons/blockquote.svg';\nimport boldIcon from '../assets/icons/bold.svg';\nimport cleanIcon from '../assets/icons/clean.svg';\nimport codeIcon from '../assets/icons/code.svg';\nimport colorIcon from '../assets/icons/color.svg';\nimport directionLeftToRightIcon from '../assets/icons/direction-ltr.svg';\nimport directionRightToLeftIcon from '../assets/icons/direction-rtl.svg';\nimport formulaIcon from '../assets/icons/formula.svg';\nimport headerIcon from '../assets/icons/header.svg';\nimport header2Icon from '../assets/icons/header-2.svg';\nimport header3Icon from '../assets/icons/header-3.svg';\nimport header4Icon from '../assets/icons/header-4.svg';\nimport header5Icon from '../assets/icons/header-5.svg';\nimport header6Icon from '../assets/icons/header-6.svg';\nimport italicIcon from '../assets/icons/italic.svg';\nimport imageIcon from '../assets/icons/image.svg';\nimport indentIcon from '../assets/icons/indent.svg';\nimport outdentIcon from '../assets/icons/outdent.svg';\nimport linkIcon from '../assets/icons/link.svg';\nimport listBulletIcon from '../assets/icons/list-bullet.svg';\nimport listCheckIcon from '../assets/icons/list-check.svg';\nimport listOrderedIcon from '../assets/icons/list-ordered.svg';\nimport subscriptIcon from '../assets/icons/subscript.svg';\nimport superscriptIcon from '../assets/icons/superscript.svg';\nimport strikeIcon from '../assets/icons/strike.svg';\nimport tableIcon from '../assets/icons/table.svg';\nimport underlineIcon from '../assets/icons/underline.svg';\nimport videoIcon from '../assets/icons/video.svg';\n\nexport default {\n  align: {\n    '': alignLeftIcon,\n    center: alignCenterIcon,\n    right: alignRightIcon,\n    justify: alignJustifyIcon,\n  },\n  background: backgroundIcon,\n  blockquote: blockquoteIcon,\n  bold: boldIcon,\n  clean: cleanIcon,\n  code: codeIcon,\n  'code-block': codeIcon,\n  color: colorIcon,\n  direction: {\n    '': directionLeftToRightIcon,\n    rtl: directionRightToLeftIcon,\n  },\n  formula: formulaIcon,\n  header: {\n    '1': headerIcon,\n    '2': header2Icon,\n    '3': header3Icon,\n    '4': header4Icon,\n    '5': header5Icon,\n    '6': header6Icon,\n  },\n  italic: italicIcon,\n  image: imageIcon,\n  indent: {\n    '+1': indentIcon,\n    '-1': outdentIcon,\n  },\n  link: linkIcon,\n  list: {\n    bullet: listBulletIcon,\n    check: listCheckIcon,\n    ordered: listOrderedIcon,\n  },\n  script: {\n    sub: subscriptIcon,\n    super: superscriptIcon,\n  },\n  strike: strikeIcon,\n  table: tableIcon,\n  underline: underlineIcon,\n  video: videoIcon,\n};\n", "import DropdownIcon from '../assets/icons/dropdown.svg';\n\nlet optionsCounter = 0;\n\nfunction toggleAriaAttribute(element: HTMLElement, attribute: string) {\n  element.setAttribute(\n    attribute,\n    `${!(element.getAttribute(attribute) === 'true')}`,\n  );\n}\n\nclass Picker {\n  select: HTMLSelectElement;\n  container: HTMLElement;\n  label: HTMLElement;\n\n  constructor(select: HTMLSelectElement) {\n    this.select = select;\n    this.container = document.createElement('span');\n    this.buildPicker();\n    this.select.style.display = 'none';\n    // @ts-expect-error Fix me later\n    this.select.parentNode.insertBefore(this.container, this.select);\n\n    this.label.addEventListener('mousedown', () => {\n      this.togglePicker();\n    });\n    this.label.addEventListener('keydown', (event) => {\n      switch (event.key) {\n        case 'Enter':\n          this.togglePicker();\n          break;\n        case 'Escape':\n          this.escape();\n          event.preventDefault();\n          break;\n        default:\n      }\n    });\n    this.select.addEventListener('change', this.update.bind(this));\n  }\n\n  togglePicker() {\n    this.container.classList.toggle('ql-expanded');\n    // Toggle aria-expanded and aria-hidden to make the picker accessible\n    toggleAriaAttribute(this.label, 'aria-expanded');\n    // @ts-expect-error\n    toggleAriaAttribute(this.options, 'aria-hidden');\n  }\n\n  buildItem(option: HTMLOptionElement) {\n    const item = document.createElement('span');\n    // @ts-expect-error\n    item.tabIndex = '0';\n    item.setAttribute('role', 'button');\n    item.classList.add('ql-picker-item');\n    const value = option.getAttribute('value');\n    if (value) {\n      item.setAttribute('data-value', value);\n    }\n    if (option.textContent) {\n      item.setAttribute('data-label', option.textContent);\n    }\n    item.addEventListener('click', () => {\n      this.selectItem(item, true);\n    });\n    item.addEventListener('keydown', (event) => {\n      switch (event.key) {\n        case 'Enter':\n          this.selectItem(item, true);\n          event.preventDefault();\n          break;\n        case 'Escape':\n          this.escape();\n          event.preventDefault();\n          break;\n        default:\n      }\n    });\n\n    return item;\n  }\n\n  buildLabel() {\n    const label = document.createElement('span');\n    label.classList.add('ql-picker-label');\n    label.innerHTML = DropdownIcon;\n    // @ts-expect-error\n    label.tabIndex = '0';\n    label.setAttribute('role', 'button');\n    label.setAttribute('aria-expanded', 'false');\n    this.container.appendChild(label);\n    return label;\n  }\n\n  buildOptions() {\n    const options = document.createElement('span');\n    options.classList.add('ql-picker-options');\n\n    // Don't want screen readers to read this until options are visible\n    options.setAttribute('aria-hidden', 'true');\n    // @ts-expect-error\n    options.tabIndex = '-1';\n\n    // Need a unique id for aria-controls\n    options.id = `ql-picker-options-${optionsCounter}`;\n    optionsCounter += 1;\n    this.label.setAttribute('aria-controls', options.id);\n\n    // @ts-expect-error\n    this.options = options;\n\n    Array.from(this.select.options).forEach((option) => {\n      const item = this.buildItem(option);\n      options.appendChild(item);\n      if (option.selected === true) {\n        this.selectItem(item);\n      }\n    });\n    this.container.appendChild(options);\n  }\n\n  buildPicker() {\n    Array.from(this.select.attributes).forEach((item) => {\n      this.container.setAttribute(item.name, item.value);\n    });\n    this.container.classList.add('ql-picker');\n    this.label = this.buildLabel();\n    this.buildOptions();\n  }\n\n  escape() {\n    // Close menu and return focus to trigger label\n    this.close();\n    // Need setTimeout for accessibility to ensure that the browser executes\n    // focus on the next process thread and after any DOM content changes\n    setTimeout(() => this.label.focus(), 1);\n  }\n\n  close() {\n    this.container.classList.remove('ql-expanded');\n    this.label.setAttribute('aria-expanded', 'false');\n    // @ts-expect-error\n    this.options.setAttribute('aria-hidden', 'true');\n  }\n\n  selectItem(item: HTMLElement | null, trigger = false) {\n    const selected = this.container.querySelector('.ql-selected');\n    if (item === selected) return;\n    if (selected != null) {\n      selected.classList.remove('ql-selected');\n    }\n    if (item == null) return;\n    item.classList.add('ql-selected');\n    // @ts-expect-error Fix me later\n    this.select.selectedIndex = Array.from(item.parentNode.children).indexOf(\n      item,\n    );\n    if (item.hasAttribute('data-value')) {\n      // @ts-expect-error Fix me later\n      this.label.setAttribute('data-value', item.getAttribute('data-value'));\n    } else {\n      this.label.removeAttribute('data-value');\n    }\n    if (item.hasAttribute('data-label')) {\n      // @ts-expect-error Fix me later\n      this.label.setAttribute('data-label', item.getAttribute('data-label'));\n    } else {\n      this.label.removeAttribute('data-label');\n    }\n    if (trigger) {\n      this.select.dispatchEvent(new Event('change'));\n      this.close();\n    }\n  }\n\n  update() {\n    let option;\n    if (this.select.selectedIndex > -1) {\n      const item =\n        // @ts-expect-error Fix me later\n        this.container.querySelector('.ql-picker-options').children[\n          this.select.selectedIndex\n        ];\n      option = this.select.options[this.select.selectedIndex];\n      // @ts-expect-error\n      this.selectItem(item);\n    } else {\n      this.selectItem(null);\n    }\n    const isActive =\n      option != null &&\n      option !== this.select.querySelector('option[selected]');\n    this.label.classList.toggle('ql-active', isActive);\n  }\n}\n\nexport default Picker;\n", "import Picker from './picker.js';\n\nclass ColorPicker extends Picker {\n  constructor(select: HTMLSelectElement, label: string) {\n    super(select);\n    this.label.innerHTML = label;\n    this.container.classList.add('ql-color-picker');\n    Array.from(this.container.querySelectorAll('.ql-picker-item'))\n      .slice(0, 7)\n      .forEach((item) => {\n        item.classList.add('ql-primary');\n      });\n  }\n\n  buildItem(option: HTMLOptionElement) {\n    const item = super.buildItem(option);\n    item.style.backgroundColor = option.getAttribute('value') || '';\n    return item;\n  }\n\n  selectItem(item: HTMLElement | null, trigger?: boolean) {\n    super.selectItem(item, trigger);\n    const colorLabel = this.label.querySelector<HTMLElement>('.ql-color-label');\n    const value = item ? item.getAttribute('data-value') || '' : '';\n    if (colorLabel) {\n      if (colorLabel.tagName === 'line') {\n        colorLabel.style.stroke = value;\n      } else {\n        colorLabel.style.fill = value;\n      }\n    }\n  }\n}\n\nexport default ColorPicker;\n", "import Picker from './picker.js';\n\nclass IconPicker extends Picker {\n  defaultItem: HTMLElement | null;\n\n  constructor(select: HTMLSelectElement, icons: Record<string, string>) {\n    super(select);\n    this.container.classList.add('ql-icon-picker');\n    Array.from(this.container.querySelectorAll('.ql-picker-item')).forEach(\n      (item) => {\n        item.innerHTML = icons[item.getAttribute('data-value') || ''];\n      },\n    );\n    this.defaultItem = this.container.querySelector('.ql-selected');\n    this.selectItem(this.defaultItem);\n  }\n\n  selectItem(target: HTMLElement | null, trigger?: boolean) {\n    super.selectItem(target, trigger);\n    const item = target || this.defaultItem;\n    if (item != null) {\n      if (this.label.innerHTML === item.innerHTML) return;\n      this.label.innerHTML = item.innerHTML;\n    }\n  }\n}\n\nexport default IconPicker;\n", "import type Quill from '../core.js';\nimport type { Bounds } from '../core/selection.js';\n\nconst isScrollable = (el: Element) => {\n  const { overflowY } = getComputedStyle(el, null);\n  return overflowY !== 'visible' && overflowY !== 'clip';\n};\n\nclass Tooltip {\n  quill: Quill;\n  boundsContainer: HTMLElement;\n  root: HTMLDivElement;\n\n  constructor(quill: Quill, boundsContainer?: HTMLElement) {\n    this.quill = quill;\n    this.boundsContainer = boundsContainer || document.body;\n    this.root = quill.addContainer('ql-tooltip');\n    // @ts-expect-error\n    this.root.innerHTML = this.constructor.TEMPLATE;\n    if (isScrollable(this.quill.root)) {\n      this.quill.root.addEventListener('scroll', () => {\n        this.root.style.marginTop = `${-1 * this.quill.root.scrollTop}px`;\n      });\n    }\n    this.hide();\n  }\n\n  hide() {\n    this.root.classList.add('ql-hidden');\n  }\n\n  position(reference: Bounds) {\n    const left =\n      reference.left + reference.width / 2 - this.root.offsetWidth / 2;\n    // root.scrollTop should be 0 if scrollContainer !== root\n    const top = reference.bottom + this.quill.root.scrollTop;\n    this.root.style.left = `${left}px`;\n    this.root.style.top = `${top}px`;\n    this.root.classList.remove('ql-flip');\n    const containerBounds = this.boundsContainer.getBoundingClientRect();\n    const rootBounds = this.root.getBoundingClientRect();\n    let shift = 0;\n    if (rootBounds.right > containerBounds.right) {\n      shift = containerBounds.right - rootBounds.right;\n      this.root.style.left = `${left + shift}px`;\n    }\n    if (rootBounds.left < containerBounds.left) {\n      shift = containerBounds.left - rootBounds.left;\n      this.root.style.left = `${left + shift}px`;\n    }\n    if (rootBounds.bottom > containerBounds.bottom) {\n      const height = rootBounds.bottom - rootBounds.top;\n      const verticalShift = reference.bottom - reference.top + height;\n      this.root.style.top = `${top - verticalShift}px`;\n      this.root.classList.add('ql-flip');\n    }\n    return shift;\n  }\n\n  show() {\n    this.root.classList.remove('ql-editing');\n    this.root.classList.remove('ql-hidden');\n  }\n}\n\nexport default Tooltip;\n", "import { merge } from 'lodash-es';\nimport type Quill from '../core/quill.js';\nimport Emitter from '../core/emitter.js';\nimport Theme from '../core/theme.js';\nimport type { ThemeOptions } from '../core/theme.js';\nimport ColorPicker from '../ui/color-picker.js';\nimport IconPicker from '../ui/icon-picker.js';\nimport Picker from '../ui/picker.js';\nimport Tooltip from '../ui/tooltip.js';\nimport type { Range } from '../core/selection.js';\nimport type Clipboard from '../modules/clipboard.js';\nimport type History from '../modules/history.js';\nimport type Keyboard from '../modules/keyboard.js';\nimport type Uploader from '../modules/uploader.js';\nimport type Selection from '../core/selection.js';\n\nconst ALIGNS = [false, 'center', 'right', 'justify'];\n\nconst COLORS = [\n  '#000000',\n  '#e60000',\n  '#ff9900',\n  '#ffff00',\n  '#008a00',\n  '#0066cc',\n  '#9933ff',\n  '#ffffff',\n  '#facccc',\n  '#ffebcc',\n  '#ffffcc',\n  '#cce8cc',\n  '#cce0f5',\n  '#ebd6ff',\n  '#bbbbbb',\n  '#f06666',\n  '#ffc266',\n  '#ffff66',\n  '#66b966',\n  '#66a3e0',\n  '#c285ff',\n  '#888888',\n  '#a10000',\n  '#b26b00',\n  '#b2b200',\n  '#006100',\n  '#0047b2',\n  '#6b24b2',\n  '#444444',\n  '#5c0000',\n  '#663d00',\n  '#666600',\n  '#003700',\n  '#002966',\n  '#3d1466',\n];\n\nconst FONTS = [false, 'serif', 'monospace'];\n\nconst HEADERS = ['1', '2', '3', false];\n\nconst SIZES = ['small', false, 'large', 'huge'];\n\nclass BaseTheme extends Theme {\n  pickers: Picker[];\n  tooltip?: Tooltip;\n\n  constructor(quill: Quill, options: ThemeOptions) {\n    super(quill, options);\n    const listener = (e: MouseEvent) => {\n      if (!document.body.contains(quill.root)) {\n        document.body.removeEventListener('click', listener);\n        return;\n      }\n      if (\n        this.tooltip != null &&\n        // @ts-expect-error\n        !this.tooltip.root.contains(e.target) &&\n        // @ts-expect-error\n        document.activeElement !== this.tooltip.textbox &&\n        !this.quill.hasFocus()\n      ) {\n        this.tooltip.hide();\n      }\n      if (this.pickers != null) {\n        this.pickers.forEach((picker) => {\n          // @ts-expect-error\n          if (!picker.container.contains(e.target)) {\n            picker.close();\n          }\n        });\n      }\n    };\n    quill.emitter.listenDOM('click', document.body, listener);\n  }\n\n  addModule(name: 'clipboard'): Clipboard;\n  addModule(name: 'keyboard'): Keyboard;\n  addModule(name: 'uploader'): Uploader;\n  addModule(name: 'history'): History;\n  addModule(name: 'selection'): Selection;\n  addModule(name: string): unknown;\n  addModule(name: string) {\n    const module = super.addModule(name);\n    if (name === 'toolbar') {\n      // @ts-expect-error\n      this.extendToolbar(module);\n    }\n    return module;\n  }\n\n  buildButtons(\n    buttons: NodeListOf<HTMLElement>,\n    icons: Record<string, Record<string, string> | string>,\n  ) {\n    Array.from(buttons).forEach((button) => {\n      const className = button.getAttribute('class') || '';\n      className.split(/\\s+/).forEach((name) => {\n        if (!name.startsWith('ql-')) return;\n        name = name.slice('ql-'.length);\n        if (icons[name] == null) return;\n        if (name === 'direction') {\n          // @ts-expect-error\n          button.innerHTML = icons[name][''] + icons[name].rtl;\n        } else if (typeof icons[name] === 'string') {\n          // @ts-expect-error\n          button.innerHTML = icons[name];\n        } else {\n          // @ts-expect-error\n          const value = button.value || '';\n          // @ts-expect-error\n          if (value != null && icons[name][value]) {\n            // @ts-expect-error\n            button.innerHTML = icons[name][value];\n          }\n        }\n      });\n    });\n  }\n\n  buildPickers(\n    selects: NodeListOf<HTMLSelectElement>,\n    icons: Record<string, string | Record<string, string>>,\n  ) {\n    this.pickers = Array.from(selects).map((select) => {\n      if (select.classList.contains('ql-align')) {\n        if (select.querySelector('option') == null) {\n          fillSelect(select, ALIGNS);\n        }\n        if (typeof icons.align === 'object') {\n          return new IconPicker(select, icons.align);\n        }\n      }\n      if (\n        select.classList.contains('ql-background') ||\n        select.classList.contains('ql-color')\n      ) {\n        const format = select.classList.contains('ql-background')\n          ? 'background'\n          : 'color';\n        if (select.querySelector('option') == null) {\n          fillSelect(\n            select,\n            COLORS,\n            format === 'background' ? '#ffffff' : '#000000',\n          );\n        }\n        return new ColorPicker(select, icons[format] as string);\n      }\n      if (select.querySelector('option') == null) {\n        if (select.classList.contains('ql-font')) {\n          fillSelect(select, FONTS);\n        } else if (select.classList.contains('ql-header')) {\n          fillSelect(select, HEADERS);\n        } else if (select.classList.contains('ql-size')) {\n          fillSelect(select, SIZES);\n        }\n      }\n      return new Picker(select);\n    });\n    const update = () => {\n      this.pickers.forEach((picker) => {\n        picker.update();\n      });\n    };\n    this.quill.on(Emitter.events.EDITOR_CHANGE, update);\n  }\n}\nBaseTheme.DEFAULTS = merge({}, Theme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        formula() {\n          this.quill.theme.tooltip.edit('formula');\n        },\n        image() {\n          let fileInput = this.container.querySelector(\n            'input.ql-image[type=file]',\n          );\n          if (fileInput == null) {\n            fileInput = document.createElement('input');\n            fileInput.setAttribute('type', 'file');\n            fileInput.setAttribute(\n              'accept',\n              this.quill.uploader.options.mimetypes.join(', '),\n            );\n            fileInput.classList.add('ql-image');\n            fileInput.addEventListener('change', () => {\n              const range = this.quill.getSelection(true);\n              this.quill.uploader.upload(range, fileInput.files);\n              fileInput.value = '';\n            });\n            this.container.appendChild(fileInput);\n          }\n          fileInput.click();\n        },\n        video() {\n          this.quill.theme.tooltip.edit('video');\n        },\n      },\n    },\n  },\n});\n\nclass BaseTooltip extends Tooltip {\n  textbox: HTMLInputElement | null;\n  linkRange?: Range;\n\n  constructor(quill: Quill, boundsContainer?: HTMLElement) {\n    super(quill, boundsContainer);\n    this.textbox = this.root.querySelector('input[type=\"text\"]');\n    this.listen();\n  }\n\n  listen() {\n    // @ts-expect-error Fix me later\n    this.textbox.addEventListener('keydown', (event) => {\n      if (event.key === 'Enter') {\n        this.save();\n        event.preventDefault();\n      } else if (event.key === 'Escape') {\n        this.cancel();\n        event.preventDefault();\n      }\n    });\n  }\n\n  cancel() {\n    this.hide();\n    this.restoreFocus();\n  }\n\n  edit(mode = 'link', preview: string | null = null) {\n    this.root.classList.remove('ql-hidden');\n    this.root.classList.add('ql-editing');\n    if (this.textbox == null) return;\n\n    if (preview != null) {\n      this.textbox.value = preview;\n    } else if (mode !== this.root.getAttribute('data-mode')) {\n      this.textbox.value = '';\n    }\n    const bounds = this.quill.getBounds(this.quill.selection.savedRange);\n    if (bounds != null) {\n      this.position(bounds);\n    }\n    this.textbox.select();\n    this.textbox.setAttribute(\n      'placeholder',\n      this.textbox.getAttribute(`data-${mode}`) || '',\n    );\n    this.root.setAttribute('data-mode', mode);\n  }\n\n  restoreFocus() {\n    this.quill.focus({ preventScroll: true });\n  }\n\n  save() {\n    // @ts-expect-error Fix me later\n    let { value } = this.textbox;\n    switch (this.root.getAttribute('data-mode')) {\n      case 'link': {\n        const { scrollTop } = this.quill.root;\n        if (this.linkRange) {\n          this.quill.formatText(\n            this.linkRange,\n            'link',\n            value,\n            Emitter.sources.USER,\n          );\n          delete this.linkRange;\n        } else {\n          this.restoreFocus();\n          this.quill.format('link', value, Emitter.sources.USER);\n        }\n        this.quill.root.scrollTop = scrollTop;\n        break;\n      }\n      case 'video': {\n        value = extractVideoUrl(value);\n      } // eslint-disable-next-line no-fallthrough\n      case 'formula': {\n        if (!value) break;\n        const range = this.quill.getSelection(true);\n        if (range != null) {\n          const index = range.index + range.length;\n          this.quill.insertEmbed(\n            index,\n            // @ts-expect-error Fix me later\n            this.root.getAttribute('data-mode'),\n            value,\n            Emitter.sources.USER,\n          );\n          if (this.root.getAttribute('data-mode') === 'formula') {\n            this.quill.insertText(index + 1, ' ', Emitter.sources.USER);\n          }\n          this.quill.setSelection(index + 2, Emitter.sources.USER);\n        }\n        break;\n      }\n      default:\n    }\n    // @ts-expect-error Fix me later\n    this.textbox.value = '';\n    this.hide();\n  }\n}\n\nfunction extractVideoUrl(url: string) {\n  let match =\n    url.match(\n      /^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtube\\.com\\/watch.*v=([a-zA-Z0-9_-]+)/,\n    ) ||\n    url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtu\\.be\\/([a-zA-Z0-9_-]+)/);\n  if (match) {\n    return `${match[1] || 'https'}://www.youtube.com/embed/${\n      match[2]\n    }?showinfo=0`;\n  }\n  // eslint-disable-next-line no-cond-assign\n  if ((match = url.match(/^(?:(https?):\\/\\/)?(?:www\\.)?vimeo\\.com\\/(\\d+)/))) {\n    return `${match[1] || 'https'}://player.vimeo.com/video/${match[2]}/`;\n  }\n  return url;\n}\n\nfunction fillSelect(\n  select: HTMLSelectElement,\n  values: Array<string | boolean>,\n  defaultValue: unknown = false,\n) {\n  values.forEach((value) => {\n    const option = document.createElement('option');\n    if (value === defaultValue) {\n      option.setAttribute('selected', 'selected');\n    } else {\n      option.setAttribute('value', String(value));\n    }\n    select.appendChild(option);\n  });\n}\n\nexport { BaseTooltip, BaseTheme as default };\n", "import { merge } from 'lodash-es';\nimport Emitter from '../core/emitter.js';\nimport BaseTheme, { BaseTooltip } from './base.js';\nimport { Range } from '../core/selection.js';\nimport type { Bounds } from '../core/selection.js';\nimport icons from '../ui/icons.js';\nimport Quill from '../core/quill.js';\nimport type { ThemeOptions } from '../core/theme.js';\nimport type Toolbar from '../modules/toolbar.js';\nimport type { ToolbarConfig } from '../modules/toolbar.js';\n\nconst TOOLBAR_CONFIG: ToolbarConfig = [\n  ['bold', 'italic', 'link'],\n  [{ header: 1 }, { header: 2 }, 'blockquote'],\n];\n\nclass BubbleTooltip extends BaseTooltip {\n  static TEMPLATE = [\n    '<span class=\"ql-tooltip-arrow\"></span>',\n    '<div class=\"ql-tooltip-editor\">',\n    '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">',\n    '<a class=\"ql-close\"></a>',\n    '</div>',\n  ].join('');\n\n  constructor(quill: Quill, bounds?: HTMLElement) {\n    super(quill, bounds);\n    this.quill.on(\n      Emitter.events.EDITOR_CHANGE,\n      (type, range, oldRange, source) => {\n        if (type !== Emitter.events.SELECTION_CHANGE) return;\n        if (\n          range != null &&\n          range.length > 0 &&\n          source === Emitter.sources.USER\n        ) {\n          this.show();\n          // Lock our width so we will expand beyond our offsetParent boundaries\n          this.root.style.left = '0px';\n          this.root.style.width = '';\n          this.root.style.width = `${this.root.offsetWidth}px`;\n          const lines = this.quill.getLines(range.index, range.length);\n          if (lines.length === 1) {\n            const bounds = this.quill.getBounds(range);\n            if (bounds != null) {\n              this.position(bounds);\n            }\n          } else {\n            const lastLine = lines[lines.length - 1];\n            const index = this.quill.getIndex(lastLine);\n            const length = Math.min(\n              lastLine.length() - 1,\n              range.index + range.length - index,\n            );\n            const indexBounds = this.quill.getBounds(new Range(index, length));\n            if (indexBounds != null) {\n              this.position(indexBounds);\n            }\n          }\n        } else if (\n          document.activeElement !== this.textbox &&\n          this.quill.hasFocus()\n        ) {\n          this.hide();\n        }\n      },\n    );\n  }\n\n  listen() {\n    super.listen();\n    // @ts-expect-error Fix me later\n    this.root.querySelector('.ql-close').addEventListener('click', () => {\n      this.root.classList.remove('ql-editing');\n    });\n    this.quill.on(Emitter.events.SCROLL_OPTIMIZE, () => {\n      // Let selection be restored by toolbar handlers before repositioning\n      setTimeout(() => {\n        if (this.root.classList.contains('ql-hidden')) return;\n        const range = this.quill.getSelection();\n        if (range != null) {\n          const bounds = this.quill.getBounds(range);\n          if (bounds != null) {\n            this.position(bounds);\n          }\n        }\n      }, 1);\n    });\n  }\n\n  cancel() {\n    this.show();\n  }\n\n  position(reference: Bounds) {\n    const shift = super.position(reference);\n    const arrow = this.root.querySelector('.ql-tooltip-arrow');\n    // @ts-expect-error\n    arrow.style.marginLeft = '';\n    if (shift !== 0) {\n      // @ts-expect-error\n      arrow.style.marginLeft = `${-1 * shift - arrow.offsetWidth / 2}px`;\n    }\n    return shift;\n  }\n}\n\nclass BubbleTheme extends BaseTheme {\n  tooltip: BubbleTooltip;\n\n  constructor(quill: Quill, options: ThemeOptions) {\n    if (\n      options.modules.toolbar != null &&\n      options.modules.toolbar.container == null\n    ) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n    super(quill, options);\n    this.quill.container.classList.add('ql-bubble');\n  }\n\n  extendToolbar(toolbar: Toolbar) {\n    // @ts-expect-error\n    this.tooltip = new BubbleTooltip(this.quill, this.options.bounds);\n    if (toolbar.container != null) {\n      this.tooltip.root.appendChild<HTMLElement>(toolbar.container);\n      this.buildButtons(toolbar.container.querySelectorAll('button'), icons);\n      this.buildPickers(toolbar.container.querySelectorAll('select'), icons);\n    }\n  }\n}\nBubbleTheme.DEFAULTS = merge({}, BaseTheme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link(value: string) {\n          if (!value) {\n            this.quill.format('link', false, Quill.sources.USER);\n          } else {\n            // @ts-expect-error\n            this.quill.theme.tooltip.edit();\n          }\n        },\n      },\n    },\n  },\n} satisfies ThemeOptions);\n\nexport { BubbleTooltip, BubbleTheme as default };\n", "import { merge } from 'lodash-es';\nimport Emitter from '../core/emitter.js';\nimport BaseTheme, { BaseTooltip } from './base.js';\nimport LinkBlot from '../formats/link.js';\nimport { Range } from '../core/selection.js';\nimport icons from '../ui/icons.js';\nimport Quill from '../core/quill.js';\nimport type { Context } from '../modules/keyboard.js';\nimport type Toolbar from '../modules/toolbar.js';\nimport type { ToolbarConfig } from '../modules/toolbar.js';\nimport type { ThemeOptions } from '../core/theme.js';\n\nconst TOOLBAR_CONFIG: ToolbarConfig = [\n  [{ header: ['1', '2', '3', false] }],\n  ['bold', 'italic', 'underline', 'link'],\n  [{ list: 'ordered' }, { list: 'bullet' }],\n  ['clean'],\n];\n\nclass SnowTooltip extends BaseTooltip {\n  static TEMPLATE = [\n    '<a class=\"ql-preview\" rel=\"noopener noreferrer\" target=\"_blank\" href=\"about:blank\"></a>',\n    '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">',\n    '<a class=\"ql-action\"></a>',\n    '<a class=\"ql-remove\"></a>',\n  ].join('');\n\n  preview = this.root.querySelector('a.ql-preview');\n\n  listen() {\n    super.listen();\n    // @ts-expect-error Fix me later\n    this.root\n      .querySelector('a.ql-action')\n      .addEventListener('click', (event) => {\n        if (this.root.classList.contains('ql-editing')) {\n          this.save();\n        } else {\n          // @ts-expect-error Fix me later\n          this.edit('link', this.preview.textContent);\n        }\n        event.preventDefault();\n      });\n    // @ts-expect-error Fix me later\n    this.root\n      .querySelector('a.ql-remove')\n      .addEventListener('click', (event) => {\n        if (this.linkRange != null) {\n          const range = this.linkRange;\n          this.restoreFocus();\n          this.quill.formatText(range, 'link', false, Emitter.sources.USER);\n          delete this.linkRange;\n        }\n        event.preventDefault();\n        this.hide();\n      });\n    this.quill.on(\n      Emitter.events.SELECTION_CHANGE,\n      (range, oldRange, source) => {\n        if (range == null) return;\n        if (range.length === 0 && source === Emitter.sources.USER) {\n          const [link, offset] = this.quill.scroll.descendant(\n            LinkBlot,\n            range.index,\n          );\n          if (link != null) {\n            this.linkRange = new Range(range.index - offset, link.length());\n            const preview = LinkBlot.formats(link.domNode);\n            // @ts-expect-error Fix me later\n            this.preview.textContent = preview;\n            // @ts-expect-error Fix me later\n            this.preview.setAttribute('href', preview);\n            this.show();\n            const bounds = this.quill.getBounds(this.linkRange);\n            if (bounds != null) {\n              this.position(bounds);\n            }\n            return;\n          }\n        } else {\n          delete this.linkRange;\n        }\n        this.hide();\n      },\n    );\n  }\n\n  show() {\n    super.show();\n    this.root.removeAttribute('data-mode');\n  }\n}\n\nclass SnowTheme extends BaseTheme {\n  constructor(quill: Quill, options: ThemeOptions) {\n    if (\n      options.modules.toolbar != null &&\n      options.modules.toolbar.container == null\n    ) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n    super(quill, options);\n    this.quill.container.classList.add('ql-snow');\n  }\n\n  extendToolbar(toolbar: Toolbar) {\n    if (toolbar.container != null) {\n      toolbar.container.classList.add('ql-snow');\n      this.buildButtons(toolbar.container.querySelectorAll('button'), icons);\n      this.buildPickers(toolbar.container.querySelectorAll('select'), icons);\n      // @ts-expect-error\n      this.tooltip = new SnowTooltip(this.quill, this.options.bounds);\n      if (toolbar.container.querySelector('.ql-link')) {\n        this.quill.keyboard.addBinding(\n          { key: 'k', shortKey: true },\n          (_range: Range, context: Context) => {\n            toolbar.handlers.link.call(toolbar, !context.format.link);\n          },\n        );\n      }\n    }\n  }\n}\nSnowTheme.DEFAULTS = merge({}, BaseTheme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link(value: string) {\n          if (value) {\n            const range = this.quill.getSelection();\n            if (range == null || range.length === 0) return;\n            let preview = this.quill.getText(range);\n            if (\n              /^\\S+@\\S+\\.\\S+$/.test(preview) &&\n              preview.indexOf('mailto:') !== 0\n            ) {\n              preview = `mailto:${preview}`;\n            }\n            // @ts-expect-error\n            const { tooltip } = this.quill.theme;\n            tooltip.edit('link', preview);\n          } else {\n            this.quill.format('link', false, Quill.sources.USER);\n          }\n        },\n      },\n    },\n  },\n} satisfies ThemeOptions);\n\nexport default SnowTheme;\n", "import Quill, { Parchment, Range } from './core.js';\nimport type {\n  Bounds,\n  DebugLevel,\n  EmitterSource,\n  ExpandedQuillOptions,\n  QuillOptions,\n} from './core.js';\n\nimport { AlignClass, AlignStyle } from './formats/align.js';\nimport {\n  DirectionAttribute,\n  DirectionClass,\n  DirectionStyle,\n} from './formats/direction.js';\nimport Indent from './formats/indent.js';\n\nimport Blockquote from './formats/blockquote.js';\nimport Header from './formats/header.js';\nimport List from './formats/list.js';\n\nimport { BackgroundClass, BackgroundStyle } from './formats/background.js';\nimport { ColorClass, ColorStyle } from './formats/color.js';\nimport { FontClass, FontStyle } from './formats/font.js';\nimport { SizeClass, SizeStyle } from './formats/size.js';\n\nimport Bold from './formats/bold.js';\nimport Italic from './formats/italic.js';\nimport Link from './formats/link.js';\nimport Script from './formats/script.js';\nimport Strike from './formats/strike.js';\nimport Underline from './formats/underline.js';\n\nimport Formula from './formats/formula.js';\nimport Image from './formats/image.js';\nimport Video from './formats/video.js';\n\nimport CodeBlock, { Code as InlineCode } from './formats/code.js';\n\nimport Syntax from './modules/syntax.js';\nimport Table from './modules/table.js';\nimport Toolbar from './modules/toolbar.js';\n\nimport Icons from './ui/icons.js';\nimport Picker from './ui/picker.js';\nimport ColorPicker from './ui/color-picker.js';\nimport IconPicker from './ui/icon-picker.js';\nimport Tooltip from './ui/tooltip.js';\n\nimport BubbleTheme from './themes/bubble.js';\nimport SnowTheme from './themes/snow.js';\n\nQuill.register(\n  {\n    'attributors/attribute/direction': DirectionAttribute,\n\n    'attributors/class/align': AlignClass,\n    'attributors/class/background': BackgroundClass,\n    'attributors/class/color': ColorClass,\n    'attributors/class/direction': DirectionClass,\n    'attributors/class/font': FontClass,\n    'attributors/class/size': SizeClass,\n\n    'attributors/style/align': AlignStyle,\n    'attributors/style/background': BackgroundStyle,\n    'attributors/style/color': ColorStyle,\n    'attributors/style/direction': DirectionStyle,\n    'attributors/style/font': FontStyle,\n    'attributors/style/size': SizeStyle,\n  },\n  true,\n);\n\nQuill.register(\n  {\n    'formats/align': AlignClass,\n    'formats/direction': DirectionClass,\n    'formats/indent': Indent,\n\n    'formats/background': BackgroundStyle,\n    'formats/color': ColorStyle,\n    'formats/font': FontClass,\n    'formats/size': SizeClass,\n\n    'formats/blockquote': Blockquote,\n    'formats/code-block': CodeBlock,\n    'formats/header': Header,\n    'formats/list': List,\n\n    'formats/bold': Bold,\n    'formats/code': InlineCode,\n    'formats/italic': Italic,\n    'formats/link': Link,\n    'formats/script': Script,\n    'formats/strike': Strike,\n    'formats/underline': Underline,\n\n    'formats/formula': Formula,\n    'formats/image': Image,\n    'formats/video': Video,\n\n    'modules/syntax': Syntax,\n    'modules/table': Table,\n    'modules/toolbar': Toolbar,\n\n    'themes/bubble': BubbleTheme,\n    'themes/snow': SnowTheme,\n\n    'ui/icons': Icons,\n    'ui/picker': Picker,\n    'ui/icon-picker': IconPicker,\n    'ui/color-picker': ColorPicker,\n    'ui/tooltip': Tooltip,\n  },\n  true,\n);\n\nexport { Module } from './core.js';\nexport type {\n  Bounds,\n  DebugLevel,\n  EmitterSource,\n  ExpandedQuillOptions,\n  QuillOptions,\n};\nexport { Parchment, Range };\n\nexport default Quill;\n", "import Quill from 'quill';\nimport showdown from 'showdown'\nimport TurndownService from 'turndown'\n\nconst converter = new showdown.Converter()\nvar turndownService = new TurndownService()\n\nimport Trix from \"trix\"\n\nexport default {\n  mounted() {\n    console.log('loading MD editor')\n\n    const targetNode = this.el.getElementsByTagName('trix-editor')?.[0]\n    const editor = targetNode.editor\n    console.log(targetNode)\n    console.log(targetNode.editor)\n\n\n    const inputTarget = document.getElementById(targetNode.id.replace('editor', 'content'))\n    editor.insertHTML(converter.makeHtml(inputTarget.value))\n\n\n    this.el.addEventListener('trix-change', (event) => {\n      console.log(event)\n\n      const markdown = turndownService.turndown(targetNode.innerHTML)\n      inputTarget.value = markdown\n      inputTarget.dispatchEvent(new Event('input', { bubbles: true }))\n    })\n    //\n\n    // this.quill = new Quill(targetNode, {\n    //   theme: \"snow\",\n    // });\n\n    // this.quill.setContents(this.quill.clipboard.convert({\n    //   html: converter.makeHtml(inputTarget.value)\n    // }))\n\n    // this.quill.on('text-change', (delta, oldDelta, source) => {\n    //   var html = this.quill.container.firstChild.innerHTML;\n\n    //   const markdown = turndownService.turndown(html)\n\n    //   inputTarget.value = markdown\n    //   inputTarget.dispatchEvent(new Event('input', { bubbles: true }))\n    // })\n\n  },\n\n  destroyed() {\n    // this.quill\n\n    // this.crepe.destroy()\n    // this.observer.disconnect()\n  }\n}\n", "function extend (destination) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (source.hasOwnProperty(key)) destination[key] = source[key];\n    }\n  }\n  return destination\n}\n\nfunction repeat (character, count) {\n  return Array(count + 1).join(character)\n}\n\nfunction trimLeadingNewlines (string) {\n  return string.replace(/^\\n*/, '')\n}\n\nfunction trimTrailingNewlines (string) {\n  // avoid match-at-end regexp bottleneck, see #370\n  var indexEnd = string.length;\n  while (indexEnd > 0 && string[indexEnd - 1] === '\\n') indexEnd--;\n  return string.substring(0, indexEnd)\n}\n\nvar blockElements = [\n  'ADDRESS', 'ARTICLE', 'ASIDE', 'AUDIO', 'BLOCKQUOTE', 'BODY', 'CANVAS',\n  'CENTER', 'DD', 'DIR', 'DIV', 'DL', 'DT', 'FIELDSET', 'FIGCAPTION', 'FIGURE',\n  'FOOTER', 'FORM', 'FRAMESET', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'HEADER',\n  'HGROUP', 'HR', 'HTML', 'ISINDEX', 'LI', 'MAIN', 'MENU', 'NAV', 'NOFRAMES',\n  'NOSCRIPT', 'OL', 'OUTPUT', 'P', 'PRE', 'SECTION', 'TABLE', 'TBODY', 'TD',\n  'TFOOT', 'TH', 'THEAD', 'TR', 'UL'\n];\n\nfunction isBlock (node) {\n  return is(node, blockElements)\n}\n\nvar voidElements = [\n  'AREA', 'BASE', 'BR', 'COL', 'COMMAND', 'EMBED', 'HR', 'IMG', 'INPUT',\n  'KEYGEN', 'LINK', 'META', 'PARAM', 'SOURCE', 'TRACK', 'WBR'\n];\n\nfunction isVoid (node) {\n  return is(node, voidElements)\n}\n\nfunction hasVoid (node) {\n  return has(node, voidElements)\n}\n\nvar meaningfulWhenBlankElements = [\n  'A', 'TABLE', 'THEAD', 'TBODY', 'TFOOT', 'TH', 'TD', 'IFRAME', 'SCRIPT',\n  'AUDIO', 'VIDEO'\n];\n\nfunction isMeaningfulWhenBlank (node) {\n  return is(node, meaningfulWhenBlankElements)\n}\n\nfunction hasMeaningfulWhenBlank (node) {\n  return has(node, meaningfulWhenBlankElements)\n}\n\nfunction is (node, tagNames) {\n  return tagNames.indexOf(node.nodeName) >= 0\n}\n\nfunction has (node, tagNames) {\n  return (\n    node.getElementsByTagName &&\n    tagNames.some(function (tagName) {\n      return node.getElementsByTagName(tagName).length\n    })\n  )\n}\n\nvar rules = {};\n\nrules.paragraph = {\n  filter: 'p',\n\n  replacement: function (content) {\n    return '\\n\\n' + content + '\\n\\n'\n  }\n};\n\nrules.lineBreak = {\n  filter: 'br',\n\n  replacement: function (content, node, options) {\n    return options.br + '\\n'\n  }\n};\n\nrules.heading = {\n  filter: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'],\n\n  replacement: function (content, node, options) {\n    var hLevel = Number(node.nodeName.charAt(1));\n\n    if (options.headingStyle === 'setext' && hLevel < 3) {\n      var underline = repeat((hLevel === 1 ? '=' : '-'), content.length);\n      return (\n        '\\n\\n' + content + '\\n' + underline + '\\n\\n'\n      )\n    } else {\n      return '\\n\\n' + repeat('#', hLevel) + ' ' + content + '\\n\\n'\n    }\n  }\n};\n\nrules.blockquote = {\n  filter: 'blockquote',\n\n  replacement: function (content) {\n    content = content.replace(/^\\n+|\\n+$/g, '');\n    content = content.replace(/^/gm, '> ');\n    return '\\n\\n' + content + '\\n\\n'\n  }\n};\n\nrules.list = {\n  filter: ['ul', 'ol'],\n\n  replacement: function (content, node) {\n    var parent = node.parentNode;\n    if (parent.nodeName === 'LI' && parent.lastElementChild === node) {\n      return '\\n' + content\n    } else {\n      return '\\n\\n' + content + '\\n\\n'\n    }\n  }\n};\n\nrules.listItem = {\n  filter: 'li',\n\n  replacement: function (content, node, options) {\n    content = content\n      .replace(/^\\n+/, '') // remove leading newlines\n      .replace(/\\n+$/, '\\n') // replace trailing newlines with just a single one\n      .replace(/\\n/gm, '\\n    '); // indent\n    var prefix = options.bulletListMarker + '   ';\n    var parent = node.parentNode;\n    if (parent.nodeName === 'OL') {\n      var start = parent.getAttribute('start');\n      var index = Array.prototype.indexOf.call(parent.children, node);\n      prefix = (start ? Number(start) + index : index + 1) + '.  ';\n    }\n    return (\n      prefix + content + (node.nextSibling && !/\\n$/.test(content) ? '\\n' : '')\n    )\n  }\n};\n\nrules.indentedCodeBlock = {\n  filter: function (node, options) {\n    return (\n      options.codeBlockStyle === 'indented' &&\n      node.nodeName === 'PRE' &&\n      node.firstChild &&\n      node.firstChild.nodeName === 'CODE'\n    )\n  },\n\n  replacement: function (content, node, options) {\n    return (\n      '\\n\\n    ' +\n      node.firstChild.textContent.replace(/\\n/g, '\\n    ') +\n      '\\n\\n'\n    )\n  }\n};\n\nrules.fencedCodeBlock = {\n  filter: function (node, options) {\n    return (\n      options.codeBlockStyle === 'fenced' &&\n      node.nodeName === 'PRE' &&\n      node.firstChild &&\n      node.firstChild.nodeName === 'CODE'\n    )\n  },\n\n  replacement: function (content, node, options) {\n    var className = node.firstChild.getAttribute('class') || '';\n    var language = (className.match(/language-(\\S+)/) || [null, ''])[1];\n    var code = node.firstChild.textContent;\n\n    var fenceChar = options.fence.charAt(0);\n    var fenceSize = 3;\n    var fenceInCodeRegex = new RegExp('^' + fenceChar + '{3,}', 'gm');\n\n    var match;\n    while ((match = fenceInCodeRegex.exec(code))) {\n      if (match[0].length >= fenceSize) {\n        fenceSize = match[0].length + 1;\n      }\n    }\n\n    var fence = repeat(fenceChar, fenceSize);\n\n    return (\n      '\\n\\n' + fence + language + '\\n' +\n      code.replace(/\\n$/, '') +\n      '\\n' + fence + '\\n\\n'\n    )\n  }\n};\n\nrules.horizontalRule = {\n  filter: 'hr',\n\n  replacement: function (content, node, options) {\n    return '\\n\\n' + options.hr + '\\n\\n'\n  }\n};\n\nrules.inlineLink = {\n  filter: function (node, options) {\n    return (\n      options.linkStyle === 'inlined' &&\n      node.nodeName === 'A' &&\n      node.getAttribute('href')\n    )\n  },\n\n  replacement: function (content, node) {\n    var href = node.getAttribute('href');\n    if (href) href = href.replace(/([()])/g, '\\\\$1');\n    var title = cleanAttribute(node.getAttribute('title'));\n    if (title) title = ' \"' + title.replace(/\"/g, '\\\\\"') + '\"';\n    return '[' + content + '](' + href + title + ')'\n  }\n};\n\nrules.referenceLink = {\n  filter: function (node, options) {\n    return (\n      options.linkStyle === 'referenced' &&\n      node.nodeName === 'A' &&\n      node.getAttribute('href')\n    )\n  },\n\n  replacement: function (content, node, options) {\n    var href = node.getAttribute('href');\n    var title = cleanAttribute(node.getAttribute('title'));\n    if (title) title = ' \"' + title + '\"';\n    var replacement;\n    var reference;\n\n    switch (options.linkReferenceStyle) {\n      case 'collapsed':\n        replacement = '[' + content + '][]';\n        reference = '[' + content + ']: ' + href + title;\n        break\n      case 'shortcut':\n        replacement = '[' + content + ']';\n        reference = '[' + content + ']: ' + href + title;\n        break\n      default:\n        var id = this.references.length + 1;\n        replacement = '[' + content + '][' + id + ']';\n        reference = '[' + id + ']: ' + href + title;\n    }\n\n    this.references.push(reference);\n    return replacement\n  },\n\n  references: [],\n\n  append: function (options) {\n    var references = '';\n    if (this.references.length) {\n      references = '\\n\\n' + this.references.join('\\n') + '\\n\\n';\n      this.references = []; // Reset references\n    }\n    return references\n  }\n};\n\nrules.emphasis = {\n  filter: ['em', 'i'],\n\n  replacement: function (content, node, options) {\n    if (!content.trim()) return ''\n    return options.emDelimiter + content + options.emDelimiter\n  }\n};\n\nrules.strong = {\n  filter: ['strong', 'b'],\n\n  replacement: function (content, node, options) {\n    if (!content.trim()) return ''\n    return options.strongDelimiter + content + options.strongDelimiter\n  }\n};\n\nrules.code = {\n  filter: function (node) {\n    var hasSiblings = node.previousSibling || node.nextSibling;\n    var isCodeBlock = node.parentNode.nodeName === 'PRE' && !hasSiblings;\n\n    return node.nodeName === 'CODE' && !isCodeBlock\n  },\n\n  replacement: function (content) {\n    if (!content) return ''\n    content = content.replace(/\\r?\\n|\\r/g, ' ');\n\n    var extraSpace = /^`|^ .*?[^ ].* $|`$/.test(content) ? ' ' : '';\n    var delimiter = '`';\n    var matches = content.match(/`+/gm) || [];\n    while (matches.indexOf(delimiter) !== -1) delimiter = delimiter + '`';\n\n    return delimiter + extraSpace + content + extraSpace + delimiter\n  }\n};\n\nrules.image = {\n  filter: 'img',\n\n  replacement: function (content, node) {\n    var alt = cleanAttribute(node.getAttribute('alt'));\n    var src = node.getAttribute('src') || '';\n    var title = cleanAttribute(node.getAttribute('title'));\n    var titlePart = title ? ' \"' + title + '\"' : '';\n    return src ? '![' + alt + ']' + '(' + src + titlePart + ')' : ''\n  }\n};\n\nfunction cleanAttribute (attribute) {\n  return attribute ? attribute.replace(/(\\n+\\s*)+/g, '\\n') : ''\n}\n\n/**\n * Manages a collection of rules used to convert HTML to Markdown\n */\n\nfunction Rules (options) {\n  this.options = options;\n  this._keep = [];\n  this._remove = [];\n\n  this.blankRule = {\n    replacement: options.blankReplacement\n  };\n\n  this.keepReplacement = options.keepReplacement;\n\n  this.defaultRule = {\n    replacement: options.defaultReplacement\n  };\n\n  this.array = [];\n  for (var key in options.rules) this.array.push(options.rules[key]);\n}\n\nRules.prototype = {\n  add: function (key, rule) {\n    this.array.unshift(rule);\n  },\n\n  keep: function (filter) {\n    this._keep.unshift({\n      filter: filter,\n      replacement: this.keepReplacement\n    });\n  },\n\n  remove: function (filter) {\n    this._remove.unshift({\n      filter: filter,\n      replacement: function () {\n        return ''\n      }\n    });\n  },\n\n  forNode: function (node) {\n    if (node.isBlank) return this.blankRule\n    var rule;\n\n    if ((rule = findRule(this.array, node, this.options))) return rule\n    if ((rule = findRule(this._keep, node, this.options))) return rule\n    if ((rule = findRule(this._remove, node, this.options))) return rule\n\n    return this.defaultRule\n  },\n\n  forEach: function (fn) {\n    for (var i = 0; i < this.array.length; i++) fn(this.array[i], i);\n  }\n};\n\nfunction findRule (rules, node, options) {\n  for (var i = 0; i < rules.length; i++) {\n    var rule = rules[i];\n    if (filterValue(rule, node, options)) return rule\n  }\n  return void 0\n}\n\nfunction filterValue (rule, node, options) {\n  var filter = rule.filter;\n  if (typeof filter === 'string') {\n    if (filter === node.nodeName.toLowerCase()) return true\n  } else if (Array.isArray(filter)) {\n    if (filter.indexOf(node.nodeName.toLowerCase()) > -1) return true\n  } else if (typeof filter === 'function') {\n    if (filter.call(rule, node, options)) return true\n  } else {\n    throw new TypeError('`filter` needs to be a string, array, or function')\n  }\n}\n\n/**\n * The collapseWhitespace function is adapted from collapse-whitespace\n * by Luc Thevenard.\n *\n * The MIT License (MIT)\n *\n * Copyright (c) 2014 Luc Thevenard <lucthevenard@gmail.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * collapseWhitespace(options) removes extraneous whitespace from an the given element.\n *\n * @param {Object} options\n */\nfunction collapseWhitespace (options) {\n  var element = options.element;\n  var isBlock = options.isBlock;\n  var isVoid = options.isVoid;\n  var isPre = options.isPre || function (node) {\n    return node.nodeName === 'PRE'\n  };\n\n  if (!element.firstChild || isPre(element)) return\n\n  var prevText = null;\n  var keepLeadingWs = false;\n\n  var prev = null;\n  var node = next(prev, element, isPre);\n\n  while (node !== element) {\n    if (node.nodeType === 3 || node.nodeType === 4) { // Node.TEXT_NODE or Node.CDATA_SECTION_NODE\n      var text = node.data.replace(/[ \\r\\n\\t]+/g, ' ');\n\n      if ((!prevText || / $/.test(prevText.data)) &&\n          !keepLeadingWs && text[0] === ' ') {\n        text = text.substr(1);\n      }\n\n      // `text` might be empty at this point.\n      if (!text) {\n        node = remove(node);\n        continue\n      }\n\n      node.data = text;\n\n      prevText = node;\n    } else if (node.nodeType === 1) { // Node.ELEMENT_NODE\n      if (isBlock(node) || node.nodeName === 'BR') {\n        if (prevText) {\n          prevText.data = prevText.data.replace(/ $/, '');\n        }\n\n        prevText = null;\n        keepLeadingWs = false;\n      } else if (isVoid(node) || isPre(node)) {\n        // Avoid trimming space around non-block, non-BR void elements and inline PRE.\n        prevText = null;\n        keepLeadingWs = true;\n      } else if (prevText) {\n        // Drop protection if set previously.\n        keepLeadingWs = false;\n      }\n    } else {\n      node = remove(node);\n      continue\n    }\n\n    var nextNode = next(prev, node, isPre);\n    prev = node;\n    node = nextNode;\n  }\n\n  if (prevText) {\n    prevText.data = prevText.data.replace(/ $/, '');\n    if (!prevText.data) {\n      remove(prevText);\n    }\n  }\n}\n\n/**\n * remove(node) removes the given node from the DOM and returns the\n * next node in the sequence.\n *\n * @param {Node} node\n * @return {Node} node\n */\nfunction remove (node) {\n  var next = node.nextSibling || node.parentNode;\n\n  node.parentNode.removeChild(node);\n\n  return next\n}\n\n/**\n * next(prev, current, isPre) returns the next node in the sequence, given the\n * current and previous nodes.\n *\n * @param {Node} prev\n * @param {Node} current\n * @param {Function} isPre\n * @return {Node}\n */\nfunction next (prev, current, isPre) {\n  if ((prev && prev.parentNode === current) || isPre(current)) {\n    return current.nextSibling || current.parentNode\n  }\n\n  return current.firstChild || current.nextSibling || current.parentNode\n}\n\n/*\n * Set up window for Node.js\n */\n\nvar root = (typeof window !== 'undefined' ? window : {});\n\n/*\n * Parsing HTML strings\n */\n\nfunction canParseHTMLNatively () {\n  var Parser = root.DOMParser;\n  var canParse = false;\n\n  // Adapted from https://gist.github.com/1129031\n  // Firefox/Opera/IE throw errors on unsupported types\n  try {\n    // WebKit returns null on unsupported types\n    if (new Parser().parseFromString('', 'text/html')) {\n      canParse = true;\n    }\n  } catch (e) {}\n\n  return canParse\n}\n\nfunction createHTMLParser () {\n  var Parser = function () {};\n\n  {\n    if (shouldUseActiveX()) {\n      Parser.prototype.parseFromString = function (string) {\n        var doc = new window.ActiveXObject('htmlfile');\n        doc.designMode = 'on'; // disable on-page scripts\n        doc.open();\n        doc.write(string);\n        doc.close();\n        return doc\n      };\n    } else {\n      Parser.prototype.parseFromString = function (string) {\n        var doc = document.implementation.createHTMLDocument('');\n        doc.open();\n        doc.write(string);\n        doc.close();\n        return doc\n      };\n    }\n  }\n  return Parser\n}\n\nfunction shouldUseActiveX () {\n  var useActiveX = false;\n  try {\n    document.implementation.createHTMLDocument('').open();\n  } catch (e) {\n    if (root.ActiveXObject) useActiveX = true;\n  }\n  return useActiveX\n}\n\nvar HTMLParser = canParseHTMLNatively() ? root.DOMParser : createHTMLParser();\n\nfunction RootNode (input, options) {\n  var root;\n  if (typeof input === 'string') {\n    var doc = htmlParser().parseFromString(\n      // DOM parsers arrange elements in the <head> and <body>.\n      // Wrapping in a custom element ensures elements are reliably arranged in\n      // a single element.\n      '<x-turndown id=\"turndown-root\">' + input + '</x-turndown>',\n      'text/html'\n    );\n    root = doc.getElementById('turndown-root');\n  } else {\n    root = input.cloneNode(true);\n  }\n  collapseWhitespace({\n    element: root,\n    isBlock: isBlock,\n    isVoid: isVoid,\n    isPre: options.preformattedCode ? isPreOrCode : null\n  });\n\n  return root\n}\n\nvar _htmlParser;\nfunction htmlParser () {\n  _htmlParser = _htmlParser || new HTMLParser();\n  return _htmlParser\n}\n\nfunction isPreOrCode (node) {\n  return node.nodeName === 'PRE' || node.nodeName === 'CODE'\n}\n\nfunction Node (node, options) {\n  node.isBlock = isBlock(node);\n  node.isCode = node.nodeName === 'CODE' || node.parentNode.isCode;\n  node.isBlank = isBlank(node);\n  node.flankingWhitespace = flankingWhitespace(node, options);\n  return node\n}\n\nfunction isBlank (node) {\n  return (\n    !isVoid(node) &&\n    !isMeaningfulWhenBlank(node) &&\n    /^\\s*$/i.test(node.textContent) &&\n    !hasVoid(node) &&\n    !hasMeaningfulWhenBlank(node)\n  )\n}\n\nfunction flankingWhitespace (node, options) {\n  if (node.isBlock || (options.preformattedCode && node.isCode)) {\n    return { leading: '', trailing: '' }\n  }\n\n  var edges = edgeWhitespace(node.textContent);\n\n  // abandon leading ASCII WS if left-flanked by ASCII WS\n  if (edges.leadingAscii && isFlankedByWhitespace('left', node, options)) {\n    edges.leading = edges.leadingNonAscii;\n  }\n\n  // abandon trailing ASCII WS if right-flanked by ASCII WS\n  if (edges.trailingAscii && isFlankedByWhitespace('right', node, options)) {\n    edges.trailing = edges.trailingNonAscii;\n  }\n\n  return { leading: edges.leading, trailing: edges.trailing }\n}\n\nfunction edgeWhitespace (string) {\n  var m = string.match(/^(([ \\t\\r\\n]*)(\\s*))(?:(?=\\S)[\\s\\S]*\\S)?((\\s*?)([ \\t\\r\\n]*))$/);\n  return {\n    leading: m[1], // whole string for whitespace-only strings\n    leadingAscii: m[2],\n    leadingNonAscii: m[3],\n    trailing: m[4], // empty for whitespace-only strings\n    trailingNonAscii: m[5],\n    trailingAscii: m[6]\n  }\n}\n\nfunction isFlankedByWhitespace (side, node, options) {\n  var sibling;\n  var regExp;\n  var isFlanked;\n\n  if (side === 'left') {\n    sibling = node.previousSibling;\n    regExp = / $/;\n  } else {\n    sibling = node.nextSibling;\n    regExp = /^ /;\n  }\n\n  if (sibling) {\n    if (sibling.nodeType === 3) {\n      isFlanked = regExp.test(sibling.nodeValue);\n    } else if (options.preformattedCode && sibling.nodeName === 'CODE') {\n      isFlanked = false;\n    } else if (sibling.nodeType === 1 && !isBlock(sibling)) {\n      isFlanked = regExp.test(sibling.textContent);\n    }\n  }\n  return isFlanked\n}\n\nvar reduce = Array.prototype.reduce;\nvar escapes = [\n  [/\\\\/g, '\\\\\\\\'],\n  [/\\*/g, '\\\\*'],\n  [/^-/g, '\\\\-'],\n  [/^\\+ /g, '\\\\+ '],\n  [/^(=+)/g, '\\\\$1'],\n  [/^(#{1,6}) /g, '\\\\$1 '],\n  [/`/g, '\\\\`'],\n  [/^~~~/g, '\\\\~~~'],\n  [/\\[/g, '\\\\['],\n  [/\\]/g, '\\\\]'],\n  [/^>/g, '\\\\>'],\n  [/_/g, '\\\\_'],\n  [/^(\\d+)\\. /g, '$1\\\\. ']\n];\n\nfunction TurndownService (options) {\n  if (!(this instanceof TurndownService)) return new TurndownService(options)\n\n  var defaults = {\n    rules: rules,\n    headingStyle: 'setext',\n    hr: '* * *',\n    bulletListMarker: '*',\n    codeBlockStyle: 'indented',\n    fence: '```',\n    emDelimiter: '_',\n    strongDelimiter: '**',\n    linkStyle: 'inlined',\n    linkReferenceStyle: 'full',\n    br: '  ',\n    preformattedCode: false,\n    blankReplacement: function (content, node) {\n      return node.isBlock ? '\\n\\n' : ''\n    },\n    keepReplacement: function (content, node) {\n      return node.isBlock ? '\\n\\n' + node.outerHTML + '\\n\\n' : node.outerHTML\n    },\n    defaultReplacement: function (content, node) {\n      return node.isBlock ? '\\n\\n' + content + '\\n\\n' : content\n    }\n  };\n  this.options = extend({}, defaults, options);\n  this.rules = new Rules(this.options);\n}\n\nTurndownService.prototype = {\n  /**\n   * The entry point for converting a string or DOM node to Markdown\n   * @public\n   * @param {String|HTMLElement} input The string or DOM node to convert\n   * @returns A Markdown representation of the input\n   * @type String\n   */\n\n  turndown: function (input) {\n    if (!canConvert(input)) {\n      throw new TypeError(\n        input + ' is not a string, or an element/document/fragment node.'\n      )\n    }\n\n    if (input === '') return ''\n\n    var output = process.call(this, new RootNode(input, this.options));\n    return postProcess.call(this, output)\n  },\n\n  /**\n   * Add one or more plugins\n   * @public\n   * @param {Function|Array} plugin The plugin or array of plugins to add\n   * @returns The Turndown instance for chaining\n   * @type Object\n   */\n\n  use: function (plugin) {\n    if (Array.isArray(plugin)) {\n      for (var i = 0; i < plugin.length; i++) this.use(plugin[i]);\n    } else if (typeof plugin === 'function') {\n      plugin(this);\n    } else {\n      throw new TypeError('plugin must be a Function or an Array of Functions')\n    }\n    return this\n  },\n\n  /**\n   * Adds a rule\n   * @public\n   * @param {String} key The unique key of the rule\n   * @param {Object} rule The rule\n   * @returns The Turndown instance for chaining\n   * @type Object\n   */\n\n  addRule: function (key, rule) {\n    this.rules.add(key, rule);\n    return this\n  },\n\n  /**\n   * Keep a node (as HTML) that matches the filter\n   * @public\n   * @param {String|Array|Function} filter The unique key of the rule\n   * @returns The Turndown instance for chaining\n   * @type Object\n   */\n\n  keep: function (filter) {\n    this.rules.keep(filter);\n    return this\n  },\n\n  /**\n   * Remove a node that matches the filter\n   * @public\n   * @param {String|Array|Function} filter The unique key of the rule\n   * @returns The Turndown instance for chaining\n   * @type Object\n   */\n\n  remove: function (filter) {\n    this.rules.remove(filter);\n    return this\n  },\n\n  /**\n   * Escapes Markdown syntax\n   * @public\n   * @param {String} string The string to escape\n   * @returns A string with Markdown syntax escaped\n   * @type String\n   */\n\n  escape: function (string) {\n    return escapes.reduce(function (accumulator, escape) {\n      return accumulator.replace(escape[0], escape[1])\n    }, string)\n  }\n};\n\n/**\n * Reduces a DOM node down to its Markdown string equivalent\n * @private\n * @param {HTMLElement} parentNode The node to convert\n * @returns A Markdown representation of the node\n * @type String\n */\n\nfunction process (parentNode) {\n  var self = this;\n  return reduce.call(parentNode.childNodes, function (output, node) {\n    node = new Node(node, self.options);\n\n    var replacement = '';\n    if (node.nodeType === 3) {\n      replacement = node.isCode ? node.nodeValue : self.escape(node.nodeValue);\n    } else if (node.nodeType === 1) {\n      replacement = replacementForNode.call(self, node);\n    }\n\n    return join(output, replacement)\n  }, '')\n}\n\n/**\n * Appends strings as each rule requires and trims the output\n * @private\n * @param {String} output The conversion output\n * @returns A trimmed version of the ouput\n * @type String\n */\n\nfunction postProcess (output) {\n  var self = this;\n  this.rules.forEach(function (rule) {\n    if (typeof rule.append === 'function') {\n      output = join(output, rule.append(self.options));\n    }\n  });\n\n  return output.replace(/^[\\t\\r\\n]+/, '').replace(/[\\t\\r\\n\\s]+$/, '')\n}\n\n/**\n * Converts an element node to its Markdown equivalent\n * @private\n * @param {HTMLElement} node The node to convert\n * @returns A Markdown representation of the node\n * @type String\n */\n\nfunction replacementForNode (node) {\n  var rule = this.rules.forNode(node);\n  var content = process.call(this, node);\n  var whitespace = node.flankingWhitespace;\n  if (whitespace.leading || whitespace.trailing) content = content.trim();\n  return (\n    whitespace.leading +\n    rule.replacement(content, node, this.options) +\n    whitespace.trailing\n  )\n}\n\n/**\n * Joins replacement to the current output with appropriate number of new lines\n * @private\n * @param {String} output The current conversion output\n * @param {String} replacement The string to append to the output\n * @returns Joined output\n * @type String\n */\n\nfunction join (output, replacement) {\n  var s1 = trimTrailingNewlines(output);\n  var s2 = trimLeadingNewlines(replacement);\n  var nls = Math.max(output.length - s1.length, replacement.length - s2.length);\n  var separator = '\\n\\n'.substring(0, nls);\n\n  return s1 + separator + s2\n}\n\n/**\n * Determines whether an input can be converted\n * @private\n * @param {String|HTMLElement} input Describe this parameter\n * @returns Describe what it returns\n * @type String|Object|Array|Boolean|Number\n */\n\nfunction canConvert (input) {\n  return (\n    input != null && (\n      typeof input === 'string' ||\n      (input.nodeType && (\n        input.nodeType === 1 || input.nodeType === 9 || input.nodeType === 11\n      ))\n    )\n  )\n}\n\nexport default TurndownService;\n", "export const attachmentSelector = \"[data-trix-attachment]\"\n\nconst attachments = {\n  preview: {\n    presentation: \"gallery\",\n    caption: {\n      name: true,\n      size: true,\n    },\n  },\n  file: {\n    caption: {\n      size: true,\n    },\n  },\n}\nexport default attachments\n", "const attributes = {\n  default: {\n    tagName: \"div\",\n    parse: false,\n  },\n  quote: {\n    tagName: \"blockquote\",\n    nestable: true,\n  },\n  heading1: {\n    tagName: \"h1\",\n    terminal: true,\n    breakOnReturn: true,\n    group: false,\n  },\n  code: {\n    tagName: \"pre\",\n    terminal: true,\n    htmlAttributes: [ \"language\" ],\n    text: {\n      plaintext: true,\n    },\n  },\n  bulletList: {\n    tagName: \"ul\",\n    parse: false,\n  },\n  bullet: {\n    tagName: \"li\",\n    listAttribute: \"bulletList\",\n    group: false,\n    nestable: true,\n    test(element) {\n      return tagName(element.parentNode) === attributes[this.listAttribute].tagName\n    },\n  },\n  numberList: {\n    tagName: \"ol\",\n    parse: false,\n  },\n  number: {\n    tagName: \"li\",\n    listAttribute: \"numberList\",\n    group: false,\n    nestable: true,\n    test(element) {\n      return tagName(element.parentNode) === attributes[this.listAttribute].tagName\n    },\n  },\n  attachmentGallery: {\n    tagName: \"div\",\n    exclusive: true,\n    terminal: true,\n    parse: false,\n    group: false,\n  },\n}\n\nconst tagName = (element) => element?.tagName?.toLowerCase()\n\nexport default attributes\n", "const androidVersionMatch = navigator.userAgent.match(/android\\s([0-9]+.*Chrome)/i)\nconst androidVersion = androidVersionMatch && parseInt(androidVersionMatch[1])\n\nexport default {\n  // Android emits composition events when moving the cursor through existing text\n  // Introduced in Chrome 65: https://bugs.chromium.org/p/chromium/issues/detail?id=764439#c9\n  composesExistingText: /Android.*Chrome/.test(navigator.userAgent),\n\n  // Android 13, especially on Samsung keyboards, emits extra compositionend and beforeinput events\n  // that can make the input handler lose the current selection or enter an infinite input -> render -> input\n  // loop.\n  recentAndroid: androidVersion && androidVersion > 12,\n  samsungAndroid: androidVersion && navigator.userAgent.match(/Android.*SM-/),\n\n  // IE 11 activates resizing handles on editable elements that have \"layout\"\n  forcesObjectResizing: /Trident.*rv:11/.test(navigator.userAgent),\n  // https://www.w3.org/TR/input-events-1/ + https://www.w3.org/TR/input-events-2/\n  supportsInputEvents: typeof InputEvent !== \"undefined\" &&\n    [ \"data\", \"getTargetRanges\", \"inputType\" ].every(prop => prop in InputEvent.prototype),\n}\n", "export default {\n  attachFiles: \"Attach Files\",\n  bold: \"Bold\",\n  bullets: \"Bullets\",\n  byte: \"Byte\",\n  bytes: \"Bytes\",\n  captionPlaceholder: \"Add a caption…\",\n  code: \"Code\",\n  heading1: \"Heading\",\n  indent: \"Increase Level\",\n  italic: \"Italic\",\n  link: \"Link\",\n  numbers: \"Numbers\",\n  outdent: \"Decrease Level\",\n  quote: \"Quote\",\n  redo: \"Redo\",\n  remove: \"Remove\",\n  strike: \"Strikethrough\",\n  undo: \"Undo\",\n  unlink: \"Unlink\",\n  url: \"URL\",\n  urlPlaceholder: \"Enter a URL…\",\n  GB: \"GB\",\n  KB: \"KB\",\n  MB: \"MB\",\n  PB: \"PB\",\n  TB: \"TB\",\n}\n", "/* eslint-disable\n    no-case-declarations,\n*/\nimport lang from \"trix/config/lang\"\n\nconst sizes = [ lang.bytes, lang.KB, lang.MB, lang.GB, lang.TB, lang.PB ]\n\nexport default {\n  prefix: \"IEC\",\n  precision: 2,\n\n  formatter(number) {\n    switch (number) {\n      case 0:\n        return `0 ${lang.bytes}`\n      case 1:\n        return `1 ${lang.byte}`\n      default:\n        let base\n\n        if (this.prefix === \"SI\") {\n          base = 1000\n        } else if (this.prefix === \"IEC\") {\n          base = 1024\n        }\n\n        const exp = Math.floor(Math.log(number) / Math.log(base))\n        const humanSize = number / Math.pow(base, exp)\n        const string = humanSize.toFixed(this.precision)\n        const withoutInsignificantZeros = string.replace(/0*$/, \"\").replace(/\\.$/, \"\")\n        return `${withoutInsignificantZeros} ${sizes[exp]}`\n    }\n  },\n}\n", "export const ZERO_WIDTH_SPACE = \"\\uFEFF\"\nexport const NON_BREAKING_SPACE = \"\\u00A0\"\nexport const OBJECT_REPLACEMENT_CHARACTER = \"\\uFFFC\"\n", "export const extend = function(properties) {\n  for (const key in properties) {\n    const value = properties[key]\n    this[key] = value\n  }\n  return this\n}\n", "import blockAttributes from \"trix/config/block_attributes\"\nimport { ZERO_WIDTH_SPACE } from \"trix/constants\"\nimport { extend } from \"./extend\"\nimport { attachmentSelector } from \"trix/config/attachments\"\n\nconst html = document.documentElement\nconst match = html.matches\n\nexport const handleEvent = function(eventName, { onElement, matchingSelector, withCallback, inPhase, preventDefault, times } = {}) {\n  const element = onElement ? onElement : html\n  const selector = matchingSelector\n  const useCapture = inPhase === \"capturing\"\n\n  const handler = function(event) {\n    if (times != null && --times === 0) {\n      handler.destroy()\n    }\n    const target = findClosestElementFromNode(event.target, { matchingSelector: selector })\n    if (target != null) {\n      withCallback?.call(target, event, target)\n      if (preventDefault) {\n        event.preventDefault()\n      }\n    }\n  }\n\n  handler.destroy = () => element.removeEventListener(eventName, handler, useCapture)\n\n  element.addEventListener(eventName, handler, useCapture)\n  return handler\n}\n\nexport const handleEventOnce = function(eventName, options = {}) {\n  options.times = 1\n  return handleEvent(eventName, options)\n}\n\nexport const triggerEvent = function(eventName, { onElement, bubbles, cancelable, attributes } = {}) {\n  const element = onElement != null ? onElement : html\n  bubbles = bubbles !== false\n  cancelable = cancelable !== false\n\n  const event = document.createEvent(\"Events\")\n  event.initEvent(eventName, bubbles, cancelable)\n  if (attributes != null) {\n    extend.call(event, attributes)\n  }\n  return element.dispatchEvent(event)\n}\n\nexport const elementMatchesSelector = function(element, selector) {\n  if (element?.nodeType === 1) {\n    return match.call(element, selector)\n  }\n}\n\nexport const findClosestElementFromNode = function(node, { matchingSelector, untilNode } = {}) {\n  while (node && node.nodeType !== Node.ELEMENT_NODE) {\n    node = node.parentNode\n  }\n  if (node == null) {\n    return\n  }\n\n  if (matchingSelector != null) {\n    if (node.closest && untilNode == null) {\n      return node.closest(matchingSelector)\n    } else {\n      while (node && node !== untilNode) {\n        if (elementMatchesSelector(node, matchingSelector)) {\n          return node\n        }\n        node = node.parentNode\n      }\n    }\n  } else {\n    return node\n  }\n}\n\nexport const findInnerElement = function(element) {\n  while (element?.firstElementChild) {\n    element = element.firstElementChild\n  }\n  return element\n}\n\nexport const innerElementIsActive = (element) =>\n  document.activeElement !== element && elementContainsNode(element, document.activeElement)\n\nexport const elementContainsNode = function(element, node) {\n  if (!element || !node) {\n    return\n  }\n  while (node) {\n    if (node === element) {\n      return true\n    }\n    node = node.parentNode\n  }\n}\n\nexport const findNodeFromContainerAndOffset = function(container, offset) {\n  if (!container) {\n    return\n  }\n  if (container.nodeType === Node.TEXT_NODE) {\n    return container\n  } else if (offset === 0) {\n    return container.firstChild != null ? container.firstChild : container\n  } else {\n    return container.childNodes.item(offset - 1)\n  }\n}\n\nexport const findElementFromContainerAndOffset = function(container, offset) {\n  const node = findNodeFromContainerAndOffset(container, offset)\n  return findClosestElementFromNode(node)\n}\n\nexport const findChildIndexOfNode = function(node) {\n  if (!node?.parentNode) {\n    return\n  }\n  let childIndex = 0\n  node = node.previousSibling\n  while (node) {\n    childIndex++\n    node = node.previousSibling\n  }\n  return childIndex\n}\n\nexport const removeNode = (node) => node?.parentNode?.removeChild(node)\n\nexport const walkTree = function(tree, { onlyNodesOfType, usingFilter, expandEntityReferences } = {}) {\n  const whatToShow = (() => {\n    switch (onlyNodesOfType) {\n      case \"element\":\n        return NodeFilter.SHOW_ELEMENT\n      case \"text\":\n        return NodeFilter.SHOW_TEXT\n      case \"comment\":\n        return NodeFilter.SHOW_COMMENT\n      default:\n        return NodeFilter.SHOW_ALL\n    }\n  })()\n\n  return document.createTreeWalker(\n    tree,\n    whatToShow,\n    usingFilter != null ? usingFilter : null,\n    expandEntityReferences === true\n  )\n}\n\nexport const tagName = (element) => element?.tagName?.toLowerCase()\n\nexport const makeElement = function(tag, options = {}) {\n  let key, value\n  if (typeof tag === \"object\") {\n    options = tag\n    tag = options.tagName\n  } else {\n    options = { attributes: options }\n  }\n\n  const element = document.createElement(tag)\n\n  if (options.editable != null) {\n    if (options.attributes == null) {\n      options.attributes = {}\n    }\n    options.attributes.contenteditable = options.editable\n  }\n\n  if (options.attributes) {\n    for (key in options.attributes) {\n      value = options.attributes[key]\n      element.setAttribute(key, value)\n    }\n  }\n\n  if (options.style) {\n    for (key in options.style) {\n      value = options.style[key]\n      element.style[key] = value\n    }\n  }\n\n  if (options.data) {\n    for (key in options.data) {\n      value = options.data[key]\n      element.dataset[key] = value\n    }\n  }\n\n  if (options.className) {\n    options.className.split(\" \").forEach((className) => {\n      element.classList.add(className)\n    })\n  }\n\n  if (options.textContent) {\n    element.textContent = options.textContent\n  }\n\n  if (options.childNodes) {\n    [].concat(options.childNodes).forEach((childNode) => {\n      element.appendChild(childNode)\n    })\n  }\n\n  return element\n}\n\nlet blockTagNames = undefined\n\nexport const getBlockTagNames = function() {\n  if (blockTagNames != null) {\n    return blockTagNames\n  }\n\n  blockTagNames = []\n  for (const key in blockAttributes) {\n    const attributes = blockAttributes[key]\n    if (attributes.tagName) {\n      blockTagNames.push(attributes.tagName)\n    }\n  }\n\n  return blockTagNames\n}\n\nexport const nodeIsBlockContainer = (node) => nodeIsBlockStartComment(node?.firstChild)\n\nexport const nodeProbablyIsBlockContainer = function(node) {\n  return getBlockTagNames().includes(tagName(node)) && !getBlockTagNames().includes(tagName(node.firstChild))\n}\n\nexport const nodeIsBlockStart = function(node, { strict } = { strict: true }) {\n  if (strict) {\n    return nodeIsBlockStartComment(node)\n  } else {\n    return (\n      nodeIsBlockStartComment(node) || !nodeIsBlockStartComment(node.firstChild) && nodeProbablyIsBlockContainer(node)\n    )\n  }\n}\n\nexport const nodeIsBlockStartComment = (node) => nodeIsCommentNode(node) && node?.data === \"block\"\n\nexport const nodeIsCommentNode = (node) => node?.nodeType === Node.COMMENT_NODE\n\nexport const nodeIsCursorTarget = function(node, { name } = {}) {\n  if (!node) {\n    return\n  }\n  if (nodeIsTextNode(node)) {\n    if (node.data === ZERO_WIDTH_SPACE) {\n      if (name) {\n        return node.parentNode.dataset.trixCursorTarget === name\n      } else {\n        return true\n      }\n    }\n  } else {\n    return nodeIsCursorTarget(node.firstChild)\n  }\n}\n\nexport const nodeIsAttachmentElement = (node) => elementMatchesSelector(node, attachmentSelector)\n\nexport const nodeIsEmptyTextNode = (node) => nodeIsTextNode(node) && node?.data === \"\"\n\nexport const nodeIsTextNode = (node) => node?.nodeType === Node.TEXT_NODE\n", "import browser from \"trix/config/browser\"\nimport { makeElement, removeNode } from \"trix/core/helpers/dom\"\n\nconst input = {\n  level2Enabled: true,\n\n  getLevel() {\n    if (this.level2Enabled && browser.supportsInputEvents) {\n      return 2\n    } else {\n      return 0\n    }\n  },\n  pickFiles(callback) {\n    const input = makeElement(\"input\", { type: \"file\", multiple: true, hidden: true, id: this.fileInputId })\n\n    input.addEventListener(\"change\", () => {\n      callback(input.files)\n      removeNode(input)\n    })\n\n    removeNode(document.getElementById(this.fileInputId))\n    document.body.appendChild(input)\n    input.click()\n  }\n}\n\nexport default input\n", "export default {\n  8: \"backspace\",\n  9: \"tab\",\n  13: \"return\",\n  27: \"escape\",\n  37: \"left\",\n  39: \"right\",\n  46: \"delete\",\n  68: \"d\",\n  72: \"h\",\n  79: \"o\",\n}\n", "export default {\n  removeBlankTableCells: false,\n  tableCellSeparator: \" | \",\n  tableRowSeparator: \"\\n\",\n}\n", "import { attachmentSelector } from \"trix/config/attachments\"\n\nexport default {\n  bold: {\n    tagName: \"strong\",\n    inheritable: true,\n    parser(element) {\n      const style = window.getComputedStyle(element)\n      return style.fontWeight === \"bold\" || style.fontWeight >= 600\n    },\n  },\n  italic: {\n    tagName: \"em\",\n    inheritable: true,\n    parser(element) {\n      const style = window.getComputedStyle(element)\n      return style.fontStyle === \"italic\"\n    },\n  },\n  href: {\n    groupTagName: \"a\",\n    parser(element) {\n      const matchingSelector = `a:not(${attachmentSelector})`\n      const link = element.closest(matchingSelector)\n      if (link) {\n        return link.getAttribute(\"href\")\n      }\n    },\n  },\n  strike: {\n    tagName: \"del\",\n    inheritable: true,\n  },\n  frozen: {\n    style: { backgroundColor: \"highlight\" },\n  },\n}\n", "import lang from \"trix/config/lang\"\n\nexport default {\n  getDefaultHTML() {\n    return `<div class=\"trix-button-row\">\n      <span class=\"trix-button-group trix-button-group--text-tools\" data-trix-button-group=\"text-tools\">\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-bold\" data-trix-attribute=\"bold\" data-trix-key=\"b\" title=\"${lang.bold}\" tabindex=\"-1\">${lang.bold}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-italic\" data-trix-attribute=\"italic\" data-trix-key=\"i\" title=\"${lang.italic}\" tabindex=\"-1\">${lang.italic}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-strike\" data-trix-attribute=\"strike\" title=\"${lang.strike}\" tabindex=\"-1\">${lang.strike}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-link\" data-trix-attribute=\"href\" data-trix-action=\"link\" data-trix-key=\"k\" title=\"${lang.link}\" tabindex=\"-1\">${lang.link}</button>\n      </span>\n\n      <span class=\"trix-button-group trix-button-group--block-tools\" data-trix-button-group=\"block-tools\">\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-heading-1\" data-trix-attribute=\"heading1\" title=\"${lang.heading1}\" tabindex=\"-1\">${lang.heading1}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-quote\" data-trix-attribute=\"quote\" title=\"${lang.quote}\" tabindex=\"-1\">${lang.quote}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-code\" data-trix-attribute=\"code\" title=\"${lang.code}\" tabindex=\"-1\">${lang.code}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-bullet-list\" data-trix-attribute=\"bullet\" title=\"${lang.bullets}\" tabindex=\"-1\">${lang.bullets}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-number-list\" data-trix-attribute=\"number\" title=\"${lang.numbers}\" tabindex=\"-1\">${lang.numbers}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-decrease-nesting-level\" data-trix-action=\"decreaseNestingLevel\" title=\"${lang.outdent}\" tabindex=\"-1\">${lang.outdent}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-increase-nesting-level\" data-trix-action=\"increaseNestingLevel\" title=\"${lang.indent}\" tabindex=\"-1\">${lang.indent}</button>\n      </span>\n\n      <span class=\"trix-button-group trix-button-group--file-tools\" data-trix-button-group=\"file-tools\">\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-attach\" data-trix-action=\"attachFiles\" title=\"${lang.attachFiles}\" tabindex=\"-1\">${lang.attachFiles}</button>\n      </span>\n\n      <span class=\"trix-button-group-spacer\"></span>\n\n      <span class=\"trix-button-group trix-button-group--history-tools\" data-trix-button-group=\"history-tools\">\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-undo\" data-trix-action=\"undo\" data-trix-key=\"z\" title=\"${lang.undo}\" tabindex=\"-1\">${lang.undo}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-redo\" data-trix-action=\"redo\" data-trix-key=\"shift+z\" title=\"${lang.redo}\" tabindex=\"-1\">${lang.redo}</button>\n      </span>\n    </div>\n\n    <div class=\"trix-dialogs\" data-trix-dialogs>\n      <div class=\"trix-dialog trix-dialog--link\" data-trix-dialog=\"href\" data-trix-dialog-attribute=\"href\">\n        <div class=\"trix-dialog__link-fields\">\n          <input type=\"url\" name=\"href\" class=\"trix-input trix-input--dialog\" placeholder=\"${lang.urlPlaceholder}\" aria-label=\"${lang.url}\" required data-trix-input>\n          <div class=\"trix-button-group\">\n            <input type=\"button\" class=\"trix-button trix-button--dialog\" value=\"${lang.link}\" data-trix-method=\"setAttribute\">\n            <input type=\"button\" class=\"trix-button trix-button--dialog\" value=\"${lang.unlink}\" data-trix-method=\"removeAttribute\">\n          </div>\n        </div>\n      </div>\n    </div>`\n  },\n}\n", "const undo = { interval: 5000 }\nexport default undo\n", "export default {\n  attachment: \"attachment\",\n  attachmentCaption: \"attachment__caption\",\n  attachmentCaptionEditor: \"attachment__caption-editor\",\n  attachmentMetadata: \"attachment__metadata\",\n  attachmentMetadataContainer: \"attachment__metadata-container\",\n  attachmentName: \"attachment__name\",\n  attachmentProgress: \"attachment__progress\",\n  attachmentSize: \"attachment__size\",\n  attachmentToolbar: \"attachment__toolbar\",\n  attachmentGallery: \"attachment-gallery\",\n}\n", "export default class BasicObject {\n  static proxyMethod(expression) {\n    const { name, toMethod, toProperty, optional } = parseProxyMethodExpression(expression)\n\n    this.prototype[name] = function() {\n      let subject\n      let object\n\n      if (toMethod) {\n        if (optional) {\n          object = this[toMethod]?.()\n        } else {\n          object = this[toMethod]()\n        }\n      } else if (toProperty) {\n        object = this[toProperty]\n      }\n\n      if (optional) {\n        subject = object?.[name]\n        if (subject) {\n          return apply.call(subject, object, arguments)\n        }\n      } else {\n        subject = object[name]\n        return apply.call(subject, object, arguments)\n      }\n    }\n  }\n}\n\nconst parseProxyMethodExpression = function(expression) {\n  const match = expression.match(proxyMethodExpressionPattern)\n  if (!match) {\n    throw new Error(`can't parse @proxyMethod expression: ${expression}`)\n  }\n\n  const args = { name: match[4] }\n\n  if (match[2] != null) {\n    args.toMethod = match[1]\n  } else {\n    args.toProperty = match[1]\n  }\n\n  if (match[3] != null) {\n    args.optional = true\n  }\n\n  return args\n}\n\nconst { apply } = Function.prototype\n\nconst proxyMethodExpressionPattern = new RegExp(\"\\\n^\\\n(.+?)\\\n(\\\\(\\\\))?\\\n(\\\\?)?\\\n\\\\.\\\n(.+?)\\\n$\\\n\")\n", "import BasicObject from \"trix/core/basic_object\"\n\nexport default class UTF16String extends BasicObject {\n  static box(value = \"\") {\n    if (value instanceof this) {\n      return value\n    } else {\n      return this.fromUCS2String(value?.toString())\n    }\n  }\n\n  static fromUCS2String(ucs2String) {\n    return new this(ucs2String, ucs2decode(ucs2String))\n  }\n\n  static fromCodepoints(codepoints) {\n    return new this(ucs2encode(codepoints), codepoints)\n  }\n\n  constructor(ucs2String, codepoints) {\n    super(...arguments)\n    this.ucs2String = ucs2String\n    this.codepoints = codepoints\n    this.length = this.codepoints.length\n    this.ucs2Length = this.ucs2String.length\n  }\n\n  offsetToUCS2Offset(offset) {\n    return ucs2encode(this.codepoints.slice(0, Math.max(0, offset))).length\n  }\n\n  offsetFromUCS2Offset(ucs2Offset) {\n    return ucs2decode(this.ucs2String.slice(0, Math.max(0, ucs2Offset))).length\n  }\n\n  slice() {\n    return this.constructor.fromCodepoints(this.codepoints.slice(...arguments))\n  }\n\n  charAt(offset) {\n    return this.slice(offset, offset + 1)\n  }\n\n  isEqualTo(value) {\n    return this.constructor.box(value).ucs2String === this.ucs2String\n  }\n\n  toJSON() {\n    return this.ucs2String\n  }\n\n  getCacheKey() {\n    return this.ucs2String\n  }\n\n  toString() {\n    return this.ucs2String\n  }\n}\n\nconst hasArrayFrom = Array.from?.(\"\\ud83d\\udc7c\").length === 1\nconst hasStringCodePointAt = \" \".codePointAt?.(0) != null\nconst hasStringFromCodePoint = String.fromCodePoint?.(32, 128124) === \" \\ud83d\\udc7c\"\n\n// UCS-2 conversion helpers ported from Mathias Bynens' Punycode.js:\n// https://github.com/bestiejs/punycode.js#punycodeucs2\n\nlet ucs2decode, ucs2encode\n\n// Creates an array containing the numeric code points of each Unicode\n// character in the string. While JavaScript uses UCS-2 internally,\n// this function will convert a pair of surrogate halves (each of which\n// UCS-2 exposes as separate characters) into a single code point,\n// matching UTF-16.\nif (hasArrayFrom && hasStringCodePointAt) {\n  ucs2decode = (string) => Array.from(string).map((char) => char.codePointAt(0))\n} else {\n  ucs2decode = function(string) {\n    const output = []\n    let counter = 0\n    const { length } = string\n\n    while (counter < length) {\n      let value = string.charCodeAt(counter++)\n      if (0xd800 <= value && value <= 0xdbff && counter < length) {\n        // high surrogate, and there is a next character\n        const extra = string.charCodeAt(counter++)\n        if ((extra & 0xfc00) === 0xdc00) {\n          // low surrogate\n          value = ((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000\n        } else {\n          // unmatched surrogate; only append this code unit, in case the\n          // next code unit is the high surrogate of a surrogate pair\n          counter--\n        }\n      }\n      output.push(value)\n    }\n\n    return output\n  }\n}\n\n// Creates a string based on an array of numeric code points.\nif (hasStringFromCodePoint) {\n  ucs2encode = (array) => String.fromCodePoint(...Array.from(array || []))\n} else {\n  ucs2encode = function(array) {\n    const characters = (() => {\n      const result = []\n\n      Array.from(array).forEach((value) => {\n        let output = \"\"\n        if (value > 0xffff) {\n          value -= 0x10000\n          output += String.fromCharCode(value >>> 10 & 0x3ff | 0xd800)\n          value = 0xdc00 | value & 0x3ff\n        }\n        result.push(output + String.fromCharCode(value))\n      })\n\n      return result\n    })()\n\n    return characters.join(\"\")\n  }\n}\n", "import BasicObject from \"trix/core/basic_object\"\nimport UTF16String from \"trix/core/utilities/utf16_string\"\n\nlet id = 0\n\nexport default class TrixObject extends BasicObject {\n  static fromJSONString(jsonString) {\n    return this.fromJSON(JSON.parse(jsonString))\n  }\n\n  constructor() {\n    super(...arguments)\n    this.id = ++id\n  }\n\n  hasSameConstructorAs(object) {\n    return this.constructor === object?.constructor\n  }\n\n  isEqualTo(object) {\n    return this === object\n  }\n\n  inspect() {\n    const parts = []\n    const contents = this.contentsForInspection() || {}\n\n    for (const key in contents) {\n      const value = contents[key]\n      parts.push(`${key}=${value}`)\n    }\n\n    return `#<${this.constructor.name}:${this.id}${parts.length ? ` ${parts.join(\", \")}` : \"\"}>`\n  }\n\n  contentsForInspection() {}\n\n  toJSONString() {\n    return JSON.stringify(this)\n  }\n\n  toUTF16String() {\n    return UTF16String.box(this)\n  }\n\n  getCacheKey() {\n    return this.id.toString()\n  }\n}\n", "/* eslint-disable\n    id-length,\n*/\nexport const arraysAreEqual = function(a = [], b = []) {\n  if (a.length !== b.length) {\n    return false\n  }\n  for (let index = 0; index < a.length; index++) {\n    const value = a[index]\n    if (value !== b[index]) {\n      return false\n    }\n  }\n  return true\n}\n\nexport const arrayStartsWith = (a = [], b = []) => arraysAreEqual(a.slice(0, b.length), b)\n\nexport const spliceArray = function(array, ...args) {\n  const result = array.slice(0)\n  result.splice(...args)\n  return result\n}\n\nexport const summarizeArrayChange = function(oldArray = [], newArray = []) {\n  const added = []\n  const removed = []\n\n  const existingValues = new Set()\n\n  oldArray.forEach((value) => {\n    existingValues.add(value)\n  })\n\n  const currentValues = new Set()\n\n  newArray.forEach((value) => {\n    currentValues.add(value)\n    if (!existingValues.has(value)) {\n      added.push(value)\n    }\n  })\n\n  oldArray.forEach((value) => {\n    if (!currentValues.has(value)) {\n      removed.push(value)\n    }\n  })\n\n  return { added, removed }\n}\n", "import { makeElement } from \"trix/core/helpers/dom\"\n\n// https://github.com/mathiasbynens/unicode-2.1.8/blob/master/Bidi_Class/Right_To_Left/regex.js\nconst RTL_PATTERN =\n  /[\\u05BE\\u05C0\\u05C3\\u05D0-\\u05EA\\u05F0-\\u05F4\\u061B\\u061F\\u0621-\\u063A\\u0640-\\u064A\\u066D\\u0671-\\u06B7\\u06BA-\\u06BE\\u06C0-\\u06CE\\u06D0-\\u06D5\\u06E5\\u06E6\\u200F\\u202B\\u202E\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE72\\uFE74\\uFE76-\\uFEFC]/\n\nexport const getDirection = (function() {\n  const input = makeElement(\"input\", { dir: \"auto\", name: \"x\", dirName: \"x.dir\" })\n  const textArea = makeElement(\"textarea\", { dir: \"auto\", name: \"y\", dirName: \"y.dir\" })\n  const form = makeElement(\"form\")\n  form.appendChild(input)\n  form.appendChild(textArea)\n\n  const supportsDirName = (function() {\n    try {\n      return new FormData(form).has(textArea.dirName)\n    } catch (error) {\n      return false\n    }\n  })()\n\n  const supportsDirSelector = (function() {\n    try {\n      return input.matches(\":dir(ltr),:dir(rtl)\")\n    } catch (error) {\n      return false\n    }\n  })()\n\n  if (supportsDirName) {\n    return function(string) {\n      textArea.value = string\n      return new FormData(form).get(textArea.dirName)\n    }\n  } else if (supportsDirSelector) {\n    return function(string) {\n      input.value = string\n      if (input.matches(\":dir(rtl)\")) {\n        return \"rtl\"\n      } else {\n        return \"ltr\"\n      }\n    }\n  } else {\n    return function(string) {\n      const char = string.trim().charAt(0)\n      if (RTL_PATTERN.test(char)) {\n        return \"rtl\"\n      } else {\n        return \"ltr\"\n      }\n    }\n  }\n})()\n", "import * as config from \"trix/config\"\n\nlet allAttributeNames = null\nlet blockAttributeNames = null\nlet textAttributeNames = null\nlet listAttributeNames = null\n\nexport const getAllAttributeNames = () => {\n  if (!allAttributeNames) {\n    allAttributeNames = getTextAttributeNames().concat(getBlockAttributeNames())\n  }\n  return allAttributeNames\n}\n\nexport const getBlockConfig = (attributeName) => config.blockAttributes[attributeName]\n\nexport const getBlockAttributeNames = () => {\n  if (!blockAttributeNames) {\n    blockAttributeNames = Object.keys(config.blockAttributes)\n  }\n  return blockAttributeNames\n}\n\nexport const getTextConfig = (attributeName) => config.textAttributes[attributeName]\n\nexport const getTextAttributeNames = () => {\n  if (!textAttributeNames) {\n    textAttributeNames = Object.keys(config.textAttributes)\n  }\n  return textAttributeNames\n}\n\nexport const getListAttributeNames = () => {\n  if (!listAttributeNames) {\n    listAttributeNames = []\n    for (const key in config.blockAttributes) {\n      const { listAttribute } = config.blockAttributes[key]\n      if (listAttribute != null) {\n        listAttributeNames.push(listAttribute)\n      }\n    }\n  }\n  return listAttributeNames\n}\n", "/* eslint-disable\n*/\nexport const installDefaultCSSForTagName = function(tagName, defaultCSS) {\n  const styleElement = insertStyleElementForTagName(tagName)\n  styleElement.textContent = defaultCSS.replace(/%t/g, tagName)\n}\n\nconst insertStyleElementForTagName = function(tagName) {\n  const element = document.createElement(\"style\")\n  element.setAttribute(\"type\", \"text/css\")\n  element.setAttribute(\"data-tag-name\", tagName.toLowerCase())\n  const nonce = getCSPNonce()\n  if (nonce) {\n    element.setAttribute(\"nonce\", nonce)\n  }\n  document.head.insertBefore(element, document.head.firstChild)\n  return element\n}\n\nconst getCSPNonce = function() {\n  const element = getMetaElement(\"trix-csp-nonce\") || getMetaElement(\"csp-nonce\")\n  if (element) {\n    const { nonce, content } = element\n    return nonce == \"\" ? content : nonce\n  }\n}\n\nconst getMetaElement = (name) => document.head.querySelector(`meta[name=${name}]`)\n", "const testTransferData = { \"application/x-trix-feature-detection\": \"test\" }\n\nexport const dataTransferIsPlainText = function(dataTransfer) {\n  const text = dataTransfer.getData(\"text/plain\")\n  const html = dataTransfer.getData(\"text/html\")\n\n  if (text && html) {\n    const { body } = new DOMParser().parseFromString(html, \"text/html\")\n    if (body.textContent === text) {\n      return !body.querySelector(\"*\")\n    }\n  } else {\n    return text?.length\n  }\n}\n\nexport const dataTransferIsMsOfficePaste = ({ dataTransfer }) => {\n  return dataTransfer.types.includes(\"Files\") &&\n    dataTransfer.types.includes(\"text/html\") &&\n    dataTransfer.getData(\"text/html\").includes(\"urn:schemas-microsoft-com:office:office\")\n}\n\nexport const dataTransferIsWritable = function(dataTransfer) {\n  if (!dataTransfer?.setData) return false\n\n  for (const key in testTransferData) {\n    const value = testTransferData[key]\n\n    try {\n      dataTransfer.setData(key, value)\n      if (!dataTransfer.getData(key) === value) return false\n    } catch (error) {\n      return false\n    }\n  }\n  return true\n}\n\nexport const keyEventIsKeyboardCommand = (function() {\n  if (/Mac|^iP/.test(navigator.platform)) {\n    return (event) => event.metaKey\n  } else {\n    return (event) => event.ctrlKey\n  }\n})()\n\nexport function shouldRenderInmmediatelyToDealWithIOSDictation(inputEvent) {\n  if (/iPhone|iPad/.test(navigator.userAgent)) {\n    // Handle garbled content and duplicated newlines when using dictation on iOS 18+. Upon dictation completion, iOS sends\n    // the list of insertText / insertParagraph events in a quick sequence. If we don't render\n    // the editor synchronously, the internal range fails to update and results in garbled content or duplicated newlines.\n    //\n    // This workaround is necessary because iOS doesn't send composing events as expected while dictating:\n    // https://bugs.webkit.org/show_bug.cgi?id=261764\n    return !inputEvent.inputType || inputEvent.inputType === \"insertParagraph\"\n  } else {\n    return false\n  }\n}\n", "export const defer = (fn) => setTimeout(fn, 1)\n", "/* eslint-disable\n    id-length,\n*/\nexport const copyObject = function(object = {}) {\n  const result = {}\n  for (const key in object) {\n    const value = object[key]\n    result[key] = value\n  }\n  return result\n}\n\nexport const objectsAreEqual = function(a = {}, b = {}) {\n  if (Object.keys(a).length !== Object.keys(b).length) {\n    return false\n  }\n  for (const key in a) {\n    const value = a[key]\n    if (value !== b[key]) {\n      return false\n    }\n  }\n  return true\n}\n", "import { copyObject, objectsAreEqual } from \"trix/core/helpers/objects\"\n\nexport const normalizeRange = function(range) {\n  if (range == null) return\n\n  if (!Array.isArray(range)) {\n    range = [ range, range ]\n  }\n  return [ copyValue(range[0]), copyValue(range[1] != null ? range[1] : range[0]) ]\n}\n\nexport const rangeIsCollapsed = function(range) {\n  if (range == null) return\n\n  const [ start, end ] = normalizeRange(range)\n  return rangeValuesAreEqual(start, end)\n}\n\nexport const rangesAreEqual = function(leftRange, rightRange) {\n  if (leftRange == null || rightRange == null) return\n\n  const [ leftStart, leftEnd ] = normalizeRange(leftRange)\n  const [ rightStart, rightEnd ] = normalizeRange(rightRange)\n  return rangeValuesAreEqual(leftStart, rightStart) && rangeValuesAreEqual(leftEnd, rightEnd)\n}\n\nconst copyValue = function(value) {\n  if (typeof value === \"number\") {\n    return value\n  } else {\n    return copyObject(value)\n  }\n}\n\nconst rangeValuesAreEqual = function(left, right) {\n  if (typeof left === \"number\") {\n    return left === right\n  } else {\n    return objectsAreEqual(left, right)\n  }\n}\n", "import BasicObject from \"trix/core/basic_object\"\n\nexport default class SelectionChangeObserver extends BasicObject {\n  constructor() {\n    super(...arguments)\n    this.update = this.update.bind(this)\n    this.selectionManagers = []\n  }\n\n  start() {\n    if (!this.started) {\n      this.started = true\n      document.addEventListener(\"selectionchange\", this.update, true)\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.started = false\n      return document.removeEventListener(\"selectionchange\", this.update, true)\n    }\n  }\n\n  registerSelectionManager(selectionManager) {\n    if (!this.selectionManagers.includes(selectionManager)) {\n      this.selectionManagers.push(selectionManager)\n      return this.start()\n    }\n  }\n\n  unregisterSelectionManager(selectionManager) {\n    this.selectionManagers = this.selectionManagers.filter((sm) => sm !== selectionManager)\n    if (this.selectionManagers.length === 0) {\n      return this.stop()\n    }\n  }\n\n  notifySelectionManagersOfSelectionChange() {\n    return this.selectionManagers.map((selectionManager) => selectionManager.selectionDidChange())\n  }\n\n  update() {\n    this.notifySelectionManagersOfSelectionChange()\n  }\n\n  reset() {\n    this.update()\n  }\n}\n\nexport const selectionChangeObserver = new SelectionChangeObserver()\n\nexport const getDOMSelection = function() {\n  const selection = window.getSelection()\n  if (selection.rangeCount > 0) {\n    return selection\n  }\n}\n\nexport const getDOMRange = function() {\n  const domRange = getDOMSelection()?.getRangeAt(0)\n  if (domRange) {\n    if (!domRangeIsPrivate(domRange)) {\n      return domRange\n    }\n  }\n}\n\nexport const setDOMRange = function(domRange) {\n  const selection = window.getSelection()\n  selection.removeAllRanges()\n  selection.addRange(domRange)\n  return selectionChangeObserver.update()\n}\n\n// In Firefox, clicking certain <input> elements changes the selection to a\n// private element used to draw its UI. Attempting to access properties of those\n// elements throws an error.\n// https://bugzilla.mozilla.org/show_bug.cgi?id=208427\nconst domRangeIsPrivate = (domRange) => nodeIsPrivate(domRange.startContainer) || nodeIsPrivate(domRange.endContainer)\n\nconst nodeIsPrivate = (node) => !Object.getPrototypeOf(node)\n", "/* eslint-disable\n    id-length,\n    no-useless-escape,\n*/\nimport { NON_BREAKING_SPACE, ZERO_WIDTH_SPACE } from \"trix/constants\"\nimport UTF16String from \"trix/core/utilities/utf16_string\"\n\nexport const normalizeSpaces = (string) =>\n  string.replace(new RegExp(`${ZERO_WIDTH_SPACE}`, \"g\"), \"\").replace(new RegExp(`${NON_BREAKING_SPACE}`, \"g\"), \" \")\n\nexport const normalizeNewlines = (string) => string.replace(/\\r\\n?/g, \"\\n\")\n\nexport const breakableWhitespacePattern = new RegExp(`[^\\\\S${NON_BREAKING_SPACE}]`)\n\nexport const squishBreakableWhitespace = (string) =>\n  string\n    // Replace all breakable whitespace characters with a space\n    .replace(new RegExp(`${breakableWhitespacePattern.source}`, \"g\"), \" \")\n    // Replace two or more spaces with a single space\n    .replace(/\\ {2,}/g, \" \")\n\nexport const summarizeStringChange = function(oldString, newString) {\n  let added, removed\n  oldString = UTF16String.box(oldString)\n  newString = UTF16String.box(newString)\n\n  if (newString.length < oldString.length) {\n    [ removed, added ] = utf16StringDifferences(oldString, newString)\n  } else {\n    [ added, removed ] = utf16StringDifferences(newString, oldString)\n  }\n\n  return { added, removed }\n}\n\nconst utf16StringDifferences = function(a, b) {\n  if (a.isEqualTo(b)) {\n    return [ \"\", \"\" ]\n  }\n\n  const diffA = utf16StringDifference(a, b)\n  const { length } = diffA.utf16String\n\n  let diffB\n\n  if (length) {\n    const { offset } = diffA\n    const codepoints = a.codepoints.slice(0, offset).concat(a.codepoints.slice(offset + length))\n    diffB = utf16StringDifference(b, UTF16String.fromCodepoints(codepoints))\n  } else {\n    diffB = utf16StringDifference(b, a)\n  }\n\n  return [ diffA.utf16String.toString(), diffB.utf16String.toString() ]\n}\n\nconst utf16StringDifference = function(a, b) {\n  let leftIndex = 0\n  let rightIndexA = a.length\n  let rightIndexB = b.length\n\n  while (leftIndex < rightIndexA && a.charAt(leftIndex).isEqualTo(b.charAt(leftIndex))) {\n    leftIndex++\n  }\n\n  while (rightIndexA > leftIndex + 1 && a.charAt(rightIndexA - 1).isEqualTo(b.charAt(rightIndexB - 1))) {\n    rightIndexA--\n    rightIndexB--\n  }\n\n  return {\n    utf16String: a.slice(leftIndex, rightIndexA),\n    offset: leftIndex,\n  }\n}\n", "import TrixObject from \"trix/core/object\" // Don't override window.Object\nimport { arraysAreEqual } from \"trix/core/helpers\"\n\nexport default class Hash extends TrixObject {\n  static fromCommonAttributesOfObjects(objects = []) {\n    if (!objects.length) {\n      return new this()\n    }\n    let hash = box(objects[0])\n    let keys = hash.getKeys()\n\n    objects.slice(1).forEach((object) => {\n      keys = hash.getKeysCommonToHash(box(object))\n      hash = hash.slice(keys)\n    })\n\n    return hash\n  }\n\n  static box(values) {\n    return box(values)\n  }\n\n  constructor(values = {}) {\n    super(...arguments)\n    this.values = copy(values)\n  }\n\n  add(key, value) {\n    return this.merge(object(key, value))\n  }\n\n  remove(key) {\n    return new Hash(copy(this.values, key))\n  }\n\n  get(key) {\n    return this.values[key]\n  }\n\n  has(key) {\n    return key in this.values\n  }\n\n  merge(values) {\n    return new Hash(merge(this.values, unbox(values)))\n  }\n\n  slice(keys) {\n    const values = {}\n\n    Array.from(keys).forEach((key) => {\n      if (this.has(key)) {\n        values[key] = this.values[key]\n      }\n    })\n\n    return new Hash(values)\n  }\n\n  getKeys() {\n    return Object.keys(this.values)\n  }\n\n  getKeysCommonToHash(hash) {\n    hash = box(hash)\n    return this.getKeys().filter((key) => this.values[key] === hash.values[key])\n  }\n\n  isEqualTo(values) {\n    return arraysAreEqual(this.toArray(), box(values).toArray())\n  }\n\n  isEmpty() {\n    return this.getKeys().length === 0\n  }\n\n  toArray() {\n    if (!this.array) {\n      const result = []\n      for (const key in this.values) {\n        const value = this.values[key]\n        result.push(result.push(key, value))\n      }\n      this.array = result.slice(0)\n    }\n\n    return this.array\n  }\n\n  toObject() {\n    return copy(this.values)\n  }\n\n  toJSON() {\n    return this.toObject()\n  }\n\n  contentsForInspection() {\n    return { values: JSON.stringify(this.values) }\n  }\n}\n\nconst object = function(key, value) {\n  const result = {}\n  result[key] = value\n  return result\n}\n\nconst merge = function(object, values) {\n  const result = copy(object)\n  for (const key in values) {\n    const value = values[key]\n    result[key] = value\n  }\n  return result\n}\n\nconst copy = function(object, keyToRemove) {\n  const result = {}\n  const sortedKeys = Object.keys(object).sort()\n\n  sortedKeys.forEach((key) => {\n    if (key !== keyToRemove) {\n      result[key] = object[key]\n    }\n  })\n\n  return result\n}\n\nconst box = function(object) {\n  if (object instanceof Hash) {\n    return object\n  } else {\n    return new Hash(object)\n  }\n}\n\nconst unbox = function(object) {\n  if (object instanceof Hash) {\n    return object.values\n  } else {\n    return object\n  }\n}\n", "export default class ObjectGroup {\n  static groupObjects(ungroupedObjects = [], { depth, asTree } = {}) {\n    let group\n    if (asTree) {\n      if (depth == null) {\n        depth = 0\n      }\n    }\n    const objects = []\n\n    Array.from(ungroupedObjects).forEach((object) => {\n      if (group) {\n        if (object.canBeGrouped?.(depth) && group[group.length - 1].canBeGroupedWith?.(object, depth)) {\n          group.push(object)\n          return\n        } else {\n          objects.push(new this(group, { depth, asTree }))\n          group = null\n        }\n      }\n\n      if (object.canBeGrouped?.(depth)) {\n        group = [ object ]\n      } else {\n        objects.push(object)\n      }\n    })\n\n    if (group) {\n      objects.push(new this(group, { depth, asTree }))\n    }\n    return objects\n  }\n\n  constructor(objects = [], { depth, asTree }) {\n    this.objects = objects\n    if (asTree) {\n      this.depth = depth\n      this.objects = this.constructor.groupObjects(this.objects, { asTree, depth: this.depth + 1 })\n    }\n  }\n\n  getObjects() {\n    return this.objects\n  }\n\n  getDepth() {\n    return this.depth\n  }\n\n  getCacheKey() {\n    const keys = [ \"objectGroup\" ]\n    Array.from(this.getObjects()).forEach((object) => {\n      keys.push(object.getCacheKey())\n    })\n    return keys.join(\"/\")\n  }\n}\n", "import BasicObject from \"trix/core/basic_object\"\n\nexport default class ObjectMap extends BasicObject {\n  constructor(objects = []) {\n    super(...arguments)\n    this.objects = {}\n\n    Array.from(objects).forEach((object) => {\n      const hash = JSON.stringify(object)\n      if (this.objects[hash] == null) {\n        this.objects[hash] = object\n      }\n    })\n  }\n\n  find(object) {\n    const hash = JSON.stringify(object)\n    return this.objects[hash]\n  }\n}\n", "export default class ElementStore {\n  constructor(elements) {\n    this.reset(elements)\n  }\n\n  add(element) {\n    const key = getKey(element)\n    this.elements[key] = element\n  }\n\n  remove(element) {\n    const key = getKey(element)\n    const value = this.elements[key]\n    if (value) {\n      delete this.elements[key]\n      return value\n    }\n  }\n\n  reset(elements = []) {\n    this.elements = {}\n    Array.from(elements).forEach((element) => {\n      this.add(element)\n    })\n    return elements\n  }\n}\n\nconst getKey = (element) => element.dataset.trixStoreKey\n", "import BasicObject from \"trix/core/basic_object\"\n\nexport default class Operation extends BasicObject {\n  isPerforming() {\n    return this.performing === true\n  }\n\n  hasPerformed() {\n    return this.performed === true\n  }\n\n  hasSucceeded() {\n    return this.performed && this.succeeded\n  }\n\n  hasFailed() {\n    return this.performed && !this.succeeded\n  }\n\n  getPromise() {\n    if (!this.promise) {\n      this.promise = new Promise((resolve, reject) => {\n        this.performing = true\n        return this.perform((succeeded, result) => {\n          this.succeeded = succeeded\n          this.performing = false\n          this.performed = true\n\n          if (this.succeeded) {\n            resolve(result)\n          } else {\n            reject(result)\n          }\n        })\n      })\n    }\n\n    return this.promise\n  }\n\n  perform(callback) {\n    return callback(false)\n  }\n\n  release() {\n    this.promise?.cancel?.()\n    this.promise = null\n    this.performing = null\n    this.performed = null\n    this.succeeded = null\n  }\n}\n\nOperation.proxyMethod(\"getPromise().then\")\nOperation.proxyMethod(\"getPromise().catch\")\n", "import BasicObject from \"trix/core/basic_object\"\nimport ObjectGroup from \"trix/core/collections/object_group\"\n\nexport default class ObjectView extends BasicObject {\n  constructor(object, options = {}) {\n    super(...arguments)\n    this.object = object\n    this.options = options\n    this.childViews = []\n    this.rootView = this\n  }\n\n  getNodes() {\n    if (!this.nodes) { this.nodes = this.createNodes() }\n    return this.nodes.map((node) => node.cloneNode(true))\n  }\n\n  invalidate() {\n    this.nodes = null\n    this.childViews = []\n    return this.parentView?.invalidate()\n  }\n\n  invalidateViewForObject(object) {\n    return this.findViewForObject(object)?.invalidate()\n  }\n\n  findOrCreateCachedChildView(viewClass, object, options) {\n    let view = this.getCachedViewForObject(object)\n    if (view) {\n      this.recordChildView(view)\n    } else {\n      view = this.createChildView(...arguments)\n      this.cacheViewForObject(view, object)\n    }\n    return view\n  }\n\n  createChildView(viewClass, object, options = {}) {\n    if (object instanceof ObjectGroup) {\n      options.viewClass = viewClass\n      viewClass = ObjectGroupView\n    }\n\n    const view = new viewClass(object, options)\n    return this.recordChildView(view)\n  }\n\n  recordChildView(view) {\n    view.parentView = this\n    view.rootView = this.rootView\n    this.childViews.push(view)\n    return view\n  }\n\n  getAllChildViews() {\n    let views = []\n\n    this.childViews.forEach((childView) => {\n      views.push(childView)\n      views = views.concat(childView.getAllChildViews())\n    })\n\n    return views\n  }\n\n  findElement() {\n    return this.findElementForObject(this.object)\n  }\n\n  findElementForObject(object) {\n    const id = object?.id\n    if (id) {\n      return this.rootView.element.querySelector(`[data-trix-id='${id}']`)\n    }\n  }\n\n  findViewForObject(object) {\n    for (const view of this.getAllChildViews()) {\n      if (view.object === object) {\n        return view\n      }\n    }\n  }\n\n  getViewCache() {\n    if (this.rootView === this) {\n      if (this.isViewCachingEnabled()) {\n        if (!this.viewCache) { this.viewCache = {} }\n        return this.viewCache\n      }\n    } else {\n      return this.rootView.getViewCache()\n    }\n  }\n\n  isViewCachingEnabled() {\n    return this.shouldCacheViews !== false\n  }\n\n  enableViewCaching() {\n    this.shouldCacheViews = true\n  }\n\n  disableViewCaching() {\n    this.shouldCacheViews = false\n  }\n\n  getCachedViewForObject(object) {\n    return this.getViewCache()?.[object.getCacheKey()]\n  }\n\n  cacheViewForObject(view, object) {\n    const cache = this.getViewCache()\n    if (cache) {\n      cache[object.getCacheKey()] = view\n    }\n  }\n\n  garbageCollectCachedViews() {\n    const cache = this.getViewCache()\n    if (cache) {\n      const views = this.getAllChildViews().concat(this)\n      const objectKeys = views.map((view) => view.object.getCacheKey())\n      for (const key in cache) {\n        if (!objectKeys.includes(key)) {\n          delete cache[key]\n        }\n      }\n    }\n  }\n}\n\nexport class ObjectGroupView extends ObjectView {\n  constructor() {\n    super(...arguments)\n    this.objectGroup = this.object\n    this.viewClass = this.options.viewClass\n    delete this.options.viewClass\n  }\n\n  getChildViews() {\n    if (!this.childViews.length) {\n      Array.from(this.objectGroup.getObjects()).forEach((object) => {\n        this.findOrCreateCachedChildView(this.viewClass, object, this.options)\n      })\n    }\n    return this.childViews\n  }\n\n  createNodes() {\n    const element = this.createContainerElement()\n\n    this.getChildViews().forEach((view) => {\n      Array.from(view.getNodes()).forEach((node) => {\n        element.appendChild(node)\n      })\n    })\n\n    return [ element ]\n  }\n\n  createContainerElement(depth = this.objectGroup.getDepth()) {\n    return this.getChildViews()[0].createContainerElement(depth)\n  }\n}\n", "import BasicObject from \"trix/core/basic_object\"\n\nimport { nodeIsAttachmentElement, removeNode, tagName, walkTree } from \"trix/core/helpers\"\n\nconst DEFAULT_ALLOWED_ATTRIBUTES = \"style href src width height language class\".split(\" \")\nconst DEFAULT_FORBIDDEN_PROTOCOLS = \"javascript:\".split(\" \")\nconst DEFAULT_FORBIDDEN_ELEMENTS = \"script iframe form noscript\".split(\" \")\n\nexport default class HTMLSanitizer extends BasicObject {\n  static setHTML(element, html) {\n    const sanitizedElement = new this(html).sanitize()\n    const sanitizedHtml = sanitizedElement.getHTML ? sanitizedElement.getHTML() : sanitizedElement.outerHTML\n    element.innerHTML = sanitizedHtml\n  }\n\n  static sanitize(html, options) {\n    const sanitizer = new this(html, options)\n    sanitizer.sanitize()\n    return sanitizer\n  }\n\n  constructor(html, { allowedAttributes, forbiddenProtocols, forbiddenElements } = {}) {\n    super(...arguments)\n    this.allowedAttributes = allowedAttributes || DEFAULT_ALLOWED_ATTRIBUTES\n    this.forbiddenProtocols = forbiddenProtocols || DEFAULT_FORBIDDEN_PROTOCOLS\n    this.forbiddenElements = forbiddenElements || DEFAULT_FORBIDDEN_ELEMENTS\n    this.body = createBodyElementForHTML(html)\n  }\n\n  sanitize() {\n    this.sanitizeElements()\n    return this.normalizeListElementNesting()\n  }\n\n  getHTML() {\n    return this.body.innerHTML\n  }\n\n  getBody() {\n    return this.body\n  }\n\n  // Private\n\n  sanitizeElements() {\n    const walker = walkTree(this.body)\n    const nodesToRemove = []\n\n    while (walker.nextNode()) {\n      const node = walker.currentNode\n      switch (node.nodeType) {\n        case Node.ELEMENT_NODE:\n          if (this.elementIsRemovable(node)) {\n            nodesToRemove.push(node)\n          } else {\n            this.sanitizeElement(node)\n          }\n          break\n        case Node.COMMENT_NODE:\n          nodesToRemove.push(node)\n          break\n      }\n    }\n\n    nodesToRemove.forEach((node) => removeNode(node))\n\n    return this.body\n  }\n\n  sanitizeElement(element) {\n    if (element.hasAttribute(\"href\")) {\n      if (this.forbiddenProtocols.includes(element.protocol)) {\n        element.removeAttribute(\"href\")\n      }\n    }\n\n    Array.from(element.attributes).forEach(({ name }) => {\n      if (!this.allowedAttributes.includes(name) && name.indexOf(\"data-trix\") !== 0) {\n        element.removeAttribute(name)\n      }\n    })\n\n    return element\n  }\n\n  normalizeListElementNesting() {\n    Array.from(this.body.querySelectorAll(\"ul,ol\")).forEach((listElement) => {\n      const previousElement = listElement.previousElementSibling\n      if (previousElement) {\n        if (tagName(previousElement) === \"li\") {\n          previousElement.appendChild(listElement)\n        }\n      }\n    })\n\n    return this.body\n  }\n\n  elementIsRemovable(element) {\n    if (element?.nodeType !== Node.ELEMENT_NODE) return\n    return this.elementIsForbidden(element) || this.elementIsntSerializable(element)\n  }\n\n  elementIsForbidden(element) {\n    return this.forbiddenElements.includes(tagName(element))\n  }\n\n  elementIsntSerializable(element) {\n    return element.getAttribute(\"data-trix-serialize\") === \"false\" && !nodeIsAttachmentElement(element)\n  }\n}\n\nconst createBodyElementForHTML = function(html = \"\") {\n  // Remove everything after </html>\n  html = html.replace(/<\\/html[^>]*>[^]*$/i, \"</html>\")\n  const doc = document.implementation.createHTMLDocument(\"\")\n  doc.documentElement.innerHTML = html\n\n  Array.from(doc.head.querySelectorAll(\"style\")).forEach((element) => {\n    doc.body.appendChild(element)\n  })\n\n  return doc.body\n}\n", "import * as config from \"trix/config\"\nimport { ZERO_WIDTH_SPACE } from \"trix/constants\"\nimport { copyObject, makeElement } from \"trix/core/helpers\"\nimport ObjectView from \"trix/views/object_view\"\nimport HTMLSanitizer from \"trix/models/html_sanitizer\"\n\nconst { css } = config\n\nexport default class AttachmentView extends ObjectView {\n  constructor() {\n    super(...arguments)\n    this.attachment = this.object\n    this.attachment.uploadProgressDelegate = this\n    this.attachmentPiece = this.options.piece\n  }\n\n  createContentNodes() {\n    return []\n  }\n\n  createNodes() {\n    let innerElement\n    const figure = innerElement = makeElement({\n      tagName: \"figure\",\n      className: this.getClassName(),\n      data: this.getData(),\n      editable: false,\n    })\n\n    const href = this.getHref()\n    if (href) {\n      innerElement = makeElement({ tagName: \"a\", editable: false, attributes: { href, tabindex: -1 } })\n      figure.appendChild(innerElement)\n    }\n\n    if (this.attachment.hasContent()) {\n      HTMLSanitizer.setHTML(innerElement, this.attachment.getContent())\n    } else {\n      this.createContentNodes().forEach((node) => {\n        innerElement.appendChild(node)\n      })\n    }\n\n    innerElement.appendChild(this.createCaptionElement())\n\n    if (this.attachment.isPending()) {\n      this.progressElement = makeElement({\n        tagName: \"progress\",\n        attributes: {\n          class: css.attachmentProgress,\n          value: this.attachment.getUploadProgress(),\n          max: 100,\n        },\n        data: {\n          trixMutable: true,\n          trixStoreKey: [ \"progressElement\", this.attachment.id ].join(\"/\"),\n        },\n      })\n\n      figure.appendChild(this.progressElement)\n    }\n\n    return [ createCursorTarget(\"left\"), figure, createCursorTarget(\"right\") ]\n  }\n\n  createCaptionElement() {\n    const figcaption = makeElement({ tagName: \"figcaption\", className: css.attachmentCaption })\n    const caption = this.attachmentPiece.getCaption()\n    if (caption) {\n      figcaption.classList.add(`${css.attachmentCaption}--edited`)\n      figcaption.textContent = caption\n    } else {\n      let name, size\n      const captionConfig = this.getCaptionConfig()\n      if (captionConfig.name) {\n        name = this.attachment.getFilename()\n      }\n      if (captionConfig.size) {\n        size = this.attachment.getFormattedFilesize()\n      }\n\n      if (name) {\n        const nameElement = makeElement({ tagName: \"span\", className: css.attachmentName, textContent: name })\n        figcaption.appendChild(nameElement)\n      }\n\n      if (size) {\n        if (name) {\n          figcaption.appendChild(document.createTextNode(\" \"))\n        }\n        const sizeElement = makeElement({ tagName: \"span\", className: css.attachmentSize, textContent: size })\n        figcaption.appendChild(sizeElement)\n      }\n    }\n\n    return figcaption\n  }\n\n  getClassName() {\n    const names = [ css.attachment, `${css.attachment}--${this.attachment.getType()}` ]\n    const extension = this.attachment.getExtension()\n    if (extension) {\n      names.push(`${css.attachment}--${extension}`)\n    }\n    return names.join(\" \")\n  }\n\n  getData() {\n    const data = {\n      trixAttachment: JSON.stringify(this.attachment),\n      trixContentType: this.attachment.getContentType(),\n      trixId: this.attachment.id,\n    }\n\n    const { attributes } = this.attachmentPiece\n    if (!attributes.isEmpty()) {\n      data.trixAttributes = JSON.stringify(attributes)\n    }\n\n    if (this.attachment.isPending()) {\n      data.trixSerialize = false\n    }\n\n    return data\n  }\n\n  getHref() {\n    if (!htmlContainsTagName(this.attachment.getContent(), \"a\")) {\n      return this.attachment.getHref()\n    }\n  }\n\n  getCaptionConfig() {\n    const type = this.attachment.getType()\n    const captionConfig = copyObject(config.attachments[type]?.caption)\n    if (type === \"file\") {\n      captionConfig.name = true\n    }\n    return captionConfig\n  }\n\n  findProgressElement() {\n    return this.findElement()?.querySelector(\"progress\")\n  }\n\n  // Attachment delegate\n\n  attachmentDidChangeUploadProgress() {\n    const value = this.attachment.getUploadProgress()\n    const progressElement = this.findProgressElement()\n    if (progressElement) {\n      progressElement.value = value\n    }\n  }\n}\n\nconst createCursorTarget = (name) =>\n  makeElement({\n    tagName: \"span\",\n    textContent: ZERO_WIDTH_SPACE,\n    data: {\n      trixCursorTarget: name,\n      trixSerialize: false,\n    },\n  })\n\nconst htmlContainsTagName = function(html, tagName) {\n  const div = makeElement(\"div\")\n  HTMLSanitizer.setHTML(div, html || \"\")\n  return div.querySelector(tagName)\n}\n", "import * as config from \"trix/config\"\nimport { makeElement } from \"trix/core/helpers\"\n\nimport AttachmentView from \"trix/views/attachment_view\"\n\nexport default class PreviewableAttachmentView extends AttachmentView {\n  constructor() {\n    super(...arguments)\n    this.attachment.previewDelegate = this\n  }\n\n  createContentNodes() {\n    this.image = makeElement({\n      tagName: \"img\",\n      attributes: {\n        src: \"\",\n      },\n      data: {\n        trixMutable: true,\n      },\n    })\n\n    this.refresh(this.image)\n    return [ this.image ]\n  }\n\n  createCaptionElement() {\n    const figcaption = super.createCaptionElement(...arguments)\n    if (!figcaption.textContent) {\n      figcaption.setAttribute(\"data-trix-placeholder\", config.lang.captionPlaceholder)\n    }\n    return figcaption\n  }\n\n  refresh(image) {\n    if (!image) { image = this.findElement()?.querySelector(\"img\") }\n    if (image) {\n      return this.updateAttributesForImage(image)\n    }\n  }\n\n  updateAttributesForImage(image) {\n    const url = this.attachment.getURL()\n    const previewURL = this.attachment.getPreviewURL()\n    image.src = previewURL || url\n\n    if (previewURL === url) {\n      image.removeAttribute(\"data-trix-serialized-attributes\")\n    } else {\n      const serializedAttributes = JSON.stringify({ src: url })\n      image.setAttribute(\"data-trix-serialized-attributes\", serializedAttributes)\n    }\n\n    const width = this.attachment.getWidth()\n    const height = this.attachment.getHeight()\n\n    if (width != null) {\n      image.width = width\n    }\n    if (height != null) {\n      image.height = height\n    }\n\n    const storeKey = [ \"imageElement\", this.attachment.id, image.src, image.width, image.height ].join(\"/\")\n    image.dataset.trixStoreKey = storeKey\n  }\n\n  // Attachment delegate\n\n  attachmentDidChangeAttributes() {\n    this.refresh(this.image)\n    return this.refresh()\n  }\n}\n", "/* eslint-disable\n    no-useless-escape,\n    no-var,\n*/\nimport { NON_BREAKING_SPACE } from \"trix/constants\"\n\nimport ObjectView from \"trix/views/object_view\"\nimport AttachmentView from \"trix/views/attachment_view\"\nimport PreviewableAttachmentView from \"trix/views/previewable_attachment_view\"\n\nimport { findInnerElement, getTextConfig, makeElement } from \"trix/core/helpers\"\n\nexport default class PieceView extends ObjectView {\n  constructor() {\n    super(...arguments)\n    this.piece = this.object\n    this.attributes = this.piece.getAttributes()\n    this.textConfig = this.options.textConfig\n    this.context = this.options.context\n\n    if (this.piece.attachment) {\n      this.attachment = this.piece.attachment\n    } else {\n      this.string = this.piece.toString()\n    }\n  }\n\n  createNodes() {\n    let nodes = this.attachment ? this.createAttachmentNodes() : this.createStringNodes()\n    const element = this.createElement()\n    if (element) {\n      const innerElement = findInnerElement(element)\n      Array.from(nodes).forEach((node) => {\n        innerElement.appendChild(node)\n      })\n      nodes = [ element ]\n    }\n    return nodes\n  }\n\n  createAttachmentNodes() {\n    const constructor = this.attachment.isPreviewable() ? PreviewableAttachmentView : AttachmentView\n\n    const view = this.createChildView(constructor, this.piece.attachment, { piece: this.piece })\n    return view.getNodes()\n  }\n\n  createStringNodes() {\n    if (this.textConfig?.plaintext) {\n      return [ document.createTextNode(this.string) ]\n    } else {\n      const nodes = []\n      const iterable = this.string.split(\"\\n\")\n      for (let index = 0; index < iterable.length; index++) {\n        const substring = iterable[index]\n        if (index > 0) {\n          const element = makeElement(\"br\")\n          nodes.push(element)\n        }\n\n        if (substring.length) {\n          const node = document.createTextNode(this.preserveSpaces(substring))\n          nodes.push(node)\n        }\n      }\n      return nodes\n    }\n  }\n\n  createElement() {\n    let element, key, value\n    const styles = {}\n\n    for (key in this.attributes) {\n      value = this.attributes[key]\n      const config = getTextConfig(key)\n      if (config) {\n        if (config.tagName) {\n          var innerElement\n          const pendingElement = makeElement(config.tagName)\n\n          if (innerElement) {\n            innerElement.appendChild(pendingElement)\n            innerElement = pendingElement\n          } else {\n            element = innerElement = pendingElement\n          }\n        }\n\n        if (config.styleProperty) {\n          styles[config.styleProperty] = value\n        }\n\n        if (config.style) {\n          for (key in config.style) {\n            value = config.style[key]\n            styles[key] = value\n          }\n        }\n      }\n    }\n\n    if (Object.keys(styles).length) {\n      if (!element) { element = makeElement(\"span\") }\n      for (key in styles) {\n        value = styles[key]\n        element.style[key] = value\n      }\n    }\n    return element\n  }\n\n  createContainerElement() {\n    for (const key in this.attributes) {\n      const value = this.attributes[key]\n      const config = getTextConfig(key)\n      if (config) {\n        if (config.groupTagName) {\n          const attributes = {}\n          attributes[key] = value\n          return makeElement(config.groupTagName, attributes)\n        }\n      }\n    }\n  }\n\n  preserveSpaces(string) {\n    if (this.context.isLast) {\n      string = string.replace(/\\ $/, NON_BREAKING_SPACE)\n    }\n\n    string = string\n      .replace(/(\\S)\\ {3}(\\S)/g, `$1 ${NON_BREAKING_SPACE} $2`)\n      .replace(/\\ {2}/g, `${NON_BREAKING_SPACE} `)\n      .replace(/\\ {2}/g, ` ${NON_BREAKING_SPACE}`)\n\n    if (this.context.isFirst || this.context.followsWhitespace) {\n      string = string.replace(/^\\ /, NON_BREAKING_SPACE)\n    }\n\n    return string\n  }\n}\n", "/* eslint-disable\n    no-var,\n*/\nimport ObjectView from \"trix/views/object_view\"\nimport ObjectGroup from \"trix/core/collections/object_group\"\nimport PieceView from \"trix/views/piece_view\"\n\nexport default class TextView extends ObjectView {\n  constructor() {\n    super(...arguments)\n    this.text = this.object\n    this.textConfig = this.options.textConfig\n  }\n\n  createNodes() {\n    const nodes = []\n    const pieces = ObjectGroup.groupObjects(this.getPieces())\n    const lastIndex = pieces.length - 1\n\n    for (let index = 0; index < pieces.length; index++) {\n      const piece = pieces[index]\n      const context = {}\n      if (index === 0) {\n        context.isFirst = true\n      }\n      if (index === lastIndex) {\n        context.isLast = true\n      }\n      if (endsWithWhitespace(previousPiece)) {\n        context.followsWhitespace = true\n      }\n\n      const view = this.findOrCreateCachedChildView(PieceView, piece, { textConfig: this.textConfig, context })\n      nodes.push(...Array.from(view.getNodes() || []))\n\n      var previousPiece = piece\n    }\n    return nodes\n  }\n\n  getPieces() {\n    return Array.from(this.text.getPieces()).filter((piece) => !piece.hasAttribute(\"blockBreak\"))\n  }\n}\n\nconst endsWithWhitespace = (piece) => /\\s$/.test(piece?.toString())\n", "import * as config from \"trix/config\"\nimport ObjectView from \"trix/views/object_view\"\nimport TextView from \"trix/views/text_view\"\n\nimport { getBlockConfig, makeElement } from \"trix/core/helpers\"\nconst { css } = config\n\nexport default class BlockView extends ObjectView {\n  constructor() {\n    super(...arguments)\n    this.block = this.object\n    this.attributes = this.block.getAttributes()\n  }\n\n  createNodes() {\n    const comment = document.createComment(\"block\")\n    const nodes = [ comment ]\n    if (this.block.isEmpty()) {\n      nodes.push(makeElement(\"br\"))\n    } else {\n      const textConfig = getBlockConfig(this.block.getLastAttribute())?.text\n      const textView = this.findOrCreateCachedChildView(TextView, this.block.text, { textConfig })\n      nodes.push(...Array.from(textView.getNodes() || []))\n      if (this.shouldAddExtraNewlineElement()) {\n        nodes.push(makeElement(\"br\"))\n      }\n    }\n\n    if (this.attributes.length) {\n      return nodes\n    } else {\n      let attributes\n      const { tagName } = config.blockAttributes.default\n      if (this.block.isRTL()) {\n        attributes = { dir: \"rtl\" }\n      }\n\n      const element = makeElement({ tagName, attributes })\n      nodes.forEach((node) => element.appendChild(node))\n      return [ element ]\n    }\n  }\n\n  createContainerElement(depth) {\n    const attributes = {}\n    let className\n    const attributeName = this.attributes[depth]\n\n    const { tagName, htmlAttributes = [] } = getBlockConfig(attributeName)\n\n    if (depth === 0 && this.block.isRTL()) {\n      Object.assign(attributes, { dir: \"rtl\" })\n    }\n\n    if (attributeName === \"attachmentGallery\") {\n      const size = this.block.getBlockBreakPosition()\n      className = `${css.attachmentGallery} ${css.attachmentGallery}--${size}`\n    }\n\n    Object.entries(this.block.htmlAttributes).forEach(([ name, value ]) => {\n      if (htmlAttributes.includes(name)) {\n        attributes[name] = value\n      }\n    })\n\n    return makeElement({ tagName, className, attributes })\n  }\n\n  // A single <br> at the end of a block element has no visual representation\n  // so add an extra one.\n  shouldAddExtraNewlineElement() {\n    return /\\n\\n$/.test(this.block.toString())\n  }\n}\n", "import { makeElement } from \"trix/core/helpers\"\n\nimport ElementStore from \"trix/core/collections/element_store\"\nimport ObjectGroup from \"trix/core/collections/object_group\"\nimport ObjectView from \"trix/views/object_view\"\nimport BlockView from \"trix/views/block_view\"\n\nimport { defer } from \"trix/core/helpers\"\n\nexport default class DocumentView extends ObjectView {\n  static render(document) {\n    const element = makeElement(\"div\")\n    const view = new this(document, { element })\n    view.render()\n    view.sync()\n    return element\n  }\n\n  constructor() {\n    super(...arguments)\n    this.element = this.options.element\n    this.elementStore = new ElementStore()\n    this.setDocument(this.object)\n  }\n\n  setDocument(document) {\n    if (!document.isEqualTo(this.document)) {\n      this.document = this.object = document\n    }\n  }\n\n  render() {\n    this.childViews = []\n\n    this.shadowElement = makeElement(\"div\")\n\n    if (!this.document.isEmpty()) {\n      const objects = ObjectGroup.groupObjects(this.document.getBlocks(), { asTree: true })\n\n      Array.from(objects).forEach((object) => {\n        const view = this.findOrCreateCachedChildView(BlockView, object)\n        Array.from(view.getNodes()).map((node) => this.shadowElement.appendChild(node))\n      })\n    }\n  }\n\n  isSynced() {\n    return elementsHaveEqualHTML(this.shadowElement, this.element)\n  }\n\n  sync() {\n    const fragment = this.createDocumentFragmentForSync()\n    while (this.element.lastChild) {\n      this.element.removeChild(this.element.lastChild)\n    }\n    this.element.appendChild(fragment)\n    return this.didSync()\n  }\n\n  // Private\n\n  didSync() {\n    this.elementStore.reset(findStoredElements(this.element))\n    return defer(() => this.garbageCollectCachedViews())\n  }\n\n  createDocumentFragmentForSync() {\n    const fragment = document.createDocumentFragment()\n\n    Array.from(this.shadowElement.childNodes).forEach((node) => {\n      fragment.appendChild(node.cloneNode(true))\n    })\n\n    Array.from(findStoredElements(fragment)).forEach((element) => {\n      const storedElement = this.elementStore.remove(element)\n      if (storedElement) {\n        element.parentNode.replaceChild(storedElement, element)\n      }\n    })\n\n    return fragment\n  }\n}\n\nconst findStoredElements = (element) => element.querySelectorAll(\"[data-trix-store-key]\")\n\nconst elementsHaveEqualHTML = (element, otherElement) =>\n  ignoreSpaces(element.innerHTML) === ignoreSpaces(otherElement.innerHTML)\n\nconst ignoreSpaces = (html) => html.replace(/&nbsp;/g, \" \")\n", "import TrixObject from \"trix/core/object\" // Don't override window.Object\nimport Hash from \"trix/core/collections/hash\"\n\nexport default class Piece extends TrixObject {\n  static types = {}\n\n  static registerType(type, constructor) {\n    constructor.type = type\n    this.types[type] = constructor\n  }\n\n  static fromJSON(pieceJSON) {\n    const constructor = this.types[pieceJSON.type]\n    if (constructor) {\n      return constructor.fromJSON(pieceJSON)\n    }\n  }\n\n  constructor(value, attributes = {}) {\n    super(...arguments)\n    this.attributes = Hash.box(attributes)\n  }\n\n  copyWithAttributes(attributes) {\n    return new this.constructor(this.getValue(), attributes)\n  }\n\n  copyWithAdditionalAttributes(attributes) {\n    return this.copyWithAttributes(this.attributes.merge(attributes))\n  }\n\n  copyWithoutAttribute(attribute) {\n    return this.copyWithAttributes(this.attributes.remove(attribute))\n  }\n\n  copy() {\n    return this.copyWithAttributes(this.attributes)\n  }\n\n  getAttribute(attribute) {\n    return this.attributes.get(attribute)\n  }\n\n  getAttributesHash() {\n    return this.attributes\n  }\n\n  getAttributes() {\n    return this.attributes.toObject()\n  }\n\n  hasAttribute(attribute) {\n    return this.attributes.has(attribute)\n  }\n\n  hasSameStringValueAsPiece(piece) {\n    return piece && this.toString() === piece.toString()\n  }\n\n  hasSameAttributesAsPiece(piece) {\n    return piece && (this.attributes === piece.attributes || this.attributes.isEqualTo(piece.attributes))\n  }\n\n  isBlockBreak() {\n    return false\n  }\n\n  isEqualTo(piece) {\n    return (\n      super.isEqualTo(...arguments) ||\n      this.hasSameConstructorAs(piece) &&\n        this.hasSameStringValueAsPiece(piece) &&\n        this.hasSameAttributesAsPiece(piece)\n    )\n  }\n\n  isEmpty() {\n    return this.length === 0\n  }\n\n  isSerializable() {\n    return true\n  }\n\n  toJSON() {\n    return {\n      type: this.constructor.type,\n      attributes: this.getAttributes(),\n    }\n  }\n\n  contentsForInspection() {\n    return {\n      type: this.constructor.type,\n      attributes: this.attributes.inspect(),\n    }\n  }\n\n  // Grouping\n\n  canBeGrouped() {\n    return this.hasAttribute(\"href\")\n  }\n\n  canBeGroupedWith(piece) {\n    return this.getAttribute(\"href\") === piece.getAttribute(\"href\")\n  }\n\n  // Splittable\n\n  getLength() {\n    return this.length\n  }\n\n  canBeConsolidatedWith(piece) {\n    return false\n  }\n}\n", "import Operation from \"trix/core/utilities/operation\"\n\nexport default class ImagePreloadOperation extends Operation {\n  constructor(url) {\n    super(...arguments)\n    this.url = url\n  }\n\n  perform(callback) {\n    const image = new Image()\n\n    image.onload = () => {\n      image.width = this.width = image.naturalWidth\n      image.height = this.height = image.naturalHeight\n      return callback(true, image)\n    }\n\n    image.onerror = () => callback(false)\n\n    image.src = this.url\n  }\n}\n", "import * as config from \"trix/config\"\nimport TrixObject from \"trix/core/object\" // Don't override window.Object\nimport Hash from \"trix/core/collections/hash\"\nimport ImagePreloadOperation from \"trix/operations/image_preload_operation\"\n\nexport default class Attachment extends TrixObject {\n  static previewablePattern = /^image(\\/(gif|png|webp|jpe?g)|$)/\n\n  static attachmentForFile(file) {\n    const attributes = this.attributesForFile(file)\n    const attachment = new this(attributes)\n    attachment.setFile(file)\n    return attachment\n  }\n\n  static attributesForFile(file) {\n    return new Hash({\n      filename: file.name,\n      filesize: file.size,\n      contentType: file.type,\n    })\n  }\n\n  static fromJSON(attachmentJSON) {\n    return new this(attachmentJSON)\n  }\n\n  constructor(attributes = {}) {\n    super(attributes)\n    this.releaseFile = this.releaseFile.bind(this)\n    this.attributes = Hash.box(attributes)\n    this.didChangeAttributes()\n  }\n\n  getAttribute(attribute) {\n    return this.attributes.get(attribute)\n  }\n\n  hasAttribute(attribute) {\n    return this.attributes.has(attribute)\n  }\n\n  getAttributes() {\n    return this.attributes.toObject()\n  }\n\n  setAttributes(attributes = {}) {\n    const newAttributes = this.attributes.merge(attributes)\n    if (!this.attributes.isEqualTo(newAttributes)) {\n      this.attributes = newAttributes\n      this.didChangeAttributes()\n      this.previewDelegate?.attachmentDidChangeAttributes?.(this)\n      return this.delegate?.attachmentDidChangeAttributes?.(this)\n    }\n  }\n\n  didChangeAttributes() {\n    if (this.isPreviewable()) {\n      return this.preloadURL()\n    }\n  }\n\n  isPending() {\n    return this.file != null && !(this.getURL() || this.getHref())\n  }\n\n  isPreviewable() {\n    if (this.attributes.has(\"previewable\")) {\n      return this.attributes.get(\"previewable\")\n    } else {\n      return Attachment.previewablePattern.test(this.getContentType())\n    }\n  }\n\n  getType() {\n    if (this.hasContent()) {\n      return \"content\"\n    } else if (this.isPreviewable()) {\n      return \"preview\"\n    } else {\n      return \"file\"\n    }\n  }\n\n  getURL() {\n    return this.attributes.get(\"url\")\n  }\n\n  getHref() {\n    return this.attributes.get(\"href\")\n  }\n\n  getFilename() {\n    return this.attributes.get(\"filename\") || \"\"\n  }\n\n  getFilesize() {\n    return this.attributes.get(\"filesize\")\n  }\n\n  getFormattedFilesize() {\n    const filesize = this.attributes.get(\"filesize\")\n    if (typeof filesize === \"number\") {\n      return config.fileSize.formatter(filesize)\n    } else {\n      return \"\"\n    }\n  }\n\n  getExtension() {\n    return this.getFilename()\n      .match(/\\.(\\w+)$/)?.[1]\n      .toLowerCase()\n  }\n\n  getContentType() {\n    return this.attributes.get(\"contentType\")\n  }\n\n  hasContent() {\n    return this.attributes.has(\"content\")\n  }\n\n  getContent() {\n    return this.attributes.get(\"content\")\n  }\n\n  getWidth() {\n    return this.attributes.get(\"width\")\n  }\n\n  getHeight() {\n    return this.attributes.get(\"height\")\n  }\n\n  getFile() {\n    return this.file\n  }\n\n  setFile(file) {\n    this.file = file\n    if (this.isPreviewable()) {\n      return this.preloadFile()\n    }\n  }\n\n  releaseFile() {\n    this.releasePreloadedFile()\n    this.file = null\n  }\n\n  getUploadProgress() {\n    return this.uploadProgress != null ? this.uploadProgress : 0\n  }\n\n  setUploadProgress(value) {\n    if (this.uploadProgress !== value) {\n      this.uploadProgress = value\n      return this.uploadProgressDelegate?.attachmentDidChangeUploadProgress?.(this)\n    }\n  }\n\n  toJSON() {\n    return this.getAttributes()\n  }\n\n  getCacheKey() {\n    return [ super.getCacheKey(...arguments), this.attributes.getCacheKey(), this.getPreviewURL() ].join(\"/\")\n  }\n\n  // Previewable\n\n  getPreviewURL() {\n    return this.previewURL || this.preloadingURL\n  }\n\n  setPreviewURL(url) {\n    if (url !== this.getPreviewURL()) {\n      this.previewURL = url\n      this.previewDelegate?.attachmentDidChangeAttributes?.(this)\n      return this.delegate?.attachmentDidChangePreviewURL?.(this)\n    }\n  }\n\n  preloadURL() {\n    return this.preload(this.getURL(), this.releaseFile)\n  }\n\n  preloadFile() {\n    if (this.file) {\n      this.fileObjectURL = URL.createObjectURL(this.file)\n      return this.preload(this.fileObjectURL)\n    }\n  }\n\n  releasePreloadedFile() {\n    if (this.fileObjectURL) {\n      URL.revokeObjectURL(this.fileObjectURL)\n      this.fileObjectURL = null\n    }\n  }\n\n  preload(url, callback) {\n    if (url && url !== this.getPreviewURL()) {\n      this.preloadingURL = url\n      const operation = new ImagePreloadOperation(url)\n      return operation\n        .then(({ width, height }) => {\n          if (!this.getWidth() || !this.getHeight()) {\n            this.setAttributes({ width, height })\n          }\n          this.preloadingURL = null\n          this.setPreviewURL(url)\n          return callback?.()\n        })\n        .catch(() => {\n          this.preloadingURL = null\n          return callback?.()\n        })\n    }\n  }\n}\n", "import { OBJECT_REPLACEMENT_CHARACTER } from \"trix/constants\"\n\nimport Attachment from \"trix/models/attachment\"\nimport Piece from \"trix/models/piece\"\n\nexport default class AttachmentPiece extends Piece {\n  static permittedAttributes = [ \"caption\", \"presentation\" ]\n\n  static fromJSON(pieceJSON) {\n    return new this(Attachment.fromJSON(pieceJSON.attachment), pieceJSON.attributes)\n  }\n\n  constructor(attachment) {\n    super(...arguments)\n    this.attachment = attachment\n    this.length = 1\n    this.ensureAttachmentExclusivelyHasAttribute(\"href\")\n    if (!this.attachment.hasContent()) {\n      this.removeProhibitedAttributes()\n    }\n  }\n\n  ensureAttachmentExclusivelyHasAttribute(attribute) {\n    if (this.hasAttribute(attribute)) {\n      if (!this.attachment.hasAttribute(attribute)) {\n        this.attachment.setAttributes(this.attributes.slice([ attribute ]))\n      }\n      this.attributes = this.attributes.remove(attribute)\n    }\n  }\n\n  removeProhibitedAttributes() {\n    const attributes = this.attributes.slice(AttachmentPiece.permittedAttributes)\n    if (!attributes.isEqualTo(this.attributes)) {\n      this.attributes = attributes\n    }\n  }\n\n  getValue() {\n    return this.attachment\n  }\n\n  isSerializable() {\n    return !this.attachment.isPending()\n  }\n\n  getCaption() {\n    return this.attributes.get(\"caption\") || \"\"\n  }\n\n  isEqualTo(piece) {\n    return super.isEqualTo(piece) && this.attachment.id === piece?.attachment?.id\n  }\n\n  toString() {\n    return OBJECT_REPLACEMENT_CHARACTER\n  }\n\n  toJSON() {\n    const json = super.toJSON(...arguments)\n    json.attachment = this.attachment\n    return json\n  }\n\n  getCacheKey() {\n    return [ super.getCacheKey(...arguments), this.attachment.getCacheKey() ].join(\"/\")\n  }\n\n  toConsole() {\n    return JSON.stringify(this.toString())\n  }\n}\n\nPiece.registerType(\"attachment\", AttachmentPiece)\n", "import Piece from \"trix/models/piece\"\n\nimport { normalizeNewlines } from \"trix/core/helpers\"\n\nexport default class StringPiece extends Piece {\n  static fromJSON(pieceJSON) {\n    return new this(pieceJSON.string, pieceJSON.attributes)\n  }\n\n  constructor(string) {\n    super(...arguments)\n    this.string = normalizeNewlines(string)\n    this.length = this.string.length\n  }\n\n  getValue() {\n    return this.string\n  }\n\n  toString() {\n    return this.string.toString()\n  }\n\n  isBlockBreak() {\n    return this.toString() === \"\\n\" && this.getAttribute(\"blockBreak\") === true\n  }\n\n  toJSON() {\n    const result = super.toJSON(...arguments)\n    result.string = this.string\n    return result\n  }\n\n  // Splittable\n\n  canBeConsolidatedWith(piece) {\n    return piece && this.hasSameConstructorAs(piece) && this.hasSameAttributesAsPiece(piece)\n  }\n\n  consolidateWith(piece) {\n    return new this.constructor(this.toString() + piece.toString(), this.attributes)\n  }\n\n  splitAtOffset(offset) {\n    let left, right\n    if (offset === 0) {\n      left = null\n      right = this\n    } else if (offset === this.length) {\n      left = this\n      right = null\n    } else {\n      left = new this.constructor(this.string.slice(0, offset), this.attributes)\n      right = new this.constructor(this.string.slice(offset), this.attributes)\n    }\n    return [ left, right ]\n  }\n\n  toConsole() {\n    let { string } = this\n    if (string.length > 15) {\n      string = string.slice(0, 14) + \"…\"\n    }\n    return JSON.stringify(string.toString())\n  }\n}\n\nPiece.registerType(\"string\", StringPiece)\n", "/* eslint-disable\n    prefer-const,\n*/\nimport TrixObject from \"trix/core/object\" // Don't override window.Object\n\nimport { spliceArray } from \"trix/core/helpers\"\n\nexport default class SplittableList extends TrixObject {\n  static box(objects) {\n    if (objects instanceof this) {\n      return objects\n    } else {\n      return new this(objects)\n    }\n  }\n\n  constructor(objects = []) {\n    super(...arguments)\n    this.objects = objects.slice(0)\n    this.length = this.objects.length\n  }\n\n  indexOf(object) {\n    return this.objects.indexOf(object)\n  }\n\n  splice(...args) {\n    return new this.constructor(spliceArray(this.objects, ...args))\n  }\n\n  eachObject(callback) {\n    return this.objects.map((object, index) => callback(object, index))\n  }\n\n  insertObjectAtIndex(object, index) {\n    return this.splice(index, 0, object)\n  }\n\n  insertSplittableListAtIndex(splittableList, index) {\n    return this.splice(index, 0, ...splittableList.objects)\n  }\n\n  insertSplittableListAtPosition(splittableList, position) {\n    const [ objects, index ] = this.splitObjectAtPosition(position)\n    return new this.constructor(objects).insertSplittableListAtIndex(splittableList, index)\n  }\n\n  editObjectAtIndex(index, callback) {\n    return this.replaceObjectAtIndex(callback(this.objects[index]), index)\n  }\n\n  replaceObjectAtIndex(object, index) {\n    return this.splice(index, 1, object)\n  }\n\n  removeObjectAtIndex(index) {\n    return this.splice(index, 1)\n  }\n\n  getObjectAtIndex(index) {\n    return this.objects[index]\n  }\n\n  getSplittableListInRange(range) {\n    const [ objects, leftIndex, rightIndex ] = this.splitObjectsAtRange(range)\n    return new this.constructor(objects.slice(leftIndex, rightIndex + 1))\n  }\n\n  selectSplittableList(test) {\n    const objects = this.objects.filter((object) => test(object))\n    return new this.constructor(objects)\n  }\n\n  removeObjectsInRange(range) {\n    const [ objects, leftIndex, rightIndex ] = this.splitObjectsAtRange(range)\n    return new this.constructor(objects).splice(leftIndex, rightIndex - leftIndex + 1)\n  }\n\n  transformObjectsInRange(range, transform) {\n    const [ objects, leftIndex, rightIndex ] = this.splitObjectsAtRange(range)\n    const transformedObjects = objects.map((object, index) =>\n      leftIndex <= index && index <= rightIndex ? transform(object) : object\n    )\n    return new this.constructor(transformedObjects)\n  }\n\n  splitObjectsAtRange(range) {\n    let rightOuterIndex\n    let [ objects, leftInnerIndex, offset ] = this.splitObjectAtPosition(startOfRange(range))\n    ;[ objects, rightOuterIndex ] = new this.constructor(objects).splitObjectAtPosition(endOfRange(range) + offset)\n\n    return [ objects, leftInnerIndex, rightOuterIndex - 1 ]\n  }\n\n  getObjectAtPosition(position) {\n    const { index } = this.findIndexAndOffsetAtPosition(position)\n    return this.objects[index]\n  }\n\n  splitObjectAtPosition(position) {\n    let splitIndex, splitOffset\n    const { index, offset } = this.findIndexAndOffsetAtPosition(position)\n    const objects = this.objects.slice(0)\n    if (index != null) {\n      if (offset === 0) {\n        splitIndex = index\n        splitOffset = 0\n      } else {\n        const object = this.getObjectAtIndex(index)\n        const [ leftObject, rightObject ] = object.splitAtOffset(offset)\n        objects.splice(index, 1, leftObject, rightObject)\n        splitIndex = index + 1\n        splitOffset = leftObject.getLength() - offset\n      }\n    } else {\n      splitIndex = objects.length\n      splitOffset = 0\n    }\n\n    return [ objects, splitIndex, splitOffset ]\n  }\n\n  consolidate() {\n    const objects = []\n    let pendingObject = this.objects[0]\n\n    this.objects.slice(1).forEach((object) => {\n      if (pendingObject.canBeConsolidatedWith?.(object)) {\n        pendingObject = pendingObject.consolidateWith(object)\n      } else {\n        objects.push(pendingObject)\n        pendingObject = object\n      }\n    })\n\n    if (pendingObject) {\n      objects.push(pendingObject)\n    }\n\n    return new this.constructor(objects)\n  }\n\n  consolidateFromIndexToIndex(startIndex, endIndex) {\n    const objects = this.objects.slice(0)\n    const objectsInRange = objects.slice(startIndex, endIndex + 1)\n    const consolidatedInRange = new this.constructor(objectsInRange).consolidate().toArray()\n    return this.splice(startIndex, objectsInRange.length, ...consolidatedInRange)\n  }\n\n  findIndexAndOffsetAtPosition(position) {\n    let index\n    let currentPosition = 0\n    for (index = 0; index < this.objects.length; index++) {\n      const object = this.objects[index]\n      const nextPosition = currentPosition + object.getLength()\n      if (currentPosition <= position && position < nextPosition) {\n        return { index, offset: position - currentPosition }\n      }\n      currentPosition = nextPosition\n    }\n    return { index: null, offset: null }\n  }\n\n  findPositionAtIndexAndOffset(index, offset) {\n    let position = 0\n    for (let currentIndex = 0; currentIndex < this.objects.length; currentIndex++) {\n      const object = this.objects[currentIndex]\n      if (currentIndex < index) {\n        position += object.getLength()\n      } else if (currentIndex === index) {\n        position += offset\n        break\n      }\n    }\n    return position\n  }\n\n  getEndPosition() {\n    if (this.endPosition == null) {\n      this.endPosition = 0\n      this.objects.forEach((object) => this.endPosition += object.getLength())\n    }\n\n    return this.endPosition\n  }\n\n  toString() {\n    return this.objects.join(\"\")\n  }\n\n  toArray() {\n    return this.objects.slice(0)\n  }\n\n  toJSON() {\n    return this.toArray()\n  }\n\n  isEqualTo(splittableList) {\n    return super.isEqualTo(...arguments) || objectArraysAreEqual(this.objects, splittableList?.objects)\n  }\n\n  contentsForInspection() {\n    return {\n      objects: `[${this.objects.map((object) => object.inspect()).join(\", \")}]`,\n    }\n  }\n}\n\nconst objectArraysAreEqual = function(left, right = []) {\n  if (left.length !== right.length) {\n    return false\n  }\n  let result = true\n  for (let index = 0; index < left.length; index++) {\n    const object = left[index]\n    if (result && !object.isEqualTo(right[index])) {\n      result = false\n    }\n  }\n  return result\n}\n\nconst startOfRange = (range) => range[0]\n\nconst endOfRange = (range) => range[1]\n", "import TrixObject from \"trix/core/object\" // Don't override window.Object\n\nimport { getDirection } from \"trix/core/helpers\"\n\nimport Piece from \"trix/models/piece\"\nimport AttachmentPiece from \"trix/models/attachment_piece\"\nimport StringPiece from \"trix/models/string_piece\"\nimport SplittableList from \"trix/models/splittable_list\"\n\nimport Hash from \"trix/core/collections/hash\"\n\nexport default class Text extends TrixObject {\n  static textForAttachmentWithAttributes(attachment, attributes) {\n    const piece = new AttachmentPiece(attachment, attributes)\n    return new this([ piece ])\n  }\n\n  static textForStringWithAttributes(string, attributes) {\n    const piece = new StringPiece(string, attributes)\n    return new this([ piece ])\n  }\n\n  static fromJSON(textJSON) {\n    const pieces = Array.from(textJSON).map((pieceJSON) => Piece.fromJSON(pieceJSON))\n    return new this(pieces)\n  }\n\n  constructor(pieces = []) {\n    super(...arguments)\n    const notEmpty = pieces.filter((piece) => !piece.isEmpty())\n    this.pieceList = new SplittableList(notEmpty)\n  }\n\n  copy() {\n    return this.copyWithPieceList(this.pieceList)\n  }\n\n  copyWithPieceList(pieceList) {\n    return new this.constructor(pieceList.consolidate().toArray())\n  }\n\n  copyUsingObjectMap(objectMap) {\n    const pieces = this.getPieces().map((piece) => objectMap.find(piece) || piece)\n    return new this.constructor(pieces)\n  }\n\n  appendText(text) {\n    return this.insertTextAtPosition(text, this.getLength())\n  }\n\n  insertTextAtPosition(text, position) {\n    return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(text.pieceList, position))\n  }\n\n  removeTextAtRange(range) {\n    return this.copyWithPieceList(this.pieceList.removeObjectsInRange(range))\n  }\n\n  replaceTextAtRange(text, range) {\n    return this.removeTextAtRange(range).insertTextAtPosition(text, range[0])\n  }\n\n  moveTextFromRangeToPosition(range, position) {\n    if (range[0] <= position && position <= range[1]) return\n    const text = this.getTextAtRange(range)\n    const length = text.getLength()\n    if (range[0] < position) {\n      position -= length\n    }\n    return this.removeTextAtRange(range).insertTextAtPosition(text, position)\n  }\n\n  addAttributeAtRange(attribute, value, range) {\n    const attributes = {}\n    attributes[attribute] = value\n    return this.addAttributesAtRange(attributes, range)\n  }\n\n  addAttributesAtRange(attributes, range) {\n    return this.copyWithPieceList(\n      this.pieceList.transformObjectsInRange(range, (piece) => piece.copyWithAdditionalAttributes(attributes))\n    )\n  }\n\n  removeAttributeAtRange(attribute, range) {\n    return this.copyWithPieceList(\n      this.pieceList.transformObjectsInRange(range, (piece) => piece.copyWithoutAttribute(attribute))\n    )\n  }\n\n  setAttributesAtRange(attributes, range) {\n    return this.copyWithPieceList(\n      this.pieceList.transformObjectsInRange(range, (piece) => piece.copyWithAttributes(attributes))\n    )\n  }\n\n  getAttributesAtPosition(position) {\n    return this.pieceList.getObjectAtPosition(position)?.getAttributes() || {}\n  }\n\n  getCommonAttributes() {\n    const objects = Array.from(this.pieceList.toArray()).map((piece) => piece.getAttributes())\n    return Hash.fromCommonAttributesOfObjects(objects).toObject()\n  }\n\n  getCommonAttributesAtRange(range) {\n    return this.getTextAtRange(range).getCommonAttributes() || {}\n  }\n\n  getExpandedRangeForAttributeAtOffset(attributeName, offset) {\n    let right\n    let left = right = offset\n    const length = this.getLength()\n\n    while (left > 0 && this.getCommonAttributesAtRange([ left - 1, right ])[attributeName]) {\n      left--\n    }\n    while (right < length && this.getCommonAttributesAtRange([ offset, right + 1 ])[attributeName]) {\n      right++\n    }\n\n    return [ left, right ]\n  }\n\n  getTextAtRange(range) {\n    return this.copyWithPieceList(this.pieceList.getSplittableListInRange(range))\n  }\n\n  getStringAtRange(range) {\n    return this.pieceList.getSplittableListInRange(range).toString()\n  }\n\n  getStringAtPosition(position) {\n    return this.getStringAtRange([ position, position + 1 ])\n  }\n\n  startsWithString(string) {\n    return this.getStringAtRange([ 0, string.length ]) === string\n  }\n\n  endsWithString(string) {\n    const length = this.getLength()\n    return this.getStringAtRange([ length - string.length, length ]) === string\n  }\n\n  getAttachmentPieces() {\n    return this.pieceList.toArray().filter((piece) => !!piece.attachment)\n  }\n\n  getAttachments() {\n    return this.getAttachmentPieces().map((piece) => piece.attachment)\n  }\n\n  getAttachmentAndPositionById(attachmentId) {\n    let position = 0\n    for (const piece of this.pieceList.toArray()) {\n      if (piece.attachment?.id === attachmentId) {\n        return { attachment: piece.attachment, position }\n      }\n      position += piece.length\n    }\n    return { attachment: null, position: null }\n  }\n\n  getAttachmentById(attachmentId) {\n    const { attachment } = this.getAttachmentAndPositionById(attachmentId)\n    return attachment\n  }\n\n  getRangeOfAttachment(attachment) {\n    const attachmentAndPosition = this.getAttachmentAndPositionById(attachment.id)\n    const position = attachmentAndPosition.position\n    attachment = attachmentAndPosition.attachment\n    if (attachment) {\n      return [ position, position + 1 ]\n    }\n  }\n\n  updateAttributesForAttachment(attributes, attachment) {\n    const range = this.getRangeOfAttachment(attachment)\n    if (range) {\n      return this.addAttributesAtRange(attributes, range)\n    } else {\n      return this\n    }\n  }\n\n  getLength() {\n    return this.pieceList.getEndPosition()\n  }\n\n  isEmpty() {\n    return this.getLength() === 0\n  }\n\n  isEqualTo(text) {\n    return super.isEqualTo(text) || text?.pieceList?.isEqualTo(this.pieceList)\n  }\n\n  isBlockBreak() {\n    return this.getLength() === 1 && this.pieceList.getObjectAtIndex(0).isBlockBreak()\n  }\n\n  eachPiece(callback) {\n    return this.pieceList.eachObject(callback)\n  }\n\n  getPieces() {\n    return this.pieceList.toArray()\n  }\n\n  getPieceAtPosition(position) {\n    return this.pieceList.getObjectAtPosition(position)\n  }\n\n  contentsForInspection() {\n    return { pieceList: this.pieceList.inspect() }\n  }\n\n  toSerializableText() {\n    const pieceList = this.pieceList.selectSplittableList((piece) => piece.isSerializable())\n    return this.copyWithPieceList(pieceList)\n  }\n\n  toString() {\n    return this.pieceList.toString()\n  }\n\n  toJSON() {\n    return this.pieceList.toJSON()\n  }\n\n  toConsole() {\n    return JSON.stringify(this.pieceList.toArray().map((piece) => JSON.parse(piece.toConsole())))\n  }\n\n  // BIDI\n\n  getDirection() {\n    return getDirection(this.toString())\n  }\n\n  isRTL() {\n    return this.getDirection() === \"rtl\"\n  }\n}\n", "import TrixObject from \"trix/core/object\" // Don't override window.Object\nimport Text from \"trix/models/text\"\n\nimport {\n  arraysAreEqual,\n  getBlockConfig,\n  getListAttributeNames,\n  objectsAreEqual,\n  spliceArray,\n} from \"trix/core/helpers\"\n\nexport default class Block extends TrixObject {\n  static fromJSON(blockJSON) {\n    const text = Text.fromJSON(blockJSON.text)\n    return new this(text, blockJSON.attributes, blockJSON.htmlAttributes)\n  }\n\n  constructor(text, attributes, htmlAttributes) {\n    super(...arguments)\n    this.text = applyBlockBreakToText(text || new Text())\n    this.attributes = attributes || []\n    this.htmlAttributes = htmlAttributes || {}\n  }\n\n  isEmpty() {\n    return this.text.isBlockBreak()\n  }\n\n  isEqualTo(block) {\n    if (super.isEqualTo(block)) return true\n\n    return this.text.isEqualTo(block?.text) && arraysAreEqual(this.attributes, block?.attributes) && objectsAreEqual(this.htmlAttributes, block?.htmlAttributes)\n  }\n\n  copyWithText(text) {\n    return new Block(text, this.attributes, this.htmlAttributes)\n  }\n\n  copyWithoutText() {\n    return this.copyWithText(null)\n  }\n\n  copyWithAttributes(attributes) {\n    return new Block(this.text, attributes, this.htmlAttributes)\n  }\n\n  copyWithoutAttributes() {\n    return this.copyWithAttributes(null)\n  }\n\n  copyUsingObjectMap(objectMap) {\n    const mappedText = objectMap.find(this.text)\n    if (mappedText) {\n      return this.copyWithText(mappedText)\n    } else {\n      return this.copyWithText(this.text.copyUsingObjectMap(objectMap))\n    }\n  }\n\n  addAttribute(attribute) {\n    const attributes = this.attributes.concat(expandAttribute(attribute))\n    return this.copyWithAttributes(attributes)\n  }\n\n  addHTMLAttribute(attribute, value) {\n    const htmlAttributes = Object.assign({}, this.htmlAttributes, { [attribute]: value })\n    return new Block(this.text, this.attributes, htmlAttributes)\n  }\n\n  removeAttribute(attribute) {\n    const { listAttribute } = getBlockConfig(attribute)\n    const attributes = removeLastValue(removeLastValue(this.attributes, attribute), listAttribute)\n    return this.copyWithAttributes(attributes)\n  }\n\n  removeLastAttribute() {\n    return this.removeAttribute(this.getLastAttribute())\n  }\n\n  getLastAttribute() {\n    return getLastElement(this.attributes)\n  }\n\n  getAttributes() {\n    return this.attributes.slice(0)\n  }\n\n  getAttributeLevel() {\n    return this.attributes.length\n  }\n\n  getAttributeAtLevel(level) {\n    return this.attributes[level - 1]\n  }\n\n  hasAttribute(attributeName) {\n    return this.attributes.includes(attributeName)\n  }\n\n  hasAttributes() {\n    return this.getAttributeLevel() > 0\n  }\n\n  getLastNestableAttribute() {\n    return getLastElement(this.getNestableAttributes())\n  }\n\n  getNestableAttributes() {\n    return this.attributes.filter((attribute) => getBlockConfig(attribute).nestable)\n  }\n\n  getNestingLevel() {\n    return this.getNestableAttributes().length\n  }\n\n  decreaseNestingLevel() {\n    const attribute = this.getLastNestableAttribute()\n    if (attribute) {\n      return this.removeAttribute(attribute)\n    } else {\n      return this\n    }\n  }\n\n  increaseNestingLevel() {\n    const attribute = this.getLastNestableAttribute()\n    if (attribute) {\n      const index = this.attributes.lastIndexOf(attribute)\n      const attributes = spliceArray(this.attributes, index + 1, 0, ...expandAttribute(attribute))\n      return this.copyWithAttributes(attributes)\n    } else {\n      return this\n    }\n  }\n\n  getListItemAttributes() {\n    return this.attributes.filter((attribute) => getBlockConfig(attribute).listAttribute)\n  }\n\n  isListItem() {\n    return getBlockConfig(this.getLastAttribute())?.listAttribute\n  }\n\n  isTerminalBlock() {\n    return getBlockConfig(this.getLastAttribute())?.terminal\n  }\n\n  breaksOnReturn() {\n    return getBlockConfig(this.getLastAttribute())?.breakOnReturn\n  }\n\n  findLineBreakInDirectionFromPosition(direction, position) {\n    const string = this.toString()\n    let result\n    switch (direction) {\n      case \"forward\":\n        result = string.indexOf(\"\\n\", position)\n        break\n      case \"backward\":\n        result = string.slice(0, position).lastIndexOf(\"\\n\")\n    }\n\n    if (result !== -1) {\n      return result\n    }\n  }\n\n  contentsForInspection() {\n    return {\n      text: this.text.inspect(),\n      attributes: this.attributes,\n    }\n  }\n\n  toString() {\n    return this.text.toString()\n  }\n\n  toJSON() {\n    return {\n      text: this.text,\n      attributes: this.attributes,\n      htmlAttributes: this.htmlAttributes,\n    }\n  }\n\n  // BIDI\n\n  getDirection() {\n    return this.text.getDirection()\n  }\n\n  isRTL() {\n    return this.text.isRTL()\n  }\n\n  // Splittable\n\n  getLength() {\n    return this.text.getLength()\n  }\n\n  canBeConsolidatedWith(block) {\n    return !this.hasAttributes() && !block.hasAttributes() && this.getDirection() === block.getDirection()\n  }\n\n  consolidateWith(block) {\n    const newlineText = Text.textForStringWithAttributes(\"\\n\")\n    const text = this.getTextWithoutBlockBreak().appendText(newlineText)\n    return this.copyWithText(text.appendText(block.text))\n  }\n\n  splitAtOffset(offset) {\n    let left, right\n    if (offset === 0) {\n      left = null\n      right = this\n    } else if (offset === this.getLength()) {\n      left = this\n      right = null\n    } else {\n      left = this.copyWithText(this.text.getTextAtRange([ 0, offset ]))\n      right = this.copyWithText(this.text.getTextAtRange([ offset, this.getLength() ]))\n    }\n    return [ left, right ]\n  }\n\n  getBlockBreakPosition() {\n    return this.text.getLength() - 1\n  }\n\n  getTextWithoutBlockBreak() {\n    if (textEndsInBlockBreak(this.text)) {\n      return this.text.getTextAtRange([ 0, this.getBlockBreakPosition() ])\n    } else {\n      return this.text.copy()\n    }\n  }\n\n  // Grouping\n\n  canBeGrouped(depth) {\n    return this.attributes[depth]\n  }\n\n  canBeGroupedWith(otherBlock, depth) {\n    const otherAttributes = otherBlock.getAttributes()\n    const otherAttribute = otherAttributes[depth]\n    const attribute = this.attributes[depth]\n\n    return (\n      attribute === otherAttribute &&\n      !(getBlockConfig(attribute).group === false && !getListAttributeNames().includes(otherAttributes[depth + 1])) &&\n      (this.getDirection() === otherBlock.getDirection() || otherBlock.isEmpty())\n    )\n  }\n}\n\n// Block breaks\n\nconst applyBlockBreakToText = function(text) {\n  text = unmarkExistingInnerBlockBreaksInText(text)\n  text = addBlockBreakToText(text)\n  return text\n}\n\nconst unmarkExistingInnerBlockBreaksInText = function(text) {\n  let modified = false\n  const pieces = text.getPieces()\n\n  let innerPieces = pieces.slice(0, pieces.length - 1)\n  const lastPiece = pieces[pieces.length - 1]\n\n  if (!lastPiece) return text\n\n  innerPieces = innerPieces.map((piece) => {\n    if (piece.isBlockBreak()) {\n      modified = true\n      return unmarkBlockBreakPiece(piece)\n    } else {\n      return piece\n    }\n  })\n\n  if (modified) {\n    return new Text([ ...innerPieces, lastPiece ])\n  } else {\n    return text\n  }\n}\n\nconst blockBreakText = Text.textForStringWithAttributes(\"\\n\", { blockBreak: true })\n\nconst addBlockBreakToText = function(text) {\n  if (textEndsInBlockBreak(text)) {\n    return text\n  } else {\n    return text.appendText(blockBreakText)\n  }\n}\n\nconst textEndsInBlockBreak = function(text) {\n  const length = text.getLength()\n  if (length === 0) {\n    return false\n  }\n  const endText = text.getTextAtRange([ length - 1, length ])\n  return endText.isBlockBreak()\n}\n\nconst unmarkBlockBreakPiece = (piece) => piece.copyWithoutAttribute(\"blockBreak\")\n\n// Attributes\n\nconst expandAttribute = function(attribute) {\n  const { listAttribute } = getBlockConfig(attribute)\n  if (listAttribute) {\n    return [ listAttribute, attribute ]\n  } else {\n    return [ attribute ]\n  }\n}\n\n// Array helpers\n\nconst getLastElement = (array) => array.slice(-1)[0]\n\nconst removeLastValue = function(array, value) {\n  const index = array.lastIndexOf(value)\n  if (index === -1) {\n    return array\n  } else {\n    return spliceArray(array, index, 1)\n  }\n}\n", "import * as config from \"trix/config\"\nimport TrixObject from \"trix/core/object\" // Don't override window.Object\n\nimport Text from \"trix/models/text\"\nimport Block from \"trix/models/block\"\nimport SplittableList from \"trix/models/splittable_list\"\nimport Hash from \"trix/core/collections/hash\"\nimport ObjectMap from \"trix/core/collections/object_map\"\n\nimport { arraysAreEqual, getBlockConfig, normalizeRange, rangeIsCollapsed } from \"trix/core/helpers\"\n\nexport default class Document extends TrixObject {\n  static fromJSON(documentJSON) {\n    const blocks = Array.from(documentJSON).map((blockJSON) => Block.fromJSON(blockJSON))\n    return new this(blocks)\n  }\n\n  static fromString(string, textAttributes) {\n    const text = Text.textForStringWithAttributes(string, textAttributes)\n    return new this([ new Block(text) ])\n  }\n\n  constructor(blocks = []) {\n    super(...arguments)\n    if (blocks.length === 0) {\n      blocks = [ new Block() ]\n    }\n    this.blockList = SplittableList.box(blocks)\n  }\n\n  isEmpty() {\n    const block = this.getBlockAtIndex(0)\n    return this.blockList.length === 1 && block.isEmpty() && !block.hasAttributes()\n  }\n\n  copy(options = {}) {\n    const blocks = options.consolidateBlocks ? this.blockList.consolidate().toArray() : this.blockList.toArray()\n\n    return new this.constructor(blocks)\n  }\n\n  copyUsingObjectsFromDocument(sourceDocument) {\n    const objectMap = new ObjectMap(sourceDocument.getObjects())\n    return this.copyUsingObjectMap(objectMap)\n  }\n\n  copyUsingObjectMap(objectMap) {\n    const blocks = this.getBlocks().map((block) => {\n      const mappedBlock = objectMap.find(block)\n      return mappedBlock || block.copyUsingObjectMap(objectMap)\n    })\n    return new this.constructor(blocks)\n  }\n\n  copyWithBaseBlockAttributes(blockAttributes = []) {\n    const blocks = this.getBlocks().map((block) => {\n      const attributes = blockAttributes.concat(block.getAttributes())\n      return block.copyWithAttributes(attributes)\n    })\n\n    return new this.constructor(blocks)\n  }\n\n  replaceBlock(oldBlock, newBlock) {\n    const index = this.blockList.indexOf(oldBlock)\n    if (index === -1) {\n      return this\n    }\n    return new this.constructor(this.blockList.replaceObjectAtIndex(newBlock, index))\n  }\n\n  insertDocumentAtRange(document, range) {\n    const { blockList } = document\n    range = normalizeRange(range)\n    let [ position ] = range\n    const { index, offset } = this.locationFromPosition(position)\n\n    let result = this\n    const block = this.getBlockAtPosition(position)\n\n    if (rangeIsCollapsed(range) && block.isEmpty() && !block.hasAttributes()) {\n      result = new this.constructor(result.blockList.removeObjectAtIndex(index))\n    } else if (block.getBlockBreakPosition() === offset) {\n      position++\n    }\n\n    result = result.removeTextAtRange(range)\n    return new this.constructor(result.blockList.insertSplittableListAtPosition(blockList, position))\n  }\n\n  mergeDocumentAtRange(document, range) {\n    let formattedDocument, result\n    range = normalizeRange(range)\n    const [ startPosition ] = range\n    const startLocation = this.locationFromPosition(startPosition)\n    const blockAttributes = this.getBlockAtIndex(startLocation.index).getAttributes()\n    const baseBlockAttributes = document.getBaseBlockAttributes()\n    const trailingBlockAttributes = blockAttributes.slice(-baseBlockAttributes.length)\n\n    if (arraysAreEqual(baseBlockAttributes, trailingBlockAttributes)) {\n      const leadingBlockAttributes = blockAttributes.slice(0, -baseBlockAttributes.length)\n      formattedDocument = document.copyWithBaseBlockAttributes(leadingBlockAttributes)\n    } else {\n      formattedDocument = document.copy({ consolidateBlocks: true }).copyWithBaseBlockAttributes(blockAttributes)\n    }\n\n    const blockCount = formattedDocument.getBlockCount()\n    const firstBlock = formattedDocument.getBlockAtIndex(0)\n\n    if (arraysAreEqual(blockAttributes, firstBlock.getAttributes())) {\n      const firstText = firstBlock.getTextWithoutBlockBreak()\n      result = this.insertTextAtRange(firstText, range)\n\n      if (blockCount > 1) {\n        formattedDocument = new this.constructor(formattedDocument.getBlocks().slice(1))\n        const position = startPosition + firstText.getLength()\n        result = result.insertDocumentAtRange(formattedDocument, position)\n      }\n    } else {\n      result = this.insertDocumentAtRange(formattedDocument, range)\n    }\n\n    return result\n  }\n\n  insertTextAtRange(text, range) {\n    range = normalizeRange(range)\n    const [ startPosition ] = range\n    const { index, offset } = this.locationFromPosition(startPosition)\n\n    const document = this.removeTextAtRange(range)\n    return new this.constructor(\n      document.blockList.editObjectAtIndex(index, (block) =>\n        block.copyWithText(block.text.insertTextAtPosition(text, offset))\n      )\n    )\n  }\n\n  removeTextAtRange(range) {\n    let blocks\n    range = normalizeRange(range)\n    const [ leftPosition, rightPosition ] = range\n    if (rangeIsCollapsed(range)) {\n      return this\n    }\n    const [ leftLocation, rightLocation ] = Array.from(this.locationRangeFromRange(range))\n\n    const leftIndex = leftLocation.index\n    const leftOffset = leftLocation.offset\n    const leftBlock = this.getBlockAtIndex(leftIndex)\n\n    const rightIndex = rightLocation.index\n    const rightOffset = rightLocation.offset\n    const rightBlock = this.getBlockAtIndex(rightIndex)\n\n    const removeRightNewline =\n      rightPosition - leftPosition === 1 &&\n      leftBlock.getBlockBreakPosition() === leftOffset &&\n      rightBlock.getBlockBreakPosition() !== rightOffset &&\n      rightBlock.text.getStringAtPosition(rightOffset) === \"\\n\"\n\n    if (removeRightNewline) {\n      blocks = this.blockList.editObjectAtIndex(rightIndex, (block) =>\n        block.copyWithText(block.text.removeTextAtRange([ rightOffset, rightOffset + 1 ]))\n      )\n    } else {\n      let block\n      const leftText = leftBlock.text.getTextAtRange([ 0, leftOffset ])\n      const rightText = rightBlock.text.getTextAtRange([ rightOffset, rightBlock.getLength() ])\n      const text = leftText.appendText(rightText)\n\n      const removingLeftBlock = leftIndex !== rightIndex && leftOffset === 0\n      const useRightBlock = removingLeftBlock && leftBlock.getAttributeLevel() >= rightBlock.getAttributeLevel()\n\n      if (useRightBlock) {\n        block = rightBlock.copyWithText(text)\n      } else {\n        block = leftBlock.copyWithText(text)\n      }\n\n      const affectedBlockCount = rightIndex + 1 - leftIndex\n      blocks = this.blockList.splice(leftIndex, affectedBlockCount, block)\n    }\n\n    return new this.constructor(blocks)\n  }\n\n  moveTextFromRangeToPosition(range, position) {\n    let text\n    range = normalizeRange(range)\n    const [ startPosition, endPosition ] = range\n    if (startPosition <= position && position <= endPosition) {\n      return this\n    }\n\n    let document = this.getDocumentAtRange(range)\n    let result = this.removeTextAtRange(range)\n\n    const movingRightward = startPosition < position\n    if (movingRightward) {\n      position -= document.getLength()\n    }\n\n    const [ firstBlock, ...blocks ] = document.getBlocks()\n    if (blocks.length === 0) {\n      text = firstBlock.getTextWithoutBlockBreak()\n      if (movingRightward) {\n        position += 1\n      }\n    } else {\n      text = firstBlock.text\n    }\n\n    result = result.insertTextAtRange(text, position)\n    if (blocks.length === 0) {\n      return result\n    }\n\n    document = new this.constructor(blocks)\n    position += text.getLength()\n\n    return result.insertDocumentAtRange(document, position)\n  }\n\n  addAttributeAtRange(attribute, value, range) {\n    let { blockList } = this\n    this.eachBlockAtRange(\n      range,\n      (block, textRange, index) =>\n        blockList = blockList.editObjectAtIndex(index, function() {\n          if (getBlockConfig(attribute)) {\n            return block.addAttribute(attribute, value)\n          } else {\n            if (textRange[0] === textRange[1]) {\n              return block\n            } else {\n              return block.copyWithText(block.text.addAttributeAtRange(attribute, value, textRange))\n            }\n          }\n        })\n    )\n    return new this.constructor(blockList)\n  }\n\n  addAttribute(attribute, value) {\n    let { blockList } = this\n    this.eachBlock(\n      (block, index) => blockList = blockList.editObjectAtIndex(index, () => block.addAttribute(attribute, value))\n    )\n    return new this.constructor(blockList)\n  }\n\n  removeAttributeAtRange(attribute, range) {\n    let { blockList } = this\n    this.eachBlockAtRange(range, function(block, textRange, index) {\n      if (getBlockConfig(attribute)) {\n        blockList = blockList.editObjectAtIndex(index, () => block.removeAttribute(attribute))\n      } else if (textRange[0] !== textRange[1]) {\n        blockList = blockList.editObjectAtIndex(index, () =>\n          block.copyWithText(block.text.removeAttributeAtRange(attribute, textRange))\n        )\n      }\n    })\n    return new this.constructor(blockList)\n  }\n\n  updateAttributesForAttachment(attributes, attachment) {\n    const range = this.getRangeOfAttachment(attachment)\n    const [ startPosition ] = Array.from(range)\n    const { index } = this.locationFromPosition(startPosition)\n    const text = this.getTextAtIndex(index)\n\n    return new this.constructor(\n      this.blockList.editObjectAtIndex(index, (block) =>\n        block.copyWithText(text.updateAttributesForAttachment(attributes, attachment))\n      )\n    )\n  }\n\n  removeAttributeForAttachment(attribute, attachment) {\n    const range = this.getRangeOfAttachment(attachment)\n    return this.removeAttributeAtRange(attribute, range)\n  }\n\n  setHTMLAttributeAtPosition(position, name, value) {\n    const block = this.getBlockAtPosition(position)\n    const updatedBlock = block.addHTMLAttribute(name, value)\n    return this.replaceBlock(block, updatedBlock)\n  }\n\n  insertBlockBreakAtRange(range) {\n    let blocks\n    range = normalizeRange(range)\n    const [ startPosition ] = range\n    const { offset } = this.locationFromPosition(startPosition)\n\n    const document = this.removeTextAtRange(range)\n    if (offset === 0) {\n      blocks = [ new Block() ]\n    }\n    return new this.constructor(\n      document.blockList.insertSplittableListAtPosition(new SplittableList(blocks), startPosition)\n    )\n  }\n\n  applyBlockAttributeAtRange(attributeName, value, range) {\n    const expanded = this.expandRangeToLineBreaksAndSplitBlocks(range)\n    let document = expanded.document\n    range = expanded.range\n    const blockConfig = getBlockConfig(attributeName)\n\n    if (blockConfig.listAttribute) {\n      document = document.removeLastListAttributeAtRange(range, { exceptAttributeName: attributeName })\n      const converted = document.convertLineBreaksToBlockBreaksInRange(range)\n      document = converted.document\n      range = converted.range\n    } else if (blockConfig.exclusive) {\n      document = document.removeBlockAttributesAtRange(range)\n    } else if (blockConfig.terminal) {\n      document = document.removeLastTerminalAttributeAtRange(range)\n    } else {\n      document = document.consolidateBlocksAtRange(range)\n    }\n\n    return document.addAttributeAtRange(attributeName, value, range)\n  }\n\n  removeLastListAttributeAtRange(range, options = {}) {\n    let { blockList } = this\n    this.eachBlockAtRange(range, function(block, textRange, index) {\n      const lastAttributeName = block.getLastAttribute()\n      if (!lastAttributeName) {\n        return\n      }\n      if (!getBlockConfig(lastAttributeName).listAttribute) {\n        return\n      }\n      if (lastAttributeName === options.exceptAttributeName) {\n        return\n      }\n      blockList = blockList.editObjectAtIndex(index, () => block.removeAttribute(lastAttributeName))\n    })\n    return new this.constructor(blockList)\n  }\n\n  removeLastTerminalAttributeAtRange(range) {\n    let { blockList } = this\n    this.eachBlockAtRange(range, function(block, textRange, index) {\n      const lastAttributeName = block.getLastAttribute()\n      if (!lastAttributeName) {\n        return\n      }\n      if (!getBlockConfig(lastAttributeName).terminal) {\n        return\n      }\n      blockList = blockList.editObjectAtIndex(index, () => block.removeAttribute(lastAttributeName))\n    })\n    return new this.constructor(blockList)\n  }\n\n  removeBlockAttributesAtRange(range) {\n    let { blockList } = this\n    this.eachBlockAtRange(range, function(block, textRange, index) {\n      if (block.hasAttributes()) {\n        blockList = blockList.editObjectAtIndex(index, () => block.copyWithoutAttributes())\n      }\n    })\n    return new this.constructor(blockList)\n  }\n\n  expandRangeToLineBreaksAndSplitBlocks(range) {\n    let position\n    range = normalizeRange(range)\n    let [ startPosition, endPosition ] = range\n    const startLocation = this.locationFromPosition(startPosition)\n    const endLocation = this.locationFromPosition(endPosition)\n    let document = this\n\n    const startBlock = document.getBlockAtIndex(startLocation.index)\n    startLocation.offset = startBlock.findLineBreakInDirectionFromPosition(\"backward\", startLocation.offset)\n    if (startLocation.offset != null) {\n      position = document.positionFromLocation(startLocation)\n      document = document.insertBlockBreakAtRange([ position, position + 1 ])\n      endLocation.index += 1\n      endLocation.offset -= document.getBlockAtIndex(startLocation.index).getLength()\n      startLocation.index += 1\n    }\n    startLocation.offset = 0\n\n    if (endLocation.offset === 0 && endLocation.index > startLocation.index) {\n      endLocation.index -= 1\n      endLocation.offset = document.getBlockAtIndex(endLocation.index).getBlockBreakPosition()\n    } else {\n      const endBlock = document.getBlockAtIndex(endLocation.index)\n      if (endBlock.text.getStringAtRange([ endLocation.offset - 1, endLocation.offset ]) === \"\\n\") {\n        endLocation.offset -= 1\n      } else {\n        endLocation.offset = endBlock.findLineBreakInDirectionFromPosition(\"forward\", endLocation.offset)\n      }\n      if (endLocation.offset !== endBlock.getBlockBreakPosition()) {\n        position = document.positionFromLocation(endLocation)\n        document = document.insertBlockBreakAtRange([ position, position + 1 ])\n      }\n    }\n\n    startPosition = document.positionFromLocation(startLocation)\n    endPosition = document.positionFromLocation(endLocation)\n    range = normalizeRange([ startPosition, endPosition ])\n\n    return { document, range }\n  }\n\n  convertLineBreaksToBlockBreaksInRange(range) {\n    range = normalizeRange(range)\n    let [ position ] = range\n    const string = this.getStringAtRange(range).slice(0, -1)\n    let document = this\n\n    string.replace(/.*?\\n/g, function(match) {\n      position += match.length\n      document = document.insertBlockBreakAtRange([ position - 1, position ])\n    })\n\n    return { document, range }\n  }\n\n  consolidateBlocksAtRange(range) {\n    range = normalizeRange(range)\n    const [ startPosition, endPosition ] = range\n    const startIndex = this.locationFromPosition(startPosition).index\n    const endIndex = this.locationFromPosition(endPosition).index\n    return new this.constructor(this.blockList.consolidateFromIndexToIndex(startIndex, endIndex))\n  }\n\n  getDocumentAtRange(range) {\n    range = normalizeRange(range)\n    const blocks = this.blockList.getSplittableListInRange(range).toArray()\n    return new this.constructor(blocks)\n  }\n\n  getStringAtRange(range) {\n    let endIndex\n    const array = range = normalizeRange(range),\n      endPosition = array[array.length - 1]\n    if (endPosition !== this.getLength()) {\n      endIndex = -1\n    }\n    return this.getDocumentAtRange(range).toString().slice(0, endIndex)\n  }\n\n  getBlockAtIndex(index) {\n    return this.blockList.getObjectAtIndex(index)\n  }\n\n  getBlockAtPosition(position) {\n    const { index } = this.locationFromPosition(position)\n    return this.getBlockAtIndex(index)\n  }\n\n  getTextAtIndex(index) {\n    return this.getBlockAtIndex(index)?.text\n  }\n\n  getTextAtPosition(position) {\n    const { index } = this.locationFromPosition(position)\n    return this.getTextAtIndex(index)\n  }\n\n  getPieceAtPosition(position) {\n    const { index, offset } = this.locationFromPosition(position)\n    return this.getTextAtIndex(index).getPieceAtPosition(offset)\n  }\n\n  getCharacterAtPosition(position) {\n    const { index, offset } = this.locationFromPosition(position)\n    return this.getTextAtIndex(index).getStringAtRange([ offset, offset + 1 ])\n  }\n\n  getLength() {\n    return this.blockList.getEndPosition()\n  }\n\n  getBlocks() {\n    return this.blockList.toArray()\n  }\n\n  getBlockCount() {\n    return this.blockList.length\n  }\n\n  getEditCount() {\n    return this.editCount\n  }\n\n  eachBlock(callback) {\n    return this.blockList.eachObject(callback)\n  }\n\n  eachBlockAtRange(range, callback) {\n    let block, textRange\n    range = normalizeRange(range)\n    const [ startPosition, endPosition ] = range\n    const startLocation = this.locationFromPosition(startPosition)\n    const endLocation = this.locationFromPosition(endPosition)\n\n    if (startLocation.index === endLocation.index) {\n      block = this.getBlockAtIndex(startLocation.index)\n      textRange = [ startLocation.offset, endLocation.offset ]\n      return callback(block, textRange, startLocation.index)\n    } else {\n      for (let index = startLocation.index; index <= endLocation.index; index++) {\n        block = this.getBlockAtIndex(index)\n        if (block) {\n          switch (index) {\n            case startLocation.index:\n              textRange = [ startLocation.offset, block.text.getLength() ]\n              break\n            case endLocation.index:\n              textRange = [ 0, endLocation.offset ]\n              break\n            default:\n              textRange = [ 0, block.text.getLength() ]\n          }\n          callback(block, textRange, index)\n        }\n      }\n    }\n  }\n\n  getCommonAttributesAtRange(range) {\n    range = normalizeRange(range)\n    const [ startPosition ] = range\n    if (rangeIsCollapsed(range)) {\n      return this.getCommonAttributesAtPosition(startPosition)\n    } else {\n      const textAttributes = []\n      const blockAttributes = []\n\n      this.eachBlockAtRange(range, function(block, textRange) {\n        if (textRange[0] !== textRange[1]) {\n          textAttributes.push(block.text.getCommonAttributesAtRange(textRange))\n          return blockAttributes.push(attributesForBlock(block))\n        }\n      })\n\n      return Hash.fromCommonAttributesOfObjects(textAttributes)\n        .merge(Hash.fromCommonAttributesOfObjects(blockAttributes))\n        .toObject()\n    }\n  }\n\n  getCommonAttributesAtPosition(position) {\n    let key, value\n    const { index, offset } = this.locationFromPosition(position)\n    const block = this.getBlockAtIndex(index)\n    if (!block) {\n      return {}\n    }\n\n    const commonAttributes = attributesForBlock(block)\n    const attributes = block.text.getAttributesAtPosition(offset)\n    const attributesLeft = block.text.getAttributesAtPosition(offset - 1)\n    const inheritableAttributes = Object.keys(config.textAttributes).filter((key) => {\n      return config.textAttributes[key].inheritable\n    })\n\n    for (key in attributesLeft) {\n      value = attributesLeft[key]\n      if (value === attributes[key] || inheritableAttributes.includes(key)) {\n        commonAttributes[key] = value\n      }\n    }\n\n    return commonAttributes\n  }\n\n  getRangeOfCommonAttributeAtPosition(attributeName, position) {\n    const { index, offset } = this.locationFromPosition(position)\n    const text = this.getTextAtIndex(index)\n    const [ startOffset, endOffset ] = Array.from(text.getExpandedRangeForAttributeAtOffset(attributeName, offset))\n\n    const start = this.positionFromLocation({ index, offset: startOffset })\n    const end = this.positionFromLocation({ index, offset: endOffset })\n    return normalizeRange([ start, end ])\n  }\n\n  getBaseBlockAttributes() {\n    let baseBlockAttributes = this.getBlockAtIndex(0).getAttributes()\n\n    for (let blockIndex = 1; blockIndex < this.getBlockCount(); blockIndex++) {\n      const blockAttributes = this.getBlockAtIndex(blockIndex).getAttributes()\n      const lastAttributeIndex = Math.min(baseBlockAttributes.length, blockAttributes.length)\n\n      baseBlockAttributes = (() => {\n        const result = []\n        for (let index = 0; index < lastAttributeIndex; index++) {\n          if (blockAttributes[index] !== baseBlockAttributes[index]) {\n            break\n          }\n          result.push(blockAttributes[index])\n        }\n        return result\n      })()\n    }\n\n    return baseBlockAttributes\n  }\n\n  getAttachmentById(attachmentId) {\n    for (const attachment of this.getAttachments()) {\n      if (attachment.id === attachmentId) {\n        return attachment\n      }\n    }\n  }\n\n  getAttachmentPieces() {\n    let attachmentPieces = []\n    this.blockList.eachObject(({ text }) => attachmentPieces = attachmentPieces.concat(text.getAttachmentPieces()))\n    return attachmentPieces\n  }\n\n  getAttachments() {\n    return this.getAttachmentPieces().map((piece) => piece.attachment)\n  }\n\n  getRangeOfAttachment(attachment) {\n    let position = 0\n    const iterable = this.blockList.toArray()\n    for (let index = 0; index < iterable.length; index++) {\n      const { text } = iterable[index]\n      const textRange = text.getRangeOfAttachment(attachment)\n      if (textRange) {\n        return normalizeRange([ position + textRange[0], position + textRange[1] ])\n      }\n      position += text.getLength()\n    }\n  }\n\n  getLocationRangeOfAttachment(attachment) {\n    const range = this.getRangeOfAttachment(attachment)\n    return this.locationRangeFromRange(range)\n  }\n\n  getAttachmentPieceForAttachment(attachment) {\n    for (const piece of this.getAttachmentPieces()) {\n      if (piece.attachment === attachment) {\n        return piece\n      }\n    }\n  }\n\n  findRangesForBlockAttribute(attributeName) {\n    let position = 0\n    const ranges = []\n\n    this.getBlocks().forEach((block) => {\n      const length = block.getLength()\n      if (block.hasAttribute(attributeName)) {\n        ranges.push([ position, position + length ])\n      }\n      position += length\n    })\n\n    return ranges\n  }\n\n  findRangesForTextAttribute(attributeName, { withValue } = {}) {\n    let position = 0\n    let range = []\n    const ranges = []\n\n    const match = function(piece) {\n      if (withValue) {\n        return piece.getAttribute(attributeName) === withValue\n      } else {\n        return piece.hasAttribute(attributeName)\n      }\n    }\n\n    this.getPieces().forEach((piece) => {\n      const length = piece.getLength()\n      if (match(piece)) {\n        if (range[1] === position) {\n          range[1] = position + length\n        } else {\n          ranges.push(range = [ position, position + length ])\n        }\n      }\n      position += length\n    })\n\n    return ranges\n  }\n\n  locationFromPosition(position) {\n    const location = this.blockList.findIndexAndOffsetAtPosition(Math.max(0, position))\n    if (location.index != null) {\n      return location\n    } else {\n      const blocks = this.getBlocks()\n      return { index: blocks.length - 1, offset: blocks[blocks.length - 1].getLength() }\n    }\n  }\n\n  positionFromLocation(location) {\n    return this.blockList.findPositionAtIndexAndOffset(location.index, location.offset)\n  }\n\n  locationRangeFromPosition(position) {\n    return normalizeRange(this.locationFromPosition(position))\n  }\n\n  locationRangeFromRange(range) {\n    range = normalizeRange(range)\n    if (!range) return\n\n    const [ startPosition, endPosition ] = Array.from(range)\n    const startLocation = this.locationFromPosition(startPosition)\n    const endLocation = this.locationFromPosition(endPosition)\n    return normalizeRange([ startLocation, endLocation ])\n  }\n\n  rangeFromLocationRange(locationRange) {\n    let rightPosition\n    locationRange = normalizeRange(locationRange)\n    const leftPosition = this.positionFromLocation(locationRange[0])\n    if (!rangeIsCollapsed(locationRange)) {\n      rightPosition = this.positionFromLocation(locationRange[1])\n    }\n    return normalizeRange([ leftPosition, rightPosition ])\n  }\n\n  isEqualTo(document) {\n    return this.blockList.isEqualTo(document?.blockList)\n  }\n\n  getTexts() {\n    return this.getBlocks().map((block) => block.text)\n  }\n\n  getPieces() {\n    const pieces = []\n\n    Array.from(this.getTexts()).forEach((text) => {\n      pieces.push(...Array.from(text.getPieces() || []))\n    })\n\n    return pieces\n  }\n\n  getObjects() {\n    return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())\n  }\n\n  toSerializableDocument() {\n    const blocks = []\n    this.blockList.eachObject((block) => blocks.push(block.copyWithText(block.text.toSerializableText())))\n    return new this.constructor(blocks)\n  }\n\n  toString() {\n    return this.blockList.toString()\n  }\n\n  toJSON() {\n    return this.blockList.toJSON()\n  }\n\n  toConsole() {\n    return JSON.stringify(this.blockList.toArray().map((block) => JSON.parse(block.text.toConsole())))\n  }\n}\n\nconst attributesForBlock = function(block) {\n  const attributes = {}\n  const attributeName = block.getLastAttribute()\n  if (attributeName) {\n    attributes[attributeName] = true\n  }\n  return attributes\n}\n", "/* eslint-disable\n    no-case-declarations,\n    no-irregular-whitespace,\n*/\nimport * as config from \"trix/config\"\nimport BasicObject from \"trix/core/basic_object\"\nimport Document from \"trix/models/document\"\nimport HTMLSanitizer from \"trix/models/html_sanitizer\"\n\nimport {\n  arraysAreEqual,\n  breakableWhitespacePattern,\n  elementContainsNode,\n  findClosestElementFromNode,\n  getBlockTagNames,\n  makeElement,\n  nodeIsAttachmentElement,\n  normalizeSpaces,\n  removeNode,\n  squishBreakableWhitespace,\n  tagName,\n  walkTree,\n} from \"trix/core/helpers\"\n\nconst pieceForString = (string, attributes = {}) => {\n  const type = \"string\"\n  string = normalizeSpaces(string)\n  return { string, attributes, type }\n}\n\nconst pieceForAttachment = (attachment, attributes = {}) => {\n  const type = \"attachment\"\n  return { attachment, attributes, type }\n}\n\nconst blockForAttributes = (attributes = {}, htmlAttributes = {}) => {\n  const text = []\n  return { text, attributes, htmlAttributes }\n}\n\nconst parseTrixDataAttribute = (element, name) => {\n  try {\n    return JSON.parse(element.getAttribute(`data-trix-${name}`))\n  } catch (error) {\n    return {}\n  }\n}\n\nconst getImageDimensions = (element) => {\n  const width = element.getAttribute(\"width\")\n  const height = element.getAttribute(\"height\")\n  const dimensions = {}\n  if (width) {\n    dimensions.width = parseInt(width, 10)\n  }\n  if (height) {\n    dimensions.height = parseInt(height, 10)\n  }\n  return dimensions\n}\n\nexport default class HTMLParser extends BasicObject {\n  static parse(html, options) {\n    const parser = new this(html, options)\n    parser.parse()\n    return parser\n  }\n\n  constructor(html, { referenceElement } = {}) {\n    super(...arguments)\n    this.html = html\n    this.referenceElement = referenceElement\n    this.blocks = []\n    this.blockElements = []\n    this.processedElements = []\n  }\n\n  getDocument() {\n    return Document.fromJSON(this.blocks)\n  }\n\n  // HTML parsing\n\n  parse() {\n    try {\n      this.createHiddenContainer()\n      HTMLSanitizer.setHTML(this.containerElement, this.html)\n      const walker = walkTree(this.containerElement, { usingFilter: nodeFilter })\n      while (walker.nextNode()) {\n        this.processNode(walker.currentNode)\n      }\n      return this.translateBlockElementMarginsToNewlines()\n    } finally {\n      this.removeHiddenContainer()\n    }\n  }\n\n  createHiddenContainer() {\n    if (this.referenceElement) {\n      this.containerElement = this.referenceElement.cloneNode(false)\n      this.containerElement.removeAttribute(\"id\")\n      this.containerElement.setAttribute(\"data-trix-internal\", \"\")\n      this.containerElement.style.display = \"none\"\n      return this.referenceElement.parentNode.insertBefore(this.containerElement, this.referenceElement.nextSibling)\n    } else {\n      this.containerElement = makeElement({ tagName: \"div\", style: { display: \"none\" } })\n      return document.body.appendChild(this.containerElement)\n    }\n  }\n\n  removeHiddenContainer() {\n    return removeNode(this.containerElement)\n  }\n\n  processNode(node) {\n    switch (node.nodeType) {\n      case Node.TEXT_NODE:\n        if (!this.isInsignificantTextNode(node)) {\n          this.appendBlockForTextNode(node)\n          return this.processTextNode(node)\n        }\n        break\n      case Node.ELEMENT_NODE:\n        this.appendBlockForElement(node)\n        return this.processElement(node)\n    }\n  }\n\n  appendBlockForTextNode(node) {\n    const element = node.parentNode\n    if (element === this.currentBlockElement && this.isBlockElement(node.previousSibling)) {\n      return this.appendStringWithAttributes(\"\\n\")\n    } else if (element === this.containerElement || this.isBlockElement(element)) {\n      const attributes = this.getBlockAttributes(element)\n      const htmlAttributes = this.getBlockHTMLAttributes(element)\n      if (!arraysAreEqual(attributes, this.currentBlock?.attributes)) {\n        this.currentBlock = this.appendBlockForAttributesWithElement(attributes, element, htmlAttributes)\n        this.currentBlockElement = element\n      }\n    }\n  }\n\n  appendBlockForElement(element) {\n    const elementIsBlockElement = this.isBlockElement(element)\n    const currentBlockContainsElement = elementContainsNode(this.currentBlockElement, element)\n\n    if (elementIsBlockElement && !this.isBlockElement(element.firstChild)) {\n      if (!this.isInsignificantTextNode(element.firstChild) || !this.isBlockElement(element.firstElementChild)) {\n        const attributes = this.getBlockAttributes(element)\n        const htmlAttributes = this.getBlockHTMLAttributes(element)\n        if (element.firstChild) {\n          if (!(currentBlockContainsElement && arraysAreEqual(attributes, this.currentBlock.attributes))) {\n            this.currentBlock = this.appendBlockForAttributesWithElement(attributes, element, htmlAttributes)\n            this.currentBlockElement = element\n          } else {\n            return this.appendStringWithAttributes(\"\\n\")\n          }\n        }\n      }\n    } else if (this.currentBlockElement && !currentBlockContainsElement && !elementIsBlockElement) {\n      const parentBlockElement = this.findParentBlockElement(element)\n      if (parentBlockElement) {\n        return this.appendBlockForElement(parentBlockElement)\n      } else {\n        this.currentBlock = this.appendEmptyBlock()\n        this.currentBlockElement = null\n      }\n    }\n  }\n\n  findParentBlockElement(element) {\n    let { parentElement } = element\n    while (parentElement && parentElement !== this.containerElement) {\n      if (this.isBlockElement(parentElement) && this.blockElements.includes(parentElement)) {\n        return parentElement\n      } else {\n        parentElement = parentElement.parentElement\n      }\n    }\n    return null\n  }\n\n  processTextNode(node) {\n    let string = node.data\n    if (!elementCanDisplayPreformattedText(node.parentNode)) {\n      string = squishBreakableWhitespace(string)\n      if (stringEndsWithWhitespace(node.previousSibling?.textContent)) {\n        string = leftTrimBreakableWhitespace(string)\n      }\n    }\n    return this.appendStringWithAttributes(string, this.getTextAttributes(node.parentNode))\n  }\n\n  processElement(element) {\n    let attributes\n    if (nodeIsAttachmentElement(element)) {\n      attributes = parseTrixDataAttribute(element, \"attachment\")\n      if (Object.keys(attributes).length) {\n        const textAttributes = this.getTextAttributes(element)\n        this.appendAttachmentWithAttributes(attributes, textAttributes)\n        // We have everything we need so avoid processing inner nodes\n        element.innerHTML = \"\"\n      }\n      return this.processedElements.push(element)\n    } else {\n      switch (tagName(element)) {\n        case \"br\":\n          if (!this.isExtraBR(element) && !this.isBlockElement(element.nextSibling)) {\n            this.appendStringWithAttributes(\"\\n\", this.getTextAttributes(element))\n          }\n          return this.processedElements.push(element)\n        case \"img\":\n          attributes = { url: element.getAttribute(\"src\"), contentType: \"image\" }\n          const object = getImageDimensions(element)\n          for (const key in object) {\n            const value = object[key]\n            attributes[key] = value\n          }\n          this.appendAttachmentWithAttributes(attributes, this.getTextAttributes(element))\n          return this.processedElements.push(element)\n        case \"tr\":\n          if (this.needsTableSeparator(element)) {\n            return this.appendStringWithAttributes(config.parser.tableRowSeparator)\n          }\n          break\n        case \"td\":\n          if (this.needsTableSeparator(element)) {\n            return this.appendStringWithAttributes(config.parser.tableCellSeparator)\n          }\n          break\n      }\n    }\n  }\n\n  // Document construction\n\n  appendBlockForAttributesWithElement(attributes, element, htmlAttributes = {}) {\n    this.blockElements.push(element)\n    const block = blockForAttributes(attributes, htmlAttributes)\n    this.blocks.push(block)\n    return block\n  }\n\n  appendEmptyBlock() {\n    return this.appendBlockForAttributesWithElement([], null)\n  }\n\n  appendStringWithAttributes(string, attributes) {\n    return this.appendPiece(pieceForString(string, attributes))\n  }\n\n  appendAttachmentWithAttributes(attachment, attributes) {\n    return this.appendPiece(pieceForAttachment(attachment, attributes))\n  }\n\n  appendPiece(piece) {\n    if (this.blocks.length === 0) {\n      this.appendEmptyBlock()\n    }\n    return this.blocks[this.blocks.length - 1].text.push(piece)\n  }\n\n  appendStringToTextAtIndex(string, index) {\n    const { text } = this.blocks[index]\n    const piece = text[text.length - 1]\n\n    if (piece?.type === \"string\") {\n      piece.string += string\n    } else {\n      return text.push(pieceForString(string))\n    }\n  }\n\n  prependStringToTextAtIndex(string, index) {\n    const { text } = this.blocks[index]\n    const piece = text[0]\n\n    if (piece?.type === \"string\") {\n      piece.string = string + piece.string\n    } else {\n      return text.unshift(pieceForString(string))\n    }\n  }\n\n  // Attribute parsing\n\n  getTextAttributes(element) {\n    let value\n    const attributes = {}\n    for (const attribute in config.textAttributes) {\n      const configAttr = config.textAttributes[attribute]\n      if (\n        configAttr.tagName &&\n        findClosestElementFromNode(element, {\n          matchingSelector: configAttr.tagName,\n          untilNode: this.containerElement,\n        })\n      ) {\n        attributes[attribute] = true\n      } else if (configAttr.parser) {\n        value = configAttr.parser(element)\n        if (value) {\n          let attributeInheritedFromBlock = false\n          for (const blockElement of this.findBlockElementAncestors(element)) {\n            if (configAttr.parser(blockElement) === value) {\n              attributeInheritedFromBlock = true\n              break\n            }\n          }\n          if (!attributeInheritedFromBlock) {\n            attributes[attribute] = value\n          }\n        }\n      } else if (configAttr.styleProperty) {\n        value = element.style[configAttr.styleProperty]\n        if (value) {\n          attributes[attribute] = value\n        }\n      }\n    }\n\n    if (nodeIsAttachmentElement(element)) {\n      const object = parseTrixDataAttribute(element, \"attributes\")\n      for (const key in object) {\n        value = object[key]\n        attributes[key] = value\n      }\n    }\n\n    return attributes\n  }\n\n  getBlockAttributes(element) {\n    const attributes = []\n    while (element && element !== this.containerElement) {\n      for (const attribute in config.blockAttributes) {\n        const attrConfig = config.blockAttributes[attribute]\n        if (attrConfig.parse !== false) {\n          if (tagName(element) === attrConfig.tagName) {\n            if (attrConfig.test?.(element) || !attrConfig.test) {\n              attributes.push(attribute)\n              if (attrConfig.listAttribute) {\n                attributes.push(attrConfig.listAttribute)\n              }\n            }\n          }\n        }\n      }\n      element = element.parentNode\n    }\n    return attributes.reverse()\n  }\n\n  getBlockHTMLAttributes(element) {\n    const attributes = {}\n    const blockConfig = Object.values(config.blockAttributes).find(settings => settings.tagName === tagName(element))\n    const allowedAttributes = blockConfig?.htmlAttributes || []\n\n    allowedAttributes.forEach((attribute) => {\n      if (element.hasAttribute(attribute)) {\n        attributes[attribute] = element.getAttribute(attribute)\n      }\n    })\n\n    return attributes\n  }\n\n  findBlockElementAncestors(element) {\n    const ancestors = []\n    while (element && element !== this.containerElement) {\n      const tag = tagName(element)\n      if (getBlockTagNames().includes(tag)) {\n        ancestors.push(element)\n      }\n      element = element.parentNode\n    }\n    return ancestors\n  }\n\n  // Element inspection\n\n  isBlockElement(element) {\n    if (element?.nodeType !== Node.ELEMENT_NODE) return\n    if (nodeIsAttachmentElement(element)) return\n    if (findClosestElementFromNode(element, { matchingSelector: \"td\", untilNode: this.containerElement })) return\n\n    return getBlockTagNames().includes(tagName(element)) ||\n      window.getComputedStyle(element).display === \"block\"\n  }\n\n  isInsignificantTextNode(node) {\n    if (node?.nodeType !== Node.TEXT_NODE) return\n    if (!stringIsAllBreakableWhitespace(node.data)) return\n    const { parentNode, previousSibling, nextSibling } = node\n    if (nodeEndsWithNonWhitespace(parentNode.previousSibling) && !this.isBlockElement(parentNode.previousSibling)) return\n    if (elementCanDisplayPreformattedText(parentNode)) return\n    return !previousSibling || this.isBlockElement(previousSibling) || !nextSibling || this.isBlockElement(nextSibling)\n  }\n\n  isExtraBR(element) {\n    return tagName(element) === \"br\" && this.isBlockElement(element.parentNode) && element.parentNode.lastChild === element\n  }\n\n  needsTableSeparator(element) {\n    if (config.parser.removeBlankTableCells) {\n      const content = element.previousSibling?.textContent\n      return content && /\\S/.test(content)\n    } else {\n      return element.previousSibling\n    }\n  }\n\n  // Margin translation\n\n  translateBlockElementMarginsToNewlines() {\n    const defaultMargin = this.getMarginOfDefaultBlockElement()\n\n    for (let index = 0; index < this.blocks.length; index++) {\n      const margin = this.getMarginOfBlockElementAtIndex(index)\n      if (margin) {\n        if (margin.top > defaultMargin.top * 2) {\n          this.prependStringToTextAtIndex(\"\\n\", index)\n        }\n\n        if (margin.bottom > defaultMargin.bottom * 2) {\n          this.appendStringToTextAtIndex(\"\\n\", index)\n        }\n      }\n    }\n  }\n\n  getMarginOfBlockElementAtIndex(index) {\n    const element = this.blockElements[index]\n    if (element) {\n      if (element.textContent) {\n        if (!getBlockTagNames().includes(tagName(element)) && !this.processedElements.includes(element)) {\n          return getBlockElementMargin(element)\n        }\n      }\n    }\n  }\n\n  getMarginOfDefaultBlockElement() {\n    const element = makeElement(config.blockAttributes.default.tagName)\n    this.containerElement.appendChild(element)\n    return getBlockElementMargin(element)\n  }\n}\n\n// Helpers\n\nconst elementCanDisplayPreformattedText = function(element) {\n  const { whiteSpace } = window.getComputedStyle(element)\n  return [ \"pre\", \"pre-wrap\", \"pre-line\" ].includes(whiteSpace)\n}\n\nconst nodeEndsWithNonWhitespace = (node) => node && !stringEndsWithWhitespace(node.textContent)\n\nconst getBlockElementMargin = function(element) {\n  const style = window.getComputedStyle(element)\n  if (style.display === \"block\") {\n    return { top: parseInt(style.marginTop), bottom: parseInt(style.marginBottom) }\n  }\n}\n\nconst nodeFilter = function(node) {\n  if (tagName(node) === \"style\") {\n    return NodeFilter.FILTER_REJECT\n  } else {\n    return NodeFilter.FILTER_ACCEPT\n  }\n}\n\n// Whitespace\n\nconst leftTrimBreakableWhitespace = (string) => string.replace(new RegExp(`^${breakableWhitespacePattern.source}+`), \"\")\n\nconst stringIsAllBreakableWhitespace = (string) => new RegExp(`^${breakableWhitespacePattern.source}*$`).test(string)\n\nconst stringEndsWithWhitespace = (string) => /\\s$/.test(string)\n", "/* eslint-disable\n    no-empty,\n*/\nimport { removeNode } from \"trix/core/helpers\"\n\nimport DocumentView from \"trix/views/document_view\"\nimport Document from \"trix/models/document\"\nimport HTMLParser from \"trix/models/html_parser\"\n\nconst unserializableElementSelector = \"[data-trix-serialize=false]\"\nconst unserializableAttributeNames = [\n  \"contenteditable\",\n  \"data-trix-id\",\n  \"data-trix-store-key\",\n  \"data-trix-mutable\",\n  \"data-trix-placeholder\",\n  \"tabindex\",\n]\nconst serializedAttributesAttribute = \"data-trix-serialized-attributes\"\nconst serializedAttributesSelector = `[${serializedAttributesAttribute}]`\n\nconst blockCommentPattern = new RegExp(\"<!--block-->\", \"g\")\n\nconst serializers = {\n  \"application/json\": function(serializable) {\n    let document\n    if (serializable instanceof Document) {\n      document = serializable\n    } else if (serializable instanceof HTMLElement) {\n      document = HTMLParser.parse(serializable.innerHTML).getDocument()\n    } else {\n      throw new Error(\"unserializable object\")\n    }\n\n    return document.toSerializableDocument().toJSONString()\n  },\n\n  \"text/html\": function(serializable) {\n    let element\n    if (serializable instanceof Document) {\n      element = DocumentView.render(serializable)\n    } else if (serializable instanceof HTMLElement) {\n      element = serializable.cloneNode(true)\n    } else {\n      throw new Error(\"unserializable object\")\n    }\n\n    // Remove unserializable elements\n    Array.from(element.querySelectorAll(unserializableElementSelector)).forEach((el) => {\n      removeNode(el)\n    })\n\n    // Remove unserializable attributes\n    unserializableAttributeNames.forEach((attribute) => {\n      Array.from(element.querySelectorAll(`[${attribute}]`)).forEach((el) => {\n        el.removeAttribute(attribute)\n      })\n    })\n\n    // Rewrite elements with serialized attribute overrides\n    Array.from(element.querySelectorAll(serializedAttributesSelector)).forEach((el) => {\n      try {\n        const attributes = JSON.parse(el.getAttribute(serializedAttributesAttribute))\n        el.removeAttribute(serializedAttributesAttribute)\n        for (const name in attributes) {\n          const value = attributes[name]\n          el.setAttribute(name, value)\n        }\n      } catch (error) {}\n    })\n\n    return element.innerHTML.replace(blockCommentPattern, \"\")\n  },\n}\n\nconst deserializers = {\n  \"application/json\": function(string) {\n    return Document.fromJSONString(string)\n  },\n\n  \"text/html\": function(string) {\n    return HTMLParser.parse(string).getDocument()\n  },\n}\n\nexport const serializeToContentType = function(serializable, contentType) {\n  const serializer = serializers[contentType]\n  if (serializer) {\n    return serializer(serializable)\n  } else {\n    throw new Error(`unknown content type: ${contentType}`)\n  }\n}\n\nexport const deserializeFromContentType = function(string, contentType) {\n  const deserializer = deserializers[contentType]\n  if (deserializer) {\n    return deserializer(string)\n  } else {\n    throw new Error(`unknown content type: ${contentType}`)\n  }\n}\n", "import \"trix/models/attachment\"\nimport BasicObject from \"trix/core/basic_object\"\n\nexport default class ManagedAttachment extends BasicObject {\n  constructor(attachmentManager, attachment) {\n    super(...arguments)\n    this.attachmentManager = attachmentManager\n    this.attachment = attachment\n    this.id = this.attachment.id\n    this.file = this.attachment.file\n  }\n\n  remove() {\n    return this.attachmentManager.requestRemovalOfAttachment(this.attachment)\n  }\n}\n\nManagedAttachment.proxyMethod(\"attachment.getAttribute\")\nManagedAttachment.proxyMethod(\"attachment.hasAttribute\")\nManagedAttachment.proxyMethod(\"attachment.setAttribute\")\nManagedAttachment.proxyMethod(\"attachment.getAttributes\")\nManagedAttachment.proxyMethod(\"attachment.setAttributes\")\nManagedAttachment.proxyMethod(\"attachment.isPending\")\nManagedAttachment.proxyMethod(\"attachment.isPreviewable\")\nManagedAttachment.proxyMethod(\"attachment.getURL\")\nManagedAttachment.proxyMethod(\"attachment.getHref\")\nManagedAttachment.proxyMethod(\"attachment.getFilename\")\nManagedAttachment.proxyMethod(\"attachment.getFilesize\")\nManagedAttachment.proxyMethod(\"attachment.getFormattedFilesize\")\nManagedAttachment.proxyMethod(\"attachment.getExtension\")\nManagedAttachment.proxyMethod(\"attachment.getContentType\")\nManagedAttachment.proxyMethod(\"attachment.getFile\")\nManagedAttachment.proxyMethod(\"attachment.setFile\")\nManagedAttachment.proxyMethod(\"attachment.releaseFile\")\nManagedAttachment.proxyMethod(\"attachment.getUploadProgress\")\nManagedAttachment.proxyMethod(\"attachment.setUploadProgress\")\n\n", "import ManagedAttachment from \"trix/models/managed_attachment\"\nimport BasicObject from \"trix/core/basic_object\"\n\nexport default class AttachmentManager extends BasicObject {\n  constructor(attachments = []) {\n    super(...arguments)\n    this.managedAttachments = {}\n    Array.from(attachments).forEach((attachment) => {\n      this.manageAttachment(attachment)\n    })\n  }\n\n  getAttachments() {\n    const result = []\n    for (const id in this.managedAttachments) {\n      const attachment = this.managedAttachments[id]\n      result.push(attachment)\n    }\n    return result\n  }\n\n  manageAttachment(attachment) {\n    if (!this.managedAttachments[attachment.id]) {\n      this.managedAttachments[attachment.id] = new ManagedAttachment(this, attachment)\n    }\n    return this.managedAttachments[attachment.id]\n  }\n\n  attachmentIsManaged(attachment) {\n    return attachment.id in this.managedAttachments\n  }\n\n  requestRemovalOfAttachment(attachment) {\n    if (this.attachmentIsManaged(attachment)) {\n      return this.delegate?.attachmentManagerDidRequestRemovalOfAttachment?.(attachment)\n    }\n  }\n\n  unmanageAttachment(attachment) {\n    const managedAttachment = this.managedAttachments[attachment.id]\n    delete this.managedAttachments[attachment.id]\n    return managedAttachment\n  }\n}\n", "export default class LineBreakInsertion {\n  constructor(composition) {\n    this.composition = composition\n    this.document = this.composition.document\n    const selectedRange = this.composition.getSelectedRange()\n    this.startPosition = selectedRange[0]\n    this.endPosition = selectedRange[1]\n\n    this.startLocation = this.document.locationFromPosition(this.startPosition)\n    this.endLocation = this.document.locationFromPosition(this.endPosition)\n\n    this.block = this.document.getBlockAtIndex(this.endLocation.index)\n    this.breaksOnReturn = this.block.breaksOnReturn()\n    this.previousCharacter = this.block.text.getStringAtPosition(this.endLocation.offset - 1)\n    this.nextCharacter = this.block.text.getStringAtPosition(this.endLocation.offset)\n  }\n\n  shouldInsertBlockBreak() {\n    if (this.block.hasAttributes() && this.block.isListItem() && !this.block.isEmpty()) {\n      return this.startLocation.offset !== 0\n    } else {\n      return this.breaksOnReturn && this.nextCharacter !== \"\\n\"\n    }\n  }\n\n  shouldBreakFormattedBlock() {\n    return (\n      this.block.hasAttributes() &&\n      !this.block.isListItem() &&\n      (this.breaksOnReturn && this.nextCharacter === \"\\n\" || this.previousCharacter === \"\\n\")\n    )\n  }\n\n  shouldDecreaseListLevel() {\n    return this.block.hasAttributes() && this.block.isListItem() && this.block.isEmpty()\n  }\n\n  shouldPrependListItem() {\n    return this.block.isListItem() && this.startLocation.offset === 0 && !this.block.isEmpty()\n  }\n\n  shouldRemoveLastBlockAttribute() {\n    return this.block.hasAttributes() && !this.block.isListItem() && this.block.isEmpty()\n  }\n}\n", "import * as config from \"trix/config\"\nimport { OBJECT_REPLACEMENT_CHARACTER } from \"trix/constants\"\n\nimport BasicObject from \"trix/core/basic_object\"\nimport Text from \"trix/models/text\"\nimport Block from \"trix/models/block\"\nimport Attachment from \"trix/models/attachment\"\nimport Document from \"trix/models/document\"\nimport HTMLParser from \"trix/models/html_parser\"\nimport LineBreakInsertion from \"trix/models/line_break_insertion\"\n\nimport {\n  arrayStartsWith,\n  extend,\n  getAllAttributeNames,\n  getBlockConfig,\n  getTextConfig,\n  normalizeRange,\n  objectsAreEqual,\n  rangeIsCollapsed,\n  rangesAreEqual,\n  summarizeArrayChange,\n} from \"trix/core/helpers\"\n\nconst PLACEHOLDER = \" \"\n\nexport default class Composition extends BasicObject {\n  constructor() {\n    super(...arguments)\n    this.document = new Document()\n    this.attachments = []\n    this.currentAttributes = {}\n    this.revision = 0\n  }\n\n  setDocument(document) {\n    if (!document.isEqualTo(this.document)) {\n      this.document = document\n      this.refreshAttachments()\n      this.revision++\n      return this.delegate?.compositionDidChangeDocument?.(document)\n    }\n  }\n\n  // Snapshots\n\n  getSnapshot() {\n    return {\n      document: this.document,\n      selectedRange: this.getSelectedRange(),\n    }\n  }\n\n  loadSnapshot({ document, selectedRange }) {\n    this.delegate?.compositionWillLoadSnapshot?.()\n    this.setDocument(document != null ? document : new Document())\n    this.setSelection(selectedRange != null ? selectedRange : [ 0, 0 ])\n    return this.delegate?.compositionDidLoadSnapshot?.()\n  }\n\n  // Responder protocol\n\n  insertText(text, { updatePosition } = { updatePosition: true }) {\n    const selectedRange = this.getSelectedRange()\n    this.setDocument(this.document.insertTextAtRange(text, selectedRange))\n\n    const startPosition = selectedRange[0]\n    const endPosition = startPosition + text.getLength()\n\n    if (updatePosition) {\n      this.setSelection(endPosition)\n    }\n    return this.notifyDelegateOfInsertionAtRange([ startPosition, endPosition ])\n  }\n\n  insertBlock(block = new Block()) {\n    const document = new Document([ block ])\n    return this.insertDocument(document)\n  }\n\n  insertDocument(document = new Document()) {\n    const selectedRange = this.getSelectedRange()\n    this.setDocument(this.document.insertDocumentAtRange(document, selectedRange))\n\n    const startPosition = selectedRange[0]\n    const endPosition = startPosition + document.getLength()\n\n    this.setSelection(endPosition)\n    return this.notifyDelegateOfInsertionAtRange([ startPosition, endPosition ])\n  }\n\n  insertString(string, options) {\n    const attributes = this.getCurrentTextAttributes()\n    const text = Text.textForStringWithAttributes(string, attributes)\n    return this.insertText(text, options)\n  }\n\n  insertBlockBreak() {\n    const selectedRange = this.getSelectedRange()\n    this.setDocument(this.document.insertBlockBreakAtRange(selectedRange))\n\n    const startPosition = selectedRange[0]\n    const endPosition = startPosition + 1\n\n    this.setSelection(endPosition)\n    return this.notifyDelegateOfInsertionAtRange([ startPosition, endPosition ])\n  }\n\n  insertLineBreak() {\n    const insertion = new LineBreakInsertion(this)\n\n    if (insertion.shouldDecreaseListLevel()) {\n      this.decreaseListLevel()\n      return this.setSelection(insertion.startPosition)\n    } else if (insertion.shouldPrependListItem()) {\n      const document = new Document([ insertion.block.copyWithoutText() ])\n      return this.insertDocument(document)\n    } else if (insertion.shouldInsertBlockBreak()) {\n      return this.insertBlockBreak()\n    } else if (insertion.shouldRemoveLastBlockAttribute()) {\n      return this.removeLastBlockAttribute()\n    } else if (insertion.shouldBreakFormattedBlock()) {\n      return this.breakFormattedBlock(insertion)\n    } else {\n      return this.insertString(\"\\n\")\n    }\n  }\n\n  insertHTML(html) {\n    const document = HTMLParser.parse(html).getDocument()\n    const selectedRange = this.getSelectedRange()\n\n    this.setDocument(this.document.mergeDocumentAtRange(document, selectedRange))\n\n    const startPosition = selectedRange[0]\n    const endPosition = startPosition + document.getLength() - 1\n\n    this.setSelection(endPosition)\n    return this.notifyDelegateOfInsertionAtRange([ startPosition, endPosition ])\n  }\n\n  replaceHTML(html) {\n    const document = HTMLParser.parse(html).getDocument().copyUsingObjectsFromDocument(this.document)\n    const locationRange = this.getLocationRange({ strict: false })\n    const selectedRange = this.document.rangeFromLocationRange(locationRange)\n    this.setDocument(document)\n    return this.setSelection(selectedRange)\n  }\n\n  insertFile(file) {\n    return this.insertFiles([ file ])\n  }\n\n  insertFiles(files) {\n    const attachments = []\n\n    Array.from(files).forEach((file) => {\n      if (this.delegate?.compositionShouldAcceptFile(file)) {\n        const attachment = Attachment.attachmentForFile(file)\n        attachments.push(attachment)\n      }\n    })\n\n    return this.insertAttachments(attachments)\n  }\n\n  insertAttachment(attachment) {\n    return this.insertAttachments([ attachment ])\n  }\n\n  insertAttachments(attachments) {\n    let text = new Text()\n\n    Array.from(attachments).forEach((attachment) => {\n      const type = attachment.getType()\n      const presentation = config.attachments[type]?.presentation\n\n      const attributes = this.getCurrentTextAttributes()\n      if (presentation) {\n        attributes.presentation = presentation\n      }\n\n      const attachmentText = Text.textForAttachmentWithAttributes(attachment, attributes)\n      text = text.appendText(attachmentText)\n    })\n\n    return this.insertText(text)\n  }\n\n  shouldManageDeletingInDirection(direction) {\n    const locationRange = this.getLocationRange()\n    if (rangeIsCollapsed(locationRange)) {\n      if (direction === \"backward\" && locationRange[0].offset === 0) {\n        return true\n      }\n      if (this.shouldManageMovingCursorInDirection(direction)) {\n        return true\n      }\n    } else {\n      if (locationRange[0].index !== locationRange[1].index) {\n        return true\n      }\n    }\n    return false\n  }\n\n  deleteInDirection(direction, { length } = {}) {\n    let attachment, deletingIntoPreviousBlock, selectionSpansBlocks\n    const locationRange = this.getLocationRange()\n    let range = this.getSelectedRange()\n    const selectionIsCollapsed = rangeIsCollapsed(range)\n\n    if (selectionIsCollapsed) {\n      deletingIntoPreviousBlock = direction === \"backward\" && locationRange[0].offset === 0\n    } else {\n      selectionSpansBlocks = locationRange[0].index !== locationRange[1].index\n    }\n\n    if (deletingIntoPreviousBlock) {\n      if (this.canDecreaseBlockAttributeLevel()) {\n        const block = this.getBlock()\n\n        if (block.isListItem()) {\n          this.decreaseListLevel()\n        } else {\n          this.decreaseBlockAttributeLevel()\n        }\n\n        this.setSelection(range[0])\n        if (block.isEmpty()) {\n          return false\n        }\n      }\n    }\n\n    if (selectionIsCollapsed) {\n      range = this.getExpandedRangeInDirection(direction, { length })\n      if (direction === \"backward\") {\n        attachment = this.getAttachmentAtRange(range)\n      }\n    }\n\n    if (attachment) {\n      this.editAttachment(attachment)\n      return false\n    } else {\n      this.setDocument(this.document.removeTextAtRange(range))\n      this.setSelection(range[0])\n      if (deletingIntoPreviousBlock || selectionSpansBlocks) {\n        return false\n      }\n    }\n  }\n\n  moveTextFromRange(range) {\n    const [ position ] = Array.from(this.getSelectedRange())\n    this.setDocument(this.document.moveTextFromRangeToPosition(range, position))\n    return this.setSelection(position)\n  }\n\n  removeAttachment(attachment) {\n    const range = this.document.getRangeOfAttachment(attachment)\n    if (range) {\n      this.stopEditingAttachment()\n      this.setDocument(this.document.removeTextAtRange(range))\n      return this.setSelection(range[0])\n    }\n  }\n\n  removeLastBlockAttribute() {\n    const [ startPosition, endPosition ] = Array.from(this.getSelectedRange())\n    const block = this.document.getBlockAtPosition(endPosition)\n    this.removeCurrentAttribute(block.getLastAttribute())\n    return this.setSelection(startPosition)\n  }\n\n  insertPlaceholder() {\n    this.placeholderPosition = this.getPosition()\n    return this.insertString(PLACEHOLDER)\n  }\n\n  selectPlaceholder() {\n    if (this.placeholderPosition != null) {\n      this.setSelectedRange([ this.placeholderPosition, this.placeholderPosition + PLACEHOLDER.length ])\n      return this.getSelectedRange()\n    }\n  }\n\n  forgetPlaceholder() {\n    this.placeholderPosition = null\n  }\n\n  // Current attributes\n\n  hasCurrentAttribute(attributeName) {\n    const value = this.currentAttributes[attributeName]\n    return value != null && value !== false\n  }\n\n  toggleCurrentAttribute(attributeName) {\n    const value = !this.currentAttributes[attributeName]\n    if (value) {\n      return this.setCurrentAttribute(attributeName, value)\n    } else {\n      return this.removeCurrentAttribute(attributeName)\n    }\n  }\n\n  canSetCurrentAttribute(attributeName) {\n    if (getBlockConfig(attributeName)) {\n      return this.canSetCurrentBlockAttribute(attributeName)\n    } else {\n      return this.canSetCurrentTextAttribute(attributeName)\n    }\n  }\n\n  canSetCurrentTextAttribute(attributeName) {\n    const document = this.getSelectedDocument()\n    if (!document) return\n    for (const attachment of Array.from(document.getAttachments())) {\n      if (!attachment.hasContent()) {\n        return false\n      }\n    }\n    return true\n  }\n\n  canSetCurrentBlockAttribute(attributeName) {\n    const block = this.getBlock()\n    if (!block) return\n    return !block.isTerminalBlock()\n  }\n\n  setCurrentAttribute(attributeName, value) {\n    if (getBlockConfig(attributeName)) {\n      return this.setBlockAttribute(attributeName, value)\n    } else {\n      this.setTextAttribute(attributeName, value)\n      this.currentAttributes[attributeName] = value\n      return this.notifyDelegateOfCurrentAttributesChange()\n    }\n  }\n\n  setHTMLAtributeAtPosition(position, attributeName, value) {\n    const block = this.document.getBlockAtPosition(position)\n    const allowedHTMLAttributes = getBlockConfig(block.getLastAttribute())?.htmlAttributes\n\n    if (block && allowedHTMLAttributes?.includes(attributeName)) {\n      const newDocument = this.document.setHTMLAttributeAtPosition(position, attributeName, value)\n      this.setDocument(newDocument)\n    }\n  }\n\n  setTextAttribute(attributeName, value) {\n    const selectedRange = this.getSelectedRange()\n    if (!selectedRange) return\n\n    const [ startPosition, endPosition ] = Array.from(selectedRange)\n    if (startPosition === endPosition) {\n      if (attributeName === \"href\") {\n        const text = Text.textForStringWithAttributes(value, { href: value })\n        return this.insertText(text)\n      }\n    } else {\n      return this.setDocument(this.document.addAttributeAtRange(attributeName, value, selectedRange))\n    }\n  }\n\n  setBlockAttribute(attributeName, value) {\n    const selectedRange = this.getSelectedRange()\n    if (this.canSetCurrentAttribute(attributeName)) {\n      this.setDocument(this.document.applyBlockAttributeAtRange(attributeName, value, selectedRange))\n      return this.setSelection(selectedRange)\n    }\n  }\n\n  removeCurrentAttribute(attributeName) {\n    if (getBlockConfig(attributeName)) {\n      this.removeBlockAttribute(attributeName)\n      return this.updateCurrentAttributes()\n    } else {\n      this.removeTextAttribute(attributeName)\n      delete this.currentAttributes[attributeName]\n      return this.notifyDelegateOfCurrentAttributesChange()\n    }\n  }\n\n  removeTextAttribute(attributeName) {\n    const selectedRange = this.getSelectedRange()\n    if (!selectedRange) return\n    return this.setDocument(this.document.removeAttributeAtRange(attributeName, selectedRange))\n  }\n\n  removeBlockAttribute(attributeName) {\n    const selectedRange = this.getSelectedRange()\n    if (!selectedRange) return\n    return this.setDocument(this.document.removeAttributeAtRange(attributeName, selectedRange))\n  }\n\n  canDecreaseNestingLevel() {\n    return this.getBlock()?.getNestingLevel() > 0\n  }\n\n  canIncreaseNestingLevel() {\n    const block = this.getBlock()\n    if (!block) return\n    if (getBlockConfig(block.getLastNestableAttribute())?.listAttribute) {\n      const previousBlock = this.getPreviousBlock()\n      if (previousBlock) {\n        return arrayStartsWith(previousBlock.getListItemAttributes(), block.getListItemAttributes())\n      }\n    } else {\n      return block.getNestingLevel() > 0\n    }\n  }\n\n  decreaseNestingLevel() {\n    const block = this.getBlock()\n    if (!block) return\n    return this.setDocument(this.document.replaceBlock(block, block.decreaseNestingLevel()))\n  }\n\n  increaseNestingLevel() {\n    const block = this.getBlock()\n    if (!block) return\n    return this.setDocument(this.document.replaceBlock(block, block.increaseNestingLevel()))\n  }\n\n  canDecreaseBlockAttributeLevel() {\n    return this.getBlock()?.getAttributeLevel() > 0\n  }\n\n  decreaseBlockAttributeLevel() {\n    const attribute = this.getBlock()?.getLastAttribute()\n    if (attribute) {\n      return this.removeCurrentAttribute(attribute)\n    }\n  }\n\n  decreaseListLevel() {\n    let [ startPosition ] = Array.from(this.getSelectedRange())\n    const { index } = this.document.locationFromPosition(startPosition)\n    let endIndex = index\n    const attributeLevel = this.getBlock().getAttributeLevel()\n\n    let block = this.document.getBlockAtIndex(endIndex + 1)\n    while (block) {\n      if (!block.isListItem() || block.getAttributeLevel() <= attributeLevel) {\n        break\n      }\n      endIndex++\n      block = this.document.getBlockAtIndex(endIndex + 1)\n    }\n\n    startPosition = this.document.positionFromLocation({ index, offset: 0 })\n    const endPosition = this.document.positionFromLocation({ index: endIndex, offset: 0 })\n    return this.setDocument(this.document.removeLastListAttributeAtRange([ startPosition, endPosition ]))\n  }\n\n  updateCurrentAttributes() {\n    const selectedRange = this.getSelectedRange({ ignoreLock: true })\n    if (selectedRange) {\n      const currentAttributes = this.document.getCommonAttributesAtRange(selectedRange)\n\n      Array.from(getAllAttributeNames()).forEach((attributeName) => {\n        if (!currentAttributes[attributeName]) {\n          if (!this.canSetCurrentAttribute(attributeName)) {\n            currentAttributes[attributeName] = false\n          }\n        }\n      })\n\n      if (!objectsAreEqual(currentAttributes, this.currentAttributes)) {\n        this.currentAttributes = currentAttributes\n        return this.notifyDelegateOfCurrentAttributesChange()\n      }\n    }\n  }\n\n  getCurrentAttributes() {\n    return extend.call({}, this.currentAttributes)\n  }\n\n  getCurrentTextAttributes() {\n    const attributes = {}\n    for (const key in this.currentAttributes) {\n      const value = this.currentAttributes[key]\n      if (value !== false) {\n        if (getTextConfig(key)) {\n          attributes[key] = value\n        }\n      }\n    }\n    return attributes\n  }\n\n  // Selection freezing\n\n  freezeSelection() {\n    return this.setCurrentAttribute(\"frozen\", true)\n  }\n\n  thawSelection() {\n    return this.removeCurrentAttribute(\"frozen\")\n  }\n\n  hasFrozenSelection() {\n    return this.hasCurrentAttribute(\"frozen\")\n  }\n\n  setSelection(selectedRange) {\n    const locationRange = this.document.locationRangeFromRange(selectedRange)\n    return this.delegate?.compositionDidRequestChangingSelectionToLocationRange(locationRange)\n  }\n\n  getSelectedRange() {\n    const locationRange = this.getLocationRange()\n    if (locationRange) {\n      return this.document.rangeFromLocationRange(locationRange)\n    }\n  }\n\n  setSelectedRange(selectedRange) {\n    const locationRange = this.document.locationRangeFromRange(selectedRange)\n    return this.getSelectionManager().setLocationRange(locationRange)\n  }\n\n  getPosition() {\n    const locationRange = this.getLocationRange()\n    if (locationRange) {\n      return this.document.positionFromLocation(locationRange[0])\n    }\n  }\n\n  getLocationRange(options) {\n    if (this.targetLocationRange) {\n      return this.targetLocationRange\n    } else {\n      return this.getSelectionManager().getLocationRange(options) || normalizeRange({ index: 0, offset: 0 })\n    }\n  }\n\n  withTargetLocationRange(locationRange, fn) {\n    let result\n    this.targetLocationRange = locationRange\n    try {\n      result = fn()\n    } finally {\n      this.targetLocationRange = null\n    }\n    return result\n  }\n\n  withTargetRange(range, fn) {\n    const locationRange = this.document.locationRangeFromRange(range)\n    return this.withTargetLocationRange(locationRange, fn)\n  }\n\n  withTargetDOMRange(domRange, fn) {\n    const locationRange = this.createLocationRangeFromDOMRange(domRange, { strict: false })\n    return this.withTargetLocationRange(locationRange, fn)\n  }\n\n  getExpandedRangeInDirection(direction, { length } = {}) {\n    let [ startPosition, endPosition ] = Array.from(this.getSelectedRange())\n    if (direction === \"backward\") {\n      if (length) {\n        startPosition -= length\n      } else {\n        startPosition = this.translateUTF16PositionFromOffset(startPosition, -1)\n      }\n    } else {\n      if (length) {\n        endPosition += length\n      } else {\n        endPosition = this.translateUTF16PositionFromOffset(endPosition, 1)\n      }\n    }\n    return normalizeRange([ startPosition, endPosition ])\n  }\n\n  shouldManageMovingCursorInDirection(direction) {\n    if (this.editingAttachment) {\n      return true\n    }\n    const range = this.getExpandedRangeInDirection(direction)\n    return this.getAttachmentAtRange(range) != null\n  }\n\n  moveCursorInDirection(direction) {\n    let canEditAttachment, range\n    if (this.editingAttachment) {\n      range = this.document.getRangeOfAttachment(this.editingAttachment)\n    } else {\n      const selectedRange = this.getSelectedRange()\n      range = this.getExpandedRangeInDirection(direction)\n      canEditAttachment = !rangesAreEqual(selectedRange, range)\n    }\n\n    if (direction === \"backward\") {\n      this.setSelectedRange(range[0])\n    } else {\n      this.setSelectedRange(range[1])\n    }\n\n    if (canEditAttachment) {\n      const attachment = this.getAttachmentAtRange(range)\n      if (attachment) {\n        return this.editAttachment(attachment)\n      }\n    }\n  }\n\n  expandSelectionInDirection(direction, { length } = {}) {\n    const range = this.getExpandedRangeInDirection(direction, { length })\n    return this.setSelectedRange(range)\n  }\n\n  expandSelectionForEditing() {\n    if (this.hasCurrentAttribute(\"href\")) {\n      return this.expandSelectionAroundCommonAttribute(\"href\")\n    }\n  }\n\n  expandSelectionAroundCommonAttribute(attributeName) {\n    const position = this.getPosition()\n    const range = this.document.getRangeOfCommonAttributeAtPosition(attributeName, position)\n    return this.setSelectedRange(range)\n  }\n\n  selectionContainsAttachments() {\n    return this.getSelectedAttachments()?.length > 0\n  }\n\n  selectionIsInCursorTarget() {\n    return this.editingAttachment || this.positionIsCursorTarget(this.getPosition())\n  }\n\n  positionIsCursorTarget(position) {\n    const location = this.document.locationFromPosition(position)\n    if (location) {\n      return this.locationIsCursorTarget(location)\n    }\n  }\n\n  positionIsBlockBreak(position) {\n    return this.document.getPieceAtPosition(position)?.isBlockBreak()\n  }\n\n  getSelectedDocument() {\n    const selectedRange = this.getSelectedRange()\n    if (selectedRange) {\n      return this.document.getDocumentAtRange(selectedRange)\n    }\n  }\n\n  getSelectedAttachments() {\n    return this.getSelectedDocument()?.getAttachments()\n  }\n\n  // Attachments\n\n  getAttachments() {\n    return this.attachments.slice(0)\n  }\n\n  refreshAttachments() {\n    const attachments = this.document.getAttachments()\n    const { added, removed } = summarizeArrayChange(this.attachments, attachments)\n    this.attachments = attachments\n\n    Array.from(removed).forEach((attachment) => {\n      attachment.delegate = null\n      this.delegate?.compositionDidRemoveAttachment?.(attachment)\n    })\n\n    return (() => {\n      const result = []\n\n      Array.from(added).forEach((attachment) => {\n        attachment.delegate = this\n        result.push(this.delegate?.compositionDidAddAttachment?.(attachment))\n      })\n\n      return result\n    })()\n  }\n\n  // Attachment delegate\n\n  attachmentDidChangeAttributes(attachment) {\n    this.revision++\n    return this.delegate?.compositionDidEditAttachment?.(attachment)\n  }\n\n  attachmentDidChangePreviewURL(attachment) {\n    this.revision++\n    return this.delegate?.compositionDidChangeAttachmentPreviewURL?.(attachment)\n  }\n\n  // Attachment editing\n\n  editAttachment(attachment, options) {\n    if (attachment === this.editingAttachment) return\n    this.stopEditingAttachment()\n    this.editingAttachment = attachment\n    return this.delegate?.compositionDidStartEditingAttachment?.(this.editingAttachment, options)\n  }\n\n  stopEditingAttachment() {\n    if (!this.editingAttachment) return\n    this.delegate?.compositionDidStopEditingAttachment?.(this.editingAttachment)\n    this.editingAttachment = null\n  }\n\n  updateAttributesForAttachment(attributes, attachment) {\n    return this.setDocument(this.document.updateAttributesForAttachment(attributes, attachment))\n  }\n\n  removeAttributeForAttachment(attribute, attachment) {\n    return this.setDocument(this.document.removeAttributeForAttachment(attribute, attachment))\n  }\n\n  // Private\n\n  breakFormattedBlock(insertion) {\n    let { document } = insertion\n    const { block } = insertion\n    let position = insertion.startPosition\n    let range = [ position - 1, position ]\n\n    if (block.getBlockBreakPosition() === insertion.startLocation.offset) {\n      if (block.breaksOnReturn() && insertion.nextCharacter === \"\\n\") {\n        position += 1\n      } else {\n        document = document.removeTextAtRange(range)\n      }\n      range = [ position, position ]\n    } else if (insertion.nextCharacter === \"\\n\") {\n      if (insertion.previousCharacter === \"\\n\") {\n        range = [ position - 1, position + 1 ]\n      } else {\n        range = [ position, position + 1 ]\n        position += 1\n      }\n    } else if (insertion.startLocation.offset - 1 !== 0) {\n      position += 1\n    }\n\n    const newDocument = new Document([ block.removeLastAttribute().copyWithoutText() ])\n    this.setDocument(document.insertDocumentAtRange(newDocument, range))\n    return this.setSelection(position)\n  }\n\n  getPreviousBlock() {\n    const locationRange = this.getLocationRange()\n    if (locationRange) {\n      const { index } = locationRange[0]\n      if (index > 0) {\n        return this.document.getBlockAtIndex(index - 1)\n      }\n    }\n  }\n\n  getBlock() {\n    const locationRange = this.getLocationRange()\n    if (locationRange) {\n      return this.document.getBlockAtIndex(locationRange[0].index)\n    }\n  }\n\n  getAttachmentAtRange(range) {\n    const document = this.document.getDocumentAtRange(range)\n    if (document.toString() === `${OBJECT_REPLACEMENT_CHARACTER}\\n`) {\n      return document.getAttachments()[0]\n    }\n  }\n\n  notifyDelegateOfCurrentAttributesChange() {\n    return this.delegate?.compositionDidChangeCurrentAttributes?.(this.currentAttributes)\n  }\n\n  notifyDelegateOfInsertionAtRange(range) {\n    return this.delegate?.compositionDidPerformInsertionAtRange?.(range)\n  }\n\n  translateUTF16PositionFromOffset(position, offset) {\n    const utf16string = this.document.toUTF16String()\n    const utf16position = utf16string.offsetFromUCS2Offset(position)\n    return utf16string.offsetToUCS2Offset(utf16position + offset)\n  }\n}\n\nComposition.proxyMethod(\"getSelectionManager().getPointRange\")\nComposition.proxyMethod(\"getSelectionManager().setLocationRangeFromPointRange\")\nComposition.proxyMethod(\"getSelectionManager().createLocationRangeFromDOMRange\")\nComposition.proxyMethod(\"getSelectionManager().locationIsCursorTarget\")\nComposition.proxyMethod(\"getSelectionManager().selectionIsExpanded\")\nComposition.proxyMethod(\"delegate?.getSelectionManager\")\n", "import BasicObject from \"trix/core/basic_object\"\n\nexport default class UndoManager extends BasicObject {\n  constructor(composition) {\n    super(...arguments)\n    this.composition = composition\n    this.undoEntries = []\n    this.redoEntries = []\n  }\n\n  recordUndoEntry(description, { context, consolidatable } = {}) {\n    const previousEntry = this.undoEntries.slice(-1)[0]\n\n    if (!consolidatable || !entryHasDescriptionAndContext(previousEntry, description, context)) {\n      const undoEntry = this.createEntry({ description, context })\n      this.undoEntries.push(undoEntry)\n      this.redoEntries = []\n    }\n  }\n\n  undo() {\n    const undoEntry = this.undoEntries.pop()\n    if (undoEntry) {\n      const redoEntry = this.createEntry(undoEntry)\n      this.redoEntries.push(redoEntry)\n      return this.composition.loadSnapshot(undoEntry.snapshot)\n    }\n  }\n\n  redo() {\n    const redoEntry = this.redoEntries.pop()\n    if (redoEntry) {\n      const undoEntry = this.createEntry(redoEntry)\n      this.undoEntries.push(undoEntry)\n      return this.composition.loadSnapshot(redoEntry.snapshot)\n    }\n  }\n\n  canUndo() {\n    return this.undoEntries.length > 0\n  }\n\n  canRedo() {\n    return this.redoEntries.length > 0\n  }\n\n  // Private\n\n  createEntry({ description, context } = {}) {\n    return {\n      description: description?.toString(),\n      context: JSON.stringify(context),\n      snapshot: this.composition.getSnapshot(),\n    }\n  }\n}\n\nconst entryHasDescriptionAndContext = (entry, description, context) =>\n  entry?.description === description?.toString() && entry?.context === JSON.stringify(context)\n", "const BLOCK_ATTRIBUTE_NAME = \"attachmentGallery\"\nconst TEXT_ATTRIBUTE_NAME = \"presentation\"\nconst TEXT_ATTRIBUTE_VALUE = \"gallery\"\n\nexport default class Filter {\n  constructor(snapshot) {\n    this.document = snapshot.document\n    this.selectedRange = snapshot.selectedRange\n  }\n\n  perform() {\n    this.removeBlockAttribute()\n    return this.applyBlockAttribute()\n  }\n\n  getSnapshot() {\n    return { document: this.document, selectedRange: this.selectedRange }\n  }\n\n  // Private\n\n  removeBlockAttribute() {\n    return this.findRangesOfBlocks().map((range) => this.document = this.document.removeAttributeAtRange(BLOCK_ATTRIBUTE_NAME, range))\n  }\n\n  applyBlockAttribute() {\n    let offset = 0\n\n    this.findRangesOfPieces().forEach((range) => {\n      if (range[1] - range[0] > 1) {\n        range[0] += offset\n        range[1] += offset\n\n        if (this.document.getCharacterAtPosition(range[1]) !== \"\\n\") {\n          this.document = this.document.insertBlockBreakAtRange(range[1])\n          if (range[1] < this.selectedRange[1]) {\n            this.moveSelectedRangeForward()\n          }\n          range[1]++\n          offset++\n        }\n\n        if (range[0] !== 0) {\n          if (this.document.getCharacterAtPosition(range[0] - 1) !== \"\\n\") {\n            this.document = this.document.insertBlockBreakAtRange(range[0])\n            if (range[0] < this.selectedRange[0]) {\n              this.moveSelectedRangeForward()\n            }\n            range[0]++\n            offset++\n          }\n        }\n\n        this.document = this.document.applyBlockAttributeAtRange(BLOCK_ATTRIBUTE_NAME, true, range)\n      }\n    })\n  }\n\n  findRangesOfBlocks() {\n    return this.document.findRangesForBlockAttribute(BLOCK_ATTRIBUTE_NAME)\n  }\n\n  findRangesOfPieces() {\n    return this.document.findRangesForTextAttribute(TEXT_ATTRIBUTE_NAME, { withValue: TEXT_ATTRIBUTE_VALUE })\n  }\n\n  moveSelectedRangeForward() {\n    this.selectedRange[0] += 1\n    this.selectedRange[1] += 1\n  }\n}\n", "import Filter from \"./filter\"\n\nexport const attachmentGalleryFilter = function(snapshot) {\n  const filter = new Filter(snapshot)\n  filter.perform()\n  return filter.getSnapshot()\n}\n\n", "import Document from \"trix/models/document\"\nimport HTMLParser from \"trix/models/html_parser\"\n\nimport UndoManager from \"trix/models/undo_manager\"\nimport { attachmentGalleryFilter } from \"trix/filters/attachment_gallery_filter\"\nconst DEFAULT_FILTERS = [ attachmentGalleryFilter ]\n\nexport default class Editor {\n  constructor(composition, selectionManager, element) {\n    this.insertFiles = this.insertFiles.bind(this)\n    this.composition = composition\n    this.selectionManager = selectionManager\n    this.element = element\n    this.undoManager = new UndoManager(this.composition)\n    this.filters = DEFAULT_FILTERS.slice(0)\n  }\n\n  loadDocument(document) {\n    return this.loadSnapshot({ document, selectedRange: [ 0, 0 ] })\n  }\n\n  loadHTML(html = \"\") {\n    const document = HTMLParser.parse(html, { referenceElement: this.element }).getDocument()\n    return this.loadDocument(document)\n  }\n\n  loadJSON({ document, selectedRange }) {\n    document = Document.fromJSON(document)\n    return this.loadSnapshot({ document, selectedRange })\n  }\n\n  loadSnapshot(snapshot) {\n    this.undoManager = new UndoManager(this.composition)\n    return this.composition.loadSnapshot(snapshot)\n  }\n\n  getDocument() {\n    return this.composition.document\n  }\n\n  getSelectedDocument() {\n    return this.composition.getSelectedDocument()\n  }\n\n  getSnapshot() {\n    return this.composition.getSnapshot()\n  }\n\n  toJSON() {\n    return this.getSnapshot()\n  }\n\n  // Document manipulation\n\n  deleteInDirection(direction) {\n    return this.composition.deleteInDirection(direction)\n  }\n\n  insertAttachment(attachment) {\n    return this.composition.insertAttachment(attachment)\n  }\n\n  insertAttachments(attachments) {\n    return this.composition.insertAttachments(attachments)\n  }\n\n  insertDocument(document) {\n    return this.composition.insertDocument(document)\n  }\n\n  insertFile(file) {\n    return this.composition.insertFile(file)\n  }\n\n  insertFiles(files) {\n    return this.composition.insertFiles(files)\n  }\n\n  insertHTML(html) {\n    return this.composition.insertHTML(html)\n  }\n\n  insertString(string) {\n    return this.composition.insertString(string)\n  }\n\n  insertText(text) {\n    return this.composition.insertText(text)\n  }\n\n  insertLineBreak() {\n    return this.composition.insertLineBreak()\n  }\n\n  // Selection\n\n  getSelectedRange() {\n    return this.composition.getSelectedRange()\n  }\n\n  getPosition() {\n    return this.composition.getPosition()\n  }\n\n  getClientRectAtPosition(position) {\n    const locationRange = this.getDocument().locationRangeFromRange([ position, position + 1 ])\n    return this.selectionManager.getClientRectAtLocationRange(locationRange)\n  }\n\n  expandSelectionInDirection(direction) {\n    return this.composition.expandSelectionInDirection(direction)\n  }\n\n  moveCursorInDirection(direction) {\n    return this.composition.moveCursorInDirection(direction)\n  }\n\n  setSelectedRange(selectedRange) {\n    return this.composition.setSelectedRange(selectedRange)\n  }\n\n  // Attributes\n\n  activateAttribute(name, value = true) {\n    return this.composition.setCurrentAttribute(name, value)\n  }\n\n  attributeIsActive(name) {\n    return this.composition.hasCurrentAttribute(name)\n  }\n\n  canActivateAttribute(name) {\n    return this.composition.canSetCurrentAttribute(name)\n  }\n\n  deactivateAttribute(name) {\n    return this.composition.removeCurrentAttribute(name)\n  }\n\n  // HTML attributes\n  setHTMLAtributeAtPosition(position, name, value) {\n    this.composition.setHTMLAtributeAtPosition(position, name, value)\n  }\n\n  // Nesting level\n\n  canDecreaseNestingLevel() {\n    return this.composition.canDecreaseNestingLevel()\n  }\n\n  canIncreaseNestingLevel() {\n    return this.composition.canIncreaseNestingLevel()\n  }\n\n  decreaseNestingLevel() {\n    if (this.canDecreaseNestingLevel()) {\n      return this.composition.decreaseNestingLevel()\n    }\n  }\n\n  increaseNestingLevel() {\n    if (this.canIncreaseNestingLevel()) {\n      return this.composition.increaseNestingLevel()\n    }\n  }\n\n  // Undo/redo\n\n  canRedo() {\n    return this.undoManager.canRedo()\n  }\n\n  canUndo() {\n    return this.undoManager.canUndo()\n  }\n\n  recordUndoEntry(description, { context, consolidatable } = {}) {\n    return this.undoManager.recordUndoEntry(description, { context, consolidatable })\n  }\n\n  redo() {\n    if (this.canRedo()) {\n      return this.undoManager.redo()\n    }\n  }\n\n  undo() {\n    if (this.canUndo()) {\n      return this.undoManager.undo()\n    }\n  }\n}\n", "/* eslint-disable\n    no-var,\n    prefer-const,\n*/\nimport {\n  elementContainsNode,\n  findChildIndexOfNode,\n  nodeIsAttachmentElement,\n  nodeIsBlockContainer,\n  nodeIsBlockStart,\n  nodeIsBlockStartComment,\n  nodeIsCursorTarget,\n  nodeIsEmptyTextNode,\n  nodeIsTextNode,\n  tagName,\n  walkTree,\n} from \"trix/core/helpers\"\n\nexport default class LocationMapper {\n  constructor(element) {\n    this.element = element\n  }\n\n  findLocationFromContainerAndOffset(container, offset, { strict } = { strict: true }) {\n    let childIndex = 0\n    let foundBlock = false\n    const location = { index: 0, offset: 0 }\n    const attachmentElement = this.findAttachmentElementParentForNode(container)\n\n    if (attachmentElement) {\n      container = attachmentElement.parentNode\n      offset = findChildIndexOfNode(attachmentElement)\n    }\n\n    const walker = walkTree(this.element, { usingFilter: rejectAttachmentContents })\n\n    while (walker.nextNode()) {\n      const node = walker.currentNode\n\n      if (node === container && nodeIsTextNode(container)) {\n        if (!nodeIsCursorTarget(node)) {\n          location.offset += offset\n        }\n        break\n      } else {\n        if (node.parentNode === container) {\n          if (childIndex++ === offset) {\n            break\n          }\n        } else if (!elementContainsNode(container, node)) {\n          if (childIndex > 0) {\n            break\n          }\n        }\n\n        if (nodeIsBlockStart(node, { strict })) {\n          if (foundBlock) {\n            location.index++\n          }\n          location.offset = 0\n          foundBlock = true\n        } else {\n          location.offset += nodeLength(node)\n        }\n      }\n    }\n\n    return location\n  }\n\n  findContainerAndOffsetFromLocation(location) {\n    let container, offset\n    if (location.index === 0 && location.offset === 0) {\n      container = this.element\n      offset = 0\n\n      while (container.firstChild) {\n        container = container.firstChild\n        if (nodeIsBlockContainer(container)) {\n          offset = 1\n          break\n        }\n      }\n\n      return [ container, offset ]\n    }\n\n    let [ node, nodeOffset ] = this.findNodeAndOffsetFromLocation(location)\n    if (!node) return\n\n    if (nodeIsTextNode(node)) {\n      if (nodeLength(node) === 0) {\n        container = node.parentNode.parentNode\n        offset = findChildIndexOfNode(node.parentNode)\n        if (nodeIsCursorTarget(node, { name: \"right\" })) {\n          offset++\n        }\n      } else {\n        container = node\n        offset = location.offset - nodeOffset\n      }\n    } else {\n      container = node.parentNode\n\n      if (!nodeIsBlockStart(node.previousSibling)) {\n        if (!nodeIsBlockContainer(container)) {\n          while (node === container.lastChild) {\n            node = container\n            container = container.parentNode\n            if (nodeIsBlockContainer(container)) {\n              break\n            }\n          }\n        }\n      }\n\n      offset = findChildIndexOfNode(node)\n      if (location.offset !== 0) {\n        offset++\n      }\n    }\n\n    return [ container, offset ]\n  }\n\n  findNodeAndOffsetFromLocation(location) {\n    let node, nodeOffset\n    let offset = 0\n\n    for (const currentNode of this.getSignificantNodesForIndex(location.index)) {\n      const length = nodeLength(currentNode)\n\n      if (location.offset <= offset + length) {\n        if (nodeIsTextNode(currentNode)) {\n          node = currentNode\n          nodeOffset = offset\n          if (location.offset === nodeOffset && nodeIsCursorTarget(node)) {\n            break\n          }\n        } else if (!node) {\n          node = currentNode\n          nodeOffset = offset\n        }\n      }\n\n      offset += length\n      if (offset > location.offset) {\n        break\n      }\n    }\n\n    return [ node, nodeOffset ]\n  }\n\n  // Private\n\n  findAttachmentElementParentForNode(node) {\n    while (node && node !== this.element) {\n      if (nodeIsAttachmentElement(node)) {\n        return node\n      }\n      node = node.parentNode\n    }\n  }\n\n  getSignificantNodesForIndex(index) {\n    const nodes = []\n    const walker = walkTree(this.element, { usingFilter: acceptSignificantNodes })\n    let recordingNodes = false\n\n    while (walker.nextNode()) {\n      const node = walker.currentNode\n      if (nodeIsBlockStartComment(node)) {\n        var blockIndex\n        if (blockIndex != null) {\n          blockIndex++\n        } else {\n          blockIndex = 0\n        }\n\n        if (blockIndex === index) {\n          recordingNodes = true\n        } else if (recordingNodes) {\n          break\n        }\n      } else if (recordingNodes) {\n        nodes.push(node)\n      }\n    }\n\n    return nodes\n  }\n}\n\nconst nodeLength = function(node) {\n  if (node.nodeType === Node.TEXT_NODE) {\n    if (nodeIsCursorTarget(node)) {\n      return 0\n    } else {\n      const string = node.textContent\n      return string.length\n    }\n  } else if (tagName(node) === \"br\" || nodeIsAttachmentElement(node)) {\n    return 1\n  } else {\n    return 0\n  }\n}\n\nconst acceptSignificantNodes = function(node) {\n  if (rejectEmptyTextNodes(node) === NodeFilter.FILTER_ACCEPT) {\n    return rejectAttachmentContents(node)\n  } else {\n    return NodeFilter.FILTER_REJECT\n  }\n}\n\nconst rejectEmptyTextNodes = function(node) {\n  if (nodeIsEmptyTextNode(node)) {\n    return NodeFilter.FILTER_REJECT\n  } else {\n    return NodeFilter.FILTER_ACCEPT\n  }\n}\n\nconst rejectAttachmentContents = function(node) {\n  if (nodeIsAttachmentElement(node.parentNode)) {\n    return NodeFilter.FILTER_REJECT\n  } else {\n    return NodeFilter.FILTER_ACCEPT\n  }\n}\n", "/* eslint-disable\n    id-length,\n    no-empty,\n*/\nimport { getDOMRange, setDOMRange } from \"trix/core/helpers\"\n\nexport default class PointMapper {\n  createDOMRangeFromPoint({ x, y }) {\n    let domRange\n    if (document.caretPositionFromPoint) {\n      const { offsetNode, offset } = document.caretPositionFromPoint(x, y)\n      domRange = document.createRange()\n      domRange.setStart(offsetNode, offset)\n      return domRange\n    } else if (document.caretRangeFromPoint) {\n      return document.caretRangeFromPoint(x, y)\n    } else if (document.body.createTextRange) {\n      const originalDOMRange = getDOMRange()\n      try {\n        // IE 11 throws \"Unspecified error\" when using moveToPoint\n        // during a drag-and-drop operation.\n        const textRange = document.body.createTextRange()\n        textRange.moveToPoint(x, y)\n        textRange.select()\n      } catch (error) {}\n      domRange = getDOMRange()\n      setDOMRange(originalDOMRange)\n      return domRange\n    }\n  }\n\n  getClientRectsForDOMRange(domRange) {\n    const array = Array.from(domRange.getClientRects())\n    const start = array[0]\n    const end = array[array.length - 1]\n\n    return [ start, end ]\n  }\n}\n", "/* eslint-disable\n*/\nimport BasicObject from \"trix/core/basic_object\"\n\nimport LocationMapper from \"trix/models/location_mapper\"\nimport PointMapper from \"trix/models/point_mapper\"\n\nimport {\n  elementContainsNode,\n  getDOMRange,\n  getDOMSelection,\n  handleEvent,\n  innerElementIsActive,\n  nodeIsCursorTarget,\n  normalizeRange,\n  rangeIsCollapsed,\n  rangesAreEqual,\n  setDOMRange,\n} from \"trix/core/helpers\"\n\nexport default class SelectionManager extends BasicObject {\n  constructor(element) {\n    super(...arguments)\n    this.didMouseDown = this.didMouseDown.bind(this)\n    this.selectionDidChange = this.selectionDidChange.bind(this)\n    this.element = element\n    this.locationMapper = new LocationMapper(this.element)\n    this.pointMapper = new PointMapper()\n    this.lockCount = 0\n    handleEvent(\"mousedown\", { onElement: this.element, withCallback: this.didMouseDown })\n  }\n\n  getLocationRange(options = {}) {\n    if (options.strict === false) {\n      return this.createLocationRangeFromDOMRange(getDOMRange())\n    } else if (options.ignoreLock) {\n      return this.currentLocationRange\n    } else if (this.lockedLocationRange) {\n      return this.lockedLocationRange\n    } else {\n      return this.currentLocationRange\n    }\n  }\n\n  setLocationRange(locationRange) {\n    if (this.lockedLocationRange) return\n    locationRange = normalizeRange(locationRange)\n\n    const domRange = this.createDOMRangeFromLocationRange(locationRange)\n    if (domRange) {\n      setDOMRange(domRange)\n      this.updateCurrentLocationRange(locationRange)\n    }\n  }\n\n  setLocationRangeFromPointRange(pointRange) {\n    pointRange = normalizeRange(pointRange)\n    const startLocation = this.getLocationAtPoint(pointRange[0])\n    const endLocation = this.getLocationAtPoint(pointRange[1])\n    this.setLocationRange([ startLocation, endLocation ])\n  }\n\n  getClientRectAtLocationRange(locationRange) {\n    const domRange = this.createDOMRangeFromLocationRange(locationRange)\n    if (domRange) {\n      return this.getClientRectsForDOMRange(domRange)[1]\n    }\n  }\n\n  locationIsCursorTarget(location) {\n    const node = Array.from(this.findNodeAndOffsetFromLocation(location))[0]\n    return nodeIsCursorTarget(node)\n  }\n\n  lock() {\n    if (this.lockCount++ === 0) {\n      this.updateCurrentLocationRange()\n      this.lockedLocationRange = this.getLocationRange()\n    }\n  }\n\n  unlock() {\n    if (--this.lockCount === 0) {\n      const { lockedLocationRange } = this\n      this.lockedLocationRange = null\n      if (lockedLocationRange != null) {\n        return this.setLocationRange(lockedLocationRange)\n      }\n    }\n  }\n\n  clearSelection() {\n    return getDOMSelection()?.removeAllRanges()\n  }\n\n  selectionIsCollapsed() {\n    return getDOMRange()?.collapsed === true\n  }\n\n  selectionIsExpanded() {\n    return !this.selectionIsCollapsed()\n  }\n\n  createLocationRangeFromDOMRange(domRange, options) {\n    if (domRange == null || !this.domRangeWithinElement(domRange)) return\n\n    const start = this.findLocationFromContainerAndOffset(domRange.startContainer, domRange.startOffset, options)\n    if (!start) return\n\n    const end = domRange.collapsed\n      ? undefined\n      : this.findLocationFromContainerAndOffset(domRange.endContainer, domRange.endOffset, options)\n\n    return normalizeRange([ start, end ])\n  }\n\n  didMouseDown() {\n    return this.pauseTemporarily()\n  }\n\n  pauseTemporarily() {\n    let resumeHandlers\n    this.paused = true\n\n    const resume = () => {\n      this.paused = false\n      clearTimeout(resumeTimeout)\n\n      Array.from(resumeHandlers).forEach((handler) => {\n        handler.destroy()\n      })\n\n      if (elementContainsNode(document, this.element)) {\n        return this.selectionDidChange()\n      }\n    }\n\n    const resumeTimeout = setTimeout(resume, 200)\n\n    resumeHandlers = [ \"mousemove\", \"keydown\" ].map((eventName) =>\n      handleEvent(eventName, { onElement: document, withCallback: resume })\n    )\n  }\n\n  selectionDidChange() {\n    if (!this.paused && !innerElementIsActive(this.element)) {\n      return this.updateCurrentLocationRange()\n    }\n  }\n\n  updateCurrentLocationRange(locationRange) {\n    if (locationRange != null ? locationRange : locationRange = this.createLocationRangeFromDOMRange(getDOMRange())) {\n      if (!rangesAreEqual(locationRange, this.currentLocationRange)) {\n        this.currentLocationRange = locationRange\n        return this.delegate?.locationRangeDidChange?.(this.currentLocationRange.slice(0))\n      }\n    }\n  }\n\n  createDOMRangeFromLocationRange(locationRange) {\n    const rangeStart = this.findContainerAndOffsetFromLocation(locationRange[0])\n    const rangeEnd = rangeIsCollapsed(locationRange)\n      ? rangeStart\n      : this.findContainerAndOffsetFromLocation(locationRange[1]) || rangeStart\n\n    if (rangeStart != null && rangeEnd != null) {\n      const domRange = document.createRange()\n      domRange.setStart(...Array.from(rangeStart || []))\n      domRange.setEnd(...Array.from(rangeEnd || []))\n      return domRange\n    }\n  }\n\n  getLocationAtPoint(point) {\n    const domRange = this.createDOMRangeFromPoint(point)\n    if (domRange) {\n      return this.createLocationRangeFromDOMRange(domRange)?.[0]\n    }\n  }\n\n  domRangeWithinElement(domRange) {\n    if (domRange.collapsed) {\n      return elementContainsNode(this.element, domRange.startContainer)\n    } else {\n      return (\n        elementContainsNode(this.element, domRange.startContainer) &&\n        elementContainsNode(this.element, domRange.endContainer)\n      )\n    }\n  }\n}\n\nSelectionManager.proxyMethod(\"locationMapper.findLocationFromContainerAndOffset\")\nSelectionManager.proxyMethod(\"locationMapper.findContainerAndOffsetFromLocation\")\nSelectionManager.proxyMethod(\"locationMapper.findNodeAndOffsetFromLocation\")\nSelectionManager.proxyMethod(\"pointMapper.createDOMRangeFromPoint\")\nSelectionManager.proxyMethod(\"pointMapper.getClientRectsForDOMRange\")\n\n", "import { removeNode } from \"trix/core/helpers\"\n\nimport * as config from \"trix/config\"\nimport BasicObject from \"trix/core/basic_object\"\n\nimport { defer, handleEvent, makeElement, tagName, triggerEvent } from \"trix/core/helpers\"\nconst { lang, css, keyNames } = config\n\nconst undoable = function(fn) {\n  return function() {\n    const commands = fn.apply(this, arguments)\n    commands.do()\n    if (!this.undos) {\n      this.undos = []\n    }\n    this.undos.push(commands.undo)\n  }\n}\n\nexport default class AttachmentEditorController extends BasicObject {\n  constructor(attachmentPiece, element, container, options = {}) {\n    super(...arguments)\n    this.didClickToolbar = this.didClickToolbar.bind(this)\n    this.didClickActionButton = this.didClickActionButton.bind(this)\n    this.didKeyDownCaption = this.didKeyDownCaption.bind(this)\n    this.didInputCaption = this.didInputCaption.bind(this)\n    this.didChangeCaption = this.didChangeCaption.bind(this)\n    this.didBlurCaption = this.didBlurCaption.bind(this)\n    this.attachmentPiece = attachmentPiece\n    this.element = element\n    this.container = container\n    this.options = options\n    this.attachment = this.attachmentPiece.attachment\n    if (tagName(this.element) === \"a\") {\n      this.element = this.element.firstChild\n    }\n    this.install()\n  }\n\n  install() {\n    this.makeElementMutable()\n    this.addToolbar()\n    if (this.attachment.isPreviewable()) {\n      this.installCaptionEditor()\n    }\n  }\n\n  uninstall() {\n    let undo = this.undos.pop()\n    this.savePendingCaption()\n    while (undo) {\n      undo()\n      undo = this.undos.pop()\n    }\n    this.delegate?.didUninstallAttachmentEditor(this)\n  }\n\n  // Private\n\n  savePendingCaption() {\n    if (this.pendingCaption != null) {\n      const caption = this.pendingCaption\n      this.pendingCaption = null\n      if (caption) {\n        this.delegate?.attachmentEditorDidRequestUpdatingAttributesForAttachment?.({ caption }, this.attachment)\n      } else {\n        this.delegate?.attachmentEditorDidRequestRemovingAttributeForAttachment?.(\"caption\", this.attachment)\n      }\n    }\n  }\n\n  // Installing and uninstalling\n\n  makeElementMutable = undoable(() => {\n    return {\n      do: () => {\n        this.element.dataset.trixMutable = true\n      },\n      undo: () => delete this.element.dataset.trixMutable,\n    }\n  })\n\n  addToolbar = undoable(() => {\n    // <div class=\"#{css.attachmentMetadataContainer}\" data-trix-mutable=\"true\">\n    //   <div class=\"trix-button-row\">\n    //     <span class=\"trix-button-group trix-button-group--actions\">\n    //       <button type=\"button\" class=\"trix-button trix-button--remove\" title=\"#{lang.remove}\" data-trix-action=\"remove\">#{lang.remove}</button>\n    //     </span>\n    //   </div>\n    // </div>\n    const element = makeElement({\n      tagName: \"div\",\n      className: css.attachmentToolbar,\n      data: { trixMutable: true },\n      childNodes: makeElement({\n        tagName: \"div\",\n        className: \"trix-button-row\",\n        childNodes: makeElement({\n          tagName: \"span\",\n          className: \"trix-button-group trix-button-group--actions\",\n          childNodes: makeElement({\n            tagName: \"button\",\n            className: \"trix-button trix-button--remove\",\n            textContent: lang.remove,\n            attributes: { title: lang.remove },\n            data: { trixAction: \"remove\" },\n          }),\n        }),\n      }),\n    })\n\n    if (this.attachment.isPreviewable()) {\n      // <div class=\"#{css.attachmentMetadataContainer}\">\n      //   <span class=\"#{css.attachmentMetadata}\">\n      //     <span class=\"#{css.attachmentName}\" title=\"#{name}\">#{name}</span>\n      //     <span class=\"#{css.attachmentSize}\">#{size}</span>\n      //   </span>\n      // </div>\n      element.appendChild(\n        makeElement({\n          tagName: \"div\",\n          className: css.attachmentMetadataContainer,\n          childNodes: makeElement({\n            tagName: \"span\",\n            className: css.attachmentMetadata,\n            childNodes: [\n              makeElement({\n                tagName: \"span\",\n                className: css.attachmentName,\n                textContent: this.attachment.getFilename(),\n                attributes: { title: this.attachment.getFilename() },\n              }),\n              makeElement({\n                tagName: \"span\",\n                className: css.attachmentSize,\n                textContent: this.attachment.getFormattedFilesize(),\n              }),\n            ],\n          }),\n        })\n      )\n    }\n\n    handleEvent(\"click\", { onElement: element, withCallback: this.didClickToolbar })\n    handleEvent(\"click\", {\n      onElement: element,\n      matchingSelector: \"[data-trix-action]\",\n      withCallback: this.didClickActionButton,\n    })\n\n    triggerEvent(\"trix-attachment-before-toolbar\", { onElement: this.element, attributes: { toolbar: element, attachment: this.attachment } })\n\n    return {\n      do: () => this.element.appendChild(element),\n      undo: () => removeNode(element),\n    }\n  })\n\n  installCaptionEditor = undoable(() => {\n    const textarea = makeElement({\n      tagName: \"textarea\",\n      className: css.attachmentCaptionEditor,\n      attributes: { placeholder: lang.captionPlaceholder },\n      data: { trixMutable: true },\n    })\n    textarea.value = this.attachmentPiece.getCaption()\n\n    const textareaClone = textarea.cloneNode()\n    textareaClone.classList.add(\"trix-autoresize-clone\")\n    textareaClone.tabIndex = -1\n\n    const autoresize = function() {\n      textareaClone.value = textarea.value\n      textarea.style.height = textareaClone.scrollHeight + \"px\"\n    }\n\n    handleEvent(\"input\", { onElement: textarea, withCallback: autoresize })\n    handleEvent(\"input\", { onElement: textarea, withCallback: this.didInputCaption })\n    handleEvent(\"keydown\", { onElement: textarea, withCallback: this.didKeyDownCaption })\n    handleEvent(\"change\", { onElement: textarea, withCallback: this.didChangeCaption })\n    handleEvent(\"blur\", { onElement: textarea, withCallback: this.didBlurCaption })\n\n    const figcaption = this.element.querySelector(\"figcaption\")\n    const editingFigcaption = figcaption.cloneNode()\n\n    return {\n      do: () => {\n        figcaption.style.display = \"none\"\n        editingFigcaption.appendChild(textarea)\n        editingFigcaption.appendChild(textareaClone)\n        editingFigcaption.classList.add(`${css.attachmentCaption}--editing`)\n        figcaption.parentElement.insertBefore(editingFigcaption, figcaption)\n        autoresize()\n        if (this.options.editCaption) {\n          return defer(() => textarea.focus())\n        }\n      },\n      undo() {\n        removeNode(editingFigcaption)\n        figcaption.style.display = null\n      },\n    }\n  })\n\n  // Event handlers\n\n  didClickToolbar(event) {\n    event.preventDefault()\n    return event.stopPropagation()\n  }\n\n  didClickActionButton(event) {\n    const action = event.target.getAttribute(\"data-trix-action\")\n    switch (action) {\n      case \"remove\":\n        return this.delegate?.attachmentEditorDidRequestRemovalOfAttachment(this.attachment)\n    }\n  }\n\n  didKeyDownCaption(event) {\n    if (keyNames[event.keyCode] === \"return\") {\n      event.preventDefault()\n      this.savePendingCaption()\n      return this.delegate?.attachmentEditorDidRequestDeselectingAttachment?.(this.attachment)\n    }\n  }\n\n  didInputCaption(event) {\n    this.pendingCaption = event.target.value.replace(/\\s/g, \" \").trim()\n  }\n\n  didChangeCaption(event) {\n    return this.savePendingCaption()\n  }\n\n  didBlurCaption(event) {\n    return this.savePendingCaption()\n  }\n}\n", "import BasicObject from \"trix/core/basic_object\"\nimport DocumentView from \"trix/views/document_view\"\nimport AttachmentEditorController from \"trix/controllers/attachment_editor_controller\"\n\nimport { defer, findClosestElementFromNode, handleEvent, innerElementIsActive } from \"trix/core/helpers\"\nimport { attachmentSelector } from \"trix/config/attachments\"\n\nexport default class CompositionController extends BasicObject {\n  constructor(element, composition) {\n    super(...arguments)\n    this.didFocus = this.didFocus.bind(this)\n    this.didBlur = this.didBlur.bind(this)\n    this.didClickAttachment = this.didClickAttachment.bind(this)\n\n    this.element = element\n    this.composition = composition\n    this.documentView = new DocumentView(this.composition.document, { element: this.element })\n\n    handleEvent(\"focus\", { onElement: this.element, withCallback: this.didFocus })\n    handleEvent(\"blur\", { onElement: this.element, withCallback: this.didBlur })\n    handleEvent(\"click\", {\n      onElement: this.element,\n      matchingSelector: \"a[contenteditable=false]\",\n      preventDefault: true,\n    })\n    handleEvent(\"mousedown\", {\n      onElement: this.element,\n      matchingSelector: attachmentSelector,\n      withCallback: this.didClickAttachment,\n    })\n    handleEvent(\"click\", { onElement: this.element, matchingSelector: `a${attachmentSelector}`, preventDefault: true })\n  }\n\n  didFocus(event) {\n    const perform = () => {\n      if (!this.focused) {\n        this.focused = true\n        return this.delegate?.compositionControllerDidFocus?.()\n      }\n    }\n\n    return this.blurPromise?.then(perform) || perform()\n  }\n\n  didBlur(event) {\n    this.blurPromise = new Promise((resolve) => {\n      return defer(() => {\n        if (!innerElementIsActive(this.element)) {\n          this.focused = null\n          this.delegate?.compositionControllerDidBlur?.()\n        }\n        this.blurPromise = null\n        return resolve()\n      })\n    })\n  }\n\n  didClickAttachment(event, target) {\n    const attachment = this.findAttachmentForElement(target)\n    const editCaption = !!findClosestElementFromNode(event.target, { matchingSelector: \"figcaption\" })\n    return this.delegate?.compositionControllerDidSelectAttachment?.(attachment, { editCaption })\n  }\n\n  getSerializableElement() {\n    if (this.isEditingAttachment()) {\n      return this.documentView.shadowElement\n    } else {\n      return this.element\n    }\n  }\n\n  render() {\n    if (this.revision !== this.composition.revision) {\n      this.documentView.setDocument(this.composition.document)\n      this.documentView.render()\n      this.revision = this.composition.revision\n    }\n\n    if (this.canSyncDocumentView() && !this.documentView.isSynced()) {\n      this.delegate?.compositionControllerWillSyncDocumentView?.()\n      this.documentView.sync()\n      this.delegate?.compositionControllerDidSyncDocumentView?.()\n    }\n\n    return this.delegate?.compositionControllerDidRender?.()\n  }\n\n  rerenderViewForObject(object) {\n    this.invalidateViewForObject(object)\n    return this.render()\n  }\n\n  invalidateViewForObject(object) {\n    return this.documentView.invalidateViewForObject(object)\n  }\n\n  isViewCachingEnabled() {\n    return this.documentView.isViewCachingEnabled()\n  }\n\n  enableViewCaching() {\n    return this.documentView.enableViewCaching()\n  }\n\n  disableViewCaching() {\n    return this.documentView.disableViewCaching()\n  }\n\n  refreshViewCache() {\n    return this.documentView.garbageCollectCachedViews()\n  }\n\n  // Attachment editor management\n\n  isEditingAttachment() {\n    return !!this.attachmentEditor\n  }\n\n  installAttachmentEditorForAttachment(attachment, options) {\n    if (this.attachmentEditor?.attachment === attachment) return\n    const element = this.documentView.findElementForObject(attachment)\n    if (!element) return\n\n    this.uninstallAttachmentEditor()\n    const attachmentPiece = this.composition.document.getAttachmentPieceForAttachment(attachment)\n    this.attachmentEditor = new AttachmentEditorController(attachmentPiece, element, this.element, options)\n    this.attachmentEditor.delegate = this\n  }\n\n  uninstallAttachmentEditor() {\n    return this.attachmentEditor?.uninstall()\n  }\n\n  // Attachment controller delegate\n\n  didUninstallAttachmentEditor() {\n    this.attachmentEditor = null\n    return this.render()\n  }\n\n  attachmentEditorDidRequestUpdatingAttributesForAttachment(attributes, attachment) {\n    this.delegate?.compositionControllerWillUpdateAttachment?.(attachment)\n    return this.composition.updateAttributesForAttachment(attributes, attachment)\n  }\n\n  attachmentEditorDidRequestRemovingAttributeForAttachment(attribute, attachment) {\n    this.delegate?.compositionControllerWillUpdateAttachment?.(attachment)\n    return this.composition.removeAttributeForAttachment(attribute, attachment)\n  }\n\n  attachmentEditorDidRequestRemovalOfAttachment(attachment) {\n    return this.delegate?.compositionControllerDidRequestRemovalOfAttachment?.(attachment)\n  }\n\n  attachmentEditorDidRequestDeselectingAttachment(attachment) {\n    return this.delegate?.compositionControllerDidRequestDeselectingAttachment?.(attachment)\n  }\n\n  // Private\n\n  canSyncDocumentView() {\n    return !this.isEditingAttachment()\n  }\n\n  findAttachmentForElement(element) {\n    return this.composition.document.getAttachmentById(parseInt(element.dataset.trixId, 10))\n  }\n}\n", "import \"trix/views/object_view\"\nimport BasicObject from \"trix/core/basic_object\"\n\nexport default class Controller extends BasicObject {}\n", "import BasicObject from \"trix/core/basic_object\"\n\nimport {\n  findClosestElementFromNode,\n  nodeIsBlockStartComment,\n  nodeIsEmptyTextNode,\n  normalizeSpaces,\n  summarizeStringChange,\n  tagName,\n} from \"trix/core/helpers\"\n\nconst mutableAttributeName = \"data-trix-mutable\"\nconst mutableSelector = `[${mutableAttributeName}]`\n\nconst options = {\n  attributes: true,\n  childList: true,\n  characterData: true,\n  characterDataOldValue: true,\n  subtree: true,\n}\n\nexport default class MutationObserver extends BasicObject {\n  constructor(element) {\n    super(element)\n    this.didMutate = this.didMutate.bind(this)\n    this.element = element\n    this.observer = new window.MutationObserver(this.didMutate)\n    this.start()\n  }\n\n  start() {\n    this.reset()\n    return this.observer.observe(this.element, options)\n  }\n\n  stop() {\n    return this.observer.disconnect()\n  }\n\n  didMutate(mutations) {\n    this.mutations.push(...Array.from(this.findSignificantMutations(mutations) || []))\n\n    if (this.mutations.length) {\n      this.delegate?.elementDidMutate?.(this.getMutationSummary())\n      return this.reset()\n    }\n  }\n\n  // Private\n\n  reset() {\n    this.mutations = []\n  }\n\n  findSignificantMutations(mutations) {\n    return mutations.filter((mutation) => {\n      return this.mutationIsSignificant(mutation)\n    })\n  }\n\n  mutationIsSignificant(mutation) {\n    if (this.nodeIsMutable(mutation.target)) {\n      return false\n    }\n    for (const node of Array.from(this.nodesModifiedByMutation(mutation))) {\n      if (this.nodeIsSignificant(node)) return true\n    }\n    return false\n  }\n\n  nodeIsSignificant(node) {\n    return node !== this.element && !this.nodeIsMutable(node) && !nodeIsEmptyTextNode(node)\n  }\n\n  nodeIsMutable(node) {\n    return findClosestElementFromNode(node, { matchingSelector: mutableSelector })\n  }\n\n  nodesModifiedByMutation(mutation) {\n    const nodes = []\n    switch (mutation.type) {\n      case \"attributes\":\n        if (mutation.attributeName !== mutableAttributeName) {\n          nodes.push(mutation.target)\n        }\n        break\n      case \"characterData\":\n        // Changes to text nodes should consider the parent element\n        nodes.push(mutation.target.parentNode)\n        nodes.push(mutation.target)\n        break\n      case \"childList\":\n        // Consider each added or removed node\n        nodes.push(...Array.from(mutation.addedNodes || []))\n        nodes.push(...Array.from(mutation.removedNodes || []))\n        break\n    }\n    return nodes\n  }\n\n  getMutationSummary() {\n    return this.getTextMutationSummary()\n  }\n\n  getTextMutationSummary() {\n    const { additions, deletions } = this.getTextChangesFromCharacterData()\n    const textChanges = this.getTextChangesFromChildList()\n\n    Array.from(textChanges.additions).forEach((addition) => {\n      if (!Array.from(additions).includes(addition)) {\n        additions.push(addition)\n      }\n    })\n\n    deletions.push(...Array.from(textChanges.deletions || []))\n\n    const summary = {}\n\n    const added = additions.join(\"\")\n    if (added) {\n      summary.textAdded = added\n    }\n\n    const deleted = deletions.join(\"\")\n    if (deleted) {\n      summary.textDeleted = deleted\n    }\n\n    return summary\n  }\n\n  getMutationsByType(type) {\n    return Array.from(this.mutations).filter((mutation) => mutation.type === type)\n  }\n\n  getTextChangesFromChildList() {\n    let textAdded, textRemoved\n    const addedNodes = []\n    const removedNodes = []\n\n    Array.from(this.getMutationsByType(\"childList\")).forEach((mutation) => {\n      addedNodes.push(...Array.from(mutation.addedNodes || []))\n      removedNodes.push(...Array.from(mutation.removedNodes || []))\n    })\n\n    const singleBlockCommentRemoved =\n      addedNodes.length === 0 && removedNodes.length === 1 && nodeIsBlockStartComment(removedNodes[0])\n\n    if (singleBlockCommentRemoved) {\n      textAdded = []\n      textRemoved = [ \"\\n\" ]\n    } else {\n      textAdded = getTextForNodes(addedNodes)\n      textRemoved = getTextForNodes(removedNodes)\n    }\n\n    const additions = textAdded.filter((text, index) => text !== textRemoved[index]).map(normalizeSpaces)\n    const deletions = textRemoved.filter((text, index) => text !== textAdded[index]).map(normalizeSpaces)\n\n    return { additions, deletions }\n  }\n\n  getTextChangesFromCharacterData() {\n    let added, removed\n    const characterMutations = this.getMutationsByType(\"characterData\")\n\n    if (characterMutations.length) {\n      const startMutation = characterMutations[0],\n        endMutation = characterMutations[characterMutations.length - 1]\n\n      const oldString = normalizeSpaces(startMutation.oldValue)\n      const newString = normalizeSpaces(endMutation.target.data)\n      const summarized = summarizeStringChange(oldString, newString)\n      added = summarized.added\n      removed = summarized.removed\n    }\n\n    return {\n      additions: added ? [ added ] : [],\n      deletions: removed ? [ removed ] : [],\n    }\n  }\n}\n\nconst getTextForNodes = function(nodes = []) {\n  const text = []\n  for (const node of Array.from(nodes)) {\n    switch (node.nodeType) {\n      case Node.TEXT_NODE:\n        text.push(node.data)\n        break\n      case Node.ELEMENT_NODE:\n        if (tagName(node) === \"br\") {\n          text.push(\"\\n\")\n        } else {\n          text.push(...Array.from(getTextForNodes(node.childNodes) || []))\n        }\n        break\n    }\n  }\n  return text\n}\n", "/* eslint-disable\n    no-empty,\n*/\nimport Operation from \"trix/core/utilities/operation\"\n\nexport default class FileVerificationOperation extends Operation {\n  constructor(file) {\n    super(...arguments)\n    this.file = file\n  }\n\n  perform(callback) {\n    const reader = new FileReader()\n\n    reader.onerror = () => callback(false)\n\n    reader.onload = () => {\n      reader.onerror = null\n      try {\n        reader.abort()\n      } catch (error) {}\n      return callback(true, this.file)\n    }\n\n    return reader.readAsArrayBuffer(this.file)\n  }\n}\n", "import * as config from \"trix/config\"\nimport { NON_BREAKING_SPACE, OBJECT_REPLACEMENT_CHARACTER, ZERO_WIDTH_SPACE } from \"trix/constants\"\n\n// Each software keyboard on Android emits its own set of events and some of them can be buggy.\n// This class detects when some buggy events are being emitted and lets know the input controller\n// that they should be ignored.\nexport default class FlakyAndroidKeyboardDetector {\n  constructor(element) {\n    this.element = element\n  }\n\n  shouldIgnore(event) {\n    if (!config.browser.samsungAndroid) return false\n\n    this.previousEvent = this.event\n    this.event = event\n\n    this.checkSamsungKeyboardBuggyModeStart()\n    this.checkSamsungKeyboardBuggyModeEnd()\n\n    return this.buggyMode\n  }\n\n  // private\n\n  // The Samsung keyboard on Android can enter a buggy state in which it emits a flurry of confused events that,\n  // if processed, corrupts the editor. The buggy mode always starts with an insertText event, right after a\n  // keydown event with for an \"Unidentified\" key, with the same text as the editor element, except for a few\n  // extra whitespace, or exotic utf8, characters.\n  checkSamsungKeyboardBuggyModeStart() {\n    if (this.insertingLongTextAfterUnidentifiedChar() && differsInWhitespace(this.element.innerText, this.event.data)) {\n      this.buggyMode = true\n      this.event.preventDefault()\n    }\n  }\n\n  // The flurry of buggy events are always insertText. If we see any other type, it means it's over.\n  checkSamsungKeyboardBuggyModeEnd() {\n    if (this.buggyMode && this.event.inputType !== \"insertText\") {\n      this.buggyMode = false\n    }\n  }\n\n  insertingLongTextAfterUnidentifiedChar() {\n    return this.isBeforeInputInsertText() && this.previousEventWasUnidentifiedKeydown() && this.event.data?.length > 50\n  }\n\n  isBeforeInputInsertText() {\n    return this.event.type === \"beforeinput\" && this.event.inputType === \"insertText\"\n  }\n\n  previousEventWasUnidentifiedKeydown() {\n    return this.previousEvent?.type === \"keydown\" && this.previousEvent?.key === \"Unidentified\"\n  }\n}\n\nconst differsInWhitespace = (text1, text2) => {\n  return normalize(text1) === normalize(text2)\n}\n\nconst whiteSpaceNormalizerRegexp = new RegExp(`(${OBJECT_REPLACEMENT_CHARACTER}|${ZERO_WIDTH_SPACE}|${NON_BREAKING_SPACE}|\\\\s)+`, \"g\")\nconst normalize = (text) => text.replace(whiteSpaceNormalizerRegexp, \" \").trim()\n", "import BasicObject from \"trix/core/basic_object\"\nimport MutationObserver from \"trix/observers/mutation_observer\"\nimport FileVerificationOperation from \"trix/operations/file_verification_operation\"\nimport FlakyAndroidKeyboardDetector from \"../models/flaky_android_keyboard_detector\"\n\nimport { handleEvent, innerElementIsActive } from \"trix/core/helpers\"\n\nexport default class InputController extends BasicObject {\n\n  static events = {}\n\n  constructor(element) {\n    super(...arguments)\n    this.element = element\n    this.mutationObserver = new MutationObserver(this.element)\n    this.mutationObserver.delegate = this\n    this.flakyKeyboardDetector = new FlakyAndroidKeyboardDetector(this.element)\n    for (const eventName in this.constructor.events) {\n      handleEvent(eventName, { onElement: this.element, withCallback: this.handlerFor(eventName) })\n    }\n  }\n\n  elementDidMutate(mutationSummary) {}\n\n  editorWillSyncDocumentView() {\n    return this.mutationObserver.stop()\n  }\n\n  editorDidSyncDocumentView() {\n    return this.mutationObserver.start()\n  }\n\n  requestRender() {\n    return this.delegate?.inputControllerDidRequestRender?.()\n  }\n\n  requestReparse() {\n    this.delegate?.inputControllerDidRequestReparse?.()\n    return this.requestRender()\n  }\n\n  attachFiles(files) {\n    const operations = Array.from(files).map((file) => new FileVerificationOperation(file))\n    return Promise.all(operations).then((files) => {\n      this.handleInput(function() {\n        this.delegate?.inputControllerWillAttachFiles()\n        this.responder?.insertFiles(files)\n        return this.requestRender()\n      })\n    })\n  }\n\n  // Private\n\n  handlerFor(eventName) {\n    return (event) => {\n      if (!event.defaultPrevented) {\n        this.handleInput(() => {\n          if (!innerElementIsActive(this.element)) {\n            if (this.flakyKeyboardDetector.shouldIgnore(event)) return\n\n            this.eventName = eventName\n            this.constructor.events[eventName].call(this, event)\n          }\n        })\n      }\n    }\n  }\n\n  handleInput(callback) {\n    try {\n      this.delegate?.inputControllerWillHandleInput()\n      callback.call(this)\n    } finally {\n      this.delegate?.inputControllerDidHandleInput()\n    }\n  }\n\n  createLinkHTML(href, text) {\n    const link = document.createElement(\"a\")\n    link.href = href\n    link.textContent = text ? text : href\n    return link.outerHTML\n  }\n}\n\n", "import * as config from \"trix/config\"\nimport UTF16String from \"trix/core/utilities/utf16_string\"\nimport BasicObject from \"trix/core/basic_object\"\nimport InputController from \"trix/controllers/input_controller\"\nimport DocumentView from \"trix/views/document_view\"\nimport Document from \"trix/models/document\"\n\nimport {\n  dataTransferIsPlainText,\n  dataTransferIsWritable,\n  keyEventIsKeyboardCommand,\n  makeElement,\n  objectsAreEqual,\n  removeNode,\n  squishBreakableWhitespace,\n} from \"trix/core/helpers\"\n\nimport { selectionChangeObserver } from \"trix/observers/selection_change_observer\"\n\nconst { browser, keyNames } = config\nlet pastedFileCount = 0\n\nexport default class Level0InputController extends InputController {\n\n  static events = {\n    keydown(event) {\n      if (!this.isComposing()) {\n        this.resetInputSummary()\n      }\n      this.inputSummary.didInput = true\n\n      const keyName = keyNames[event.keyCode]\n      if (keyName) {\n        let context = this.keys\n\n        ;[ \"ctrl\", \"alt\", \"shift\", \"meta\" ].forEach((modifier) => {\n          if (event[`${modifier}Key`]) {\n            if (modifier === \"ctrl\") {\n              modifier = \"control\"\n            }\n            context = context?.[modifier]\n          }\n        })\n\n        if (context?.[keyName] != null) {\n          this.setInputSummary({ keyName })\n          selectionChangeObserver.reset()\n          context[keyName].call(this, event)\n        }\n      }\n\n      if (keyEventIsKeyboardCommand(event)) {\n        const character = String.fromCharCode(event.keyCode).toLowerCase()\n        if (character) {\n          const keys = [ \"alt\", \"shift\" ].map((modifier) => {\n            if (event[`${modifier}Key`]) {\n              return modifier\n            }\n          }).filter(key => key)\n          keys.push(character)\n          if (this.delegate?.inputControllerDidReceiveKeyboardCommand(keys)) {\n            event.preventDefault()\n          }\n        }\n      }\n    },\n\n    keypress(event) {\n      if (this.inputSummary.eventName != null) return\n      if (event.metaKey) return\n      if (event.ctrlKey && !event.altKey) return\n\n      const string = stringFromKeyEvent(event)\n      if (string) {\n        this.delegate?.inputControllerWillPerformTyping()\n        this.responder?.insertString(string)\n        return this.setInputSummary({ textAdded: string, didDelete: this.selectionIsExpanded() })\n      }\n    },\n\n    textInput(event) {\n      // Handle autocapitalization\n      const { data } = event\n      const { textAdded } = this.inputSummary\n      if (textAdded && textAdded !== data && textAdded.toUpperCase() === data) {\n        const range = this.getSelectedRange()\n        this.setSelectedRange([ range[0], range[1] + textAdded.length ])\n        this.responder?.insertString(data)\n        this.setInputSummary({ textAdded: data })\n        return this.setSelectedRange(range)\n      }\n    },\n\n    dragenter(event) {\n      event.preventDefault()\n    },\n\n    dragstart(event) {\n      this.serializeSelectionToDataTransfer(event.dataTransfer)\n      this.draggedRange = this.getSelectedRange()\n      return this.delegate?.inputControllerDidStartDrag?.()\n    },\n\n    dragover(event) {\n      if (this.draggedRange || this.canAcceptDataTransfer(event.dataTransfer)) {\n        event.preventDefault()\n        const draggingPoint = { x: event.clientX, y: event.clientY }\n        if (!objectsAreEqual(draggingPoint, this.draggingPoint)) {\n          this.draggingPoint = draggingPoint\n          return this.delegate?.inputControllerDidReceiveDragOverPoint?.(this.draggingPoint)\n        }\n      }\n    },\n\n    dragend(event) {\n      this.delegate?.inputControllerDidCancelDrag?.()\n      this.draggedRange = null\n      this.draggingPoint = null\n    },\n\n    drop(event) {\n      event.preventDefault()\n      const files = event.dataTransfer?.files\n      const documentJSON = event.dataTransfer.getData(\"application/x-trix-document\")\n\n      const point = { x: event.clientX, y: event.clientY }\n      this.responder?.setLocationRangeFromPointRange(point)\n\n      if (files?.length) {\n        this.attachFiles(files)\n      } else if (this.draggedRange) {\n        this.delegate?.inputControllerWillMoveText()\n        this.responder?.moveTextFromRange(this.draggedRange)\n        this.draggedRange = null\n        this.requestRender()\n      } else if (documentJSON) {\n        const document = Document.fromJSONString(documentJSON)\n        this.responder?.insertDocument(document)\n        this.requestRender()\n      }\n\n      this.draggedRange = null\n      this.draggingPoint = null\n    },\n\n    cut(event) {\n      if (this.responder?.selectionIsExpanded()) {\n        if (this.serializeSelectionToDataTransfer(event.clipboardData)) {\n          event.preventDefault()\n        }\n\n        this.delegate?.inputControllerWillCutText()\n        this.deleteInDirection(\"backward\")\n        if (event.defaultPrevented) {\n          return this.requestRender()\n        }\n      }\n    },\n\n    copy(event) {\n      if (this.responder?.selectionIsExpanded()) {\n        if (this.serializeSelectionToDataTransfer(event.clipboardData)) {\n          event.preventDefault()\n        }\n      }\n    },\n\n    paste(event) {\n      const clipboard = event.clipboardData || event.testClipboardData\n      const paste = { clipboard }\n\n      if (!clipboard || pasteEventIsCrippledSafariHTMLPaste(event)) {\n        this.getPastedHTMLUsingHiddenElement((html) => {\n          paste.type = \"text/html\"\n          paste.html = html\n          this.delegate?.inputControllerWillPaste(paste)\n          this.responder?.insertHTML(paste.html)\n          this.requestRender()\n          return this.delegate?.inputControllerDidPaste(paste)\n        })\n        return\n      }\n\n      const href = clipboard.getData(\"URL\")\n      const html = clipboard.getData(\"text/html\")\n      const name = clipboard.getData(\"public.url-name\")\n\n      if (href) {\n        let string\n        paste.type = \"text/html\"\n        if (name) {\n          string = squishBreakableWhitespace(name).trim()\n        } else {\n          string = href\n        }\n        paste.html = this.createLinkHTML(href, string)\n        this.delegate?.inputControllerWillPaste(paste)\n        this.setInputSummary({ textAdded: string, didDelete: this.selectionIsExpanded() })\n        this.responder?.insertHTML(paste.html)\n        this.requestRender()\n        this.delegate?.inputControllerDidPaste(paste)\n      } else if (dataTransferIsPlainText(clipboard)) {\n        paste.type = \"text/plain\"\n        paste.string = clipboard.getData(\"text/plain\")\n        this.delegate?.inputControllerWillPaste(paste)\n        this.setInputSummary({ textAdded: paste.string, didDelete: this.selectionIsExpanded() })\n        this.responder?.insertString(paste.string)\n        this.requestRender()\n        this.delegate?.inputControllerDidPaste(paste)\n      } else if (html) {\n        paste.type = \"text/html\"\n        paste.html = html\n        this.delegate?.inputControllerWillPaste(paste)\n        this.responder?.insertHTML(paste.html)\n        this.requestRender()\n        this.delegate?.inputControllerDidPaste(paste)\n      } else if (Array.from(clipboard.types).includes(\"Files\")) {\n        const file = clipboard.items?.[0]?.getAsFile?.()\n        if (file) {\n          const extension = extensionForFile(file)\n          if (!file.name && extension) {\n            file.name = `pasted-file-${++pastedFileCount}.${extension}`\n          }\n          paste.type = \"File\"\n          paste.file = file\n          this.delegate?.inputControllerWillAttachFiles()\n          this.responder?.insertFile(paste.file)\n          this.requestRender()\n          this.delegate?.inputControllerDidPaste(paste)\n        }\n      }\n\n      event.preventDefault()\n    },\n\n    compositionstart(event) {\n      return this.getCompositionInput().start(event.data)\n    },\n\n    compositionupdate(event) {\n      return this.getCompositionInput().update(event.data)\n    },\n\n    compositionend(event) {\n      return this.getCompositionInput().end(event.data)\n    },\n\n    beforeinput(event) {\n      this.inputSummary.didInput = true\n    },\n\n    input(event) {\n      this.inputSummary.didInput = true\n      return event.stopPropagation()\n    },\n  }\n\n  static keys = {\n    backspace(event) {\n      this.delegate?.inputControllerWillPerformTyping()\n      return this.deleteInDirection(\"backward\", event)\n    },\n\n    delete(event) {\n      this.delegate?.inputControllerWillPerformTyping()\n      return this.deleteInDirection(\"forward\", event)\n    },\n\n    return(event) {\n      this.setInputSummary({ preferDocument: true })\n      this.delegate?.inputControllerWillPerformTyping()\n      return this.responder?.insertLineBreak()\n    },\n\n    tab(event) {\n      if (this.responder?.canIncreaseNestingLevel()) {\n        this.responder?.increaseNestingLevel()\n        this.requestRender()\n        event.preventDefault()\n      }\n    },\n\n    left(event) {\n      if (this.selectionIsInCursorTarget()) {\n        event.preventDefault()\n        return this.responder?.moveCursorInDirection(\"backward\")\n      }\n    },\n\n    right(event) {\n      if (this.selectionIsInCursorTarget()) {\n        event.preventDefault()\n        return this.responder?.moveCursorInDirection(\"forward\")\n      }\n    },\n\n    control: {\n      d(event) {\n        this.delegate?.inputControllerWillPerformTyping()\n        return this.deleteInDirection(\"forward\", event)\n      },\n\n      h(event) {\n        this.delegate?.inputControllerWillPerformTyping()\n        return this.deleteInDirection(\"backward\", event)\n      },\n\n      o(event) {\n        event.preventDefault()\n        this.delegate?.inputControllerWillPerformTyping()\n        this.responder?.insertString(\"\\n\", { updatePosition: false })\n        return this.requestRender()\n      },\n    },\n\n    shift: {\n      return(event) {\n        this.delegate?.inputControllerWillPerformTyping()\n        this.responder?.insertString(\"\\n\")\n        this.requestRender()\n        event.preventDefault()\n      },\n\n      tab(event) {\n        if (this.responder?.canDecreaseNestingLevel()) {\n          this.responder?.decreaseNestingLevel()\n          this.requestRender()\n          event.preventDefault()\n        }\n      },\n\n      left(event) {\n        if (this.selectionIsInCursorTarget()) {\n          event.preventDefault()\n          return this.expandSelectionInDirection(\"backward\")\n        }\n      },\n\n      right(event) {\n        if (this.selectionIsInCursorTarget()) {\n          event.preventDefault()\n          return this.expandSelectionInDirection(\"forward\")\n        }\n      },\n    },\n\n    alt: {\n      backspace(event) {\n        this.setInputSummary({ preferDocument: false })\n        return this.delegate?.inputControllerWillPerformTyping()\n      },\n    },\n\n    meta: {\n      backspace(event) {\n        this.setInputSummary({ preferDocument: false })\n        return this.delegate?.inputControllerWillPerformTyping()\n      },\n    },\n  }\n\n  constructor() {\n    super(...arguments)\n    this.resetInputSummary()\n  }\n\n  setInputSummary(summary = {}) {\n    this.inputSummary.eventName = this.eventName\n    for (const key in summary) {\n      const value = summary[key]\n      this.inputSummary[key] = value\n    }\n    return this.inputSummary\n  }\n\n  resetInputSummary() {\n    this.inputSummary = {}\n  }\n\n  reset() {\n    this.resetInputSummary()\n    return selectionChangeObserver.reset()\n  }\n\n  // Mutation observer delegate\n\n  elementDidMutate(mutationSummary) {\n    if (this.isComposing()) {\n      return this.delegate?.inputControllerDidAllowUnhandledInput?.()\n    } else {\n      return this.handleInput(function() {\n        if (this.mutationIsSignificant(mutationSummary)) {\n          if (this.mutationIsExpected(mutationSummary)) {\n            this.requestRender()\n          } else {\n            this.requestReparse()\n          }\n        }\n        return this.reset()\n      })\n    }\n  }\n\n  mutationIsExpected({ textAdded, textDeleted }) {\n    if (this.inputSummary.preferDocument) {\n      return true\n    }\n\n    const mutationAdditionMatchesSummary =\n      textAdded != null ? textAdded === this.inputSummary.textAdded : !this.inputSummary.textAdded\n    const mutationDeletionMatchesSummary =\n      textDeleted != null ? this.inputSummary.didDelete : !this.inputSummary.didDelete\n\n    const unexpectedNewlineAddition = [ \"\\n\", \" \\n\" ].includes(textAdded) && !mutationAdditionMatchesSummary\n    const unexpectedNewlineDeletion = textDeleted === \"\\n\" && !mutationDeletionMatchesSummary\n    const singleUnexpectedNewline =\n      unexpectedNewlineAddition && !unexpectedNewlineDeletion ||\n      unexpectedNewlineDeletion && !unexpectedNewlineAddition\n\n    if (singleUnexpectedNewline) {\n      const range = this.getSelectedRange()\n      if (range) {\n        const offset = unexpectedNewlineAddition ? textAdded.replace(/\\n$/, \"\").length || -1 : textAdded?.length || 1\n        if (this.responder?.positionIsBlockBreak(range[1] + offset)) {\n          return true\n        }\n      }\n    }\n\n    return mutationAdditionMatchesSummary && mutationDeletionMatchesSummary\n  }\n\n  mutationIsSignificant(mutationSummary) {\n    const textChanged = Object.keys(mutationSummary).length > 0\n    const composedEmptyString = this.compositionInput?.getEndData() === \"\"\n    return textChanged || !composedEmptyString\n  }\n\n  // Private\n\n  getCompositionInput() {\n    if (this.isComposing()) {\n      return this.compositionInput\n    } else {\n      this.compositionInput = new CompositionInput(this)\n    }\n  }\n\n  isComposing() {\n    return this.compositionInput && !this.compositionInput.isEnded()\n  }\n\n  deleteInDirection(direction, event) {\n    if (this.responder?.deleteInDirection(direction) === false) {\n      if (event) {\n        event.preventDefault()\n        return this.requestRender()\n      }\n    } else {\n      return this.setInputSummary({ didDelete: true })\n    }\n  }\n\n  serializeSelectionToDataTransfer(dataTransfer) {\n    if (!dataTransferIsWritable(dataTransfer)) return\n    const document = this.responder?.getSelectedDocument().toSerializableDocument()\n\n    dataTransfer.setData(\"application/x-trix-document\", JSON.stringify(document))\n    dataTransfer.setData(\"text/html\", DocumentView.render(document).innerHTML)\n    dataTransfer.setData(\"text/plain\", document.toString().replace(/\\n$/, \"\"))\n    return true\n  }\n\n  canAcceptDataTransfer(dataTransfer) {\n    const types = {}\n    Array.from(dataTransfer?.types || []).forEach((type) => {\n      types[type] = true\n    })\n    return types.Files || types[\"application/x-trix-document\"] || types[\"text/html\"] || types[\"text/plain\"]\n  }\n\n  getPastedHTMLUsingHiddenElement(callback) {\n    const selectedRange = this.getSelectedRange()\n\n    const style = {\n      position: \"absolute\",\n      left: `${window.pageXOffset}px`,\n      top: `${window.pageYOffset}px`,\n      opacity: 0,\n    }\n\n    const element = makeElement({ style, tagName: \"div\", editable: true })\n    document.body.appendChild(element)\n    element.focus()\n\n    return requestAnimationFrame(() => {\n      const html = element.innerHTML\n      removeNode(element)\n      this.setSelectedRange(selectedRange)\n      return callback(html)\n    })\n  }\n}\n\nLevel0InputController.proxyMethod(\"responder?.getSelectedRange\")\nLevel0InputController.proxyMethod(\"responder?.setSelectedRange\")\nLevel0InputController.proxyMethod(\"responder?.expandSelectionInDirection\")\nLevel0InputController.proxyMethod(\"responder?.selectionIsInCursorTarget\")\nLevel0InputController.proxyMethod(\"responder?.selectionIsExpanded\")\n\nconst extensionForFile = (file) => file.type?.match(/\\/(\\w+)$/)?.[1]\n\nconst hasStringCodePointAt = !!\" \".codePointAt?.(0)\n\nconst stringFromKeyEvent = function(event) {\n  if (event.key && hasStringCodePointAt && event.key.codePointAt(0) === event.keyCode) {\n    return event.key\n  } else {\n    let code\n    if (event.which === null) {\n      code = event.keyCode\n    } else if (event.which !== 0 && event.charCode !== 0) {\n      code = event.charCode\n    }\n\n    if (code != null && keyNames[code] !== \"escape\") {\n      return UTF16String.fromCodepoints([ code ]).toString()\n    }\n  }\n}\n\nconst pasteEventIsCrippledSafariHTMLPaste = function(event) {\n  const paste = event.clipboardData\n  if (paste) {\n    if (paste.types.includes(\"text/html\")) {\n      // Answer is yes if there's any possibility of Paste and Match Style in Safari,\n      // which is nearly impossible to detect confidently: https://bugs.webkit.org/show_bug.cgi?id=174165\n      for (const type of paste.types) {\n        const hasPasteboardFlavor = /^CorePasteboardFlavorType/.test(type)\n        const hasReadableDynamicData = /^dyn\\./.test(type) && paste.getData(type)\n        const mightBePasteAndMatchStyle = hasPasteboardFlavor || hasReadableDynamicData\n        if (mightBePasteAndMatchStyle) {\n          return true\n        }\n      }\n      return false\n    } else {\n      const isExternalHTMLPaste = paste.types.includes(\"com.apple.webarchive\")\n      const isExternalRichTextPaste = paste.types.includes(\"com.apple.flat-rtfd\")\n      return isExternalHTMLPaste || isExternalRichTextPaste\n    }\n  }\n}\n\nclass CompositionInput extends BasicObject {\n  constructor(inputController) {\n    super(...arguments)\n    this.inputController = inputController\n    this.responder = this.inputController.responder\n    this.delegate = this.inputController.delegate\n    this.inputSummary = this.inputController.inputSummary\n    this.data = {}\n  }\n\n  start(data) {\n    this.data.start = data\n\n    if (this.isSignificant()) {\n      if (this.inputSummary.eventName === \"keypress\" && this.inputSummary.textAdded) {\n        this.responder?.deleteInDirection(\"left\")\n      }\n\n      if (!this.selectionIsExpanded()) {\n        this.insertPlaceholder()\n        this.requestRender()\n      }\n\n      this.range = this.responder?.getSelectedRange()\n    }\n  }\n\n  update(data) {\n    this.data.update = data\n\n    if (this.isSignificant()) {\n      const range = this.selectPlaceholder()\n      if (range) {\n        this.forgetPlaceholder()\n        this.range = range\n      }\n    }\n  }\n\n  end(data) {\n    this.data.end = data\n\n    if (this.isSignificant()) {\n      this.forgetPlaceholder()\n\n      if (this.canApplyToDocument()) {\n        this.setInputSummary({ preferDocument: true, didInput: false })\n        this.delegate?.inputControllerWillPerformTyping()\n        this.responder?.setSelectedRange(this.range)\n        this.responder?.insertString(this.data.end)\n        return this.responder?.setSelectedRange(this.range[0] + this.data.end.length)\n      } else if (this.data.start != null || this.data.update != null) {\n        this.requestReparse()\n        return this.inputController.reset()\n      }\n    } else {\n      return this.inputController.reset()\n    }\n  }\n\n  getEndData() {\n    return this.data.end\n  }\n\n  isEnded() {\n    return this.getEndData() != null\n  }\n\n  isSignificant() {\n    if (browser.composesExistingText) {\n      return this.inputSummary.didInput\n    } else {\n      return true\n    }\n  }\n\n  // Private\n\n  canApplyToDocument() {\n    return this.data.start?.length === 0 && this.data.end?.length > 0 && this.range\n  }\n}\n\nCompositionInput.proxyMethod(\"inputController.setInputSummary\")\nCompositionInput.proxyMethod(\"inputController.requestRender\")\nCompositionInput.proxyMethod(\"inputController.requestReparse\")\nCompositionInput.proxyMethod(\"responder?.selectionIsExpanded\")\nCompositionInput.proxyMethod(\"responder?.insertPlaceholder\")\nCompositionInput.proxyMethod(\"responder?.selectPlaceholder\")\nCompositionInput.proxyMethod(\"responder?.forgetPlaceholder\")\n", "import { getAllAttributeNames, shouldRenderInmmediatelyToDealWithIOSDictation, squishBreakableWhitespace } from \"trix/core/helpers\"\nimport InputController from \"trix/controllers/input_controller\"\nimport * as config from \"trix/config\"\n\nimport { dataTransferIsMsOfficePaste, dataTransferIsPlainText, keyEventIsKeyboardCommand, objectsAreEqual } from \"trix/core/helpers\"\n\nimport { selectionChangeObserver } from \"trix/observers/selection_change_observer\"\n\nexport default class Level2InputController extends InputController {\n  constructor(...args) {\n    super(...args)\n    this.render = this.render.bind(this)\n  }\n\n  static events = {\n    keydown(event) {\n      if (keyEventIsKeyboardCommand(event)) {\n        const command = keyboardCommandFromKeyEvent(event)\n        if (this.delegate?.inputControllerDidReceiveKeyboardCommand(command)) {\n          event.preventDefault()\n        }\n      } else {\n        let name = event.key\n        if (event.altKey) {\n          name += \"+Alt\"\n        }\n        if (event.shiftKey) {\n          name += \"+Shift\"\n        }\n        const handler = this.constructor.keys[name]\n        if (handler) {\n          return this.withEvent(event, handler)\n        }\n      }\n    },\n\n    // Handle paste event to work around beforeinput.insertFromPaste browser bugs.\n    // Safe to remove each condition once fixed upstream.\n    paste(event) {\n      // https://bugs.webkit.org/show_bug.cgi?id=194921\n      let paste\n      const href = event.clipboardData?.getData(\"URL\")\n      if (pasteEventHasFilesOnly(event)) {\n        event.preventDefault()\n        return this.attachFiles(event.clipboardData.files)\n\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=934448\n      } else if (pasteEventHasPlainTextOnly(event)) {\n        event.preventDefault()\n        paste = {\n          type: \"text/plain\",\n          string: event.clipboardData.getData(\"text/plain\"),\n        }\n        this.delegate?.inputControllerWillPaste(paste)\n        this.responder?.insertString(paste.string)\n        this.render()\n        return this.delegate?.inputControllerDidPaste(paste)\n\n        // https://bugs.webkit.org/show_bug.cgi?id=196702\n      } else if (href) {\n        event.preventDefault()\n        paste = {\n          type: \"text/html\",\n          html: this.createLinkHTML(href),\n        }\n        this.delegate?.inputControllerWillPaste(paste)\n        this.responder?.insertHTML(paste.html)\n        this.render()\n        return this.delegate?.inputControllerDidPaste(paste)\n      }\n    },\n\n    beforeinput(event) {\n      const handler = this.constructor.inputTypes[event.inputType]\n\n      const immmediateRender = shouldRenderInmmediatelyToDealWithIOSDictation(event)\n\n      if (handler) {\n        this.withEvent(event, handler)\n\n        if (!immmediateRender) {\n          this.scheduleRender()\n        }\n      }\n\n      if (immmediateRender) {\n        this.render()\n      }\n    },\n\n    input(event) {\n      selectionChangeObserver.reset()\n    },\n\n    dragstart(event) {\n      if (this.responder?.selectionContainsAttachments()) {\n        event.dataTransfer.setData(\"application/x-trix-dragging\", true)\n\n        this.dragging = {\n          range: this.responder?.getSelectedRange(),\n          point: pointFromEvent(event),\n        }\n      }\n    },\n\n    dragenter(event) {\n      if (dragEventHasFiles(event)) {\n        event.preventDefault()\n      }\n    },\n\n    dragover(event) {\n      if (this.dragging) {\n        event.preventDefault()\n        const point = pointFromEvent(event)\n        if (!objectsAreEqual(point, this.dragging.point)) {\n          this.dragging.point = point\n          return this.responder?.setLocationRangeFromPointRange(point)\n        }\n      } else if (dragEventHasFiles(event)) {\n        event.preventDefault()\n      }\n    },\n\n    drop(event) {\n      if (this.dragging) {\n        event.preventDefault()\n        this.delegate?.inputControllerWillMoveText()\n        this.responder?.moveTextFromRange(this.dragging.range)\n        this.dragging = null\n        return this.scheduleRender()\n      } else if (dragEventHasFiles(event)) {\n        event.preventDefault()\n        const point = pointFromEvent(event)\n        this.responder?.setLocationRangeFromPointRange(point)\n        return this.attachFiles(event.dataTransfer.files)\n      }\n    },\n\n    dragend() {\n      if (this.dragging) {\n        this.responder?.setSelectedRange(this.dragging.range)\n        this.dragging = null\n      }\n    },\n\n    compositionend(event) {\n      if (this.composing) {\n        this.composing = false\n        if (!config.browser.recentAndroid) this.scheduleRender()\n      }\n    },\n  }\n\n  static keys = {\n    ArrowLeft() {\n      if (this.responder?.shouldManageMovingCursorInDirection(\"backward\")) {\n        this.event.preventDefault()\n        return this.responder?.moveCursorInDirection(\"backward\")\n      }\n    },\n\n    ArrowRight() {\n      if (this.responder?.shouldManageMovingCursorInDirection(\"forward\")) {\n        this.event.preventDefault()\n        return this.responder?.moveCursorInDirection(\"forward\")\n      }\n    },\n\n    Backspace() {\n      if (this.responder?.shouldManageDeletingInDirection(\"backward\")) {\n        this.event.preventDefault()\n        this.delegate?.inputControllerWillPerformTyping()\n        this.responder?.deleteInDirection(\"backward\")\n        return this.render()\n      }\n    },\n\n    Tab() {\n      if (this.responder?.canIncreaseNestingLevel()) {\n        this.event.preventDefault()\n        this.responder?.increaseNestingLevel()\n        return this.render()\n      }\n    },\n\n    \"Tab+Shift\"() {\n      if (this.responder?.canDecreaseNestingLevel()) {\n        this.event.preventDefault()\n        this.responder?.decreaseNestingLevel()\n        return this.render()\n      }\n    },\n  }\n\n  static inputTypes = {\n    deleteByComposition() {\n      return this.deleteInDirection(\"backward\", { recordUndoEntry: false })\n    },\n\n    deleteByCut() {\n      return this.deleteInDirection(\"backward\")\n    },\n\n    deleteByDrag() {\n      this.event.preventDefault()\n      return this.withTargetDOMRange(function() {\n        this.deleteByDragRange = this.responder?.getSelectedRange()\n      })\n    },\n\n    deleteCompositionText() {\n      return this.deleteInDirection(\"backward\", { recordUndoEntry: false })\n    },\n\n    deleteContent() {\n      return this.deleteInDirection(\"backward\")\n    },\n\n    deleteContentBackward() {\n      return this.deleteInDirection(\"backward\")\n    },\n\n    deleteContentForward() {\n      return this.deleteInDirection(\"forward\")\n    },\n\n    deleteEntireSoftLine() {\n      return this.deleteInDirection(\"forward\")\n    },\n\n    deleteHardLineBackward() {\n      return this.deleteInDirection(\"backward\")\n    },\n\n    deleteHardLineForward() {\n      return this.deleteInDirection(\"forward\")\n    },\n\n    deleteSoftLineBackward() {\n      return this.deleteInDirection(\"backward\")\n    },\n\n    deleteSoftLineForward() {\n      return this.deleteInDirection(\"forward\")\n    },\n\n    deleteWordBackward() {\n      return this.deleteInDirection(\"backward\")\n    },\n\n    deleteWordForward() {\n      return this.deleteInDirection(\"forward\")\n    },\n\n    formatBackColor() {\n      return this.activateAttributeIfSupported(\"backgroundColor\", this.event.data)\n    },\n\n    formatBold() {\n      return this.toggleAttributeIfSupported(\"bold\")\n    },\n\n    formatFontColor() {\n      return this.activateAttributeIfSupported(\"color\", this.event.data)\n    },\n\n    formatFontName() {\n      return this.activateAttributeIfSupported(\"font\", this.event.data)\n    },\n\n    formatIndent() {\n      if (this.responder?.canIncreaseNestingLevel()) {\n        return this.withTargetDOMRange(function() {\n          return this.responder?.increaseNestingLevel()\n        })\n      }\n    },\n\n    formatItalic() {\n      return this.toggleAttributeIfSupported(\"italic\")\n    },\n\n    formatJustifyCenter() {\n      return this.toggleAttributeIfSupported(\"justifyCenter\")\n    },\n\n    formatJustifyFull() {\n      return this.toggleAttributeIfSupported(\"justifyFull\")\n    },\n\n    formatJustifyLeft() {\n      return this.toggleAttributeIfSupported(\"justifyLeft\")\n    },\n\n    formatJustifyRight() {\n      return this.toggleAttributeIfSupported(\"justifyRight\")\n    },\n\n    formatOutdent() {\n      if (this.responder?.canDecreaseNestingLevel()) {\n        return this.withTargetDOMRange(function() {\n          return this.responder?.decreaseNestingLevel()\n        })\n      }\n    },\n\n    formatRemove() {\n      this.withTargetDOMRange(function() {\n        for (const attributeName in this.responder?.getCurrentAttributes()) {\n          this.responder?.removeCurrentAttribute(attributeName)\n        }\n      })\n    },\n\n    formatSetBlockTextDirection() {\n      return this.activateAttributeIfSupported(\"blockDir\", this.event.data)\n    },\n\n    formatSetInlineTextDirection() {\n      return this.activateAttributeIfSupported(\"textDir\", this.event.data)\n    },\n\n    formatStrikeThrough() {\n      return this.toggleAttributeIfSupported(\"strike\")\n    },\n\n    formatSubscript() {\n      return this.toggleAttributeIfSupported(\"sub\")\n    },\n\n    formatSuperscript() {\n      return this.toggleAttributeIfSupported(\"sup\")\n    },\n\n    formatUnderline() {\n      return this.toggleAttributeIfSupported(\"underline\")\n    },\n\n    historyRedo() {\n      return this.delegate?.inputControllerWillPerformRedo()\n    },\n\n    historyUndo() {\n      return this.delegate?.inputControllerWillPerformUndo()\n    },\n\n    insertCompositionText() {\n      this.composing = true\n      return this.insertString(this.event.data)\n    },\n\n    insertFromComposition() {\n      this.composing = false\n      return this.insertString(this.event.data)\n    },\n\n    insertFromDrop() {\n      const range = this.deleteByDragRange\n      if (range) {\n        this.deleteByDragRange = null\n        this.delegate?.inputControllerWillMoveText()\n        return this.withTargetDOMRange(function() {\n          return this.responder?.moveTextFromRange(range)\n        })\n      }\n    },\n\n    insertFromPaste() {\n      const { dataTransfer } = this.event\n      const paste = { dataTransfer }\n\n      const href = dataTransfer.getData(\"URL\")\n      const html = dataTransfer.getData(\"text/html\")\n\n      if (href) {\n        let string\n        this.event.preventDefault()\n        paste.type = \"text/html\"\n        const name = dataTransfer.getData(\"public.url-name\")\n        if (name) {\n          string = squishBreakableWhitespace(name).trim()\n        } else {\n          string = href\n        }\n        paste.html = this.createLinkHTML(href, string)\n        this.delegate?.inputControllerWillPaste(paste)\n        this.withTargetDOMRange(function() {\n          return this.responder?.insertHTML(paste.html)\n        })\n        this.afterRender = () => {\n          return this.delegate?.inputControllerDidPaste(paste)\n        }\n      } else if (dataTransferIsPlainText(dataTransfer)) {\n        paste.type = \"text/plain\"\n        paste.string = dataTransfer.getData(\"text/plain\")\n        this.delegate?.inputControllerWillPaste(paste)\n        this.withTargetDOMRange(function() {\n          return this.responder?.insertString(paste.string)\n        })\n\n        this.afterRender = () => {\n          return this.delegate?.inputControllerDidPaste(paste)\n        }\n      } else if (processableFilePaste(this.event)) {\n        paste.type = \"File\"\n        paste.file = dataTransfer.files[0]\n        this.delegate?.inputControllerWillPaste(paste)\n        this.withTargetDOMRange(function() {\n          return this.responder?.insertFile(paste.file)\n        })\n\n        this.afterRender = () => {\n          return this.delegate?.inputControllerDidPaste(paste)\n        }\n      } else if (html) {\n        this.event.preventDefault()\n        paste.type = \"text/html\"\n        paste.html = html\n        this.delegate?.inputControllerWillPaste(paste)\n        this.withTargetDOMRange(function() {\n          return this.responder?.insertHTML(paste.html)\n        })\n        this.afterRender = () => {\n          return this.delegate?.inputControllerDidPaste(paste)\n        }\n      }\n    },\n\n    insertFromYank() {\n      return this.insertString(this.event.data)\n    },\n\n    insertLineBreak() {\n      return this.insertString(\"\\n\")\n    },\n\n    insertLink() {\n      return this.activateAttributeIfSupported(\"href\", this.event.data)\n    },\n\n    insertOrderedList() {\n      return this.toggleAttributeIfSupported(\"number\")\n    },\n\n    insertParagraph() {\n      this.delegate?.inputControllerWillPerformTyping()\n      return this.withTargetDOMRange(function() {\n        return this.responder?.insertLineBreak()\n      })\n    },\n\n    insertReplacementText() {\n      const replacement = this.event.dataTransfer.getData(\"text/plain\")\n      const domRange = this.event.getTargetRanges()[0]\n\n      this.withTargetDOMRange(domRange, () => {\n        this.insertString(replacement, { updatePosition: false })\n      })\n    },\n\n    insertText() {\n      return this.insertString(this.event.data || this.event.dataTransfer?.getData(\"text/plain\"))\n    },\n\n    insertTranspose() {\n      return this.insertString(this.event.data)\n    },\n\n    insertUnorderedList() {\n      return this.toggleAttributeIfSupported(\"bullet\")\n    },\n  }\n\n  elementDidMutate() {\n    if (this.scheduledRender) {\n      if (this.composing) {\n        return this.delegate?.inputControllerDidAllowUnhandledInput?.()\n      }\n    } else {\n      return this.reparse()\n    }\n  }\n\n  scheduleRender() {\n    return this.scheduledRender ? this.scheduledRender : this.scheduledRender = requestAnimationFrame(this.render)\n  }\n\n  render() {\n    cancelAnimationFrame(this.scheduledRender)\n    this.scheduledRender = null\n    if (!this.composing) {\n      this.delegate?.render()\n    }\n    this.afterRender?.()\n    this.afterRender = null\n  }\n\n  reparse() {\n    return this.delegate?.reparse()\n  }\n\n  // Responder helpers\n\n  insertString(string = \"\", options) {\n    this.delegate?.inputControllerWillPerformTyping()\n    return this.withTargetDOMRange(function() {\n      return this.responder?.insertString(string, options)\n    })\n  }\n\n  toggleAttributeIfSupported(attributeName) {\n    if (getAllAttributeNames().includes(attributeName)) {\n      this.delegate?.inputControllerWillPerformFormatting(attributeName)\n      return this.withTargetDOMRange(function() {\n        return this.responder?.toggleCurrentAttribute(attributeName)\n      })\n    }\n  }\n\n  activateAttributeIfSupported(attributeName, value) {\n    if (getAllAttributeNames().includes(attributeName)) {\n      this.delegate?.inputControllerWillPerformFormatting(attributeName)\n      return this.withTargetDOMRange(function() {\n        return this.responder?.setCurrentAttribute(attributeName, value)\n      })\n    }\n  }\n\n  deleteInDirection(direction, { recordUndoEntry } = { recordUndoEntry: true }) {\n    if (recordUndoEntry) {\n      this.delegate?.inputControllerWillPerformTyping()\n    }\n    const perform = () => this.responder?.deleteInDirection(direction)\n    const domRange = this.getTargetDOMRange({ minLength: this.composing ? 1 : 2 })\n    if (domRange) {\n      return this.withTargetDOMRange(domRange, perform)\n    } else {\n      return perform()\n    }\n  }\n\n  // Selection helpers\n\n  withTargetDOMRange(domRange, fn) {\n    if (typeof domRange === \"function\") {\n      fn = domRange\n      domRange = this.getTargetDOMRange()\n    }\n    if (domRange) {\n      return this.responder?.withTargetDOMRange(domRange, fn.bind(this))\n    } else {\n      selectionChangeObserver.reset()\n      return fn.call(this)\n    }\n  }\n\n  getTargetDOMRange({ minLength } = { minLength: 0 }) {\n    const targetRanges = this.event.getTargetRanges?.()\n    if (targetRanges) {\n      if (targetRanges.length) {\n        const domRange = staticRangeToRange(targetRanges[0])\n        if (minLength === 0 || domRange.toString().length >= minLength) {\n          return domRange\n        }\n      }\n    }\n  }\n\n  withEvent(event, fn) {\n    let result\n    this.event = event\n    try {\n      result = fn.call(this)\n    } finally {\n      this.event = null\n    }\n    return result\n  }\n}\n\nconst staticRangeToRange = function(staticRange) {\n  const range = document.createRange()\n  range.setStart(staticRange.startContainer, staticRange.startOffset)\n  range.setEnd(staticRange.endContainer, staticRange.endOffset)\n  return range\n}\n\n// Event helpers\n\nconst dragEventHasFiles = (event) => Array.from(event.dataTransfer?.types || []).includes(\"Files\")\n\nconst processableFilePaste = (event) => {\n  // Paste events that only have files are handled by the paste event handler,\n  // to work around Safari not supporting beforeinput.insertFromPaste for files.\n\n  // MS Office text pastes include a file with a screenshot of the text, but we should\n  // handle them as text pastes.\n  return event.dataTransfer.files?.[0] && !pasteEventHasFilesOnly(event) && !dataTransferIsMsOfficePaste(event)\n}\n\nconst pasteEventHasFilesOnly = function(event) {\n  const clipboard = event.clipboardData\n  if (clipboard) {\n    const fileTypes = Array.from(clipboard.types).filter((type) => type.match(/file/i)) // \"Files\", \"application/x-moz-file\"\n    return fileTypes.length === clipboard.types.length && clipboard.files.length >= 1\n  }\n}\n\nconst pasteEventHasPlainTextOnly = function(event) {\n  const clipboard = event.clipboardData\n  if (clipboard) {\n    return clipboard.types.includes(\"text/plain\") && clipboard.types.length === 1\n  }\n}\n\nconst keyboardCommandFromKeyEvent = function(event) {\n  const command = []\n  if (event.altKey) {\n    command.push(\"alt\")\n  }\n  if (event.shiftKey) {\n    command.push(\"shift\")\n  }\n  command.push(event.key)\n  return command\n}\n\nconst pointFromEvent = (event) => ({\n  x: event.clientX,\n  y: event.clientY,\n})\n", "import BasicObject from \"trix/core/basic_object\"\n\nimport { findClosestElementFromNode, handleEvent, triggerEvent } from \"trix/core/helpers\"\n\nconst attributeButtonSelector = \"[data-trix-attribute]\"\nconst actionButtonSelector = \"[data-trix-action]\"\nconst toolbarButtonSelector = `${attributeButtonSelector}, ${actionButtonSelector}`\nconst dialogSelector = \"[data-trix-dialog]\"\nconst activeDialogSelector = `${dialogSelector}[data-trix-active]`\nconst dialogButtonSelector = `${dialogSelector} [data-trix-method]`\nconst dialogInputSelector = `${dialogSelector} [data-trix-input]`\nconst getInputForDialog = (element, attributeName) => {\n  if (!attributeName) { attributeName = getAttributeName(element) }\n  return element.querySelector(`[data-trix-input][name='${attributeName}']`)\n}\nconst getActionName = (element) => element.getAttribute(\"data-trix-action\")\nconst getAttributeName = (element) => {\n  return element.getAttribute(\"data-trix-attribute\") || element.getAttribute(\"data-trix-dialog-attribute\")\n}\nconst getDialogName = (element) => element.getAttribute(\"data-trix-dialog\")\n\nexport default class ToolbarController extends BasicObject {\n  constructor(element) {\n    super(element)\n    this.didClickActionButton = this.didClickActionButton.bind(this)\n    this.didClickAttributeButton = this.didClickAttributeButton.bind(this)\n    this.didClickDialogButton = this.didClickDialogButton.bind(this)\n    this.didKeyDownDialogInput = this.didKeyDownDialogInput.bind(this)\n    this.element = element\n    this.attributes = {}\n    this.actions = {}\n    this.resetDialogInputs()\n\n    handleEvent(\"mousedown\", {\n      onElement: this.element,\n      matchingSelector: actionButtonSelector,\n      withCallback: this.didClickActionButton,\n    })\n    handleEvent(\"mousedown\", {\n      onElement: this.element,\n      matchingSelector: attributeButtonSelector,\n      withCallback: this.didClickAttributeButton,\n    })\n    handleEvent(\"click\", { onElement: this.element, matchingSelector: toolbarButtonSelector, preventDefault: true })\n    handleEvent(\"click\", {\n      onElement: this.element,\n      matchingSelector: dialogButtonSelector,\n      withCallback: this.didClickDialogButton,\n    })\n    handleEvent(\"keydown\", {\n      onElement: this.element,\n      matchingSelector: dialogInputSelector,\n      withCallback: this.didKeyDownDialogInput,\n    })\n  }\n\n  // Event handlers\n\n  didClickActionButton(event, element) {\n    this.delegate?.toolbarDidClickButton()\n    event.preventDefault()\n    const actionName = getActionName(element)\n\n    if (this.getDialog(actionName)) {\n      return this.toggleDialog(actionName)\n    } else {\n      return this.delegate?.toolbarDidInvokeAction(actionName, element)\n    }\n  }\n\n  didClickAttributeButton(event, element) {\n    this.delegate?.toolbarDidClickButton()\n    event.preventDefault()\n    const attributeName = getAttributeName(element)\n\n    if (this.getDialog(attributeName)) {\n      this.toggleDialog(attributeName)\n    } else {\n      this.delegate?.toolbarDidToggleAttribute(attributeName)\n    }\n\n    return this.refreshAttributeButtons()\n  }\n\n  didClickDialogButton(event, element) {\n    const dialogElement = findClosestElementFromNode(element, { matchingSelector: dialogSelector })\n    const method = element.getAttribute(\"data-trix-method\")\n    return this[method].call(this, dialogElement)\n  }\n\n  didKeyDownDialogInput(event, element) {\n    if (event.keyCode === 13) {\n      // Enter key\n      event.preventDefault()\n      const attribute = element.getAttribute(\"name\")\n      const dialog = this.getDialog(attribute)\n      this.setAttribute(dialog)\n    }\n    if (event.keyCode === 27) {\n      // Escape key\n      event.preventDefault()\n      return this.hideDialog()\n    }\n  }\n\n  // Action buttons\n\n  updateActions(actions) {\n    this.actions = actions\n    return this.refreshActionButtons()\n  }\n\n  refreshActionButtons() {\n    return this.eachActionButton((element, actionName) => {\n      element.disabled = this.actions[actionName] === false\n    })\n  }\n\n  eachActionButton(callback) {\n    return Array.from(this.element.querySelectorAll(actionButtonSelector)).map((element) =>\n      callback(element, getActionName(element))\n    )\n  }\n\n  // Attribute buttons\n\n  updateAttributes(attributes) {\n    this.attributes = attributes\n    return this.refreshAttributeButtons()\n  }\n\n  refreshAttributeButtons() {\n    return this.eachAttributeButton((element, attributeName) => {\n      element.disabled = this.attributes[attributeName] === false\n      if (this.attributes[attributeName] || this.dialogIsVisible(attributeName)) {\n        element.setAttribute(\"data-trix-active\", \"\")\n        return element.classList.add(\"trix-active\")\n      } else {\n        element.removeAttribute(\"data-trix-active\")\n        return element.classList.remove(\"trix-active\")\n      }\n    })\n  }\n\n  eachAttributeButton(callback) {\n    return Array.from(this.element.querySelectorAll(attributeButtonSelector)).map((element) =>\n      callback(element, getAttributeName(element))\n    )\n  }\n\n  applyKeyboardCommand(keys) {\n    const keyString = JSON.stringify(keys.sort())\n    for (const button of Array.from(this.element.querySelectorAll(\"[data-trix-key]\"))) {\n      const buttonKeys = button.getAttribute(\"data-trix-key\").split(\"+\")\n      const buttonKeyString = JSON.stringify(buttonKeys.sort())\n      if (buttonKeyString === keyString) {\n        triggerEvent(\"mousedown\", { onElement: button })\n        return true\n      }\n    }\n    return false\n  }\n\n  // Dialogs\n\n  dialogIsVisible(dialogName) {\n    const element = this.getDialog(dialogName)\n    if (element) {\n      return element.hasAttribute(\"data-trix-active\")\n    }\n  }\n\n  toggleDialog(dialogName) {\n    if (this.dialogIsVisible(dialogName)) {\n      return this.hideDialog()\n    } else {\n      return this.showDialog(dialogName)\n    }\n  }\n\n  showDialog(dialogName) {\n    this.hideDialog()\n    this.delegate?.toolbarWillShowDialog()\n\n    const element = this.getDialog(dialogName)\n    element.setAttribute(\"data-trix-active\", \"\")\n    element.classList.add(\"trix-active\")\n\n    Array.from(element.querySelectorAll(\"input[disabled]\")).forEach((disabledInput) => {\n      disabledInput.removeAttribute(\"disabled\")\n    })\n\n    const attributeName = getAttributeName(element)\n    if (attributeName) {\n      const input = getInputForDialog(element, dialogName)\n      if (input) {\n        input.value = this.attributes[attributeName] || \"\"\n        input.select()\n      }\n    }\n\n    return this.delegate?.toolbarDidShowDialog(dialogName)\n  }\n\n  setAttribute(dialogElement) {\n    const attributeName = getAttributeName(dialogElement)\n    const input = getInputForDialog(dialogElement, attributeName)\n    if (input.willValidate && !input.checkValidity()) {\n      input.setAttribute(\"data-trix-validate\", \"\")\n      input.classList.add(\"trix-validate\")\n      return input.focus()\n    } else {\n      this.delegate?.toolbarDidUpdateAttribute(attributeName, input.value)\n      return this.hideDialog()\n    }\n  }\n\n  removeAttribute(dialogElement) {\n    const attributeName = getAttributeName(dialogElement)\n    this.delegate?.toolbarDidRemoveAttribute(attributeName)\n    return this.hideDialog()\n  }\n\n  hideDialog() {\n    const element = this.element.querySelector(activeDialogSelector)\n    if (element) {\n      element.removeAttribute(\"data-trix-active\")\n      element.classList.remove(\"trix-active\")\n      this.resetDialogInputs()\n      return this.delegate?.toolbarDidHideDialog(getDialogName(element))\n    }\n  }\n\n  resetDialogInputs() {\n    Array.from(this.element.querySelectorAll(dialogInputSelector)).forEach((input) => {\n      input.setAttribute(\"disabled\", \"disabled\")\n      input.removeAttribute(\"data-trix-validate\")\n      input.classList.remove(\"trix-validate\")\n    })\n  }\n\n  getDialog(dialogName) {\n    return this.element.querySelector(`[data-trix-dialog=${dialogName}]`)\n  }\n}\n", "/* eslint-disable\n    id-length,\n*/\nimport * as config from \"trix/config\"\n\nimport { serializeToContentType } from \"trix/core/serialization\"\n\nimport Controller from \"trix/controllers/controller\"\nimport Level0InputController from \"trix/controllers/level_0_input_controller\"\nimport Level2InputController from \"trix/controllers/level_2_input_controller\"\nimport CompositionController from \"trix/controllers/composition_controller\"\nimport ToolbarController from \"trix/controllers/toolbar_controller\"\nimport Composition from \"trix/models/composition\"\nimport Editor from \"trix/models/editor\"\nimport AttachmentManager from \"trix/models/attachment_manager\"\nimport SelectionManager from \"trix/models/selection_manager\"\n\nimport { getBlockConfig, objectsAreEqual, rangeIsCollapsed, rangesAreEqual } from \"trix/core/helpers\"\nimport { selectionChangeObserver } from \"trix/observers/selection_change_observer\"\n\nconst snapshotsAreEqual = (a, b) => rangesAreEqual(a.selectedRange, b.selectedRange) && a.document.isEqualTo(b.document)\n\nexport default class EditorController extends Controller {\n  static actions = {\n    undo: {\n      test() {\n        return this.editor.canUndo()\n      },\n      perform() {\n        return this.editor.undo()\n      },\n    },\n    redo: {\n      test() {\n        return this.editor.canRedo()\n      },\n      perform() {\n        return this.editor.redo()\n      },\n    },\n    link: {\n      test() {\n        return this.editor.canActivateAttribute(\"href\")\n      },\n    },\n    increaseNestingLevel: {\n      test() {\n        return this.editor.canIncreaseNestingLevel()\n      },\n      perform() {\n        return this.editor.increaseNestingLevel() && this.render()\n      },\n    },\n    decreaseNestingLevel: {\n      test() {\n        return this.editor.canDecreaseNestingLevel()\n      },\n      perform() {\n        return this.editor.decreaseNestingLevel() && this.render()\n      },\n    },\n    attachFiles: {\n      test() {\n        return true\n      },\n      perform() {\n        return config.input.pickFiles(this.editor.insertFiles)\n      },\n    },\n  }\n\n  constructor({ editorElement, document, html }) {\n    super(...arguments)\n    this.editorElement = editorElement\n    this.selectionManager = new SelectionManager(this.editorElement)\n    this.selectionManager.delegate = this\n\n    this.composition = new Composition()\n    this.composition.delegate = this\n\n    this.attachmentManager = new AttachmentManager(this.composition.getAttachments())\n    this.attachmentManager.delegate = this\n\n    this.inputController =\n      config.input.getLevel() === 2\n        ? new Level2InputController(this.editorElement)\n        : new Level0InputController(this.editorElement)\n\n    this.inputController.delegate = this\n    this.inputController.responder = this.composition\n\n    this.compositionController = new CompositionController(this.editorElement, this.composition)\n    this.compositionController.delegate = this\n\n    this.toolbarController = new ToolbarController(this.editorElement.toolbarElement)\n    this.toolbarController.delegate = this\n\n    this.editor = new Editor(this.composition, this.selectionManager, this.editorElement)\n    if (document) {\n      this.editor.loadDocument(document)\n    } else {\n      this.editor.loadHTML(html)\n    }\n  }\n\n  registerSelectionManager() {\n    return selectionChangeObserver.registerSelectionManager(this.selectionManager)\n  }\n\n  unregisterSelectionManager() {\n    return selectionChangeObserver.unregisterSelectionManager(this.selectionManager)\n  }\n\n  render() {\n    return this.compositionController.render()\n  }\n\n  reparse() {\n    return this.composition.replaceHTML(this.editorElement.innerHTML)\n  }\n\n  // Composition delegate\n\n  compositionDidChangeDocument(document) {\n    this.notifyEditorElement(\"document-change\")\n    if (!this.handlingInput) {\n      return this.render()\n    }\n  }\n\n  compositionDidChangeCurrentAttributes(currentAttributes) {\n    this.currentAttributes = currentAttributes\n    this.toolbarController.updateAttributes(this.currentAttributes)\n    this.updateCurrentActions()\n    return this.notifyEditorElement(\"attributes-change\", { attributes: this.currentAttributes })\n  }\n\n  compositionDidPerformInsertionAtRange(range) {\n    if (this.pasting) {\n      this.pastedRange = range\n    }\n  }\n\n  compositionShouldAcceptFile(file) {\n    return this.notifyEditorElement(\"file-accept\", { file })\n  }\n\n  compositionDidAddAttachment(attachment) {\n    const managedAttachment = this.attachmentManager.manageAttachment(attachment)\n    return this.notifyEditorElement(\"attachment-add\", { attachment: managedAttachment })\n  }\n\n  compositionDidEditAttachment(attachment) {\n    this.compositionController.rerenderViewForObject(attachment)\n    const managedAttachment = this.attachmentManager.manageAttachment(attachment)\n    this.notifyEditorElement(\"attachment-edit\", { attachment: managedAttachment })\n    return this.notifyEditorElement(\"change\")\n  }\n\n  compositionDidChangeAttachmentPreviewURL(attachment) {\n    this.compositionController.invalidateViewForObject(attachment)\n    return this.notifyEditorElement(\"change\")\n  }\n\n  compositionDidRemoveAttachment(attachment) {\n    const managedAttachment = this.attachmentManager.unmanageAttachment(attachment)\n    return this.notifyEditorElement(\"attachment-remove\", { attachment: managedAttachment })\n  }\n\n  compositionDidStartEditingAttachment(attachment, options) {\n    this.attachmentLocationRange = this.composition.document.getLocationRangeOfAttachment(attachment)\n    this.compositionController.installAttachmentEditorForAttachment(attachment, options)\n    return this.selectionManager.setLocationRange(this.attachmentLocationRange)\n  }\n\n  compositionDidStopEditingAttachment(attachment) {\n    this.compositionController.uninstallAttachmentEditor()\n    this.attachmentLocationRange = null\n  }\n\n  compositionDidRequestChangingSelectionToLocationRange(locationRange) {\n    if (this.loadingSnapshot && !this.isFocused()) return\n    this.requestedLocationRange = locationRange\n    this.compositionRevisionWhenLocationRangeRequested = this.composition.revision\n    if (!this.handlingInput) {\n      return this.render()\n    }\n  }\n\n  compositionWillLoadSnapshot() {\n    this.loadingSnapshot = true\n  }\n\n  compositionDidLoadSnapshot() {\n    this.compositionController.refreshViewCache()\n    this.render()\n    this.loadingSnapshot = false\n  }\n\n  getSelectionManager() {\n    return this.selectionManager\n  }\n\n  // Attachment manager delegate\n\n  attachmentManagerDidRequestRemovalOfAttachment(attachment) {\n    return this.removeAttachment(attachment)\n  }\n\n  // Document controller delegate\n\n  compositionControllerWillSyncDocumentView() {\n    this.inputController.editorWillSyncDocumentView()\n    this.selectionManager.lock()\n    return this.selectionManager.clearSelection()\n  }\n\n  compositionControllerDidSyncDocumentView() {\n    this.inputController.editorDidSyncDocumentView()\n    this.selectionManager.unlock()\n    this.updateCurrentActions()\n    return this.notifyEditorElement(\"sync\")\n  }\n\n  compositionControllerDidRender() {\n    if (this.requestedLocationRange) {\n      if (this.compositionRevisionWhenLocationRangeRequested === this.composition.revision) {\n        this.selectionManager.setLocationRange(this.requestedLocationRange)\n      }\n      this.requestedLocationRange = null\n      this.compositionRevisionWhenLocationRangeRequested = null\n    }\n\n    if (this.renderedCompositionRevision !== this.composition.revision) {\n      this.runEditorFilters()\n      this.composition.updateCurrentAttributes()\n      this.notifyEditorElement(\"render\")\n    }\n\n    this.renderedCompositionRevision = this.composition.revision\n  }\n\n  compositionControllerDidFocus() {\n    if (this.isFocusedInvisibly()) {\n      this.setLocationRange({ index: 0, offset: 0 })\n    }\n    this.toolbarController.hideDialog()\n    return this.notifyEditorElement(\"focus\")\n  }\n\n  compositionControllerDidBlur() {\n    return this.notifyEditorElement(\"blur\")\n  }\n\n  compositionControllerDidSelectAttachment(attachment, options) {\n    this.toolbarController.hideDialog()\n    return this.composition.editAttachment(attachment, options)\n  }\n\n  compositionControllerDidRequestDeselectingAttachment(attachment) {\n    const locationRange = this.attachmentLocationRange || this.composition.document.getLocationRangeOfAttachment(attachment)\n    return this.selectionManager.setLocationRange(locationRange[1])\n  }\n\n  compositionControllerWillUpdateAttachment(attachment) {\n    return this.editor.recordUndoEntry(\"Edit Attachment\", { context: attachment.id, consolidatable: true })\n  }\n\n  compositionControllerDidRequestRemovalOfAttachment(attachment) {\n    return this.removeAttachment(attachment)\n  }\n\n  // Input controller delegate\n\n  inputControllerWillHandleInput() {\n    this.handlingInput = true\n    this.requestedRender = false\n  }\n\n  inputControllerDidRequestRender() {\n    this.requestedRender = true\n  }\n\n  inputControllerDidHandleInput() {\n    this.handlingInput = false\n    if (this.requestedRender) {\n      this.requestedRender = false\n      return this.render()\n    }\n  }\n\n  inputControllerDidAllowUnhandledInput() {\n    return this.notifyEditorElement(\"change\")\n  }\n\n  inputControllerDidRequestReparse() {\n    return this.reparse()\n  }\n\n  inputControllerWillPerformTyping() {\n    return this.recordTypingUndoEntry()\n  }\n\n  inputControllerWillPerformFormatting(attributeName) {\n    return this.recordFormattingUndoEntry(attributeName)\n  }\n\n  inputControllerWillCutText() {\n    return this.editor.recordUndoEntry(\"Cut\")\n  }\n\n  inputControllerWillPaste(paste) {\n    this.editor.recordUndoEntry(\"Paste\")\n    this.pasting = true\n    return this.notifyEditorElement(\"before-paste\", { paste })\n  }\n\n  inputControllerDidPaste(paste) {\n    paste.range = this.pastedRange\n    this.pastedRange = null\n    this.pasting = null\n    return this.notifyEditorElement(\"paste\", { paste })\n  }\n\n  inputControllerWillMoveText() {\n    return this.editor.recordUndoEntry(\"Move\")\n  }\n\n  inputControllerWillAttachFiles() {\n    return this.editor.recordUndoEntry(\"Drop Files\")\n  }\n\n  inputControllerWillPerformUndo() {\n    return this.editor.undo()\n  }\n\n  inputControllerWillPerformRedo() {\n    return this.editor.redo()\n  }\n\n  inputControllerDidReceiveKeyboardCommand(keys) {\n    return this.toolbarController.applyKeyboardCommand(keys)\n  }\n\n  inputControllerDidStartDrag() {\n    this.locationRangeBeforeDrag = this.selectionManager.getLocationRange()\n  }\n\n  inputControllerDidReceiveDragOverPoint(point) {\n    return this.selectionManager.setLocationRangeFromPointRange(point)\n  }\n\n  inputControllerDidCancelDrag() {\n    this.selectionManager.setLocationRange(this.locationRangeBeforeDrag)\n    this.locationRangeBeforeDrag = null\n  }\n\n  // Selection manager delegate\n\n  locationRangeDidChange(locationRange) {\n    this.composition.updateCurrentAttributes()\n    this.updateCurrentActions()\n    if (this.attachmentLocationRange && !rangesAreEqual(this.attachmentLocationRange, locationRange)) {\n      this.composition.stopEditingAttachment()\n    }\n    return this.notifyEditorElement(\"selection-change\")\n  }\n\n  // Toolbar controller delegate\n\n  toolbarDidClickButton() {\n    if (!this.getLocationRange()) {\n      return this.setLocationRange({ index: 0, offset: 0 })\n    }\n  }\n\n  toolbarDidInvokeAction(actionName, invokingElement) {\n    return this.invokeAction(actionName, invokingElement)\n  }\n\n  toolbarDidToggleAttribute(attributeName) {\n    this.recordFormattingUndoEntry(attributeName)\n    this.composition.toggleCurrentAttribute(attributeName)\n    this.render()\n    if (!this.selectionFrozen) {\n      return this.editorElement.focus()\n    }\n  }\n\n  toolbarDidUpdateAttribute(attributeName, value) {\n    this.recordFormattingUndoEntry(attributeName)\n    this.composition.setCurrentAttribute(attributeName, value)\n    this.render()\n    if (!this.selectionFrozen) {\n      return this.editorElement.focus()\n    }\n  }\n\n  toolbarDidRemoveAttribute(attributeName) {\n    this.recordFormattingUndoEntry(attributeName)\n    this.composition.removeCurrentAttribute(attributeName)\n    this.render()\n    if (!this.selectionFrozen) {\n      return this.editorElement.focus()\n    }\n  }\n\n  toolbarWillShowDialog(dialogElement) {\n    this.composition.expandSelectionForEditing()\n    return this.freezeSelection()\n  }\n\n  toolbarDidShowDialog(dialogName) {\n    return this.notifyEditorElement(\"toolbar-dialog-show\", { dialogName })\n  }\n\n  toolbarDidHideDialog(dialogName) {\n    this.thawSelection()\n    this.editorElement.focus()\n    return this.notifyEditorElement(\"toolbar-dialog-hide\", { dialogName })\n  }\n\n  // Selection\n\n  freezeSelection() {\n    if (!this.selectionFrozen) {\n      this.selectionManager.lock()\n      this.composition.freezeSelection()\n      this.selectionFrozen = true\n      return this.render()\n    }\n  }\n\n  thawSelection() {\n    if (this.selectionFrozen) {\n      this.composition.thawSelection()\n      this.selectionManager.unlock()\n      this.selectionFrozen = false\n      return this.render()\n    }\n  }\n\n  canInvokeAction(actionName) {\n    if (this.actionIsExternal(actionName)) {\n      return true\n    } else {\n      return !!this.actions[actionName]?.test?.call(this)\n    }\n  }\n\n  invokeAction(actionName, invokingElement) {\n    if (this.actionIsExternal(actionName)) {\n      return this.notifyEditorElement(\"action-invoke\", { actionName, invokingElement })\n    } else {\n      return this.actions[actionName]?.perform?.call(this)\n    }\n  }\n\n  actionIsExternal(actionName) {\n    return /^x-./.test(actionName)\n  }\n\n  getCurrentActions() {\n    const result = {}\n    for (const actionName in this.actions) {\n      result[actionName] = this.canInvokeAction(actionName)\n    }\n    return result\n  }\n\n  updateCurrentActions() {\n    const currentActions = this.getCurrentActions()\n    if (!objectsAreEqual(currentActions, this.currentActions)) {\n      this.currentActions = currentActions\n      this.toolbarController.updateActions(this.currentActions)\n      return this.notifyEditorElement(\"actions-change\", { actions: this.currentActions })\n    }\n  }\n\n  // Editor filters\n\n  runEditorFilters() {\n    let snapshot = this.composition.getSnapshot()\n\n    Array.from(this.editor.filters).forEach((filter) => {\n      const { document, selectedRange } = snapshot\n      snapshot = filter.call(this.editor, snapshot) || {}\n      if (!snapshot.document) {\n        snapshot.document = document\n      }\n      if (!snapshot.selectedRange) {\n        snapshot.selectedRange = selectedRange\n      }\n    })\n\n    if (!snapshotsAreEqual(snapshot, this.composition.getSnapshot())) {\n      return this.composition.loadSnapshot(snapshot)\n    }\n  }\n\n  // Private\n\n  updateInputElement() {\n    const element = this.compositionController.getSerializableElement()\n    const value = serializeToContentType(element, \"text/html\")\n    return this.editorElement.setFormValue(value)\n  }\n\n  notifyEditorElement(message, data) {\n    switch (message) {\n      case \"document-change\":\n        this.documentChangedSinceLastRender = true\n        break\n      case \"render\":\n        if (this.documentChangedSinceLastRender) {\n          this.documentChangedSinceLastRender = false\n          this.notifyEditorElement(\"change\")\n        }\n        break\n      case \"change\":\n      case \"attachment-add\":\n      case \"attachment-edit\":\n      case \"attachment-remove\":\n        this.updateInputElement()\n        break\n    }\n\n    return this.editorElement.notify(message, data)\n  }\n\n  removeAttachment(attachment) {\n    this.editor.recordUndoEntry(\"Delete Attachment\")\n    this.composition.removeAttachment(attachment)\n    return this.render()\n  }\n\n  recordFormattingUndoEntry(attributeName) {\n    const blockConfig = getBlockConfig(attributeName)\n    const locationRange = this.selectionManager.getLocationRange()\n    if (blockConfig || !rangeIsCollapsed(locationRange)) {\n      return this.editor.recordUndoEntry(\"Formatting\", { context: this.getUndoContext(), consolidatable: true })\n    }\n  }\n\n  recordTypingUndoEntry() {\n    return this.editor.recordUndoEntry(\"Typing\", {\n      context: this.getUndoContext(this.currentAttributes),\n      consolidatable: true,\n    })\n  }\n\n  getUndoContext(...context) {\n    return [ this.getLocationContext(), this.getTimeContext(), ...Array.from(context) ]\n  }\n\n  getLocationContext() {\n    const locationRange = this.selectionManager.getLocationRange()\n    if (rangeIsCollapsed(locationRange)) {\n      return locationRange[0].index\n    } else {\n      return locationRange\n    }\n  }\n\n  getTimeContext() {\n    if (config.undo.interval > 0) {\n      return Math.floor(new Date().getTime() / config.undo.interval)\n    } else {\n      return 0\n    }\n  }\n\n  isFocused() {\n    return this.editorElement === this.editorElement.ownerDocument?.activeElement\n  }\n\n  // Detect \"Cursor disappears sporadically\" Firefox bug.\n  // - https://bugzilla.mozilla.org/show_bug.cgi?id=226301\n  isFocusedInvisibly() {\n    return this.isFocused() && !this.getLocationRange()\n  }\n\n  get actions() {\n    return this.constructor.actions\n  }\n}\n\nEditorController.proxyMethod(\"getSelectionManager().setLocationRange\")\nEditorController.proxyMethod(\"getSelectionManager().getLocationRange\")\n", "import * as config from \"trix/config\"\n\nimport { installDefaultCSSForTagName } from \"trix/core/helpers\"\n\ninstallDefaultCSSForTagName(\"trix-toolbar\", `\\\n%t {\n  display: block;\n}\n\n%t {\n  white-space: nowrap;\n}\n\n%t [data-trix-dialog] {\n  display: none;\n}\n\n%t [data-trix-dialog][data-trix-active] {\n  display: block;\n}\n\n%t [data-trix-dialog] [data-trix-validate]:invalid {\n  background-color: #ffdddd;\n}`)\n\nexport default class TrixToolbarElement extends HTMLElement {\n\n  // Element lifecycle\n\n  connectedCallback() {\n    if (this.innerHTML === \"\") {\n      this.innerHTML = config.toolbar.getDefaultHTML()\n    }\n  }\n}\n", "import * as config from \"trix/config\"\n\nimport {\n  findClosestElementFromNode,\n  handleEvent,\n  handleEventOnce,\n  installDefaultCSSForTagName,\n  makeElement,\n  triggerEvent,\n} from \"trix/core/helpers\"\n\nimport { attachmentSelector } from \"trix/config/attachments\"\nimport EditorController from \"trix/controllers/editor_controller\"\nimport \"trix/elements/trix_toolbar_element\"\n\nlet id = 0\n\n// Contenteditable support helpers\n\nconst autofocus = function(element) {\n  if (!document.querySelector(\":focus\")) {\n    if (element.hasAttribute(\"autofocus\") && document.querySelector(\"[autofocus]\") === element) {\n      return element.focus()\n    }\n  }\n}\n\nconst makeEditable = function(element) {\n  if (element.hasAttribute(\"contenteditable\")) {\n    return\n  }\n  element.setAttribute(\"contenteditable\", \"\")\n  return handleEventOnce(\"focus\", {\n    onElement: element,\n    withCallback() {\n      return configureContentEditable(element)\n    },\n  })\n}\n\nconst configureContentEditable = function(element) {\n  disableObjectResizing(element)\n  return setDefaultParagraphSeparator(element)\n}\n\nconst disableObjectResizing = function(element) {\n  if (document.queryCommandSupported?.(\"enableObjectResizing\")) {\n    document.execCommand(\"enableObjectResizing\", false, false)\n    return handleEvent(\"mscontrolselect\", { onElement: element, preventDefault: true })\n  }\n}\n\nconst setDefaultParagraphSeparator = function(element) {\n  if (document.queryCommandSupported?.(\"DefaultParagraphSeparator\")) {\n    const { tagName } = config.blockAttributes.default\n    if ([ \"div\", \"p\" ].includes(tagName)) {\n      return document.execCommand(\"DefaultParagraphSeparator\", false, tagName)\n    }\n  }\n}\n\n// Accessibility helpers\n\nconst addAccessibilityRole = function(element) {\n  if (element.hasAttribute(\"role\")) {\n    return\n  }\n  return element.setAttribute(\"role\", \"textbox\")\n}\n\nconst ensureAriaLabel = function(element) {\n  if (element.hasAttribute(\"aria-label\") || element.hasAttribute(\"aria-labelledby\")) {\n    return\n  }\n\n  const update = function() {\n    const texts = Array.from(element.labels).map((label) => {\n      if (!label.contains(element)) return label.textContent\n    }).filter(text => text)\n\n    const text = texts.join(\" \")\n    if (text) {\n      return element.setAttribute(\"aria-label\", text)\n    } else {\n      return element.removeAttribute(\"aria-label\")\n    }\n  }\n  update()\n  return handleEvent(\"focus\", { onElement: element, withCallback: update })\n}\n\n// Style\n\nconst cursorTargetStyles = (function() {\n  if (config.browser.forcesObjectResizing) {\n    return {\n      display: \"inline\",\n      width: \"auto\",\n    }\n  } else {\n    return {\n      display: \"inline-block\",\n      width: \"1px\",\n    }\n  }\n})()\n\ninstallDefaultCSSForTagName(\"trix-editor\", `\\\n%t {\n    display: block;\n}\n\n%t:empty::before {\n    content: attr(placeholder);\n    color: graytext;\n    cursor: text;\n    pointer-events: none;\n    white-space: pre-line;\n}\n\n%t a[contenteditable=false] {\n    cursor: text;\n}\n\n%t img {\n    max-width: 100%;\n    height: auto;\n}\n\n%t ${attachmentSelector} figcaption textarea {\n    resize: none;\n}\n\n%t ${attachmentSelector} figcaption textarea.trix-autoresize-clone {\n    position: absolute;\n    left: -9999px;\n    max-height: 0px;\n}\n\n%t ${attachmentSelector} figcaption[data-trix-placeholder]:empty::before {\n    content: attr(data-trix-placeholder);\n    color: graytext;\n}\n\n%t [data-trix-cursor-target] {\n    display: ${cursorTargetStyles.display} !important;\n    width: ${cursorTargetStyles.width} !important;\n    padding: 0 !important;\n    margin: 0 !important;\n    border: none !important;\n}\n\n%t [data-trix-cursor-target=left] {\n    vertical-align: top !important;\n    margin-left: -1px !important;\n}\n\n%t [data-trix-cursor-target=right] {\n    vertical-align: bottom !important;\n    margin-right: -1px !important;\n}`)\n\nclass ElementInternalsDelegate {\n  #internals\n\n  constructor(element) {\n    this.element = element\n    this.#internals = element.attachInternals()\n  }\n\n  connectedCallback() {\n    this.#validate()\n  }\n\n  disconnectedCallback() {\n  }\n\n  get labels() {\n    return this.#internals.labels\n  }\n\n  get disabled() {\n    return this.element.inputElement?.disabled\n  }\n\n  set disabled(value) {\n    this.element.toggleAttribute(\"disabled\", value)\n  }\n\n  get required() {\n    return this.element.hasAttribute(\"required\")\n  }\n\n  set required(value) {\n    this.element.toggleAttribute(\"required\", value)\n    this.#validate()\n  }\n\n  get validity() {\n    return this.#internals.validity\n  }\n\n  get validationMessage() {\n    return this.#internals.validationMessage\n  }\n\n  get willValidate() {\n    return this.#internals.willValidate\n  }\n\n  setFormValue(value) {\n    this.#validate()\n  }\n\n  checkValidity() {\n    return this.#internals.checkValidity()\n  }\n\n  reportValidity() {\n    return this.#internals.reportValidity()\n  }\n\n  setCustomValidity(validationMessage) {\n    this.#validate(validationMessage)\n  }\n\n  #validate(customValidationMessage = \"\") {\n    const { required, value } = this.element\n    const valueMissing = required && !value\n    const customError = !!customValidationMessage\n    const input = makeElement(\"input\", { required })\n    const validationMessage = customValidationMessage || input.validationMessage\n\n    this.#internals.setValidity({ valueMissing, customError }, validationMessage)\n  }\n}\n\nclass LegacyDelegate {\n  #focusHandler\n\n  constructor(element) {\n    this.element = element\n  }\n\n  connectedCallback() {\n    this.#focusHandler = ensureAriaLabel(this.element)\n    window.addEventListener(\"reset\", this.#resetBubbled, false)\n    window.addEventListener(\"click\", this.#clickBubbled, false)\n  }\n\n  disconnectedCallback() {\n    this.#focusHandler?.destroy()\n    window.removeEventListener(\"reset\", this.#resetBubbled, false)\n    window.removeEventListener(\"click\", this.#clickBubbled, false)\n  }\n\n  get labels() {\n    const labels = []\n    if (this.element.id && this.element.ownerDocument) {\n      labels.push(...Array.from(this.element.ownerDocument.querySelectorAll(`label[for='${this.element.id}']`) || []))\n    }\n\n    const label = findClosestElementFromNode(this.element, { matchingSelector: \"label\" })\n    if (label) {\n      if ([ this.element, null ].includes(label.control)) {\n        labels.push(label)\n      }\n    }\n\n    return labels\n  }\n\n  get disabled() {\n    console.warn(\"This browser does not support the [disabled] attribute for trix-editor elements.\")\n\n    return false\n  }\n\n  set disabled(value) {\n    console.warn(\"This browser does not support the [disabled] attribute for trix-editor elements.\")\n  }\n\n  get required() {\n    console.warn(\"This browser does not support the [required] attribute for trix-editor elements.\")\n\n    return false\n  }\n\n  set required(value) {\n    console.warn(\"This browser does not support the [required] attribute for trix-editor elements.\")\n  }\n\n  get validity() {\n    console.warn(\"This browser does not support the validity property for trix-editor elements.\")\n    return null\n  }\n\n  get validationMessage() {\n    console.warn(\"This browser does not support the validationMessage property for trix-editor elements.\")\n\n    return \"\"\n  }\n\n  get willValidate() {\n    console.warn(\"This browser does not support the willValidate property for trix-editor elements.\")\n\n    return false\n  }\n\n  setFormValue(value) {\n  }\n\n  checkValidity() {\n    console.warn(\"This browser does not support checkValidity() for trix-editor elements.\")\n\n    return true\n  }\n\n  reportValidity() {\n    console.warn(\"This browser does not support reportValidity() for trix-editor elements.\")\n\n    return true\n  }\n\n  setCustomValidity(validationMessage) {\n    console.warn(\"This browser does not support setCustomValidity(validationMessage) for trix-editor elements.\")\n  }\n\n  #resetBubbled = (event) => {\n    if (event.defaultPrevented) return\n    if (event.target !== this.element.form) return\n    this.element.reset()\n  }\n\n  #clickBubbled = (event) => {\n    if (event.defaultPrevented) return\n    if (this.element.contains(event.target)) return\n\n    const label = findClosestElementFromNode(event.target, { matchingSelector: \"label\" })\n    if (!label) return\n\n    if (!Array.from(this.labels).includes(label)) return\n\n    this.element.focus()\n  }\n}\n\nexport default class TrixEditorElement extends HTMLElement {\n  static formAssociated = \"ElementInternals\" in window\n\n  #delegate\n\n  constructor() {\n    super()\n    this.#delegate = this.constructor.formAssociated ?\n      new ElementInternalsDelegate(this) :\n      new LegacyDelegate(this)\n  }\n\n  // Properties\n\n  get trixId() {\n    if (this.hasAttribute(\"trix-id\")) {\n      return this.getAttribute(\"trix-id\")\n    } else {\n      this.setAttribute(\"trix-id\", ++id)\n      return this.trixId\n    }\n  }\n\n  get labels() {\n    return this.#delegate.labels\n  }\n\n  get disabled() {\n    return this.#delegate.disabled\n  }\n\n  set disabled(value) {\n    this.#delegate.disabled = value\n  }\n\n  get required() {\n    return this.#delegate.required\n  }\n\n  set required(value) {\n    this.#delegate.required = value\n  }\n\n  get validity() {\n    return this.#delegate.validity\n  }\n\n  get validationMessage() {\n    return this.#delegate.validationMessage\n  }\n\n  get willValidate() {\n    return this.#delegate.willValidate\n  }\n\n  get type() {\n    return this.localName\n  }\n\n  get toolbarElement() {\n    if (this.hasAttribute(\"toolbar\")) {\n      return this.ownerDocument?.getElementById(this.getAttribute(\"toolbar\"))\n    } else if (this.parentNode) {\n      const toolbarId = `trix-toolbar-${this.trixId}`\n      this.setAttribute(\"toolbar\", toolbarId)\n      const element = makeElement(\"trix-toolbar\", { id: toolbarId })\n      this.parentNode.insertBefore(element, this)\n      return element\n    } else {\n      return undefined\n    }\n  }\n\n  get form() {\n    return this.inputElement?.form\n  }\n\n  get inputElement() {\n    if (this.hasAttribute(\"input\")) {\n      return this.ownerDocument?.getElementById(this.getAttribute(\"input\"))\n    } else if (this.parentNode) {\n      const inputId = `trix-input-${this.trixId}`\n      this.setAttribute(\"input\", inputId)\n      const element = makeElement(\"input\", { type: \"hidden\", id: inputId })\n      this.parentNode.insertBefore(element, this.nextElementSibling)\n      return element\n    } else {\n      return undefined\n    }\n  }\n\n  get editor() {\n    return this.editorController?.editor\n  }\n\n  get name() {\n    return this.inputElement?.name\n  }\n\n  get value() {\n    return this.inputElement?.value\n  }\n\n  set value(defaultValue) {\n    this.defaultValue = defaultValue\n    this.editor?.loadHTML(this.defaultValue)\n  }\n\n  // Controller delegate methods\n\n  notify(message, data) {\n    if (this.editorController) {\n      return triggerEvent(`trix-${message}`, { onElement: this, attributes: data })\n    }\n  }\n\n  setFormValue(value) {\n    if (this.inputElement) {\n      this.inputElement.value = value\n      this.#delegate.setFormValue(value)\n    }\n  }\n\n  // Element lifecycle\n\n  connectedCallback() {\n    if (!this.hasAttribute(\"data-trix-internal\")) {\n      makeEditable(this)\n      addAccessibilityRole(this)\n\n      if (!this.editorController) {\n        triggerEvent(\"trix-before-initialize\", { onElement: this })\n        this.editorController = new EditorController({\n          editorElement: this,\n          html: this.defaultValue = this.value,\n        })\n        requestAnimationFrame(() => triggerEvent(\"trix-initialize\", { onElement: this }))\n      }\n      this.editorController.registerSelectionManager()\n      this.#delegate.connectedCallback()\n      autofocus(this)\n    }\n  }\n\n  disconnectedCallback() {\n    this.editorController?.unregisterSelectionManager()\n    this.#delegate.disconnectedCallback()\n  }\n\n  // Form support\n\n  checkValidity() {\n    return this.#delegate.checkValidity()\n  }\n\n  reportValidity() {\n    return this.#delegate.reportValidity()\n  }\n\n  setCustomValidity(validationMessage) {\n    this.#delegate.setCustomValidity(validationMessage)\n  }\n\n  formDisabledCallback(disabled) {\n    if (this.inputElement) {\n      this.inputElement.disabled = disabled\n    }\n    this.toggleAttribute(\"contenteditable\", !disabled)\n  }\n\n  formResetCallback() {\n    this.reset()\n  }\n\n  reset() {\n    this.value = this.defaultValue\n  }\n}\n", "import { version } from \"../../package.json\"\n\nimport * as config from \"trix/config\"\nimport * as core from \"trix/core\"\nimport * as models from \"trix/models\"\nimport * as views from \"trix/views\"\nimport * as controllers from \"trix/controllers\"\nimport * as observers from \"trix/observers\"\nimport * as operations from \"trix/operations\"\nimport * as elements from \"trix/elements\"\nimport * as filters from \"trix/filters\"\n\nconst Trix = {\n  VERSION: version,\n  config,\n  core,\n  models,\n  views,\n  controllers,\n  observers,\n  operations,\n  elements,\n  filters\n}\n\n// Expose models under the Trix constant for compatibility with v1\nObject.assign(Trix, models)\n\nfunction start() {\n  if (!customElements.get(\"trix-toolbar\")) {\n    customElements.define(\"trix-toolbar\", elements.TrixToolbarElement)\n  }\n\n  if (!customElements.get(\"trix-editor\")) {\n    customElements.define(\"trix-editor\", elements.TrixEditorElement)\n  }\n}\n\nwindow.Trix = Trix\nsetTimeout(start, 0)\n\nexport default Trix\n", "const S3Uploader = function (entries, onViewError) {\n  entries.forEach(entry => {\n    let xhr = new XMLHttpRequest()\n    onViewError(() => xhr.abort())\n    xhr.onload = () => xhr.status === 200 ? entry.progress(100) : entry.error()\n    xhr.onerror = () => entry.error()\n\n    xhr.upload.addEventListener(\"progress\", (event) => {\n      if (event.lengthComputable) {\n        let percent = Math.round((event.loaded / event.total) * 100)\n        if (percent < 100) { entry.progress(percent) }\n      }\n    })\n\n    let url = entry.meta.url\n    xhr.open(\"PUT\", url, true)\n    xhr.send(entry.file)\n  })\n}\nexport default S3Uploader\n", "const LocaleInLocalStorage = {\n  mounted() {\n    if (sessionStorage.getItem('locale')) {\n      this.pushEventTo(this.el, \"got-locale\", { locale: sessionStorage.getItem('locale') })\n    }\n\n    this.handleEvent(\"set-locale\", ({ locale }) =>\n      sessionStorage.setItem(\"locale\", locale)\n    )\n  }\n}\n\nexport default LocaleInLocalStorage\n"],
  "mappings": "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AK5DA,GAAa,SAAWZ,GAKxBY,GAAa,aAAeA,GAKR,OAAOd,GAAvB,MACFA,GAAO,QAAUc,sCC1UnB,SAASkB,EAAgBC,EAAQ,CAC/B,aAEA,IAAIC,EAAiB,CACnB,wBAAyB,CACvB,aAAc,GACd,SAAU,wDACV,KAAM,SACR,EACA,WAAY,CACV,aAAc,GACd,SAAU,kCACV,KAAM,SACR,EACA,eAAgB,CACd,aAAc,GACd,SAAU,4JACV,KAAM,QACR,EACA,kBAAmB,CACjB,aAAc,GACd,SAAU,uKACV,KAAM,SACR,EACA,qBAAsB,CACpB,aAAc,GACd,SAAU,oIACV,KAAM,SACR,EACA,YAAa,CACX,aAAc,GACd,SAAU,0JACV,KAAM,SACR,EACA,iBAAkB,CAChB,aAAc,GACd,SAAU,gCACV,KAAM,SACR,EACA,mBAAoB,CAClB,aAAc,GACd,SAAU,sCACV,KAAM,SACR,EACA,mBAAoB,CAClB,aAAc,GACd,SAAU,iCACV,KAAM,SACR,EACA,mCAAoC,CAClC,aAAc,GACd,SAAU,sEACV,KAAM,SACR,EACA,0BAA2B,CACzB,aAAc,GACd,SAAU,mDACV,KAAM,SACR,EACA,wBAAyB,CACvB,aAAc,GACd,SAAU,+CACV,KAAM,SACR,EACA,cAAe,CACb,aAAc,GACd,SAAU,oCACV,KAAM,SACR,EACA,OAAQ,CACN,aAAc,GACd,SAAU,6BACV,KAAM,SACR,EACA,eAAgB,CACd,aAAc,GACd,SAAU,6BACV,KAAM,SACR,EACA,aAAc,CACZ,aAAc,GACd,SAAU,6CACV,KAAM,SACR,EACA,UAAW,CACT,aAAc,GACd,SAAU,mCACV,KAAM,SACR,EACA,kBAAmB,CACjB,aAAc,GACd,SAAU,kEACV,KAAM,SACR,EACA,oBAAqB,CACnB,aAAc,GACd,SAAU,kDACV,KAAM,SACR,EACA,qCAAsC,CACpC,aAAc,GACd,SAAU,oEACV,KAAM,SACR,EACA,iBAAkB,CAChB,aAAc,GACd,SAAU,gDACV,KAAM,SACR,EACA,8BAA+B,CAC7B,aAAc,GACd,SAAU,6EACV,KAAM,SACR,EACA,WAAY,CACV,aAAc,GACd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",
  "names": ["require_topbar", "__commonJSMin", "exports", "module", "window", "document", "lastTime", "vendors", "callback", "element", "currTime", "timeToCall", "id", "canvas", "currentProgress", "showing", "progressTimerId", "fadeTimerId", "delayTimerId", "addEvent", "elem", "type", "handler", "options", "repaint", "ctx", "lineGradient", "stop", "createCanvas", "style", "topbar", "opts", "key", "delay", "loop", "to", "require_diff", "__commonJSMin", "exports", "module", "DIFF_DELETE", "DIFF_INSERT", "DIFF_EQUAL", "diff_main", "text1", "text2", "cursor_pos", "cleanup", "_fix_unicode", "editdiff", "find_cursor_edit_diff", "commonlength", "diff_commonPrefix", "commonprefix", "diff_commonSuffix", "commonsuffix", "diffs", "diff_compute_", "diff_cleanupMerge", "diff_cleanupSemantic", "longtext", "shorttext", "i", "hm", "diff_halfMatch_", "text1_a", "text1_b", "text2_a", "text2_b", "mid_common", "diffs_a", "diffs_b", "diff_bisect_", "text1_length", "text2_length", "max_d", "v_offset", "v_length", "v1", "v2", "x", "delta", "front", "k1start", "k1end", "k2start", "k2end", "d", "k1", "k1_offset", "x1", "y1", "k2_offset", "x2", "diff_bisectSplit_", "k2", "y2", "y", "text1a", "text2a", "text1b", "text2b", "diffsb", "pointermin", "pointermax", "pointermid", "pointerstart", "is_surrogate_pair_start", "diff_commonOverlap_", "text_length", "best", "length", "pattern", "found", "pointerend", "is_surrogate_pair_end", "diff_halfMatchI_", "seed", "j", "best_common", "best_longtext_a", "best_longtext_b", "best_shorttext_a", "best_shorttext_b", "prefixLength", "suffixLength", "hm1", "hm2", "changes", "equalities", "equalitiesLength", "lastequality", "pointer", "length_insertions1", "length_deletions1", "length_insertions2", "length_deletions2", "diff_cleanupSemanticLossless", "deletion", "insertion", "overlap_length1", "overlap_length2", "nonAlphaNumericRegex_", "whitespaceRegex_", "linebreakRegex_", "blanklineEndRegex_", "blanklineStartRegex_", "diff_cleanupSemanticScore_", "one", "two", "char1", "char2", "nonAlphaNumeric1", "nonAlphaNumeric2", "whitespace1", "whitespace2", "lineBreak1", "lineBreak2", "blankLine1", "blankLine2", "equality1", "edit", "equality2", "commonOffset", "commonString", "bestEquality1", "bestEdit", "bestEquality2", "bestScore", "score", "fix_unicode", "count_delete", "count_insert", "text_delete", "text_insert", "previous_equality", "ends_with_pair_start", "stray", "k", "starts_with_pair_end", "n", "charCode", "str", "remove_empty_tuples", "tuples", "ret", "make_edit_splice", "before", "oldMiddle", "newMiddle", "after", "oldText", "newText", "oldRange", "newRange", "oldLength", "newLength", "oldCursor", "oldBefore", "oldAfter", "maybeNewCursor", "editBefore", "newCursor", "newBefore", "newAfter", "oldPrefix", "newPrefix", "editAfter", "cursor", "oldSuffix", "newSuffix", "replaceRange", "diff", "require_lodash", "__commonJSMin", "exports", "module", "LARGE_ARRAY_SIZE", "HASH_UNDEFINED", "MAX_SAFE_INTEGER", "argsTag", "arrayTag", "boolTag", "dateTag", "errorTag", "funcTag", "genTag", "mapTag", "numberTag", "objectTag", "promiseTag", "regexpTag", "setTag", "stringTag", "symbolTag", "weakMapTag", "arrayBufferTag", "dataViewTag", "float32Tag", "float64Tag", "int8Tag", "int16Tag", "int32Tag", "uint8Tag", "uint8ClampedTag", "uint16Tag", "uint32Tag", "reRegExpChar", "reFlags", "reIsHostCtor", "reIsUint", "cloneableTags", "freeGlobal", "freeSelf", "root", "freeExports", "freeModule", "moduleExports", "addMapEntry", "map", "pair", "addSetEntry", "set", "value", "arrayEach", "array", "iteratee", "index", "length", "arrayPush", "values", "offset", "arrayReduce", "accumulator", "initAccum", "baseTimes", "n", "result", "getValue", "object", "key", "isHostObject", "mapToArray", "overArg", "func", "transform", "arg", "setToArray", "arrayProto", "funcProto", "objectProto", "coreJsData", "maskSrcKey", "uid", "funcToString", "hasOwnProperty", "objectToString", "reIsNative", "Buffer", "Symbol", "Uint8Array", "getPrototype", "objectCreate", "propertyIsEnumerable", "splice", "nativeGetSymbols", "nativeIsBuffer", "nativeKeys", "DataView", "getNative", "Map", "Promise", "Set", "WeakMap", "nativeCreate", "dataViewCtorString", "toSource", "mapCtorString", "promiseCtorString", "setCtorString", "weakMapCtorString", "symbolProto", "symbolValueOf", "Hash", "entries", "entry", "hashClear", "hashDelete", "hashGet", "data", "hashHas", "hashSet", "ListCache", "listCacheClear", "listCacheDelete", "assocIndexOf", "lastIndex", "listCacheGet", "listCacheHas", "listCacheSet", "MapCache", "mapCacheClear", "mapCacheDelete", "getMapData", "mapCacheGet", "mapCacheHas", "mapCacheSet", "Stack", "stackClear", "stackDelete", "stackGet", "stackHas", "stackSet", "cache", "pairs", "arrayLikeKeys", "inherited", "isArray", "isArguments", "skipIndexes", "isIndex", "assignValue", "objValue", "eq", "baseAssign", "source", "copyObject", "keys", "baseClone", "isDeep", "isFull", "customizer", "stack", "isObject", "isArr", "initCloneArray", "copyArray", "tag", "getTag", "isFunc", "isBuffer", "cloneBuffer", "initCloneObject", "copySymbols", "initCloneByTag", "stacked", "props", "getAllKeys", "subValue", "baseCreate", "proto", "baseGetAllKeys", "keysFunc", "symbolsFunc", "baseGetTag", "baseIsNative", "isMasked", "pattern", "isFunction", "baseKeys", "isPrototype", "buffer", "cloneArrayBuffer", "arrayBuffer", "cloneDataView", "dataView", "cloneMap", "cloneFunc", "cloneRegExp", "regexp", "cloneSet", "cloneSymbol", "symbol", "cloneTypedArray", "typedArray", "newValue", "getSymbols", "isKeyable", "stubArray", "Ctor", "ctorString", "type", "cloneDeep", "other", "isArrayLikeObject", "isArrayLike", "isLength", "isObjectLike", "stubFalse", "require_lodash", "__commonJSMin", "exports", "module", "LARGE_ARRAY_SIZE", "HASH_UNDEFINED", "COMPARE_PARTIAL_FLAG", "COMPARE_UNORDERED_FLAG", "MAX_SAFE_INTEGER", "argsTag", "arrayTag", "asyncTag", "boolTag", "dateTag", "errorTag", "funcTag", "genTag", "mapTag", "numberTag", "nullTag", "objectTag", "promiseTag", "proxyTag", "regexpTag", "setTag", "stringTag", "symbolTag", "undefinedTag", "weakMapTag", "arrayBufferTag", "dataViewTag", "float32Tag", "float64Tag", "int8Tag", "int16Tag", "int32Tag", "uint8Tag", "uint8ClampedTag", "uint16Tag", "uint32Tag", "reRegExpChar", "reIsHostCtor", "reIsUint", "typedArrayTags", "freeGlobal", "freeSelf", "root", "freeExports", "freeModule", "moduleExports", "freeProcess", "nodeUtil", "nodeIsTypedArray", "arrayFilter", "array", "predicate", "index", "length", "resIndex", "result", "value", "arrayPush", "values", "offset", "arraySome", "baseTimes", "n", "iteratee", "baseUnary", "func", "cacheHas", "cache", "key", "getValue", "object", "mapToArray", "map", "overArg", "transform", "arg", "setToArray", "set", "arrayProto", "funcProto", "objectProto", "coreJsData", "funcToString", "hasOwnProperty", "maskSrcKey", "uid", "nativeObjectToString", "reIsNative", "Buffer", "Symbol", "Uint8Array", "propertyIsEnumerable", "splice", "symToStringTag", "nativeGetSymbols", "nativeIsBuffer", "nativeKeys", "DataView", "getNative", "Map", "Promise", "Set", "WeakMap", "nativeCreate", "dataViewCtorString", "toSource", "mapCtorString", "promiseCtorString", "setCtorString", "weakMapCtorString", "symbolProto", "symbolValueOf", "Hash", "entries", "entry", "hashClear", "hashDelete", "hashGet", "data", "hashHas", "hashSet", "ListCache", "listCacheClear", "listCacheDelete", "assocIndexOf", "lastIndex", "listCacheGet", "listCacheHas", "listCacheSet", "MapCache", "mapCacheClear", "mapCacheDelete", "getMapData", "mapCacheGet", "mapCacheHas", "mapCacheSet", "size", "SetCache", "setCacheAdd", "setCacheHas", "Stack", "stackClear", "stackDelete", "stackGet", "stackHas", "stackSet", "pairs", "arrayLikeKeys", "inherited", "isArr", "isArray", "isArg", "isArguments", "isBuff", "isBuffer", "isType", "isTypedArray", "skipIndexes", "isIndex", "eq", "baseGetAllKeys", "keysFunc", "symbolsFunc", "baseGetTag", "getRawTag", "objectToString", "baseIsArguments", "isObjectLike", "baseIsEqual", "other", "bitmask", "customizer", "stack", "baseIsEqualDeep", "equalFunc", "objIsArr", "othIsArr", "objTag", "getTag", "othTag", "objIsObj", "othIsObj", "isSameTag", "equalArrays", "equalByTag", "objIsWrapped", "othIsWrapped", "objUnwrapped", "othUnwrapped", "equalObjects", "baseIsNative", "isObject", "isMasked", "pattern", "isFunction", "baseIsTypedArray", "isLength", "baseKeys", "isPrototype", "isPartial", "arrLength", "othLength", "stacked", "seen", "arrValue", "othValue", "compared", "othIndex", "tag", "convert", "objProps", "getAllKeys", "objLength", "othProps", "skipCtor", "objValue", "objCtor", "othCtor", "keys", "getSymbols", "isKeyable", "isOwn", "unmasked", "symbol", "stubArray", "Ctor", "ctorString", "type", "proto", "isArrayLike", "stubFalse", "isEqual", "cloneDeep", "isEqual", "AttributeMap", "compose", "a", "b", "keepNull", "attributes", "copy", "key", "diff", "attrs", "invert", "attr", "base", "baseInverted", "memo", "transform", "priority", "exports", "Op", "length", "op", "exports", "Op_1", "Iterator", "ops", "length", "nextOp", "offset", "opLength", "retOp", "op", "index", "next", "rest", "exports", "diff", "cloneDeep", "isEqual", "AttributeMap_1", "exports", "Op_1", "OpIterator_1", "NULL_CHARACTER", "getEmbedTypeAndData", "a", "b", "embedType", "Delta", "ops", "handler", "arg", "attributes", "newOp", "length", "index", "lastOp", "predicate", "passed", "failed", "op", "initialValue", "elem", "start", "end", "iter", "nextOp", "other", "thisIter", "otherIter", "firstOther", "firstLeft", "delta", "thisOp", "otherOp", "action", "thisData", "otherData", "rest", "cursor", "strings", "prep", "retDelta", "diffResult", "component", "opLength", "newline", "line", "i", "base", "inverted", "baseIndex", "baseOp", "slice", "opData", "baseOpData", "priority", "transformedData", "offset", "nextType", "module", "require_eventemitter3", "__commonJSMin", "exports", "module", "has", "prefix", "Events", "EE", "fn", "context", "once", "addListener", "emitter", "event", "listener", "evt", "clearEvent", "EventEmitter", "names", "events", "name", "handlers", "i", "l", "ee", "listeners", "a1", "a2", "a3", "a4", "a5", "len", "args", "length", "j", "getDefaultOpts", "simple", "defaultOptions", "ret", "opt", "allOptionsOn", "options", "showdown", "parsers", "extensions", "globalOptions", "setFlavor", "flavor", "key", "value", "name", "preset", "option", "func", "ext", "validExtension", "validate", "extension", "errMsg", "i", "baseMsg", "type", "ln", "validateExtension", "a", "getType", "obj", "callback", "prop", "s", "escapeCharactersCallback", "wholeMatch", "m1", "charCodeToEscape", "text", "charsToEscape", "afterBackslash", "regexString", "regex", "txt", "rgxFindMatchPos", "str", "left", "right", "flags", "f", "g", "x", "l", "pos", "t", "m", "start", "end", "matchPos", "results", "replacement", "repStr", "finalStr", "lng", "bits", "fromIndex", "indexOf", "index", "mail", "encode", "ch", "r", "targetLength", "padString", "msg", "converterOptions", "langExtensions", "outputModifiers", "listeners", "setConvFlavor", "metadata", "_constructor", "gOpt", "_parseExtension", "legacyExtensionLoading", "validExt", "listen", "valid", "rTrimInputText", "rsp", "rgx", "evtName", "globals", "ei", "nText", "src", "HTMLParser", "doc", "substitutePreCodeTags", "clean", "nodes", "mdDoc", "node", "n", "child", "pres", "presPH", "content", "language", "classes", "c", "matches", "extensionName", "ii", "raw", "format", "writeAnchorTag", "linkText", "linkId", "url", "m5", "m6", "title", "result", "wm", "st", "escape", "mentions", "username", "lnk", "target", "simpleURLRegex", "simpleURLRegex2", "delimUrlRegex", "simpleMailRegex", "delimMailRegex", "replaceLink", "leadingMagicChars", "link", "m2", "m3", "trailingPunctuation", "trailingMagicChars", "lnkTxt", "append", "lmc", "tmc", "replaceMail", "b", "href", "bq", "pre", "pattern", "codeblock", "nextChar", "doctype", "doctypeParsed", "charset", "lang", "meta", "leadingText", "numSpaces", "emojiRgx", "emojiCode", "tags", "comments", "delim", "repFunc", "match", "blockText", "blockTags", "inside", "opTagPos", "rgx1", "patLeft", "patRight", "subTexts", "newSubText1", "hashHTMLSpan", "html", "repText", "limit", "num", "headerLevelStart", "setextRegexH1", "setextRegexH2", "spanGamut", "hID", "headerId", "hLevel", "hashBlock", "matchFound", "atxStyle", "hText", "span", "header", "prefix", "inlineRegExp", "crazyRegExp", "base64RegExp", "referenceRegExp", "refShortcutRegExp", "writeImageTagBase64", "altText", "width", "height", "writeImageTag", "gUrls", "gTitles", "gDims", "parseInside", "lead", "processListItems", "listStr", "trimTrailing", "isParagraphed", "m4", "taskbtn", "checked", "item", "bulletStyle", "otp", "wm2", "styleStartNumber", "list", "listType", "res", "parseConsecutiveLists", "olRgx", "ulRgx", "counterRxg", "parseCL", "style", "parseMetadataContents", "wholematch", "grafs", "grafsOut", "grafsOutIt", "codeFlag", "re", "base64Regex", "replaceFunc", "blankLines", "tableRgx", "singeColTblRgx", "parseStyles", "sLine", "parseHeaders", "id", "parseCells", "cell", "subText", "buildTable", "headers", "cells", "tb", "tblLgn", "parseTable", "rawTable", "tableLines", "rawHeaders", "rawStyles", "rawCells", "styles", "row", "charCodeToReplace", "children", "childrenLength", "innerTxt", "headerLevel", "headerMark", "listItems", "listItemsLenght", "listNum", "bullet", "listItemTxt", "childrenLenght", "spansOnly", "tagName", "tableArray", "headings", "rows", "headContent", "allign", "cols", "cellContent", "cellSpacesCount", "strLen", "root", "module", "PolyfillEvent", "eventConstructor", "CustomEvent", "event", "params", "evt", "buildHiddenInput", "name", "value", "input", "handleClick", "element", "targetModifierKey", "to", "method", "csrf", "form", "submit", "target", "e", "phoenixLinkEvent", "message", "closure", "value", "globalSelf", "phxWindow", "global", "DEFAULT_VSN", "SOCKET_STATES", "DEFAULT_TIMEOUT", "WS_CLOSE_NORMAL", "CHANNEL_STATES", "CHANNEL_EVENTS", "TRANSPORTS", "XHR_STATES", "Push", "channel", "event", "payload", "timeout", "status", "callback", "response", "_ref", "h", "Timer", "timerCalc", "Channel", "topic", "params", "socket", "pushEvent", "reason", "ref", "bind", "onClose", "leavePush", "_event", "joinRef", "handledPayload", "eventBindings", "i", "Ajax", "method", "endPoint", "accept", "body", "ontimeout", "req", "resp", "obj", "parentKey", "queryStr", "key", "paramKey", "paramVal", "url", "prefix", "arrayBufferToBase64", "buffer", "binary", "bytes", "len", "LongPoll", "code", "wasClean", "token", "messages", "msg", "opts", "contentType", "onCallerTimeout", "serializer_default", "msg", "callback", "payload", "rawPayload", "join_ref", "ref", "topic", "event", "message", "metaLength", "header", "view", "offset", "char", "combined", "buffer", "kind", "decoder", "joinRefSize", "topicSize", "eventSize", "joinRef", "data", "refSize", "CHANNEL_EVENTS", "Socket", "endPoint", "opts", "DEFAULT_TIMEOUT", "global", "LongPoll", "awaitingConnectionOnPageShow", "phxWindow", "_e", "tries", "closure", "TRANSPORTS", "DEFAULT_VSN", "Timer", "newTransport", "uri", "Ajax", "code", "reason", "params", "startTime", "onMsgRef", "error", "key", "val", "fallbackTransport", "fallbackThreshold", "established", "primaryTransport", "openRef", "errorRef", "fallback", "rtt", "WS_CLOSE_NORMAL", "SOCKET_STATES", "closeCode", "transportBefore", "establishedBefore", "channel", "c", "refs", "chanParams", "chan", "Channel", "result", "newRef", "rawMessage", "i", "dupChannel", "CONSECUTIVE_RELOADS", "MAX_RELOADS", "RELOAD_JITTER_MIN", "RELOAD_JITTER_MAX", "FAILSAFE_JITTER", "PHX_EVENT_CLASSES", "PHX_COMPONENT", "PHX_LIVE_LINK", "PHX_TRACK_STATIC", "PHX_LINK_STATE", "PHX_REF_LOADING", "PHX_REF_SRC", "PHX_REF_LOCK", "PHX_TRACK_UPLOADS", "PHX_UPLOAD_REF", "PHX_PREFLIGHTED_REFS", "PHX_DONE_REFS", "PHX_DROP_TARGET", "PHX_ACTIVE_ENTRY_REFS", "PHX_LIVE_FILE_UPDATED", "PHX_SKIP", "PHX_MAGIC_ID", "PHX_PRUNE", "PHX_CONNECTED_CLASS", "PHX_LOADING_CLASS", "PHX_ERROR_CLASS", "PHX_CLIENT_ERROR_CLASS", "PHX_SERVER_ERROR_CLASS", "PHX_PARENT_ID", "PHX_MAIN", "PHX_ROOT_ID", "PHX_VIEWPORT_TOP", "PHX_VIEWPORT_BOTTOM", "PHX_TRIGGER_ACTION", "PHX_HAS_FOCUSED", "FOCUSABLE_INPUTS", "CHECKABLE_INPUTS", "PHX_HAS_SUBMITTED", "PHX_SESSION", "PHX_VIEW_SELECTOR", "PHX_STICKY", "PHX_STATIC", "PHX_READONLY", "PHX_DISABLED", "PHX_DISABLE_WITH", "PHX_DISABLE_WITH_RESTORE", "PHX_HOOK", "PHX_DEBOUNCE", "PHX_THROTTLE", "PHX_UPDATE", "PHX_STREAM", "PHX_STREAM_REF", "PHX_KEY", "PHX_PRIVATE", "PHX_AUTO_RECOVER", "PHX_LV_DEBUG", "PHX_LV_PROFILE", "PHX_LV_LATENCY_SIM", "PHX_LV_HISTORY_POSITION", "PHX_PROGRESS", "PHX_MOUNTED", "PHX_RELOAD_STATUS", "LOADER_TIMEOUT", "MAX_CHILD_JOIN_ATTEMPTS", "BEFORE_UNLOAD_LOADER_TIMEOUT", "BINDING_PREFIX", "PUSH_TIMEOUT", "DEBOUNCE_TRIGGER", "THROTTLED", "DEBOUNCE_PREV_KEY", "DEFAULTS", "PHX_PENDING_ATTRS", "DYNAMICS", "STATIC", "ROOT", "COMPONENTS", "EVENTS", "REPLY", "TITLE", "TEMPLATES", "STREAM", "EntryUploader", "entry", "config", "liveSocket", "chunk_size", "chunk_timeout", "reason", "_data", "reader", "blob", "e", "logError", "chunk", "msg", "obj", "isCid", "cid", "type", "detectDuplicateIds", "ids", "elems", "i", "len", "debug", "view", "kind", "closure", "val", "clone", "closestPhxBinding", "el", "binding", "borderEl", "isObject", "isEqualObj", "obj1", "obj2", "isEmpty", "x", "maybe", "callback", "channelUploader", "entries", "onError", "resp", "Browser", "localStorage", "namespace", "subkey", "initial", "func", "current", "key", "newVal", "meta", "to", "currentState", "hashEl", "name", "value", "maxAgeSeconds", "expires", "toURL", "flash", "maybeHash", "hash", "browser_default", "DOM", "id", "className", "node", "query", "array", "html", "template", "inputEl", "formId", "inputsOutsideForm", "wantsNewTab", "isDownload", "isTargetBlank", "isTargetNamedTab", "currentLocation", "href", "url", "parentId", "phxUpdate", "updateTypes", "cids", "parentCids", "childrenCids", "parent", "childCID", "childCid", "nodes", "defaultVal", "updateFunc", "existing", "fromEl", "toEl", "attr", "target", "source", "str", "titleEl", "prefix", "suffix", "defaultTitle", "inner", "event", "phxDebounce", "defaultDebounce", "phxThrottle", "defaultThrottle", "asyncFilter", "debounce", "throttle", "timeout", "trigger", "currentCycle", "newKeyDown", "prevKey", "t", "form", "input", "cycle", "phxViewportTop", "phxViewportBottom", "hook", "parents", "opts", "defaultBubble", "eventOpts", "cloned", "exclude", "isIgnored", "sourceAttrs", "sourceValue", "targetAttrs", "focused", "selectionStart", "selectionEnd", "phxTriggerExternal", "container", "toRemove", "childNode", "tagName", "attrs", "retainedAttrs", "newContainer", "op", "existingName", "_name", "_op", "stashedResult", "ops", "_", "existingIndex", "_stashed", "dom_default", "UploadEntry", "fileEl", "file", "isNew", "isActive", "LiveUploader", "autoUpload", "progress", "uploaders", "liveUploaderFileRef", "_LiveUploader", "ref", "formEl", "active", "files", "fileData", "uploadRef", "f", "dataTransfer", "newFiles", "fileInputs", "onComplete", "groupedEntries", "acc", "ARIA", "instance", "classes", "interactiveOnly", "child", "aria_default", "Hooks", "newPreflights", "findScrollContainer", "scrollTop", "scrollContainer", "bottom", "top", "isAtViewportTop", "rect", "isAtViewportBottom", "isWithinViewport", "scrollBefore", "topOverran", "throttleInterval", "pendingOp", "onTopOverrun", "topEvent", "firstChild", "onFirstChildAtTop", "onLastChildAtBottom", "bottomEvent", "lastChild", "_e", "scrollNow", "isScrollingUp", "isScrollingDown", "interval", "lastCallAt", "timer", "args", "now", "remainingTime", "hooks_default", "ElementRef", "phxEvent", "eachCloneCallback", "clonedTree", "disabledVal", "readOnlyVal", "disableRestore", "DOMPostMorphRestorer", "containerBefore", "containerAfter", "updateType", "idsBefore", "idsAfter", "elementsToModify", "previousElementId", "elementToModify", "previousElem", "elem", "elemId", "DOCUMENT_FRAGMENT_NODE", "morphAttrs", "fromNode", "toNode", "toNodeAttrs", "attrName", "attrNamespaceURI", "attrValue", "fromValue", "fromNodeAttrs", "d", "range", "NS_XHTML", "doc", "HAS_TEMPLATE_SUPPORT", "HAS_RANGE_SUPPORT", "createFragmentFromTemplate", "createFragmentFromRange", "fragment", "createFragmentFromWrap", "toElement", "compareNodeNames", "fromNodeName", "toNodeName", "fromCodeStart", "toCodeStart", "createElementNS", "namespaceURI", "moveChildren", "curChild", "nextChild", "syncBooleanAttrProp", "specialElHandlers", "parentNode", "parentName", "newValue", "oldValue", "selectedIndex", "optgroup", "nodeName", "ELEMENT_NODE", "DOCUMENT_FRAGMENT_NODE$1", "TEXT_NODE", "COMMENT_NODE", "noop", "defaultGetNodeKey", "morphdomFactory", "options", "toNodeHtml", "getNodeKey", "onBeforeNodeAdded", "onNodeAdded", "onBeforeElUpdated", "onElUpdated", "onBeforeNodeDiscarded", "onNodeDiscarded", "onBeforeElChildrenUpdated", "skipFromChildren", "addChild", "childrenOnly", "fromNodesLookup", "keyedRemovalList", "addKeyedRemoval", "walkDiscardedChildNodes", "skipKeyedNodes", "removeNode", "indexTree", "handleNodeAdded", "nextSibling", "unmatchedFromEl", "morphEl", "cleanupFromEl", "curFromNodeChild", "curFromNodeKey", "fromNextSibling", "toElKey", "beforeUpdateResult", "morphChildren", "skipFrom", "curToNodeChild", "curToNodeKey", "toNextSibling", "matchingFromEl", "outer", "curFromNodeType", "isCompatible", "onBeforeNodeAddedResult", "specialElHandler", "morphedNode", "morphedNodeType", "toNodeType", "elToRemove", "morphdom", "morphdom_esm_default", "DOMPatch", "streams", "targetCID", "isJoinPatch", "targetContainer", "added", "updates", "appendPrependUpdates", "externalFormTriggered", "morph", "withChildren", "morphCallbacks", "from", "streamAt", "nonStreamChild", "c", "sibling", "morphedEl", "fromVal", "toVal", "isFocusedFormEl", "focusedSelectChanged", "prevSession", "inserts", "deleteIds", "reset", "limit", "update", "children", "oldIndex", "pendingRemoves", "first", "rest", "VOID_TAGS", "quoteChars", "modifyRoot", "clearInnerHTML", "insideComment", "beforeTag", "afterTag", "tag", "tagNameEndsAt", "newHTML", "lookahead", "isId", "char", "attrStartsAt", "closeAt", "attrsStr", "idAttrStr", "Rendered", "diff", "reply", "events", "title", "viewId", "rendered", "onlyCids", "components", "changeTracking", "rootAttrs", "output", "newc", "cache", "oldc", "cdiff", "ndiff", "stat", "scid", "tdiff", "targetVal", "pruneMagicId", "merged", "strippedHTML", "_before", "_after", "part", "templates", "statics", "isRoot", "prevBuffer", "skip", "newRoot", "commentBefore", "commentAfter", "dynamics", "stream", "_ref", "_inserts", "compTemplates", "dynamic", "component", "focusStack", "default_transition_time", "JS", "eventType", "sourceEl", "defaults", "defaultKind", "defaultArgs", "windowHeight", "windowWidth", "encodedJS", "detail", "bubbles", "data", "page_loading", "loading", "dispatcher", "pushOpts", "targetSrc", "phxTarget", "targetView", "targetCtx", "newCid", "_target", "submitter", "replace", "_eventType", "_phxEvent", "_view", "_sourceEl", "_el", "names", "transition", "time", "blocking", "val1", "val2", "display", "ins", "outs", "inClasses", "inStartClasses", "inEndClasses", "outClasses", "outStartClasses", "outEndClasses", "onStart", "onEnd", "currentEl", "stickyDisplay", "prevAdds", "prevRemoves", "newAdds", "newRemoves", "adds", "removes", "transitionRun", "transitionStart", "transitionEnd", "onDone", "keepAdds", "keepRemoves", "sets", "prevSets", "alteredAttrs", "_val", "newSets", "defaultQuery", "trans", "tStart", "tEnd", "js_default", "HOOK_ID", "viewHookID", "ViewHook", "callbacks", "owner", "payload", "onReply", "resolve", "reject", "error", "callbackRef", "customEvent", "bypass", "prependFormDataKey", "isArray", "baseKey", "serializeForm", "metadata", "onlyNames", "injectedElement", "formData", "_index", "params", "elements", "inputs", "isUnused", "hidden", "metaKey", "View", "_View", "liveViewEl", "parentView", "liveReferer", "manifest", "onFinished", "msgCallback", "dom", "viewEl", "targets", "rawDiff", "liveview_version", "live_patch", "phxStatic", "hookEl", "patch", "phxMounted", "hasBeenInvoked", "newHook", "pruneCids", "removedEls", "phxChildrenAdded", "updatedHookIds", "els", "destroyedCIDs", "hooks", "phxChange", "oldForms", "rootEl", "formsToRecover", "newForm", "oldForm", "childId", "_child", "parentCID", "hookElId", "hookName", "cb", "redir", "reloadToken", "trueChildEl", "callerPush", "receives", "latency", "withLatency", "refGenerator", "oldJoinCount", "onLoadingDone", "finish", "hookReply", "onlyEls", "selector", "newRef", "disableWith", "loadingEls", "lock", "lockCompletePromise", "loadingCompletePromise", "disableText", "lockEl", "cidOrSelector", "_resp", "entryRef", "forceCid", "uploads", "_els", "_uploads", "awaitingSubmit", "_opts", "_callback", "filterIgnored", "filterDisables", "filterButton", "filterInput", "formElements", "disables", "buttons", "button", "formEls", "push", "proxyRefGen", "joinCountAtUpload", "inputEls", "numFileInputsInProgress", "uploader", "entry_ref", "filesOrBlobs", "targetElement", "templateDom", "pending", "targetEl", "linkRef", "refGen", "fallback", "_error", "_timeout", "willDestroyCIDs", "completelyDestroyCIDs", "parentViewEl", "LiveSocket", "url", "phxSocket", "opts", "BINDING_PREFIX", "closure", "clone", "DEFAULTS", "LOADER_TIMEOUT", "MAX_RELOADS", "RELOAD_JITTER_MIN", "RELOAD_JITTER_MAX", "FAILSAFE_JITTER", "TransitionSet", "PHX_LV_HISTORY_POSITION", "_e", "PHX_LV_PROFILE", "PHX_LV_DEBUG", "upperBoundMs", "PHX_LV_LATENCY_SIM", "str", "doConnect", "callback", "transport", "el", "encodedJS", "eventType", "e", "view", "js_default", "phxEvent", "data", "kind", "args", "name", "func", "result", "msgCallback", "msg", "obj", "debug", "time", "onStart", "onDone", "channel", "event", "cb", "latency", "log", "minMs", "maxMs", "afterMs", "tries", "browser_default", "CONSECUTIVE_RELOADS", "count", "hooks_default", "topic", "params", "body", "rootsFound", "dom_default", "PHX_VIEW_SELECTOR", "PHX_PARENT_ID", "rootEl", "PHX_MAIN", "to", "flash", "reloadToken", "PHX_RELOAD_STATUS", "href", "linkRef", "liveReferer", "removeEls", "newMainEl", "joinCount", "elements", "skipSticky", "removeAttr", "stickies", "silenceEvents", "PHX_SESSION", "View", "childEl", "maybe", "rootId", "PHX_ROOT_ID", "root", "id", "dead", "type", "targetEl", "_phxTarget", "matchKey", "PHX_KEY", "pressedKey", "phxTarget", "dropTargetId", "closestPhxBinding", "PHX_DROP_TARGET", "trueTarget", "dropTarget", "files", "LiveUploader", "PHX_TRACK_UPLOADS", "uploadTarget", "f", "eventName", "events", "browserEventName", "binding", "windowBinding", "targetPhxEvent", "bindingName", "click", "target", "clickStartedAtTarget", "PHX_REF_SRC", "clickStartedAt", "phxClickAway", "scrollTimer", "state", "backType", "scroll", "position", "isForward", "PHX_LIVE_LINK", "linkState", "PHX_LINK_STATE", "phxClick", "payload", "info", "done", "protocol", "host", "newLocation", "pathname", "search", "iterations", "externalFormSubmitted", "phxSubmit", "phxChange", "input", "key", "inputEvent", "formEvent", "dispatcher", "currentIterations", "at", "lastType", "PHX_HAS_FOCUSED", "form", "phxDebounce", "PHX_DEBOUNCE", "phxThrottle", "PHX_THROTTLE", "defaultDebounce", "defaultThrottle", "asyncFilter", "sourceEl", "query", "defaultQuery", "all", "timer", "op", "import_topbar", "ownKeys", "object", "enumerableOnly", "keys", "symbols", "sym", "_objectSpread2", "target", "i", "source", "key", "_defineProperty", "_typeof", "obj", "value", "_extends", "_objectWithoutPropertiesLoose", "excluded", "sourceKeys", "_objectWithoutProperties", "sourceSymbolKeys", "version", "userAgent", "pattern", "IE11OrLess", "Edge", "FireFox", "Safari", "IOS", "ChromeForAndroid", "captureMode", "on", "el", "event", "fn", "off", "matches", "selector", "getParentOrHost", "closest", "ctx", "includeCTX", "R_SPACE", "toggleClass", "name", "state", "className", "css", "prop", "val", "style", "matrix", "selfOnly", "appliedTransforms", "transform", "matrixFn", "find", "tagName", "iterator", "list", "i", "n", "getWindowScrollingElement", "scrollingElement", "getRect", "relativeToContainingBlock", "relativeToNonStaticParent", "undoScale", "container", "elRect", "top", "left", "bottom", "right", "height", "width", "containerRect", "elMatrix", "scaleX", "scaleY", "isScrolledPast", "elSide", "parentSide", "parent", "getParentAutoScrollElement", "elSideVal", "parentSideVal", "visible", "getChild", "childNum", "options", "includeDragEl", "currentChild", "children", "Sortable", "lastChild", "last", "index", "getRelativeScrollOffset", "offsetLeft", "offsetTop", "winScroller", "indexOfObject", "arr", "obj", "key", "includeSelf", "elem", "gotSelf", "elemCSS", "extend", "dst", "src", "isRectEqual", "rect1", "rect2", "_throttleTimeout", "throttle", "callback", "ms", "args", "_this", "cancelThrottle", "scrollBy", "x", "y", "clone", "Polymer", "$", "getChildContainingRectFromElement", "container", "options", "ghostEl", "rect", "child", "_rect$left", "_rect$top", "_rect$right", "_rect$bottom", "closest", "childRect", "getRect", "expando", "AnimationStateManager", "animationStates", "animationCallbackId", "children", "css", "Sortable", "fromRect", "_objectSpread2", "childMatrix", "matrix", "state", "target", "indexOfObject", "callback", "_this", "animating", "animationTime", "time", "toRect", "prevFromRect", "prevToRect", "animatingRect", "targetMatrix", "isRectEqual", "calculateRealTime", "currentRect", "duration", "elMatrix", "scaleX", "scaleY", "translateX", "translateY", "repaint", "plugins", "defaults", "PluginManager", "plugin", "option", "p", "eventName", "sortable", "evt", "eventNameGlobal", "el", "pluginName", "initialized", "_extends", "modified", "name", "eventProperties", "value", "modifiedValue", "dispatchEvent", "_ref", "rootEl", "targetEl", "cloneEl", "toEl", "fromEl", "oldIndex", "newIndex", "oldDraggableIndex", "newDraggableIndex", "originalEvent", "putSortable", "extraEventProperties", "onName", "IE11OrLess", "Edge", "allEventProperties", "_excluded", "pluginEvent", "data", "_objectWithoutProperties", "dragEl", "parentEl", "nextEl", "lastDownEl", "cloneHidden", "moved", "_hideGhostForTarget", "_unhideGhostForTarget", "_dispatchEvent", "info", "activeGroup", "awaitingDragStarted", "ignoreNextClick", "sortables", "tapEvt", "touchEvt", "lastDx", "lastDy", "tapDistanceLeft", "tapDistanceTop", "lastTarget", "lastDirection", "pastFirstInvertThresh", "isCircumstantialInvert", "targetMoveDistance", "ghostRelativeParent", "ghostRelativeParentInitialScroll", "_silent", "savedInputChecked", "documentExists", "PositionGhostAbsolutely", "IOS", "CSSFloatProperty", "supportDraggable", "ChromeForAndroid", "supportCssPointerEvents", "_detectDirection", "elCSS", "elWidth", "child1", "getChild", "child2", "firstChildCSS", "secondChildCSS", "firstChildWidth", "secondChildWidth", "touchingSideChild2", "_dragElInRowColumn", "dragRect", "targetRect", "vertical", "dragElS1Opp", "dragElS2Opp", "dragElOppLength", "targetS1Opp", "targetS2Opp", "targetOppLength", "_detectNearestEmptySortable", "x", "y", "ret", "threshold", "lastChild", "insideHorizontally", "insideVertically", "_prepareGroup", "toFn", "pull", "to", "from", "sameGroup", "otherGroup", "group", "originalGroup", "_typeof", "nearestEmptyInsertDetectEvent", "nearest", "event", "i", "_checkOutsideTargetEl", "dataTransfer", "Safari", "fn", "on", "preventOnFilter", "type", "touch", "originalTarget", "filter", "_saveInputCheckedState", "index", "criteria", "ownerDocument", "dragStartFn", "FireFox", "toggleClass", "find", "_disableDraggable", "off", "_nextTick", "fallback", "parent", "inserted", "getParentOrHost", "fallbackTolerance", "fallbackOffset", "ghostMatrix", "relativeScrollOffset", "getRelativeScrollOffset", "dx", "dy", "cssMatrix", "getWindowScrollingElement", "clone", "revert", "activeSortable", "isOwner", "canSort", "fromSortable", "completedFired", "dragOverEvent", "extra", "completed", "after", "_onMove", "changed", "capture", "insertion", "elLastChild", "_ghostIsLast", "_ghostIsFirst", "firstChild", "direction", "targetBeforeFirstSwap", "differentLevel", "differentRowCol", "side1", "scrolledPastTop", "isScrolledPast", "scrollBefore", "_getSwapDirection", "sibling", "dragIndex", "nextSibling", "moveVector", "_unsilent", "scrollBy", "_cancelNextTick", "_globalDragOver", "order", "n", "_generateId", "useAnimation", "items", "id", "store", "selector", "willInsertAfter", "onMoveFn", "retVal", "firstElRect", "childContainingRect", "spacer", "lastElRect", "swapThreshold", "invertedSwapThreshold", "invertSwap", "isLastTarget", "mouseOnAxis", "targetLength", "targetS1", "targetS2", "invert", "_getInsertDirection", "str", "sum", "root", "inputs", "idx", "extend", "throttle", "element", "_len", "_key", "version", "autoScrolls", "scrollEl", "scrollRootEl", "scrolling", "lastAutoScrollX", "lastAutoScrollY", "touchEvt$1", "pointerElemChangedInterval", "AutoScrollPlugin", "AutoScroll", "_ref2", "clearPointerElemChangedInterval", "clearAutoScrolls", "cancelThrottle", "elem", "autoScroll", "ogElemScroller", "getParentAutoScrollElement", "newElem", "isFallback", "sens", "speed", "winScroller", "scrollThisInstance", "scrollCustomFn", "layersOut", "currentParent", "top", "bottom", "left", "right", "width", "height", "canScrollX", "canScrollY", "scrollWidth", "scrollHeight", "scrollPosX", "scrollPosY", "vx", "vy", "scrollOffsetY", "scrollOffsetX", "drop", "dispatchSortableEvent", "hideGhostForTarget", "unhideGhostForTarget", "toSortable", "Revert", "_ref3", "Remove", "_ref4", "parentSortable", "Sortable", "AutoScrollPlugin", "Remove", "Revert", "sortable_esm_default", "sortable_default", "sortable", "sortable_esm_default", "evt", "freeGlobal", "freeGlobal_default", "freeSelf", "root", "freeGlobal_default", "root_default", "Symbol", "root_default", "Symbol_default", "objectProto", "hasOwnProperty", "nativeObjectToString", "symToStringTag", "Symbol_default", "getRawTag", "value", "isOwn", "tag", "unmasked", "result", "getRawTag_default", "objectProto", "nativeObjectToString", "objectToString", "value", "objectToString_default", "nullTag", "undefinedTag", "symToStringTag", "Symbol_default", "baseGetTag", "value", "getRawTag_default", "objectToString_default", "baseGetTag_default", "isObjectLike", "value", "isObjectLike_default", "isArray", "isArray_default", "isObject", "value", "type", "isObject_default", "identity", "value", "identity_default", "asyncTag", "funcTag", "genTag", "proxyTag", "isFunction", "value", "isObject_default", "tag", "baseGetTag_default", "isFunction_default", "coreJsData", "root_default", "coreJsData_default", "maskSrcKey", "uid", "coreJsData_default", "isMasked", "func", "isMasked_default", "funcProto", "funcToString", "toSource", "func", "toSource_default", "reRegExpChar", "reIsHostCtor", "funcProto", "objectProto", "funcToString", "hasOwnProperty", "reIsNative", "baseIsNative", "value", "isObject_default", "isMasked_default", "pattern", "isFunction_default", "toSource_default", "baseIsNative_default", "getValue", "object", "key", "getValue_default", "getNative", "object", "key", "value", "getValue_default", "baseIsNative_default", "getNative_default", "WeakMap", "getNative_default", "root_default", "WeakMap_default", "objectCreate", "baseCreate", "object", "proto", "isObject_default", "result", "baseCreate_default", "apply", "func", "thisArg", "args", "apply_default", "copyArray", "source", "array", "index", "length", "copyArray_default", "HOT_COUNT", "HOT_SPAN", "nativeNow", "shortOut", "func", "count", "lastCalled", "stamp", "remaining", "shortOut_default", "constant", "value", "constant_default", "defineProperty", "func", "getNative_default", "defineProperty_default", "baseSetToString", "defineProperty_default", "func", "string", "constant_default", "identity_default", "baseSetToString_default", "setToString", "shortOut_default", "baseSetToString_default", "setToString_default", "arrayEach", "array", "iteratee", "index", "length", "arrayEach_default", "MAX_SAFE_INTEGER", "reIsUint", "isIndex", "value", "length", "type", "isIndex_default", "baseAssignValue", "object", "key", "value", "defineProperty_default", "baseAssignValue_default", "eq", "value", "other", "eq_default", "objectProto", "hasOwnProperty", "assignValue", "object", "key", "value", "objValue", "eq_default", "baseAssignValue_default", "assignValue_default", "copyObject", "source", "props", "object", "customizer", "isNew", "index", "length", "key", "newValue", "baseAssignValue_default", "assignValue_default", "copyObject_default", "nativeMax", "overRest", "func", "start", "transform", "args", "index", "length", "array", "otherArgs", "apply_default", "overRest_default", "baseRest", "func", "start", "setToString_default", "overRest_default", "identity_default", "baseRest_default", "MAX_SAFE_INTEGER", "isLength", "value", "isLength_default", "isArrayLike", "value", "isLength_default", "isFunction_default", "isArrayLike_default", "isIterateeCall", "value", "index", "object", "isObject_default", "type", "isArrayLike_default", "isIndex_default", "eq_default", "isIterateeCall_default", "createAssigner", "assigner", "baseRest_default", "object", "sources", "index", "length", "customizer", "guard", "isIterateeCall_default", "source", "createAssigner_default", "objectProto", "isPrototype", "value", "Ctor", "proto", "isPrototype_default", "baseTimes", "n", "iteratee", "index", "result", "baseTimes_default", "argsTag", "baseIsArguments", "value", "isObjectLike_default", "baseGetTag_default", "baseIsArguments_default", "objectProto", "hasOwnProperty", "propertyIsEnumerable", "isArguments", "baseIsArguments_default", "value", "isObjectLike_default", "isArguments_default", "stubFalse", "stubFalse_default", "freeExports", "freeModule", "moduleExports", "Buffer", "root_default", "nativeIsBuffer", "isBuffer", "stubFalse_default", "isBuffer_default", "argsTag", "arrayTag", "boolTag", "dateTag", "errorTag", "funcTag", "mapTag", "numberTag", "objectTag", "regexpTag", "setTag", "stringTag", "weakMapTag", "arrayBufferTag", "dataViewTag", "float32Tag", "float64Tag", "int8Tag", "int16Tag", "int32Tag", "uint8Tag", "uint8ClampedTag", "uint16Tag", "uint32Tag", "typedArrayTags", "baseIsTypedArray", "value", "isObjectLike_default", "isLength_default", "baseGetTag_default", "baseIsTypedArray_default", "baseUnary", "func", "value", "baseUnary_default", "freeExports", "freeModule", "moduleExports", "freeProcess", "freeGlobal_default", "nodeUtil", "types", "nodeUtil_default", "nodeIsTypedArray", "nodeUtil_default", "isTypedArray", "baseUnary_default", "baseIsTypedArray_default", "isTypedArray_default", "objectProto", "hasOwnProperty", "arrayLikeKeys", "value", "inherited", "isArr", "isArray_default", "isArg", "isArguments_default", "isBuff", "isBuffer_default", "isType", "isTypedArray_default", "skipIndexes", "result", "baseTimes_default", "length", "key", "isIndex_default", "arrayLikeKeys_default", "overArg", "func", "transform", "arg", "overArg_default", "nativeKeys", "overArg_default", "nativeKeys_default", "objectProto", "hasOwnProperty", "baseKeys", "object", "isPrototype_default", "nativeKeys_default", "result", "key", "baseKeys_default", "keys", "object", "isArrayLike_default", "arrayLikeKeys_default", "baseKeys_default", "keys_default", "nativeKeysIn", "object", "result", "key", "nativeKeysIn_default", "objectProto", "hasOwnProperty", "baseKeysIn", "object", "isObject_default", "nativeKeysIn_default", "isProto", "isPrototype_default", "result", "key", "baseKeysIn_default", "keysIn", "object", "isArrayLike_default", "arrayLikeKeys_default", "baseKeysIn_default", "keysIn_default", "nativeCreate", "getNative_default", "nativeCreate_default", "hashClear", "nativeCreate_default", "hashClear_default", "hashDelete", "key", "result", "hashDelete_default", "HASH_UNDEFINED", "objectProto", "hasOwnProperty", "hashGet", "key", "data", "nativeCreate_default", "result", "hashGet_default", "objectProto", "hasOwnProperty", "hashHas", "key", "data", "nativeCreate_default", "hashHas_default", "HASH_UNDEFINED", "hashSet", "key", "value", "data", "nativeCreate_default", "hashSet_default", "Hash", "entries", "index", "length", "entry", "hashClear_default", "hashDelete_default", "hashGet_default", "hashHas_default", "hashSet_default", "Hash_default", "listCacheClear", "listCacheClear_default", "assocIndexOf", "array", "key", "length", "eq_default", "assocIndexOf_default", "arrayProto", "splice", "listCacheDelete", "key", "data", "index", "assocIndexOf_default", "lastIndex", "listCacheDelete_default", "listCacheGet", "key", "data", "index", "assocIndexOf_default", "listCacheGet_default", "listCacheHas", "key", "assocIndexOf_default", "listCacheHas_default", "listCacheSet", "key", "value", "data", "index", "assocIndexOf_default", "listCacheSet_default", "ListCache", "entries", "index", "length", "entry", "listCacheClear_default", "listCacheDelete_default", "listCacheGet_default", "listCacheHas_default", "listCacheSet_default", "ListCache_default", "Map", "getNative_default", "root_default", "Map_default", "mapCacheClear", "Hash_default", "Map_default", "ListCache_default", "mapCacheClear_default", "isKeyable", "value", "type", "isKeyable_default", "getMapData", "map", "key", "data", "isKeyable_default", "getMapData_default", "mapCacheDelete", "key", "result", "getMapData_default", "mapCacheDelete_default", "mapCacheGet", "key", "getMapData_default", "mapCacheGet_default", "mapCacheHas", "key", "getMapData_default", "mapCacheHas_default", "mapCacheSet", "key", "value", "data", "getMapData_default", "size", "mapCacheSet_default", "MapCache", "entries", "index", "length", "entry", "mapCacheClear_default", "mapCacheDelete_default", "mapCacheGet_default", "mapCacheHas_default", "mapCacheSet_default", "MapCache_default", "arrayPush", "array", "values", "index", "length", "offset", "arrayPush_default", "getPrototype", "overArg_default", "getPrototype_default", "objectTag", "funcProto", "objectProto", "funcToString", "hasOwnProperty", "objectCtorString", "isPlainObject", "value", "isObjectLike_default", "baseGetTag_default", "proto", "getPrototype_default", "Ctor", "isPlainObject_default", "stackClear", "ListCache_default", "stackClear_default", "stackDelete", "key", "data", "result", "stackDelete_default", "stackGet", "key", "stackGet_default", "stackHas", "key", "stackHas_default", "LARGE_ARRAY_SIZE", "stackSet", "key", "value", "data", "ListCache_default", "pairs", "Map_default", "MapCache_default", "stackSet_default", "Stack", "entries", "data", "ListCache_default", "stackClear_default", "stackDelete_default", "stackGet_default", "stackHas_default", "stackSet_default", "Stack_default", "baseAssign", "object", "source", "copyObject_default", "keys_default", "baseAssign_default", "baseAssignIn", "object", "source", "copyObject_default", "keysIn_default", "baseAssignIn_default", "freeExports", "freeModule", "moduleExports", "Buffer", "root_default", "allocUnsafe", "cloneBuffer", "buffer", "isDeep", "length", "result", "cloneBuffer_default", "arrayFilter", "array", "predicate", "index", "length", "resIndex", "result", "value", "arrayFilter_default", "stubArray", "stubArray_default", "objectProto", "propertyIsEnumerable", "nativeGetSymbols", "getSymbols", "object", "arrayFilter_default", "symbol", "stubArray_default", "getSymbols_default", "copySymbols", "source", "object", "copyObject_default", "getSymbols_default", "copySymbols_default", "nativeGetSymbols", "getSymbolsIn", "object", "result", "arrayPush_default", "getSymbols_default", "getPrototype_default", "stubArray_default", "getSymbolsIn_default", "copySymbolsIn", "source", "object", "copyObject_default", "getSymbolsIn_default", "copySymbolsIn_default", "baseGetAllKeys", "object", "keysFunc", "symbolsFunc", "result", "isArray_default", "arrayPush_default", "baseGetAllKeys_default", "getAllKeys", "object", "baseGetAllKeys_default", "keys_default", "getSymbols_default", "getAllKeys_default", "getAllKeysIn", "object", "baseGetAllKeys_default", "keysIn_default", "getSymbolsIn_default", "getAllKeysIn_default", "DataView", "getNative_default", "root_default", "DataView_default", "Promise", "getNative_default", "root_default", "Promise_default", "Set", "getNative_default", "root_default", "Set_default", "mapTag", "objectTag", "promiseTag", "setTag", "weakMapTag", "dataViewTag", "dataViewCtorString", "toSource_default", "DataView_default", "mapCtorString", "Map_default", "promiseCtorString", "Promise_default", "setCtorString", "Set_default", "weakMapCtorString", "WeakMap_default", "getTag", "baseGetTag_default", "value", "result", "Ctor", "ctorString", "getTag_default", "objectProto", "hasOwnProperty", "initCloneArray", "array", "length", "result", "initCloneArray_default", "Uint8Array", "root_default", "Uint8Array_default", "cloneArrayBuffer", "arrayBuffer", "result", "Uint8Array_default", "cloneArrayBuffer_default", "cloneDataView", "dataView", "isDeep", "buffer", "cloneArrayBuffer_default", "cloneDataView_default", "reFlags", "cloneRegExp", "regexp", "result", "cloneRegExp_default", "symbolProto", "Symbol_default", "symbolValueOf", "cloneSymbol", "symbol", "cloneSymbol_default", "cloneTypedArray", "typedArray", "isDeep", "buffer", "cloneArrayBuffer_default", "cloneTypedArray_default", "boolTag", "dateTag", "mapTag", "numberTag", "regexpTag", "setTag", "stringTag", "symbolTag", "arrayBufferTag", "dataViewTag", "float32Tag", "float64Tag", "int8Tag", "int16Tag", "int32Tag", "uint8Tag", "uint8ClampedTag", "uint16Tag", "uint32Tag", "initCloneByTag", "object", "tag", "isDeep", "Ctor", "cloneArrayBuffer_default", "cloneDataView_default", "cloneTypedArray_default", "cloneRegExp_default", "cloneSymbol_default", "initCloneByTag_default", "initCloneObject", "object", "isPrototype_default", "baseCreate_default", "getPrototype_default", "initCloneObject_default", "mapTag", "baseIsMap", "value", "isObjectLike_default", "getTag_default", "baseIsMap_default", "nodeIsMap", "nodeUtil_default", "isMap", "baseUnary_default", "baseIsMap_default", "isMap_default", "setTag", "baseIsSet", "value", "isObjectLike_default", "getTag_default", "baseIsSet_default", "nodeIsSet", "nodeUtil_default", "isSet", "baseUnary_default", "baseIsSet_default", "isSet_default", "CLONE_DEEP_FLAG", "CLONE_FLAT_FLAG", "CLONE_SYMBOLS_FLAG", "argsTag", "arrayTag", "boolTag", "dateTag", "errorTag", "funcTag", "genTag", "mapTag", "numberTag", "objectTag", "regexpTag", "setTag", "stringTag", "symbolTag", "weakMapTag", "arrayBufferTag", "dataViewTag", "float32Tag", "float64Tag", "int8Tag", "int16Tag", "int32Tag", "uint8Tag", "uint8ClampedTag", "uint16Tag", "uint32Tag", "cloneableTags", "baseClone", "value", "bitmask", "customizer", "key", "object", "stack", "result", "isDeep", "isFlat", "isFull", "isObject_default", "isArr", "isArray_default", "initCloneArray_default", "copyArray_default", "tag", "getTag_default", "isFunc", "isBuffer_default", "cloneBuffer_default", "initCloneObject_default", "copySymbolsIn_default", "baseAssignIn_default", "copySymbols_default", "baseAssign_default", "initCloneByTag_default", "Stack_default", "stacked", "isSet_default", "subValue", "isMap_default", "keysFunc", "getAllKeysIn_default", "getAllKeys_default", "keysIn_default", "keys_default", "props", "arrayEach_default", "assignValue_default", "baseClone_default", "CLONE_DEEP_FLAG", "CLONE_SYMBOLS_FLAG", "cloneDeep", "value", "baseClone_default", "cloneDeep_default", "HASH_UNDEFINED", "setCacheAdd", "value", "setCacheAdd_default", "setCacheHas", "value", "setCacheHas_default", "SetCache", "values", "index", "length", "MapCache_default", "setCacheAdd_default", "setCacheHas_default", "SetCache_default", "arraySome", "array", "predicate", "index", "length", "arraySome_default", "cacheHas", "cache", "key", "cacheHas_default", "COMPARE_PARTIAL_FLAG", "COMPARE_UNORDERED_FLAG", "equalArrays", "array", "other", "bitmask", "customizer", "equalFunc", "stack", "isPartial", "arrLength", "othLength", "arrStacked", "othStacked", "index", "result", "seen", "SetCache_default", "arrValue", "othValue", "compared", "arraySome_default", "othIndex", "cacheHas_default", "equalArrays_default", "mapToArray", "map", "index", "result", "value", "key", "mapToArray_default", "setToArray", "set", "index", "result", "value", "setToArray_default", "COMPARE_PARTIAL_FLAG", "COMPARE_UNORDERED_FLAG", "boolTag", "dateTag", "errorTag", "mapTag", "numberTag", "regexpTag", "setTag", "stringTag", "symbolTag", "arrayBufferTag", "dataViewTag", "symbolProto", "Symbol_default", "symbolValueOf", "equalByTag", "object", "other", "tag", "bitmask", "customizer", "equalFunc", "stack", "Uint8Array_default", "eq_default", "convert", "mapToArray_default", "isPartial", "setToArray_default", "stacked", "result", "equalArrays_default", "equalByTag_default", "COMPARE_PARTIAL_FLAG", "objectProto", "hasOwnProperty", "equalObjects", "object", "other", "bitmask", "customizer", "equalFunc", "stack", "isPartial", "objProps", "getAllKeys_default", "objLength", "othProps", "othLength", "index", "key", "objStacked", "othStacked", "result", "skipCtor", "objValue", "othValue", "compared", "objCtor", "othCtor", "equalObjects_default", "COMPARE_PARTIAL_FLAG", "argsTag", "arrayTag", "objectTag", "objectProto", "hasOwnProperty", "baseIsEqualDeep", "object", "other", "bitmask", "customizer", "equalFunc", "stack", "objIsArr", "isArray_default", "othIsArr", "objTag", "getTag_default", "othTag", "objIsObj", "othIsObj", "isSameTag", "isBuffer_default", "Stack_default", "isTypedArray_default", "equalArrays_default", "equalByTag_default", "objIsWrapped", "othIsWrapped", "objUnwrapped", "othUnwrapped", "equalObjects_default", "baseIsEqualDeep_default", "baseIsEqual", "value", "other", "bitmask", "customizer", "stack", "isObjectLike_default", "baseIsEqualDeep_default", "baseIsEqual_default", "createBaseFor", "fromRight", "object", "iteratee", "keysFunc", "index", "iterable", "props", "length", "key", "createBaseFor_default", "baseFor", "createBaseFor_default", "baseFor_default", "assignMergeValue", "object", "key", "value", "eq_default", "baseAssignValue_default", "assignMergeValue_default", "isArrayLikeObject", "value", "isObjectLike_default", "isArrayLike_default", "isArrayLikeObject_default", "safeGet", "object", "key", "safeGet_default", "toPlainObject", "value", "copyObject_default", "keysIn_default", "toPlainObject_default", "baseMergeDeep", "object", "source", "key", "srcIndex", "mergeFunc", "customizer", "stack", "objValue", "safeGet_default", "srcValue", "stacked", "assignMergeValue_default", "newValue", "isCommon", "isArr", "isArray_default", "isBuff", "isBuffer_default", "isTyped", "isTypedArray_default", "isArrayLikeObject_default", "copyArray_default", "cloneBuffer_default", "cloneTypedArray_default", "isPlainObject_default", "isArguments_default", "toPlainObject_default", "isObject_default", "isFunction_default", "initCloneObject_default", "baseMergeDeep_default", "baseMerge", "object", "source", "srcIndex", "customizer", "stack", "baseFor_default", "srcValue", "key", "Stack_default", "isObject_default", "baseMergeDeep_default", "newValue", "safeGet_default", "assignMergeValue_default", "keysIn_default", "baseMerge_default", "isEqual", "value", "other", "baseIsEqual_default", "isEqual_default", "merge", "createAssigner_default", "object", "source", "srcIndex", "baseMerge_default", "merge_default", "parchment_exports", "__export", "Attributor", "AttributorStore$1", "BlockBlot$1", "ClassAttributor$1", "ContainerBlot$1", "EmbedBlot$1", "InlineBlot$1", "LeafBlot$1", "ParentBlot$1", "Registry", "Scope", "ScrollBlot$1", "StyleAttributor$1", "TextBlot$1", "attrName", "keyName", "options", "attributeBit", "node", "item", "value", "_node", "ParchmentError", "message", "_Registry", "bubble", "parentNode", "scroll", "input", "match", "blotClass", "blot", "query", "scope", "name", "definitions", "definition", "isBlot", "isAttr", "key", "tagName", "tag", "prefix", "ClassAttributor", "camelize", "parts", "rest", "part", "StyleAttributor", "AttributorStore", "domNode", "attribute", "attributes", "classes", "styles", "attr", "target", "_ShadowBlot", "rawValue", "index", "length", "parent", "def", "ref", "root", "_context", "replacement", "_force", "_mutations", "wrapper", "ShadowBlot", "_LeafBlot", "_domNode", "offset", "_inclusive", "LeafBlot", "LinkedList", "nodes", "next", "cur", "refNode", "curNode", "ret", "inclusive", "callback", "startNode", "curIndex", "curLength", "memo", "makeAttachedBlot", "found", "child", "_ParentBlot", "other", "err", "childLength", "criteria", "descendants", "lengthLeft", "childIndex", "done", "childBlot", "refBlot", "refDomNode", "targetParent", "context", "position", "force", "after", "_length", "split", "mutations", "addedNodes", "removedNodes", "mutation", "a", "b", "ParentBlot", "isEqual", "obj1", "obj2", "prop", "_InlineBlot", "format", "formats", "InlineBlot", "_BlockBlot", "BlockBlot", "_ContainerBlot", "ContainerBlot", "EmbedBlot", "_scroll", "OBSERVER_CONFIG", "MAX_OPTIMIZE_ITERATIONS", "_ScrollBlot", "registry", "mutationsMap", "records", "mark", "markParent", "optimize", "remaining", "i", "grandChild", "ScrollBlot", "_TextBlot", "TextBlot", "import_quill_delta", "import_quill_delta", "import_quill_delta", "Break", "EmbedBlot", "value", "optimize", "prev", "next", "remove", "length", "blotName", "tagName", "break_default", "Text", "TextBlot", "escapeText", "text", "replace", "s", "Inline", "InlineBlot", "compare", "self", "other", "selfIndex", "order", "indexOf", "otherIndex", "formatAt", "index", "length", "name", "value", "statics", "blotName", "scroll", "query", "Scope", "BLOT", "blot", "isolate", "wrap", "optimize", "context", "parent", "offset", "moveChildren", "_Inline", "__publicField", "allowedChildren", "Break", "EmbedBlot", "Text", "inline_default", "NEWLINE_LENGTH", "Block", "BlockBlot", "cache", "delta", "blockDelta", "deleteAt", "index", "length", "formatAt", "name", "value", "scroll", "query", "Scope", "BLOCK", "format", "Math", "min", "insertAt", "def", "lines", "split", "text", "shift", "children", "tail", "block", "reduce", "lineIndex", "line", "insertBefore", "blot", "ref", "head", "Break", "remove", "moveChildren", "target", "optimize", "context", "path", "removeChild", "child", "force", "arguments", "undefined", "clone", "parent", "next", "blotName", "tagName", "defaultChild", "allowedChildren", "Inline", "EmbedBlot", "TextBlot", "BlockEmbed", "attach", "attributes", "AttributorStore", "domNode", "Delta", "insert", "formats", "values", "attribute", "BLOCK_ATTRIBUTE", "pop", "blocks", "map", "create", "forEach", "scope", "BLOCK_BLOT", "filter", "descendants", "LeafBlot", "leaf", "bubbleFormats", "statics", "Cursor", "EmbedBlot", "value", "constructor", "scroll", "domNode", "selection", "textNode", "document", "createTextNode", "CONTENTS", "appendChild", "savedLength", "detach", "parent", "removeChild", "format", "name", "target", "index", "statics", "scope", "Scope", "BLOCK_BLOT", "offset", "length", "optimize", "formatAt", "node", "position", "data", "remove", "restore", "composing", "range", "getNativeRange", "lastChild", "parentNode", "insertBefore", "prevTextBlot", "prev", "TextBlot", "prevTextLength", "nextTextBlot", "next", "nextText", "text", "newText", "split", "join", "mergedTextBlot", "insertAt", "newTextNode", "create", "remapOffset", "start", "end", "startNode", "startOffset", "endNode", "endOffset", "update", "mutations", "context", "some", "mutation", "type", "tagName", "isolate", "unwrap", "_Cursor", "__publicField", "blotName", "className", "cursor_default", "import_index", "instances_default", "WeakMap", "levels", "level", "debug", "method", "indexOf", "_len", "arguments", "length", "args", "Array", "_key", "console", "namespace", "ns", "reduce", "logger", "bind", "newLevel", "logger_default", "debug", "logger", "EVENTS", "forEach", "eventName", "document", "addEventListener", "_len", "arguments", "length", "args", "Array", "_key", "from", "querySelectorAll", "node", "quill", "instances", "get", "emitter", "handleDOM", "Emitter", "EventEmitter", "constructor", "domListeners", "on", "error", "emit", "_len2", "_key2", "log", "call", "event", "_len3", "_key3", "type", "_ref", "handler", "target", "contains", "listenDOM", "push", "__publicField", "events", "EDITOR_CHANGE", "SCROLL_BEFORE_UPDATE", "SCROLL_BLOT_MOUNT", "SCROLL_BLOT_UNMOUNT", "SCROLL_OPTIMIZE", "SCROLL_UPDATE", "SCROLL_EMBED_UPDATE", "SELECTION_CHANGE", "TEXT_CHANGE", "COMPOSITION_BEFORE_START", "COMPOSITION_START", "COMPOSITION_BEFORE_END", "COMPOSITION_END", "sources", "API", "SILENT", "USER", "emitter_default", "debug", "logger", "Range", "constructor", "index", "length", "arguments", "undefined", "Selection", "scroll", "emitter", "composing", "mouseDown", "root", "domNode", "cursor", "create", "savedRange", "lastRange", "lastNative", "handleComposition", "handleDragging", "listenDOM", "document", "setTimeout", "update", "bind", "Emitter", "sources", "USER", "on", "events", "SCROLL_BEFORE_UPDATE", "hasFocus", "native", "getNativeRange", "start", "node", "textNode", "once", "SCROLL_UPDATE", "source", "mutations", "contains", "end", "setNativeRange", "offset", "triggeredByTyping", "some", "mutation", "type", "target", "SILENT", "SCROLL_OPTIMIZE", "context", "range", "startNode", "startOffset", "endNode", "endOffset", "COMPOSITION_BEFORE_START", "COMPOSITION_END", "parent", "restore", "body", "focus", "preventScroll", "setRange", "format", "value", "nativeRange", "collapsed", "query", "Scope", "BLOCK", "blot", "find", "LeafBlot", "after", "split", "insertBefore", "attach", "optimize", "data", "getBounds", "scrollLength", "Math", "min", "leaf", "next", "line", "nextLine", "position", "createRange", "setStart", "setEnd", "getBoundingClientRect", "side", "rect", "Text", "Element", "bottom", "top", "height", "left", "right", "width", "selection", "getSelection", "rangeCount", "getRangeAt", "normalizeNative", "info", "getRange", "isConnected", "normalized", "normalizedToRange", "activeElement", "positions", "push", "indexes", "map", "max", "startContainer", "endContainer", "forEach", "childNodes", "lastChild", "rangeToNative", "getPosition", "inclusive", "leafOffset", "force", "parentNode", "tagName", "Array", "from", "indexOf", "removeAllRanges", "addRange", "blur", "API", "args", "oldRange", "isEqual", "SELECTION_CHANGE", "cloneDeep", "emit", "EDITOR_CHANGE", "descendant", "selection_default", "ASCII", "Editor", "constructor", "scroll", "delta", "getDelta", "applyDelta", "update", "scrollLength", "length", "batchStart", "normalizedDelta", "normalizeDelta", "deleteDelta", "Delta", "normalizedOps", "splitOpLines", "ops", "slice", "reduce", "index", "op", "Op", "attributes", "isImplicitNewlinePrepended", "isImplicitNewlineAppended", "insert", "retain", "text", "endsWith", "descendant", "BlockEmbed", "insertAt", "line", "offset", "formats", "merge", "bubbleFormats", "Block", "leaf", "LeafBlot", "AttributeMap", "diff", "key", "Object", "keys", "isInlineEmbed", "query", "Scope", "INLINE", "TextBlot", "value", "EmbedBlot", "statics", "scope", "INLINE_BLOT", "push", "updateEmbedAt", "forEach", "name", "formatAt", "prependedLength", "addedLength", "delete", "deleteAt", "batchEnd", "optimize", "deleteText", "formatLine", "arguments", "undefined", "format", "lines", "Math", "max", "cloneDeep", "formatText", "getContents", "concat", "getFormat", "leaves", "path", "blot", "descendants", "lineFormats", "leafFormats", "map", "blots", "shift", "combineFormats", "getHTML", "lineOffset", "lineLength", "convertHTML", "getText", "filter", "join", "insertContents", "contents", "change", "insertEmbed", "embed", "insertText", "replace", "isBlank", "children", "head", "blotName", "block", "Break", "removeFormat", "suffixLength", "suffix", "mutations", "selectionInfo", "oldDelta", "type", "target", "data", "match", "find", "textBlot", "oldValue", "CursorBlot", "CONTENTS", "oldText", "newText", "relativeSelectionInfo", "oldRange", "shiftRange", "newRange", "compose", "isEqual", "convertListHTML", "items", "lastIndent", "types", "endTag", "getListType", "pop", "child", "indent", "rest", "tag", "attribute", "previousType", "isRoot", "html", "escapeText", "ParentBlot", "forEachAt", "childLength", "list", "parts", "outerHTML", "innerHTML", "domNode", "start", "end", "split", "Element", "combined", "merged", "combinedValue", "Array", "isArray", "indexOf", "_ref", "amount", "Range", "editor_default", "Module", "constructor", "quill", "options", "arguments", "length", "undefined", "__publicField", "DEFAULTS", "module_default", "GUARD_TEXT", "Embed", "EmbedBlot", "constructor", "scroll", "node", "contentNode", "document", "createElement", "setAttribute", "Array", "from", "domNode", "childNodes", "forEach", "childNode", "appendChild", "leftGuard", "createTextNode", "rightGuard", "index", "offset", "restore", "range", "textNode", "text", "data", "split", "join", "prev", "TextBlot", "prevLength", "length", "insertAt", "startNode", "startOffset", "parent", "insertBefore", "create", "next", "update", "mutations", "context", "mutation", "type", "target", "embed_default", "Composition", "constructor", "scroll", "emitter", "isComposing", "setupListeners", "domNode", "addEventListener", "event", "handleCompositionStart", "queueMicrotask", "handleCompositionEnd", "blot", "target", "Node", "find", "Embed", "emit", "Emitter", "events", "COMPOSITION_BEFORE_START", "batchStart", "COMPOSITION_START", "COMPOSITION_BEFORE_END", "batchEnd", "COMPOSITION_END", "composition_default", "Theme", "constructor", "quill", "options", "modules", "init", "Object", "keys", "forEach", "name", "addModule", "ModuleClass", "import", "_Theme", "__publicField", "DEFAULTS", "themes", "default", "theme_default", "getParentElement", "element", "parentElement", "getRootNode", "host", "getElementRect", "rect", "getBoundingClientRect", "scaleX", "Math", "abs", "width", "offsetWidth", "scaleY", "height", "offsetHeight", "top", "right", "left", "clientWidth", "bottom", "clientHeight", "paddingValueToInt", "value", "number", "parseInt", "Number", "isNaN", "getScrollDistance", "targetStart", "targetEnd", "scrollStart", "scrollEnd", "scrollPaddingStart", "scrollPaddingEnd", "scrollRectIntoView", "root", "targetRect", "document", "ownerDocument", "current", "isDocumentBody", "body", "bounding", "window", "visualViewport", "documentElement", "style", "getComputedStyle", "scrollDistanceX", "scrollPaddingLeft", "scrollPaddingRight", "scrollDistanceY", "scrollPaddingTop", "scrollPaddingBottom", "defaultView", "scrollBy", "scrollLeft", "scrollTop", "scrolledLeft", "scrolledTop", "position", "scrollRectIntoView_default", "MAX_REGISTER_ITERATIONS", "CORE_FORMATS", "createRegistryWithFormats", "formats", "sourceRegistry", "debug", "registry", "Registry", "forEach", "name", "coreBlot", "query", "register", "format", "error", "iterations", "requiredContainer", "createRegistryWithFormats_default", "debug", "logger", "globalRegistry", "Registry", "ParentBlot", "uiClass", "Quill", "limit", "level", "find", "node", "bubble", "arguments", "length", "undefined", "instances", "get", "import", "name", "imports", "error", "register", "target", "overwrite", "attrName", "blotName", "Object", "keys", "forEach", "key", "path", "warn", "startsWith", "constructor", "container", "options", "expandConfig", "html", "innerHTML", "trim", "classList", "add", "set", "root", "addContainer", "emitter", "Emitter", "scrollBlotName", "ScrollBlot", "registry", "query", "Error", "scroll", "editor", "Editor", "selection", "Selection", "composition", "Composition", "theme", "keyboard", "addModule", "clipboard", "history", "uploader", "init", "on", "events", "EDITOR_CHANGE", "type", "TEXT_CHANGE", "toggle", "isBlank", "SCROLL_UPDATE", "source", "mutations", "oldRange", "lastRange", "newRange", "getRange", "selectionInfo", "modify", "call", "update", "SCROLL_EMBED_UPDATE", "blot", "delta", "change", "Delta", "retain", "offset", "statics", "sources", "USER", "contents", "convert", "text", "setContents", "clear", "placeholder", "setAttribute", "readOnly", "disable", "allowReadOnlyEdits", "refNode", "className", "document", "createElement", "insertBefore", "blur", "setRange", "deleteText", "index", "overload", "enable", "editReadOnly", "modifier", "value", "enabled", "focus", "preventScroll", "scrollSelectionIntoView", "format", "API", "range", "getSelection", "Scope", "BLOCK", "formatLine", "formatText", "setSelection", "SILENT", "formats", "getBounds", "bounds", "containerBounds", "getBoundingClientRect", "bottom", "top", "height", "left", "right", "width", "getContents", "getLength", "getFormat", "getIndex", "getLeaf", "leaf", "getLine", "line", "getLines", "Number", "MAX_VALUE", "lines", "getModule", "modules", "getSemanticHTML", "getHTML", "getText", "hasFocus", "insertEmbed", "embed", "insertText", "isEnabled", "off", "once", "removeFormat", "scrollRectIntoView", "rect", "scrollIntoView", "console", "delete1", "applied", "insertContents", "delete2", "compose", "Range", "Math", "max", "setText", "insert", "updateContents", "applyDelta", "_Quill", "__publicField", "DEFAULTS", "version", "parchment", "Parchment", "Module", "Theme", "resolveSelector", "selector", "querySelector", "expandModuleConfig", "config", "entries", "reduce", "expanded", "_ref", "omitUndefinedValuesFromOptions", "obj", "fromEntries", "filter", "entry", "containerOrSelector", "quillModuleDefaults", "quillDefaults", "themeModuleDefaults", "themeDefaults", "userModuleOptions", "toolbar", "merge", "createRegistryWithFormats", "modulesWithDefaults", "_ref2", "moduleClass", "shift", "oldDelta", "shiftRange", "args", "emit", "lengthOrSource", "start", "end", "transformPosition", "map", "pos", "Container", "ContainerBlot", "container_default", "import_quill_delta", "isLine", "blot", "Block", "BlockEmbed", "isUpdatable", "updateContent", "Scroll", "ScrollBlot", "constructor", "registry", "domNode", "_ref", "emitter", "batch", "optimize", "enable", "addEventListener", "e", "handleDragStart", "batchStart", "Array", "isArray", "batchEnd", "mutations", "update", "emitMount", "emit", "Emitter", "events", "SCROLL_BLOT_MOUNT", "emitUnmount", "SCROLL_BLOT_UNMOUNT", "emitEmbedUpdate", "change", "SCROLL_EMBED_UPDATE", "deleteAt", "index", "length", "first", "offset", "line", "last", "ref", "children", "head", "Break", "moveChildren", "remove", "enabled", "arguments", "undefined", "setAttribute", "formatAt", "format", "value", "insertAt", "def", "scroll", "query", "Scope", "BLOCK", "create", "statics", "defaultChild", "blotName", "appendChild", "endsWith", "slice", "embed", "insertBefore", "scope", "INLINE_BLOT", "wrapper", "insertContents", "delta", "renderBlocks", "deltaToRenderBlocks", "concat", "Delta", "insert", "pop", "shift", "shouldInsertNewlineChar", "type", "descendant", "key", "insertInlineContents", "newlineCharLength", "lineEndIndex", "formats", "bubbleFormats", "attributes", "AttributeMap", "diff", "Object", "keys", "forEach", "name", "refBlot", "refBlotOffset", "find", "split", "renderBlock", "block", "createBlock", "blockEmbed", "isEnabled", "getAttribute", "leaf", "path", "LeafBlot", "lines", "Number", "MAX_VALUE", "getLines", "blotIndex", "blotLength", "lengthLeft", "forEachAt", "child", "childIndex", "childLength", "push", "ContainerBlot", "context", "SCROLL_OPTIMIZE", "source", "sources", "USER", "observer", "takeRecords", "filter", "_ref2", "target", "SCROLL_BEFORE_UPDATE", "SCROLL_UPDATE", "updateEmbedAt", "b", "event", "preventDefault", "currentBlockDelta", "op", "splitted", "text", "INLINE", "entries", "_ref3", "BLOT", "_ref4", "__publicField", "className", "tagName", "allowedChildren", "Container", "parent", "inlineContents", "reduce", "Op", "scroll_default", "import_quill_delta", "config", "scope", "Scope", "BLOCK", "whitelist", "AlignAttribute", "Attributor", "AlignClass", "ClassAttributor", "AlignStyle", "StyleAttributor", "ColorAttributor", "StyleAttributor", "value", "domNode", "startsWith", "replace", "split", "map", "component", "parseInt", "toString", "slice", "join", "ColorClass", "ClassAttributor", "scope", "Scope", "INLINE", "ColorStyle", "BackgroundClass", "ClassAttributor", "scope", "Scope", "INLINE", "BackgroundStyle", "ColorAttributor", "CodeBlockContainer", "Container", "create", "value", "domNode", "setAttribute", "code", "index", "length", "children", "map", "child", "innerText", "join", "slice", "html", "escapeText", "CodeBlock", "Block", "register", "Quill", "__publicField", "TAB", "Code", "Inline", "blotName", "tagName", "className", "allowedChildren", "TextBlot", "Break", "Cursor", "requiredContainer", "config", "scope", "Scope", "BLOCK", "whitelist", "DirectionAttribute", "Attributor", "DirectionClass", "ClassAttributor", "DirectionStyle", "StyleAttributor", "config", "scope", "Scope", "INLINE", "whitelist", "FontClass", "ClassAttributor", "FontStyleAttributor", "StyleAttributor", "value", "node", "replace", "FontStyle", "SizeClass", "ClassAttributor", "scope", "Scope", "INLINE", "whitelist", "SizeStyle", "StyleAttributor", "import_quill_delta", "debug", "logger", "SHORTKEY", "test", "navigator", "platform", "Keyboard", "Module", "match", "evt", "binding", "some", "key", "which", "constructor", "quill", "options", "bindings", "Object", "keys", "forEach", "name", "addBinding", "shiftKey", "handleEnter", "metaKey", "ctrlKey", "altKey", "userAgent", "collapsed", "handleBackspace", "handleDelete", "prefix", "suffix", "handleDeleteRange", "offset", "listen", "keyBinding", "context", "arguments", "length", "undefined", "handler", "normalize", "warn", "Array", "isArray", "singleBinding", "push", "root", "addEventListener", "defaultPrevented", "isComposing", "keyCode", "matches", "concat", "filter", "blot", "Quill", "find", "target", "scroll", "range", "getSelection", "hasFocus", "line", "getLine", "index", "leafStart", "offsetStart", "getLeaf", "leafEnd", "offsetEnd", "prefixText", "TextBlot", "value", "slice", "suffixText", "curContext", "empty", "format", "getFormat", "event", "every", "isEqual", "call", "preventDefault", "getLength", "formats", "delta", "Delta", "retain", "delete", "prev", "statics", "blotName", "curFormats", "prevFormats", "AttributeMap", "diff", "formatDelta", "compose", "updateContents", "sources", "USER", "focus", "next", "nextFormats", "deleteRange", "lineFormats", "reduce", "query", "Scope", "BLOCK", "insert", "setSelection", "SILENT", "defaultOptions", "bold", "makeFormatHandler", "italic", "underline", "indent", "outdent", "list", "makeCodeBlockHandler", "deleteText", "tab", "table", "history", "cutoff", "formatLine", "scrollSelectionIntoView", "header", "module", "getModule", "row", "cell", "getTable", "shift", "tableSide", "blockquote", "trim", "insertText", "numLines", "cur", "makeEmbedArrowHandler", "makeTableArrowHandler", "DEFAULTS", "_ref", "CodeBlock", "TAB", "lines", "getLines", "i", "insertAt", "domNode", "textContent", "startsWith", "deleteAt", "update", "leaf", "EmbedBlot", "shortKey", "up", "targetRow", "parent", "targetCell", "children", "head", "Math", "min", "targetLine", "cloneDeep", "_ref2", "firstFormats", "lastFormats", "_table", "normalWeightRegexp", "blockTagNames", "isBlockElement", "element", "includes", "tagName", "normalizeEmptyLines", "doc", "Array", "from", "querySelectorAll", "filter", "br", "previousElementSibling", "nextElementSibling", "forEach", "parentNode", "removeChild", "normalizeFontWeight", "node", "getAttribute", "match", "fragment", "createDocumentFragment", "append", "childNodes", "replaceChild", "normalize", "querySelector", "ignoreRegexp", "idRegexp", "indentRegexp", "parseListItem", "element", "html", "style", "getAttribute", "idMatch", "match", "id", "Number", "indentMatch", "indent", "typeRegexp", "RegExp", "typeMatch", "type", "normalizeListItem", "doc", "msoList", "Array", "from", "querySelectorAll", "ignored", "others", "forEach", "node", "push", "parentNode", "removeChild", "documentElement", "innerHTML", "listItems", "map", "filter", "parsed", "length", "childListItems", "current", "shift", "nextElementSibling", "ul", "document", "createElement", "listItem", "li", "setAttribute", "appendChild", "replaceChild", "slice", "_ref", "e", "normalize", "NORMALIZERS", "msWord", "googleDocs", "normalizeExternalHTML", "doc", "documentElement", "forEach", "normalize", "normalizeExternalHTML_default", "debug", "logger", "CLIPBOARD_CONFIG", "Node", "TEXT_NODE", "matchText", "matchNewline", "matchBreak", "ELEMENT_NODE", "matchBlot", "matchAttributor", "matchStyles", "matchIndent", "matchList", "matchCodeBlock", "matchTable", "createMatchAlias", "matchIgnore", "ATTRIBUTE_ATTRIBUTORS", "AlignAttribute", "DirectionAttribute", "reduce", "memo", "attr", "keyName", "STYLE_ATTRIBUTORS", "AlignStyle", "BackgroundStyle", "ColorStyle", "DirectionStyle", "FontStyle", "SizeStyle", "Clipboard", "Module", "constructor", "quill", "options", "root", "addEventListener", "e", "onCaptureCopy", "onCapturePaste", "bind", "matchers", "concat", "forEach", "_ref", "selector", "matcher", "addMatcher", "push", "convert", "_ref2", "html", "text", "formats", "arguments", "length", "undefined", "CodeBlock", "blotName", "Delta", "insert", "delta", "convertHTML", "deltaEndsWith", "ops", "attributes", "table", "compose", "retain", "delete", "normalizeHTML", "doc", "normalizeExternalHTML", "DOMParser", "parseFromString", "container", "body", "nodeMatches", "WeakMap", "elementMatchers", "textMatchers", "prepareMatching", "traverse", "scroll", "dangerouslyPasteHTML", "index", "source", "Quill", "sources", "API", "setContents", "setSelection", "SILENT", "paste", "updateContents", "isCut", "defaultPrevented", "preventDefault", "range", "selection", "getRange", "onCopy", "clipboardData", "setData", "deleteRange", "normalizeURIList", "urlList", "split", "filter", "url", "join", "isEnabled", "getSelection", "getData", "files", "Array", "from", "uploader", "upload", "childElementCount", "firstElementChild", "tagName", "onPaste", "getText", "getSemanticHTML", "_ref3", "getFormat", "pastedDelta", "log", "USER", "scrollSelectionIntoView", "pair", "querySelectorAll", "node", "has", "get", "set", "__publicField", "DEFAULTS", "applyFormat", "format", "value", "query", "newDelta", "op", "endText", "i", "slice", "isLine", "Element", "match", "prototype", "EmbedBlot", "includes", "toLowerCase", "isBetweenInlineElements", "previousElementSibling", "nextElementSibling", "preNodes", "isPre", "parentNode", "nodeType", "childNodes", "childNode", "childrenDelta", "reducedDelta", "_node", "Attributor", "keys", "classes", "ClassAttributor", "styles", "StyleAttributor", "name", "Scope", "ATTRIBUTE", "attrName", "Object", "entries", "_ref4", "embed", "BlockBlot", "language", "indent", "parent", "composed", "element", "list", "checkedAttr", "getAttribute", "HTMLParagraphElement", "nextSibling", "BlockEmbed", "firstChild", "style", "fontStyle", "italic", "textDecoration", "underline", "strike", "fontWeight", "startsWith", "parseInt", "bold", "_ref5", "parseFloat", "textIndent", "parentElement", "row", "indexOf", "data", "trim", "replacer", "collapse", "replaced", "replace", "previousSibling", "History", "Module", "constructor", "quill", "options", "lastRecorded", "ignoreChange", "stack", "undo", "redo", "currentRange", "on", "Quill", "events", "EDITOR_CHANGE", "eventName", "value", "oldValue", "source", "SELECTION_CHANGE", "sources", "SILENT", "TEXT_CHANGE", "userOnly", "USER", "record", "transform", "transformRange", "keyboard", "addBinding", "key", "shortKey", "bind", "shiftKey", "test", "navigator", "platform", "root", "addEventListener", "event", "inputType", "preventDefault", "change", "dest", "length", "item", "pop", "base", "getContents", "inverseDelta", "delta", "invert", "push", "range", "updateContents", "restoreSelection", "clear", "cutoff", "changeDelta", "oldDelta", "ops", "undoDelta", "undoRange", "timestamp", "Date", "now", "delay", "compose", "maxStack", "shift", "transformStack", "stackItem", "setSelection", "index", "getLastChangeIndex", "scroll", "__publicField", "DEFAULTS", "remoteDelta", "i", "oldItem", "splice", "endsWithNewlineChange", "lastOp", "insert", "endsWith", "attributes", "Object", "keys", "some", "attr", "query", "Scope", "BLOCK", "deleteLength", "reduce", "op", "delete", "changeIndex", "start", "transformPosition", "end", "import_quill_delta", "Uploader", "Module", "constructor", "quill", "options", "root", "addEventListener", "e", "preventDefault", "native", "document", "caretRangeFromPoint", "clientX", "clientY", "caretPositionFromPoint", "position", "createRange", "setStart", "offsetNode", "offset", "setEnd", "normalized", "selection", "normalizeNative", "range", "normalizedToRange", "dataTransfer", "files", "upload", "uploads", "Array", "from", "forEach", "file", "mimetypes", "includes", "type", "push", "length", "handler", "call", "DEFAULTS", "scroll", "query", "promises", "map", "Promise", "resolve", "reader", "FileReader", "onload", "result", "readAsDataURL", "all", "then", "images", "update", "reduce", "delta", "image", "insert", "Delta", "retain", "index", "delete", "updateContents", "Emitter", "sources", "USER", "setSelection", "SILENT", "uploader_default", "import_quill_delta", "import_quill_delta", "INSERT_TYPES", "Input", "Module", "constructor", "quill", "options", "root", "addEventListener", "event", "handleBeforeInput", "test", "navigator", "userAgent", "on", "Quill", "events", "COMPOSITION_BEFORE_START", "handleCompositionStart", "deleteRange", "range", "replaceText", "text", "arguments", "length", "undefined", "formats", "getFormat", "index", "updateContents", "Delta", "retain", "insert", "sources", "USER", "setSelection", "SILENT", "composition", "isComposing", "defaultPrevented", "includes", "inputType", "staticRange", "getTargetRanges", "collapsed", "getPlainTextFromInputEvent", "normalized", "selection", "normalizeNative", "normalizedToRange", "preventDefault", "getSelection", "data", "dataTransfer", "types", "getData", "input_default", "isMac", "test", "navigator", "platform", "TTL_FOR_VALID_SELECTION_CHANGE", "canMoveCaretBeforeUINode", "event", "key", "ctrlKey", "UINode", "Module", "constructor", "quill", "options", "isListening", "selectionChangeDeadline", "handleArrowKeys", "handleNavigationShortcuts", "keyboard", "addBinding", "offset", "shiftKey", "handler", "range", "_ref", "line", "ParentBlot", "uiNode", "isRTL", "getComputedStyle", "domNode", "setSelection", "index", "length", "Quill", "sources", "USER", "root", "addEventListener", "defaultPrevented", "ensureListeningToSelectionChange", "Date", "now", "listener", "handleSelectionChange", "document", "once", "selection", "getSelection", "getRangeAt", "collapsed", "startOffset", "scroll", "find", "startContainer", "newRange", "createRange", "setStartAfter", "setEndAfter", "removeAllRanges", "addRange", "uiNode_default", "Quill", "register", "Block", "BlockEmbed", "Break", "Container", "Cursor", "Embed", "Inline", "Scroll", "TextBlot", "Clipboard", "History", "Keyboard", "Uploader", "Input", "UINode", "core_default", "IndentAttributor", "ClassAttributor", "add", "node", "value", "normalizedValue", "indent", "remove", "toString", "canAdd", "parseInt", "undefined", "IndentClass", "scope", "Scope", "BLOCK", "whitelist", "indent_default", "Blockquote", "Block", "__publicField", "blotName", "tagName", "blockquote_default", "Header", "Block", "formats", "domNode", "tagName", "indexOf", "__publicField", "blotName", "header_default", "ListContainer", "Container", "blotName", "tagName", "ListItem", "Block", "create", "value", "node", "setAttribute", "formats", "domNode", "getAttribute", "undefined", "register", "Quill", "constructor", "scroll", "ui", "ownerDocument", "createElement", "listEventHandler", "e", "isEnabled", "format", "statics", "preventDefault", "addEventListener", "attachUI", "name", "allowedChildren", "requiredContainer", "Bold", "Inline", "create", "formats", "optimize", "context", "domNode", "tagName", "statics", "replaceWith", "blotName", "__publicField", "bold_default", "Italic", "Bold", "__publicField", "blotName", "tagName", "italic_default", "Link", "Inline", "create", "value", "node", "setAttribute", "sanitize", "formats", "domNode", "getAttribute", "url", "PROTOCOL_WHITELIST", "SANITIZED_URL", "format", "name", "statics", "blotName", "constructor", "__publicField", "tagName", "protocols", "anchor", "document", "createElement", "href", "protocol", "slice", "indexOf", "Script", "Inline", "create", "value", "document", "createElement", "formats", "domNode", "tagName", "__publicField", "blotName", "script_default", "Strike", "Bold", "__publicField", "blotName", "tagName", "strike_default", "Underline", "Inline", "__publicField", "blotName", "tagName", "underline_default", "Formula", "Embed", "create", "value", "window", "katex", "Error", "node", "render", "throwOnError", "errorColor", "setAttribute", "domNode", "getAttribute", "html", "formula", "__publicField", "blotName", "className", "tagName", "formula_default", "ATTRIBUTES", "Image", "EmbedBlot", "create", "value", "node", "setAttribute", "sanitize", "formats", "domNode", "reduce", "attribute", "hasAttribute", "getAttribute", "match", "url", "test", "format", "name", "indexOf", "removeAttribute", "__publicField", "blotName", "tagName", "image_default", "ATTRIBUTES", "Video", "BlockEmbed", "create", "value", "node", "setAttribute", "sanitize", "formats", "domNode", "reduce", "attribute", "hasAttribute", "getAttribute", "url", "Link", "format", "name", "indexOf", "removeAttribute", "html", "video", "__publicField", "blotName", "className", "tagName", "video_default", "import_quill_delta", "TokenAttributor", "ClassAttributor", "scope", "Scope", "INLINE", "CodeToken", "Inline", "formats", "node", "scroll", "domNode", "classList", "contains", "CodeBlock", "className", "parentNode", "constructor", "value", "add", "format", "blotName", "remove", "statics", "optimize", "arguments", "unwrap", "SyntaxCodeBlock", "create", "setAttribute", "getAttribute", "register", "name", "replaceWith", "formatAt", "length", "SyntaxCodeBlockContainer", "CodeBlockContainer", "attach", "forceNext", "emitMount", "children", "forEach", "child", "index", "highlight", "forced", "undefined", "head", "text", "Array", "from", "childNodes", "filter", "uiNode", "map", "textContent", "join", "language", "cachedText", "trim", "oldDelta", "reduce", "delta", "concat", "blockDelta", "Delta", "diff", "_ref", "retain", "attributes", "Object", "keys", "includes", "html", "codeBlock", "find", "escapeText", "code", "context", "parent", "allowedChildren", "requiredContainer", "CursorBlot", "TextBlot", "BreakBlot", "lib", "versionString", "majorVersion", "split", "parseInt", "Syntax", "Module", "Quill", "quill", "options", "hljs", "Error", "languages", "memo", "_ref2", "key", "highlightBlot", "bind", "initListener", "initTimer", "on", "events", "SCROLL_BLOT_MOUNT", "blot", "select", "root", "ownerDocument", "createElement", "_ref3", "label", "option", "appendChild", "addEventListener", "focus", "attachUI", "timer", "SCROLL_OPTIMIZE", "clearTimeout", "setTimeout", "interval", "force", "selection", "composing", "update", "sources", "USER", "range", "getSelection", "descendants", "container", "SILENT", "setSelection", "line", "i", "insert", "innerHTML", "traverse", "compose", "data", "nodeText", "WeakMap", "DEFAULTS", "window", "import_quill_delta", "TableCell", "Block", "create", "value", "node", "setAttribute", "tableId", "formats", "domNode", "hasAttribute", "getAttribute", "cellOffset", "parent", "children", "indexOf", "format", "name", "blotName", "row", "rowOffset", "table", "_TableCell", "__publicField", "tagName", "TableRow", "Container", "checkMerge", "next", "head", "thisHead", "thisTail", "tail", "nextHead", "nextTail", "optimize", "context", "forEach", "child", "childFormats", "nextFormats", "splitAfter", "prev", "TableBody", "TableContainer", "balanceCells", "rows", "descendants", "maxColumns", "reduce", "max", "Math", "length", "Array", "fill", "blot", "scroll", "appendChild", "cells", "column", "map", "at", "deleteColumn", "index", "body", "descendant", "cell", "remove", "insertColumn", "ref", "insertBefore", "insertRow", "id", "allowedChildren", "requiredContainer", "random", "toString", "slice", "Table", "Module", "register", "Quill", "TableCell", "TableRow", "TableBody", "TableContainer", "constructor", "arguments", "listenBalanceCells", "balanceTables", "quill", "scroll", "descendants", "forEach", "table", "balanceCells", "deleteColumn", "cell", "getTable", "cellOffset", "update", "sources", "USER", "deleteRow", "row", "remove", "deleteTable", "offset", "setSelection", "SILENT", "range", "length", "undefined", "getSelection", "getLine", "index", "statics", "blotName", "parent", "insertColumn", "column", "shift", "rowOffset", "insertColumnLeft", "insertColumnRight", "insertRow", "children", "insertRowAbove", "insertRowBelow", "insertTable", "rows", "columns", "delta", "Array", "fill", "reduce", "memo", "text", "join", "insert", "tableId", "Delta", "retain", "updateContents", "on", "events", "SCROLL_OPTIMIZE", "mutations", "some", "mutation", "includes", "target", "tagName", "once", "TEXT_CHANGE", "old", "source", "table_default", "import_quill_delta", "debug", "logger", "Toolbar", "Module", "constructor", "quill", "options", "Array", "isArray", "container", "document", "createElement", "setAttribute", "addControls", "parentNode", "insertBefore", "querySelector", "HTMLElement", "error", "classList", "add", "controls", "handlers", "Object", "keys", "forEach", "format", "handler", "addHandler", "from", "querySelectorAll", "input", "attach", "on", "Quill", "events", "EDITOR_CHANGE", "range", "selection", "getRange", "update", "find", "className", "indexOf", "slice", "tagName", "scroll", "query", "warn", "eventName", "addEventListener", "e", "value", "selectedIndex", "selected", "hasAttribute", "contains", "preventDefault", "focus", "call", "prototype", "EmbedBlot", "prompt", "updateContents", "Delta", "retain", "index", "delete", "length", "insert", "sources", "USER", "push", "formats", "getFormat", "pair", "option", "replace", "remove", "isActive", "getAttribute", "toString", "toggle", "DEFAULTS", "addButton", "appendChild", "groups", "group", "control", "addSelect", "values", "String", "clean", "getSelection", "name", "Scope", "INLINE", "removeFormat", "direction", "align", "indent", "parseInt", "modifier", "link", "list", "icons_default", "align", "alignLeftIcon", "center", "alignCenterIcon", "right", "alignRightIcon", "justify", "alignJustifyIcon", "background", "backgroundIcon", "blockquote", "blockquoteIcon", "bold", "boldIcon", "clean", "cleanIcon", "code", "codeIcon", "color", "colorIcon", "direction", "directionLeftToRightIcon", "rtl", "directionRightToLeftIcon", "formula", "formulaIcon", "header", "headerIcon", "header2Icon", "header3Icon", "header4Icon", "header5Icon", "header6Icon", "italic", "italicIcon", "image", "imageIcon", "indent", "indentIcon", "outdentIcon", "link", "linkIcon", "list", "bullet", "listBulletIcon", "check", "listCheckIcon", "ordered", "listOrderedIcon", "script", "sub", "subscriptIcon", "super", "superscriptIcon", "strike", "strikeIcon", "table", "tableIcon", "underline", "underlineIcon", "video", "videoIcon", "optionsCounter", "toggleAriaAttribute", "element", "attribute", "setAttribute", "getAttribute", "Picker", "constructor", "select", "container", "document", "createElement", "buildPicker", "style", "display", "parentNode", "insertBefore", "label", "addEventListener", "togglePicker", "event", "key", "escape", "preventDefault", "update", "bind", "classList", "toggle", "options", "buildItem", "option", "item", "tabIndex", "add", "value", "textContent", "selectItem", "buildLabel", "innerHTML", "DropdownIcon", "appendChild", "buildOptions", "id", "Array", "from", "forEach", "selected", "attributes", "name", "close", "setTimeout", "focus", "remove", "trigger", "arguments", "length", "undefined", "querySelector", "selectedIndex", "children", "indexOf", "hasAttribute", "removeAttribute", "dispatchEvent", "Event", "isActive", "picker_default", "ColorPicker", "Picker", "constructor", "select", "label", "innerHTML", "container", "classList", "add", "Array", "from", "querySelectorAll", "slice", "forEach", "item", "buildItem", "option", "style", "backgroundColor", "getAttribute", "selectItem", "trigger", "colorLabel", "querySelector", "value", "tagName", "stroke", "fill", "color_picker_default", "IconPicker", "Picker", "constructor", "select", "icons", "container", "classList", "add", "Array", "from", "querySelectorAll", "forEach", "item", "innerHTML", "getAttribute", "defaultItem", "querySelector", "selectItem", "target", "trigger", "label", "icon_picker_default", "isScrollable", "el", "overflowY", "getComputedStyle", "Tooltip", "constructor", "quill", "boundsContainer", "document", "body", "root", "addContainer", "innerHTML", "TEMPLATE", "addEventListener", "style", "marginTop", "scrollTop", "hide", "classList", "add", "position", "reference", "left", "width", "offsetWidth", "top", "bottom", "remove", "containerBounds", "getBoundingClientRect", "rootBounds", "shift", "right", "height", "verticalShift", "show", "tooltip_default", "ALIGNS", "COLORS", "FONTS", "HEADERS", "SIZES", "BaseTheme", "Theme", "constructor", "quill", "options", "listener", "e", "document", "body", "contains", "root", "removeEventListener", "tooltip", "target", "activeElement", "textbox", "hasFocus", "hide", "pickers", "forEach", "picker", "container", "close", "emitter", "listenDOM", "addModule", "name", "module", "extendToolbar", "buildButtons", "buttons", "icons", "Array", "from", "button", "getAttribute", "split", "startsWith", "slice", "innerHTML", "rtl", "value", "buildPickers", "selects", "map", "select", "classList", "querySelector", "fillSelect", "align", "IconPicker", "format", "ColorPicker", "Picker", "update", "on", "Emitter", "events", "EDITOR_CHANGE", "DEFAULTS", "merge", "modules", "toolbar", "handlers", "formula", "theme", "edit", "image", "fileInput", "createElement", "setAttribute", "uploader", "mimetypes", "join", "add", "addEventListener", "range", "getSelection", "upload", "files", "appendChild", "click", "video", "BaseTooltip", "Tooltip", "boundsContainer", "listen", "event", "key", "save", "preventDefault", "cancel", "restoreFocus", "mode", "arguments", "length", "undefined", "preview", "remove", "bounds", "getBounds", "selection", "savedRange", "position", "focus", "preventScroll", "scrollTop", "linkRange", "formatText", "sources", "USER", "extractVideoUrl", "index", "insertEmbed", "insertText", "setSelection", "url", "match", "values", "defaultValue", "option", "String", "TOOLBAR_CONFIG", "header", "BubbleTooltip", "BaseTooltip", "constructor", "quill", "bounds", "on", "Emitter", "events", "EDITOR_CHANGE", "type", "range", "oldRange", "source", "SELECTION_CHANGE", "length", "sources", "USER", "show", "root", "style", "left", "width", "offsetWidth", "lines", "getLines", "index", "getBounds", "position", "lastLine", "getIndex", "Math", "min", "indexBounds", "Range", "document", "activeElement", "textbox", "hasFocus", "hide", "listen", "querySelector", "addEventListener", "classList", "remove", "SCROLL_OPTIMIZE", "setTimeout", "contains", "getSelection", "cancel", "reference", "shift", "arrow", "marginLeft", "__publicField", "TEMPLATE", "join", "BubbleTheme", "BaseTheme", "options", "modules", "toolbar", "container", "add", "extendToolbar", "tooltip", "appendChild", "buildButtons", "querySelectorAll", "icons", "buildPickers", "DEFAULTS", "merge", "handlers", "link", "value", "theme", "edit", "format", "Quill", "TOOLBAR_CONFIG", "header", "list", "SnowTooltip", "BaseTooltip", "preview", "root", "querySelector", "listen", "addEventListener", "event", "classList", "contains", "save", "edit", "textContent", "preventDefault", "linkRange", "range", "restoreFocus", "quill", "formatText", "Emitter", "sources", "USER", "hide", "on", "events", "SELECTION_CHANGE", "oldRange", "source", "length", "link", "offset", "scroll", "descendant", "LinkBlot", "index", "Range", "formats", "domNode", "setAttribute", "show", "bounds", "getBounds", "position", "removeAttribute", "__publicField", "TEMPLATE", "join", "SnowTheme", "BaseTheme", "constructor", "options", "modules", "toolbar", "container", "add", "extendToolbar", "buildButtons", "querySelectorAll", "icons", "buildPickers", "tooltip", "keyboard", "addBinding", "key", "shortKey", "_range", "context", "handlers", "call", "format", "DEFAULTS", "merge", "value", "getSelection", "getText", "test", "indexOf", "theme", "Quill", "snow_default", "Quill", "register", "DirectionAttribute", "AlignClass", "BackgroundClass", "ColorClass", "DirectionClass", "FontClass", "SizeClass", "AlignStyle", "BackgroundStyle", "ColorStyle", "DirectionStyle", "FontStyle", "SizeStyle", "Indent", "Blockquote", "CodeBlock", "Header", "List", "Bold", "InlineCode", "Italic", "Link", "Script", "Strike", "Underline", "Formula", "Image", "Video", "Syntax", "Table", "Toolbar", "BubbleTheme", "SnowTheme", "Icons", "Picker", "IconPicker", "ColorPicker", "Tooltip", "import_showdown", "extend", "destination", "i", "source", "key", "repeat", "character", "count", "trimLeadingNewlines", "string", "trimTrailingNewlines", "indexEnd", "blockElements", "isBlock", "node", "is", "voidElements", "isVoid", "hasVoid", "has", "meaningfulWhenBlankElements", "isMeaningfulWhenBlank", "hasMeaningfulWhenBlank", "tagNames", "tagName", "rules", "content", "options", "hLevel", "underline", "parent", "prefix", "start", "index", "className", "language", "code", "fenceChar", "fenceSize", "fenceInCodeRegex", "match", "fence", "href", "title", "cleanAttribute", "replacement", "reference", "id", "references", "hasSiblings", "isCodeBlock", "extraSpace", "delimiter", "matches", "alt", "src", "titlePart", "attribute", "Rules", "rule", "filter", "findRule", "fn", "filterValue", "collapseWhitespace", "element", "isPre", "prevText", "keepLeadingWs", "prev", "next", "text", "remove", "nextNode", "current", "root", "canParseHTMLNatively", "Parser", "canParse", "createHTMLParser", "shouldUseActiveX", "doc", "useActiveX", "HTMLParser", "RootNode", "input", "htmlParser", "isPreOrCode", "_htmlParser", "Node", "isBlank", "flankingWhitespace", "edges", "edgeWhitespace", "isFlankedByWhitespace", "m", "side", "sibling", "regExp", "isFlanked", "reduce", "escapes", "TurndownService", "defaults", "canConvert", "output", "process", "postProcess", "plugin", "accumulator", "escape", "parentNode", "self", "replacementForNode", "join", "whitespace", "s1", "s2", "nls", "separator", "turndown_browser_es_default", "attachmentSelector", "attachments", "preview", "presentation", "caption", "name", "size", "file", "attributes", "default", "tagName", "parse", "quote", "nestable", "heading1", "terminal", "breakOnReturn", "group", "code", "htmlAttributes", "text", "plaintext", "bulletList", "bullet", "listAttribute", "test", "element", "parentNode", "this", "numberList", "number", "attachmentGallery", "exclusive", "_element$tagName", "toLowerCase", "androidVersionMatch", "navigator", "userAgent", "match", "androidVersion", "parseInt", "browser$1", "composesExistingText", "recentAndroid", "samsungAndroid", "forcesObjectResizing", "supportsInputEvents", "InputEvent", "every", "prop", "prototype", "lang$1", "attachFiles", "bold", "bullets", "byte", "bytes", "captionPlaceholder", "indent", "italic", "link", "numbers", "outdent", "redo", "remove", "strike", "undo", "unlink", "url", "urlPlaceholder", "GB", "KB", "MB", "PB", "TB", "sizes", "lang", "file_size_formatting", "prefix", "precision", "formatter", "concat", "base", "exp", "Math", "floor", "log", "withoutInsignificantZeros", "pow", "toFixed", "replace", "ZERO_WIDTH_SPACE", "NON_BREAKING_SPACE", "extend", "properties", "key", "value", "html", "document", "documentElement", "matches", "handleEvent", "eventName", "onElement", "matchingSelector", "withCallback", "inPhase", "preventDefault", "times", "arguments", "length", "undefined", "selector", "useCapture", "handler", "event", "destroy", "target", "findClosestElementFromNode", "call", "removeEventListener", "addEventListener", "triggerEvent", "bubbles", "cancelable", "createEvent", "initEvent", "dispatchEvent", "elementMatchesSelector", "nodeType", "node", "untilNode", "Node", "ELEMENT_NODE", "closest", "innerElementIsActive", "activeElement", "elementContainsNode", "findChildIndexOfNode", "_node", "childIndex", "previousSibling", "removeNode", "_node$parentNode", "removeChild", "walkTree", "tree", "onlyNodesOfType", "usingFilter", "expandEntityReferences", "whatToShow", "NodeFilter", "SHOW_ELEMENT", "SHOW_TEXT", "SHOW_COMMENT", "SHOW_ALL", "createTreeWalker", "makeElement", "tag", "options", "createElement", "editable", "contenteditable", "setAttribute", "style", "data", "dataset", "className", "split", "forEach", "classList", "add", "textContent", "childNodes", "childNode", "appendChild", "blockTagNames", "getBlockTagNames", "blockAttributes", "push", "nodeIsBlockContainer", "nodeIsBlockStartComment", "firstChild", "nodeIsBlockStart", "strict", "includes", "nodeIsCommentNode", "COMMENT_NODE", "nodeIsCursorTarget", "nodeIsTextNode", "trixCursorTarget", "nodeIsAttachmentElement", "nodeIsEmptyTextNode", "TEXT_NODE", "input", "level2Enabled", "getLevel", "browser", "pickFiles", "callback", "type", "multiple", "hidden", "id", "fileInputId", "files", "getElementById", "body", "click", "parser", "removeBlankTableCells", "tableCellSeparator", "tableRowSeparator", "text_attributes", "inheritable", "window", "getComputedStyle", "fontWeight", "fontStyle", "href", "groupTagName", "getAttribute", "frozen", "backgroundColor", "toolbar", "getDefaultHTML", "interval", "U", "i", "n", "a", "attachment", "attachmentCaption", "attachmentCaptionEditor", "attachmentMetadata", "attachmentMetadataContainer", "attachmentName", "attachmentProgress", "attachmentSize", "attachmentToolbar", "u", "M", "l", "j", "W", "V", "q", "BasicObject", "expression", "toMethod", "toProperty", "optional", "parseProxyMethodExpression", "subject", "object", "_this$toMethod", "_object", "apply", "proxyMethodExpressionPattern", "Error", "args", "Function", "RegExp", "K", "G", "$", "UTF16String", "box", "fromUCS2String", "toString", "ucs2String", "ucs2decode", "codepoints", "ucs2encode", "constructor", "super", "ucs2Length", "offsetToUCS2Offset", "offset", "slice", "max", "offsetFromUCS2Offset", "ucs2Offset", "fromCodepoints", "charAt", "isEqualTo", "toJSON", "getCacheKey", "hasArrayFrom", "_Array$from", "Array", "from", "hasStringCodePointAt", "_$codePointAt", "codePointAt", "hasStringFromCodePoint", "_String$fromCodePoint", "String", "fromCodePoint", "string", "map", "char", "output", "counter", "charCodeAt", "extra", "array", "result", "fromCharCode", "join", "TrixObject", "jsonString", "fromJSON", "JSON", "hasSameConstructorAs", "inspect", "parts", "contents", "contentsForInspection", "toJSONString", "stringify", "toUTF16String", "arraysAreEqual", "b", "index", "spliceArray", "_len", "_key", "splice", "RTL_PATTERN", "getDirection", "dir", "dirName", "textArea", "form", "supportsDirName", "FormData", "has", "supportsDirSelector", "get", "trim", "allAttributeNames", "blockAttributeNames", "textAttributeNames", "listAttributeNames", "getAllAttributeNames", "getTextAttributeNames", "getBlockAttributeNames", "getBlockConfig", "attributeName", "config", "Object", "keys", "getTextConfig", "installDefaultCSSForTagName", "defaultCSS", "insertStyleElementForTagName", "nonce", "getCSPNonce", "head", "insertBefore", "getMetaElement", "content", "querySelector", "testTransferData", "dataTransferIsPlainText", "dataTransfer", "getData", "DOMParser", "parseFromString", "keyEventIsKeyboardCommand", "platform", "metaKey", "ctrlKey", "defer", "fn", "setTimeout", "copyObject", "objectsAreEqual", "normalizeRange", "range", "isArray", "copyValue", "rangeIsCollapsed", "start", "end", "rangeValuesAreEqual", "rangesAreEqual", "leftRange", "rightRange", "leftStart", "leftEnd", "rightStart", "rightEnd", "left", "right", "SelectionChangeObserver", "update", "bind", "selectionManagers", "started", "stop", "registerSelectionManager", "selectionManager", "unregisterSelectionManager", "filter", "sm", "notifySelectionManagersOfSelectionChange", "selectionDidChange", "reset", "selectionChangeObserver", "getDOMSelection", "selection", "getSelection", "rangeCount", "getDOMRange", "_getDOMSelection", "domRange", "getRangeAt", "domRangeIsPrivate", "setDOMRange", "removeAllRanges", "addRange", "nodeIsPrivate", "startContainer", "endContainer", "getPrototypeOf", "normalizeSpaces", "breakableWhitespacePattern", "squishBreakableWhitespace", "source", "utf16StringDifferences", "diffA", "utf16StringDifference", "utf16String", "diffB", "leftIndex", "rightIndexA", "rightIndexB", "Hash", "fromCommonAttributesOfObjects", "objects", "hash", "getKeys", "getKeysCommonToHash", "values", "copy", "merge", "unbox", "toArray", "isEmpty", "toObject", "keyToRemove", "sort", "ObjectGroup", "groupObjects", "ungroupedObjects", "depth", "asTree", "_object$canBeGrouped2", "_object$canBeGrouped", "_group$canBeGroupedWi", "_group", "canBeGrouped", "canBeGroupedWith", "getObjects", "getDepth", "ObjectMap", "find", "ElementStore", "elements", "getKey", "trixStoreKey", "Operation", "isPerforming", "performing", "hasPerformed", "performed", "hasSucceeded", "succeeded", "hasFailed", "getPromise", "promise", "Promise", "resolve", "reject", "perform", "release", "_this$promise", "_this$promise$cancel", "cancel", "proxyMethod", "ObjectView", "childViews", "rootView", "getNodes", "nodes", "createNodes", "cloneNode", "invalidate", "_this$parentView", "parentView", "invalidateViewForObject", "_this$findViewForObje", "findViewForObject", "findOrCreateCachedChildView", "viewClass", "view", "getCachedViewForObject", "recordChildView", "createChildView", "cacheViewForObject", "ObjectGroupView", "getAllChildViews", "views", "childView", "findElement", "findElementForObject", "getViewCache", "isViewCachingEnabled", "viewCache", "shouldCacheViews", "enableViewCaching", "disableViewCaching", "_this$getViewCache", "cache", "garbageCollectCachedViews", "objectKeys", "objectGroup", "getChildViews", "createContainerElement", "DEFAULT_ALLOWED_ATTRIBUTES", "DEFAULT_FORBIDDEN_PROTOCOLS", "DEFAULT_FORBIDDEN_ELEMENTS", "HTMLSanitizer", "sanitizedElement", "sanitize", "sanitizedHtml", "getHTML", "outerHTML", "innerHTML", "sanitizer", "allowedAttributes", "forbiddenProtocols", "forbiddenElements", "createBodyElementForHTML", "sanitizeElements", "normalizeListElementNesting", "getBody", "walker", "nodesToRemove", "nextNode", "currentNode", "elementIsRemovable", "sanitizeElement", "hasAttribute", "protocol", "removeAttribute", "_ref", "indexOf", "querySelectorAll", "listElement", "previousElement", "previousElementSibling", "elementIsForbidden", "elementIsntSerializable", "doc", "implementation", "createHTMLDocument", "css", "AttachmentView", "uploadProgressDelegate", "attachmentPiece", "piece", "createContentNodes", "innerElement", "figure", "getClassName", "getHref", "tabindex", "hasContent", "setHTML", "getContent", "createCaptionElement", "isPending", "progressElement", "class", "getUploadProgress", "trixMutable", "createCursorTarget", "figcaption", "getCaption", "captionConfig", "getCaptionConfig", "getFilename", "getFormattedFilesize", "nameElement", "createTextNode", "sizeElement", "names", "getType", "extension", "getExtension", "trixAttachment", "trixContentType", "getContentType", "trixId", "trixAttributes", "trixSerialize", "htmlContainsTagName", "_config$attachments$t", "findProgressElement", "_this$findElement", "attachmentDidChangeUploadProgress", "div", "PreviewableAttachmentView", "previewDelegate", "image", "src", "refresh", "updateAttributesForImage", "getURL", "previewURL", "getPreviewURL", "serializedAttributes", "width", "getWidth", "height", "getHeight", "storeKey", "attachmentDidChangeAttributes", "PieceView", "getAttributes", "textConfig", "context", "createAttachmentNodes", "createStringNodes", "_element", "firstElementChild", "isPreviewable", "_this$textConfig", "iterable", "substring", "preserveSpaces", "styles", "pendingElement", "styleProperty", "isLast", "isFirst", "followsWhitespace", "TextView", "pieces", "getPieces", "lastIndex", "endsWithWhitespace", "previousPiece", "BlockView", "block", "createComment", "_getBlockConfig", "getLastAttribute", "textView", "shouldAddExtraNewlineElement", "isRTL", "assign", "getBlockBreakPosition", "entries", "DocumentView", "render", "sync", "elementStore", "setDocument", "shadowElement", "getBlocks", "isSynced", "elementsHaveEqualHTML", "fragment", "createDocumentFragmentForSync", "lastChild", "didSync", "findStoredElements", "createDocumentFragment", "storedElement", "replaceChild", "otherElement", "ignoreSpaces", "Ce", "t", "e", "o", "s", "ke", "r", "Ee", "Re", "Se", "De", "Le", "we", "Te", "Fe", "Be", "Pe", "Piece", "types", "pieceJSON", "copyWithAttributes", "getValue", "copyWithAdditionalAttributes", "copyWithoutAttribute", "attribute", "getAttributesHash", "hasSameStringValueAsPiece", "hasSameAttributesAsPiece", "isBlockBreak", "isSerializable", "getLength", "canBeConsolidatedWith", "_defineProperty", "ImagePreloadOperation", "Image", "onload", "naturalWidth", "naturalHeight", "onerror", "Attachment", "attributesForFile", "setFile", "filename", "filesize", "contentType", "attachmentJSON", "releaseFile", "didChangeAttributes", "setAttributes", "newAttributes", "_this$previewDelegate", "_this$previewDelegate2", "_this$delegate", "_this$delegate$attach", "delegate", "preloadURL", "previewablePattern", "getFilesize", "_this$getFilename$mat", "getFile", "preloadFile", "releasePreloadedFile", "uploadProgress", "setUploadProgress", "_this$uploadProgressD", "_this$uploadProgressD2", "preloadingURL", "setPreviewURL", "_this$previewDelegate3", "_this$previewDelegate4", "_this$delegate2", "_this$delegate2$attac", "attachmentDidChangePreviewURL", "preload", "fileObjectURL", "URL", "createObjectURL", "revokeObjectURL", "then", "catch", "AttachmentPiece", "ensureAttachmentExclusivelyHasAttribute", "removeProhibitedAttributes", "permittedAttributes", "_piece$attachment", "json", "toConsole", "registerType", "StringPiece", "consolidateWith", "splitAtOffset", "SplittableList", "eachObject", "insertObjectAtIndex", "insertSplittableListAtIndex", "splittableList", "insertSplittableListAtPosition", "position", "splitObjectAtPosition", "editObjectAtIndex", "replaceObjectAtIndex", "removeObjectAtIndex", "getObjectAtIndex", "getSplittableListInRange", "rightIndex", "splitObjectsAtRange", "selectSplittableList", "removeObjectsInRange", "transformObjectsInRange", "transform", "transformedObjects", "rightOuterIndex", "leftInnerIndex", "startOfRange", "endOfRange", "getObjectAtPosition", "findIndexAndOffsetAtPosition", "splitIndex", "splitOffset", "leftObject", "rightObject", "consolidate", "pendingObject", "_pendingObject$canBeC", "_pendingObject", "consolidateFromIndexToIndex", "startIndex", "endIndex", "objectsInRange", "consolidatedInRange", "currentPosition", "nextPosition", "findPositionAtIndexAndOffset", "currentIndex", "getEndPosition", "endPosition", "objectArraysAreEqual", "Text", "textJSON", "notEmpty", "pieceList", "copyWithPieceList", "copyUsingObjectMap", "objectMap", "appendText", "insertTextAtPosition", "removeTextAtRange", "replaceTextAtRange", "moveTextFromRangeToPosition", "getTextAtRange", "addAttributeAtRange", "addAttributesAtRange", "removeAttributeAtRange", "setAttributesAtRange", "getAttributesAtPosition", "_this$pieceList$getOb", "getCommonAttributes", "getCommonAttributesAtRange", "getExpandedRangeForAttributeAtOffset", "getStringAtRange", "getStringAtPosition", "startsWithString", "endsWithString", "getAttachmentPieces", "getAttachments", "getAttachmentAndPositionById", "attachmentId", "getAttachmentById", "getRangeOfAttachment", "attachmentAndPosition", "updateAttributesForAttachment", "_text$pieceList", "eachPiece", "getPieceAtPosition", "toSerializableText", "Block", "blockJSON", "applyBlockBreakToText", "copyWithText", "copyWithoutText", "copyWithoutAttributes", "mappedText", "addAttribute", "expandAttribute", "addHTMLAttribute", "removeLastValue", "removeLastAttribute", "getLastElement", "getAttributeLevel", "getAttributeAtLevel", "level", "hasAttributes", "getLastNestableAttribute", "getNestableAttributes", "getNestingLevel", "decreaseNestingLevel", "increaseNestingLevel", "lastIndexOf", "getListItemAttributes", "isListItem", "isTerminalBlock", "_getBlockConfig2", "breaksOnReturn", "_getBlockConfig3", "findLineBreakInDirectionFromPosition", "direction", "newlineText", "textForStringWithAttributes", "getTextWithoutBlockBreak", "textEndsInBlockBreak", "otherBlock", "otherAttributes", "otherAttribute", "getListAttributeNames", "unmarkExistingInnerBlockBreaksInText", "addBlockBreakToText", "modified", "innerPieces", "lastPiece", "unmarkBlockBreakPiece", "blockBreakText", "blockBreak", "Document", "documentJSON", "textAttributes", "blocks", "blockList", "getBlockAtIndex", "consolidateBlocks", "copyUsingObjectsFromDocument", "sourceDocument", "copyWithBaseBlockAttributes", "replaceBlock", "oldBlock", "newBlock", "insertDocumentAtRange", "locationFromPosition", "getBlockAtPosition", "mergeDocumentAtRange", "formattedDocument", "startPosition", "startLocation", "baseBlockAttributes", "getBaseBlockAttributes", "trailingBlockAttributes", "leadingBlockAttributes", "blockCount", "getBlockCount", "firstBlock", "firstText", "insertTextAtRange", "leftPosition", "rightPosition", "leftLocation", "rightLocation", "locationRangeFromRange", "leftOffset", "leftBlock", "rightOffset", "rightBlock", "leftText", "rightText", "affectedBlockCount", "getDocumentAtRange", "movingRightward", "eachBlockAtRange", "textRange", "eachBlock", "getTextAtIndex", "removeAttributeForAttachment", "setHTMLAttributeAtPosition", "updatedBlock", "insertBlockBreakAtRange", "applyBlockAttributeAtRange", "expanded", "expandRangeToLineBreaksAndSplitBlocks", "blockConfig", "removeLastListAttributeAtRange", "exceptAttributeName", "converted", "convertLineBreaksToBlockBreaksInRange", "removeBlockAttributesAtRange", "removeLastTerminalAttributeAtRange", "consolidateBlocksAtRange", "lastAttributeName", "endLocation", "startBlock", "positionFromLocation", "endBlock", "_this$getBlockAtIndex", "getTextAtPosition", "getCharacterAtPosition", "getEditCount", "editCount", "getCommonAttributesAtPosition", "attributesForBlock", "commonAttributes", "attributesLeft", "inheritableAttributes", "getRangeOfCommonAttributeAtPosition", "startOffset", "endOffset", "blockIndex", "lastAttributeIndex", "min", "attachmentPieces", "getLocationRangeOfAttachment", "getAttachmentPieceForAttachment", "findRangesForBlockAttribute", "ranges", "findRangesForTextAttribute", "withValue", "location", "locationRangeFromPosition", "rangeFromLocationRange", "locationRange", "getTexts", "toSerializableDocument", "pieceForString", "parseTrixDataAttribute", "HTMLParser", "referenceElement", "blockElements", "processedElements", "getDocument", "createHiddenContainer", "containerElement", "nodeFilter", "processNode", "translateBlockElementMarginsToNewlines", "removeHiddenContainer", "display", "nextSibling", "isInsignificantTextNode", "appendBlockForTextNode", "processTextNode", "appendBlockForElement", "processElement", "currentBlockElement", "isBlockElement", "appendStringWithAttributes", "_this$currentBlock", "getBlockAttributes", "getBlockHTMLAttributes", "currentBlock", "appendBlockForAttributesWithElement", "elementIsBlockElement", "currentBlockContainsElement", "parentBlockElement", "findParentBlockElement", "appendEmptyBlock", "parentElement", "_node$previousSibling", "elementCanDisplayPreformattedText", "stringEndsWithWhitespace", "leftTrimBreakableWhitespace", "getTextAttributes", "appendAttachmentWithAttributes", "isExtraBR", "dimensions", "needsTableSeparator", "appendPiece", "appendStringToTextAtIndex", "prependStringToTextAtIndex", "unshift", "configAttr", "attributeInheritedFromBlock", "blockElement", "findBlockElementAncestors", "attrConfig", "_attrConfig$test", "reverse", "settings", "ancestors", "stringIsAllBreakableWhitespace", "nodeEndsWithNonWhitespace", "_element$previousSibl", "defaultMargin", "getMarginOfDefaultBlockElement", "margin", "getMarginOfBlockElementAtIndex", "top", "bottom", "getBlockElementMargin", "whiteSpace", "marginTop", "marginBottom", "FILTER_REJECT", "FILTER_ACCEPT", "unserializableAttributeNames", "serializedAttributesAttribute", "serializedAttributesSelector", "blockCommentPattern", "serializers", "serializable", "HTMLElement", "el", "bi", "ManagedAttachment", "attachmentManager", "requestRemovalOfAttachment", "AttachmentManager", "managedAttachments", "manageAttachment", "attachmentIsManaged", "attachmentManagerDidRequestRemovalOfAttachment", "unmanageAttachment", "managedAttachment", "LineBreakInsertion", "composition", "selectedRange", "getSelectedRange", "previousCharacter", "nextCharacter", "shouldInsertBlockBreak", "shouldBreakFormattedBlock", "shouldDecreaseListLevel", "shouldPrependListItem", "shouldRemoveLastBlockAttribute", "Composition", "currentAttributes", "revision", "_this$delegate$compos", "refreshAttachments", "compositionDidChangeDocument", "getSnapshot", "loadSnapshot", "_this$delegate2$compo", "_this$delegate3", "_this$delegate3$compo", "compositionWillLoadSnapshot", "setSelection", "compositionDidLoadSnapshot", "insertText", "updatePosition", "notifyDelegateOfInsertionAtRange", "insertBlock", "insertDocument", "insertString", "getCurrentTextAttributes", "insertBlockBreak", "insertLineBreak", "insertion", "decreaseListLevel", "removeLastBlockAttribute", "breakFormattedBlock", "insertHTML", "replaceHTML", "getLocationRange", "insertFile", "insertFiles", "_this$delegate4", "compositionShouldAcceptFile", "attachmentForFile", "insertAttachments", "insertAttachment", "attachmentText", "textForAttachmentWithAttributes", "shouldManageDeletingInDirection", "shouldManageMovingCursorInDirection", "deleteInDirection", "deletingIntoPreviousBlock", "selectionSpansBlocks", "selectionIsCollapsed", "canDecreaseBlockAttributeLevel", "getBlock", "decreaseBlockAttributeLevel", "getExpandedRangeInDirection", "getAttachmentAtRange", "editAttachment", "moveTextFromRange", "removeAttachment", "stopEditingAttachment", "removeCurrentAttribute", "insertPlaceholder", "placeholderPosition", "getPosition", "selectPlaceholder", "setSelectedRange", "PLACEHOLDER", "forgetPlaceholder", "hasCurrentAttribute", "toggleCurrentAttribute", "setCurrentAttribute", "canSetCurrentAttribute", "canSetCurrentBlockAttribute", "canSetCurrentTextAttribute", "getSelectedDocument", "setBlockAttribute", "setTextAttribute", "notifyDelegateOfCurrentAttributesChange", "setHTMLAtributeAtPosition", "allowedHTMLAttributes", "newDocument", "removeBlockAttribute", "updateCurrentAttributes", "removeTextAttribute", "canDecreaseNestingLevel", "_this$getBlock", "canIncreaseNestingLevel", "previousBlock", "getPreviousBlock", "_this$getBlock2", "_this$getBlock3", "attributeLevel", "ignoreLock", "getCurrentAttributes", "freezeSelection", "thawSelection", "hasFrozenSelection", "_this$delegate5", "compositionDidRequestChangingSelectionToLocationRange", "getSelectionManager", "setLocationRange", "targetLocationRange", "withTargetLocationRange", "withTargetRange", "withTargetDOMRange", "createLocationRangeFromDOMRange", "translateUTF16PositionFromOffset", "editingAttachment", "moveCursorInDirection", "canEditAttachment", "expandSelectionInDirection", "expandSelectionForEditing", "expandSelectionAroundCommonAttribute", "selectionContainsAttachments", "_this$getSelectedAtta", "getSelectedAttachments", "selectionIsInCursorTarget", "positionIsCursorTarget", "locationIsCursorTarget", "positionIsBlockBreak", "_this$document$getPie", "_this$getSelectedDocu", "added", "removed", "oldArray", "newArray", "existingValues", "Set", "currentValues", "_this$delegate6", "_this$delegate6$compo", "compositionDidRemoveAttachment", "_this$delegate7", "_this$delegate7$compo", "compositionDidAddAttachment", "_this$delegate8", "_this$delegate8$compo", "compositionDidEditAttachment", "_this$delegate9", "_this$delegate9$compo", "compositionDidChangeAttachmentPreviewURL", "_this$delegate10", "_this$delegate10$comp", "compositionDidStartEditingAttachment", "_this$delegate11", "_this$delegate11$comp", "compositionDidStopEditingAttachment", "_this$delegate12", "_this$delegate12$comp", "compositionDidChangeCurrentAttributes", "_this$delegate13", "_this$delegate13$comp", "compositionDidPerformInsertionAtRange", "utf16string", "utf16position", "UndoManager", "undoEntries", "redoEntries", "recordUndoEntry", "description", "consolidatable", "previousEntry", "entryHasDescriptionAndContext", "undoEntry", "createEntry", "pop", "redoEntry", "snapshot", "canUndo", "canRedo", "entry", "BLOCK_ATTRIBUTE_NAME", "Filter", "applyBlockAttribute", "findRangesOfBlocks", "findRangesOfPieces", "moveSelectedRangeForward", "attachmentGalleryFilter", "DEFAULT_FILTERS", "Editor", "undoManager", "filters", "loadDocument", "loadHTML", "loadJSON", "getClientRectAtPosition", "getClientRectAtLocationRange", "activateAttribute", "attributeIsActive", "canActivateAttribute", "deactivateAttribute", "LocationMapper", "findLocationFromContainerAndOffset", "container", "foundBlock", "attachmentElement", "findAttachmentElementParentForNode", "rejectAttachmentContents", "nodeLength", "findContainerAndOffsetFromLocation", "nodeOffset", "findNodeAndOffsetFromLocation", "getSignificantNodesForIndex", "acceptSignificantNodes", "recordingNodes", "rejectEmptyTextNodes", "PointMapper", "createDOMRangeFromPoint", "x", "y", "caretPositionFromPoint", "offsetNode", "createRange", "setStart", "caretRangeFromPoint", "createTextRange", "originalDOMRange", "moveToPoint", "select", "getClientRectsForDOMRange", "getClientRects", "SelectionManager", "didMouseDown", "locationMapper", "pointMapper", "lockCount", "currentLocationRange", "lockedLocationRange", "createDOMRangeFromLocationRange", "updateCurrentLocationRange", "setLocationRangeFromPointRange", "pointRange", "getLocationAtPoint", "lock", "unlock", "clearSelection", "_getDOMRange", "collapsed", "selectionIsExpanded", "domRangeWithinElement", "pauseTemporarily", "resumeHandlers", "paused", "resume", "clearTimeout", "resumeTimeout", "_this$delegate$locati", "locationRangeDidChange", "rangeStart", "rangeEnd", "setEnd", "point", "_this$createLocationR", "Oi", "Oe", "Ai", "Me", "ze", "yi", "ti", "Li", "ri", "se", "xi", "Di", "vi", "Ie", "Ii", "Ni", "We", "je", "He", "Ci", "Mi", "ee", "ce", "be", "ve", "ge", "de", "me", "keyNames", "undoable", "commands", "do", "undos", "AttachmentEditorController", "title", "trixAction", "didClickToolbar", "didClickActionButton", "textarea", "placeholder", "textareaClone", "tabIndex", "autoresize", "scrollHeight", "didInputCaption", "didKeyDownCaption", "didChangeCaption", "didBlurCaption", "editingFigcaption", "editCaption", "focus", "install", "makeElementMutable", "addToolbar", "installCaptionEditor", "uninstall", "savePendingCaption", "didUninstallAttachmentEditor", "pendingCaption", "_this$delegate3$attac", "attachmentEditorDidRequestUpdatingAttributesForAttachment", "attachmentEditorDidRequestRemovingAttributeForAttachment", "stopPropagation", "attachmentEditorDidRequestRemovalOfAttachment", "_this$delegate5$attac", "keyCode", "attachmentEditorDidRequestDeselectingAttachment", "CompositionController", "didFocus", "didBlur", "didClickAttachment", "documentView", "_this$blurPromise", "focused", "compositionControllerDidFocus", "blurPromise", "compositionControllerDidBlur", "findAttachmentForElement", "compositionControllerDidSelectAttachment", "getSerializableElement", "isEditingAttachment", "_this$delegate4$compo", "_this$delegate5$compo", "canSyncDocumentView", "compositionControllerWillSyncDocumentView", "compositionControllerDidSyncDocumentView", "compositionControllerDidRender", "rerenderViewForObject", "refreshViewCache", "attachmentEditor", "installAttachmentEditorForAttachment", "_this$attachmentEdito", "uninstallAttachmentEditor", "_this$attachmentEdito2", "compositionControllerWillUpdateAttachment", "compositionControllerDidRequestRemovalOfAttachment", "compositionControllerDidRequestDeselectingAttachment", "Controller", "mutableAttributeName", "mutableSelector", "childList", "characterData", "characterDataOldValue", "subtree", "MutationObserver", "didMutate", "observer", "observe", "disconnect", "mutations", "_this$delegate$elemen", "findSignificantMutations", "elementDidMutate", "getMutationSummary", "mutation", "mutationIsSignificant", "nodeIsMutable", "nodesModifiedByMutation", "nodeIsSignificant", "addedNodes", "removedNodes", "getTextMutationSummary", "additions", "deletions", "getTextChangesFromCharacterData", "textChanges", "getTextChangesFromChildList", "addition", "summary", "textAdded", "deleted", "textDeleted", "getMutationsByType", "textRemoved", "getTextForNodes", "characterMutations", "startMutation", "endMutation", "summarized", "oldString", "newString", "oldValue", "FileVerificationOperation", "reader", "FileReader", "abort", "readAsArrayBuffer", "FlakyAndroidKeyboardDetector", "shouldIgnore", "previousEvent", "checkSamsungKeyboardBuggyModeStart", "checkSamsungKeyboardBuggyModeEnd", "buggyMode", "insertingLongTextAfterUnidentifiedChar", "differsInWhitespace", "innerText", "inputType", "_this$event$data", "isBeforeInputInsertText", "previousEventWasUnidentifiedKeydown", "_this$previousEvent", "_this$previousEvent2", "text1", "text2", "normalize", "whiteSpaceNormalizerRegexp", "InputController", "mutationObserver", "flakyKeyboardDetector", "events", "handlerFor", "mutationSummary", "editorWillSyncDocumentView", "editorDidSyncDocumentView", "requestRender", "_this$delegate$inputC", "inputControllerDidRequestRender", "requestReparse", "_this$delegate2$input", "inputControllerDidRequestReparse", "operations", "all", "handleInput", "_this$responder", "inputControllerWillAttachFiles", "responder", "defaultPrevented", "inputControllerWillHandleInput", "inputControllerDidHandleInput", "createLinkHTML", "nn", "pastedFileCount", "Level0InputController", "resetInputSummary", "setInputSummary", "inputSummary", "isComposing", "inputControllerDidAllowUnhandledInput", "mutationIsExpected", "preferDocument", "mutationAdditionMatchesSummary", "mutationDeletionMatchesSummary", "didDelete", "unexpectedNewlineAddition", "unexpectedNewlineDeletion", "_this$compositionInpu", "textChanged", "composedEmptyString", "compositionInput", "getEndData", "getCompositionInput", "CompositionInput", "isEnded", "_this$responder2", "serializeSelectionToDataTransfer", "_this$responder3", "setData", "canAcceptDataTransfer", "Files", "getPastedHTMLUsingHiddenElement", "pageXOffset", "pageYOffset", "opacity", "requestAnimationFrame", "keydown", "didInput", "keyName", "_context2", "modifier", "_context", "character", "inputControllerDidReceiveKeyboardCommand", "keypress", "altKey", "stringFromKeyEvent", "_this$responder9", "inputControllerWillPerformTyping", "textInput", "toUpperCase", "_this$responder10", "dragenter", "dragstart", "_this$delegate5$input", "draggedRange", "inputControllerDidStartDrag", "dragover", "draggingPoint", "clientX", "clientY", "_this$delegate6$input", "inputControllerDidReceiveDragOverPoint", "dragend", "_this$delegate7$input", "inputControllerDidCancelDrag", "drop", "_event$dataTransfer", "_this$responder11", "_this$responder12", "inputControllerWillMoveText", "_this$responder13", "fromJSONString", "cut", "_this$responder14", "clipboardData", "inputControllerWillCutText", "_this$responder15", "paste", "clipboard", "testClipboardData", "pasteEventIsCrippledSafariHTMLPaste", "_this$responder16", "inputControllerWillPaste", "inputControllerDidPaste", "_this$responder17", "_this$delegate14", "_this$responder18", "_this$delegate15", "_this$delegate16", "_this$responder19", "_this$delegate17", "_clipboard$items", "_clipboard$items$getA", "items", "getAsFile", "_this$delegate18", "_this$responder20", "_this$delegate19", "extensionForFile", "compositionstart", "compositionupdate", "compositionend", "beforeinput", "backspace", "_this$delegate20", "delete", "_this$delegate21", "return", "_this$delegate22", "_this$responder21", "tab", "_this$responder22", "_this$responder23", "_this$responder24", "_this$responder25", "control", "d", "_this$delegate23", "h", "_this$delegate24", "_this$delegate25", "_this$responder26", "shift", "_this$delegate26", "_this$responder27", "_this$responder28", "_this$responder29", "alt", "_this$delegate27", "meta", "_this$delegate28", "_file$type", "which", "charCode", "hasPasteboardFlavor", "hasReadableDynamicData", "isExternalHTMLPaste", "isExternalRichTextPaste", "inputController", "isSignificant", "_this$responder5", "_this$responder4", "canApplyToDocument", "_this$responder6", "_this$responder7", "_this$responder8", "_this$data$start", "_this$data$end", "Level2InputController", "scheduledRender", "composing", "reparse", "scheduleRender", "_this$afterRender", "cancelAnimationFrame", "afterRender", "toggleAttributeIfSupported", "inputControllerWillPerformFormatting", "activateAttributeIfSupported", "getTargetDOMRange", "minLength", "_this$event$getTarget", "_this$event", "targetRanges", "getTargetRanges", "staticRangeToRange", "withEvent", "command", "keyboardCommandFromKeyEvent", "shiftKey", "_event$clipboardData", "pasteEventHasFilesOnly", "pasteEventHasPlainTextOnly", "inputTypes", "immmediateRender", "inputEvent", "dragging", "pointFromEvent", "dragEventHasFiles", "ArrowLeft", "ArrowRight", "Backspace", "Tab", "deleteByComposition", "deleteByCut", "deleteByDrag", "deleteByDragRange", "deleteCompositionText", "deleteContent", "deleteContentBackward", "deleteContentForward", "deleteEntireSoftLine", "deleteHardLineBackward", "deleteHardLineForward", "deleteSoftLineBackward", "deleteSoftLineForward", "deleteWordBackward", "deleteWordForward", "formatBackColor", "formatBold", "formatFontColor", "formatFontName", "formatIndent", "formatItalic", "formatJustifyCenter", "formatJustifyFull", "formatJustifyLeft", "formatJustifyRight", "formatOutdent", "formatRemove", "_this$responder30", "formatSetBlockTextDirection", "formatSetInlineTextDirection", "formatStrikeThrough", "formatSubscript", "formatSuperscript", "formatUnderline", "historyRedo", "inputControllerWillPerformRedo", "historyUndo", "inputControllerWillPerformUndo", "insertCompositionText", "insertFromComposition", "insertFromDrop", "_this$responder31", "insertFromPaste", "_this$responder32", "_this$responder33", "processableFilePaste", "_this$responder34", "_this$responder35", "insertFromYank", "insertLink", "insertOrderedList", "insertParagraph", "_this$responder36", "insertReplacementText", "replacement", "_this$event$dataTrans", "insertTranspose", "insertUnorderedList", "staticRange", "_event$dataTransfer$f", "attributeButtonSelector", "actionButtonSelector", "toolbarButtonSelector", "dialogSelector", "activeDialogSelector", "dialogButtonSelector", "dialogInputSelector", "getInputForDialog", "getAttributeName", "getActionName", "ToolbarController", "didClickAttributeButton", "didClickDialogButton", "didKeyDownDialogInput", "actions", "resetDialogInputs", "toolbarDidClickButton", "actionName", "getDialog", "toggleDialog", "toolbarDidInvokeAction", "toolbarDidToggleAttribute", "refreshAttributeButtons", "dialogElement", "dialog", "hideDialog", "updateActions", "refreshActionButtons", "eachActionButton", "disabled", "updateAttributes", "eachAttributeButton", "dialogIsVisible", "applyKeyboardCommand", "keyString", "button", "buttonKeys", "dialogName", "showDialog", "toolbarWillShowDialog", "disabledInput", "toolbarDidShowDialog", "willValidate", "checkValidity", "toolbarDidUpdateAttribute", "toolbarDidRemoveAttribute", "toolbarDidHideDialog", "EditorController", "editorElement", "compositionController", "toolbarController", "toolbarElement", "editor", "notifyEditorElement", "handlingInput", "updateCurrentActions", "pasting", "pastedRange", "attachmentLocationRange", "loadingSnapshot", "isFocused", "requestedLocationRange", "compositionRevisionWhenLocationRangeRequested", "renderedCompositionRevision", "runEditorFilters", "isFocusedInvisibly", "requestedRender", "recordTypingUndoEntry", "recordFormattingUndoEntry", "locationRangeBeforeDrag", "invokingElement", "invokeAction", "selectionFrozen", "canInvokeAction", "actionIsExternal", "_this$actions$actionN", "_this$actions$actionN2", "getCurrentActions", "currentActions", "snapshotsAreEqual", "updateInputElement", "serializer", "setFormValue", "message", "documentChangedSinceLastRender", "notify", "getUndoContext", "getLocationContext", "getTimeContext", "Date", "getTime", "_this$editorElement$o", "ownerDocument", "Pn", "Ui", "Hi", "zi", "Bn", "en", "an", "gn", "Fn", "In", "Gi", "Bt", "Nn", "Xi", "Ne", "TrixToolbarElement", "connectedCallback", "makeEditable", "configureContentEditable", "disableObjectResizing", "setDefaultParagraphSeparator", "_document$queryComman", "_document", "queryCommandSupported", "execCommand", "_document$queryComman2", "_document2", "cursorTargetStyles", "_internals", "WeakMap", "_validate", "WeakSet", "ElementInternalsDelegate", "_classPrivateFieldInitSpec", "writable", "_classPrivateFieldSet", "attachInternals", "_classPrivateMethodGet", "_validate2", "disconnectedCallback", "labels", "_classPrivateFieldGet", "_this$element$inputEl", "inputElement", "toggleAttribute", "required", "validity", "validationMessage", "reportValidity", "setCustomValidity", "customValidationMessage", "valueMissing", "customError", "setValidity", "_focusHandler", "_resetBubbled", "_clickBubbled", "LegacyDelegate", "contains", "label", "texts", "_classPrivateFieldGet2", "console", "warn", "_delegate", "TrixEditorElement", "formAssociated", "localName", "_this$ownerDocument", "toolbarId", "_this$inputElement", "_this$ownerDocument2", "inputId", "nextElementSibling", "_this$editorControlle", "editorController", "_this$inputElement2", "_this$inputElement3", "defaultValue", "_this$editor", "_this$editorControlle2", "formDisabledCallback", "formResetCallback", "Trix", "VERSION", "version", "core", "models", "controllers", "observers", "customElements", "define", "converter", "showdown", "turndownService", "turndown_browser_es_default", "markdown_default", "targetNode", "editor", "inputTarget", "event", "markdown", "S3Uploader", "entries", "onViewError", "entry", "xhr", "event", "percent", "url", "s3_default", "LocaleInLocalStorage", "locale", "local_locale_storage_default", "Hooks", "sortable_default", "markdown_default", "local_locale_storage_default", "csrfToken", "liveSocket", "LiveSocket", "Socket", "s3_default", "topbar", "_info"]
}
